(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const r of s)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(s){const r={};return s.integrity&&(r.integrity=s.integrity),s.referrerPolicy&&(r.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?r.credentials="include":s.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(s){if(s.ep)return;s.ep=!0;const r=t(s);fetch(s.href,r)}})();/**
* @vue/shared v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bn(n){const e=Object.create(null);for(const t of n.split(","))e[t]=1;return t=>t in e}const Re={},Or=[],qt=()=>{},Mr=()=>!1,ur=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),kf=n=>n.startsWith("onUpdate:"),Ae=Object.assign,xf=(n,e)=>{const t=n.indexOf(e);t>-1&&n.splice(t,1)},NC=Object.prototype.hasOwnProperty,Be=(n,e)=>NC.call(n,e),ie=Array.isArray,Fr=n=>uo(n)==="[object Map]",hr=n=>uo(n)==="[object Set]",Qp=n=>uo(n)==="[object Date]",DC=n=>uo(n)==="[object RegExp]",de=n=>typeof n=="function",ye=n=>typeof n=="string",En=n=>typeof n=="symbol",Ge=n=>n!==null&&typeof n=="object",Nf=n=>(Ge(n)||de(n))&&de(n.then)&&de(n.catch),k_=Object.prototype.toString,uo=n=>k_.call(n),MC=n=>uo(n).slice(8,-1),Qc=n=>uo(n)==="[object Object]",Df=n=>ye(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,hs=bn(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),VC=bn("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Xc=n=>{const e=Object.create(null);return(t=>e[t]||(e[t]=n(t)))},LC=/-\w/g,Xe=Xc(n=>n.replace(LC,e=>e.slice(1).toUpperCase())),OC=/\B([A-Z])/g,yn=Xc(n=>n.replace(OC,"-$1").toLowerCase()),fr=Xc(n=>n.charAt(0).toUpperCase()+n.slice(1)),Ur=Xc(n=>n?`on${fr(n)}`:""),cn=(n,e)=>!Object.is(n,e),Br=(n,...e)=>{for(let t=0;t<n.length;t++)n[t](...e)},x_=(n,e,t,i=!1)=>{Object.defineProperty(n,e,{configurable:!0,enumerable:!1,writable:i,value:t})},Xl=n=>{const e=parseFloat(n);return isNaN(e)?n:e},jl=n=>{const e=ye(n)?Number(n):NaN;return isNaN(e)?n:e};let Xp;const jc=()=>Xp||(Xp=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function FC(n,e){return n+JSON.stringify(e,(t,i)=>typeof i=="function"?i.toString():i)}const UC="Infinity,undefined,NaN,isFinite,isNaN,parseFloat,parseInt,decodeURI,decodeURIComponent,encodeURI,encodeURIComponent,Math,Number,Date,Array,Object,Boolean,String,RegExp,Map,Set,JSON,Intl,BigInt,console,Error,Symbol",BC=bn(UC);function Ra(n){if(ie(n)){const e={};for(let t=0;t<n.length;t++){const i=n[t],s=ye(i)?N_(i):Ra(i);if(s)for(const r in s)e[r]=s[r]}return e}else if(ye(n)||Ge(n))return n}const $C=/;(?![^(]*\))/g,qC=/:([^]+)/,HC=/\/\*[^]*?\*\//g;function N_(n){const e={};return n.replace(HC,"").split($C).forEach(t=>{if(t){const i=t.split(qC);i.length>1&&(e[i[0].trim()]=i[1].trim())}}),e}function Pa(n){let e="";if(ye(n))e=n;else if(ie(n))for(let t=0;t<n.length;t++){const i=Pa(n[t]);i&&(e+=i+" ")}else if(Ge(n))for(const t in n)n[t]&&(e+=t+" ");return e.trim()}function GC(n){if(!n)return null;let{class:e,style:t}=n;return e&&!ye(e)&&(n.class=Pa(e)),t&&(n.style=Ra(t)),n}const WC="html,body,base,head,link,meta,style,title,address,article,aside,footer,header,hgroup,h1,h2,h3,h4,h5,h6,nav,section,div,dd,dl,dt,figcaption,figure,picture,hr,img,li,main,ol,p,pre,ul,a,b,abbr,bdi,bdo,br,cite,code,data,dfn,em,i,kbd,mark,q,rp,rt,ruby,s,samp,small,span,strong,sub,sup,time,u,var,wbr,area,audio,map,track,video,embed,object,param,source,canvas,script,noscript,del,ins,caption,col,colgroup,table,thead,tbody,td,th,tr,button,datalist,fieldset,form,input,label,legend,meter,optgroup,option,output,progress,select,textarea,details,dialog,menu,summary,template,blockquote,iframe,tfoot",KC="svg,animate,animateMotion,animateTransform,circle,clipPath,color-profile,defs,desc,discard,ellipse,feBlend,feColorMatrix,feComponentTransfer,feComposite,feConvolveMatrix,feDiffuseLighting,feDisplacementMap,feDistantLight,feDropShadow,feFlood,feFuncA,feFuncB,feFuncG,feFuncR,feGaussianBlur,feImage,feMerge,feMergeNode,feMorphology,feOffset,fePointLight,feSpecularLighting,feSpotLight,feTile,feTurbulence,filter,foreignObject,g,hatch,hatchpath,image,line,linearGradient,marker,mask,mesh,meshgradient,meshpatch,meshrow,metadata,mpath,path,pattern,polygon,polyline,radialGradient,rect,set,solidcolor,stop,switch,symbol,text,textPath,title,tspan,unknown,use,view",zC="annotation,annotation-xml,maction,maligngroup,malignmark,math,menclose,merror,mfenced,mfrac,mfraction,mglyph,mi,mlabeledtr,mlongdiv,mmultiscripts,mn,mo,mover,mpadded,mphantom,mprescripts,mroot,mrow,ms,mscarries,mscarry,msgroup,msline,mspace,msqrt,msrow,mstack,mstyle,msub,msubsup,msup,mtable,mtd,mtext,mtr,munder,munderover,none,semantics",YC="area,base,br,col,embed,hr,img,input,link,meta,param,source,track,wbr",JC=bn(WC),QC=bn(KC),XC=bn(zC),jC=bn(YC),ZC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",eA=bn(ZC);function D_(n){return!!n||n===""}function tA(n,e){if(n.length!==e.length)return!1;let t=!0;for(let i=0;t&&i<n.length;i++)t=Es(n[i],e[i]);return t}function Es(n,e){if(n===e)return!0;let t=Qp(n),i=Qp(e);if(t||i)return t&&i?n.getTime()===e.getTime():!1;if(t=En(n),i=En(e),t||i)return n===e;if(t=ie(n),i=ie(e),t||i)return t&&i?tA(n,e):!1;if(t=Ge(n),i=Ge(e),t||i){if(!t||!i)return!1;const s=Object.keys(n).length,r=Object.keys(e).length;if(s!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),l=e.hasOwnProperty(o);if(a&&!l||!a&&l||!Es(n[o],e[o]))return!1}}return String(n)===String(e)}function Zc(n,e){return n.findIndex(t=>Es(t,e))}const M_=n=>!!(n&&n.__v_isRef===!0),V_=n=>ye(n)?n:n==null?"":ie(n)||Ge(n)&&(n.toString===k_||!de(n.toString))?M_(n)?V_(n.value):JSON.stringify(n,L_,2):String(n),L_=(n,e)=>M_(e)?L_(n,e.value):Fr(e)?{[`Map(${e.size})`]:[...e.entries()].reduce((t,[i,s],r)=>(t[Ju(i,r)+" =>"]=s,t),{})}:hr(e)?{[`Set(${e.size})`]:[...e.values()].map(t=>Ju(t))}:En(e)?Ju(e):Ge(e)&&!ie(e)&&!Qc(e)?String(e):e,Ju=(n,e="")=>{var t;return En(n)?`Symbol(${(t=n.description)!=null?t:e})`:n};function nA(n){return n==null?"initial":typeof n=="string"?n===""?" ":n:String(n)}/**
* @vue/reactivity v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Jt;class Mf{constructor(e=!1){this.detached=e,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Jt,!e&&Jt&&(this.index=(Jt.scopes||(Jt.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].pause();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let e,t;if(this.scopes)for(e=0,t=this.scopes.length;e<t;e++)this.scopes[e].resume();for(e=0,t=this.effects.length;e<t;e++)this.effects[e].resume()}}run(e){if(this._active){const t=Jt;try{return Jt=this,e()}finally{Jt=t}}}on(){++this._on===1&&(this.prevScope=Jt,Jt=this)}off(){this._on>0&&--this._on===0&&(Jt=this.prevScope,this.prevScope=void 0)}stop(e){if(this._active){this._active=!1;let t,i;for(t=0,i=this.effects.length;t<i;t++)this.effects[t].stop();for(this.effects.length=0,t=0,i=this.cleanups.length;t<i;t++)this.cleanups[t]();if(this.cleanups.length=0,this.scopes){for(t=0,i=this.scopes.length;t<i;t++)this.scopes[t].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!e){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function iA(n){return new Mf(n)}function O_(){return Jt}function sA(n,e=!1){Jt&&Jt.cleanups.push(n)}let ze;const Qu=new WeakSet;class na{constructor(e){this.fn=e,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Jt&&Jt.active&&Jt.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,Qu.has(this)&&(Qu.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||U_(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,jp(this),B_(this);const e=ze,t=Kn;ze=this,Kn=!0;try{return this.fn()}finally{$_(this),ze=e,Kn=t,this.flags&=-3}}stop(){if(this.flags&1){for(let e=this.deps;e;e=e.nextDep)Of(e);this.deps=this.depsTail=void 0,jp(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?Qu.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Sh(this)&&this.run()}get dirty(){return Sh(this)}}let F_=0,$o,qo;function U_(n,e=!1){if(n.flags|=8,e){n.next=qo,qo=n;return}n.next=$o,$o=n}function Vf(){F_++}function Lf(){if(--F_>0)return;if(qo){let e=qo;for(qo=void 0;e;){const t=e.next;e.next=void 0,e.flags&=-9,e=t}}let n;for(;$o;){let e=$o;for($o=void 0;e;){const t=e.next;if(e.next=void 0,e.flags&=-9,e.flags&1)try{e.trigger()}catch(i){n||(n=i)}e=t}}if(n)throw n}function B_(n){for(let e=n.deps;e;e=e.nextDep)e.version=-1,e.prevActiveLink=e.dep.activeLink,e.dep.activeLink=e}function $_(n){let e,t=n.depsTail,i=t;for(;i;){const s=i.prevDep;i.version===-1?(i===t&&(t=s),Of(i),rA(i)):e=i,i.dep.activeLink=i.prevActiveLink,i.prevActiveLink=void 0,i=s}n.deps=e,n.depsTail=t}function Sh(n){for(let e=n.deps;e;e=e.nextDep)if(e.dep.version!==e.version||e.dep.computed&&(q_(e.dep.computed)||e.dep.version!==e.version))return!0;return!!n._dirty}function q_(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===ia)||(n.globalVersion=ia,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!Sh(n))))return;n.flags|=2;const e=n.dep,t=ze,i=Kn;ze=n,Kn=!0;try{B_(n);const s=n.fn(n._value);(e.version===0||cn(s,n._value))&&(n.flags|=128,n._value=s,e.version++)}catch(s){throw e.version++,s}finally{ze=t,Kn=i,$_(n),n.flags&=-3}}function Of(n,e=!1){const{dep:t,prevSub:i,nextSub:s}=n;if(i&&(i.nextSub=s,n.prevSub=void 0),s&&(s.prevSub=i,n.nextSub=void 0),t.subs===n&&(t.subs=i,!i&&t.computed)){t.computed.flags&=-5;for(let r=t.computed.deps;r;r=r.nextDep)Of(r,!0)}!e&&!--t.sc&&t.map&&t.map.delete(t.key)}function rA(n){const{prevDep:e,nextDep:t}=n;e&&(e.nextDep=t,n.prevDep=void 0),t&&(t.prevDep=e,n.nextDep=void 0)}function oA(n,e){n.effect instanceof na&&(n=n.effect.fn);const t=new na(n);e&&Ae(t,e);try{t.run()}catch(s){throw t.stop(),s}const i=t.run.bind(t);return i.effect=t,i}function aA(n){n.effect.stop()}let Kn=!0;const H_=[];function Vi(){H_.push(Kn),Kn=!1}function Li(){const n=H_.pop();Kn=n===void 0?!0:n}function jp(n){const{cleanup:e}=n;if(n.cleanup=void 0,e){const t=ze;ze=void 0;try{e()}finally{ze=t}}}let ia=0;class lA{constructor(e,t){this.sub=e,this.dep=t,this.version=t.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class eu{constructor(e){this.computed=e,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0,this.__v_skip=!0}track(e){if(!ze||!Kn||ze===this.computed)return;let t=this.activeLink;if(t===void 0||t.sub!==ze)t=this.activeLink=new lA(ze,this),ze.deps?(t.prevDep=ze.depsTail,ze.depsTail.nextDep=t,ze.depsTail=t):ze.deps=ze.depsTail=t,G_(t);else if(t.version===-1&&(t.version=this.version,t.nextDep)){const i=t.nextDep;i.prevDep=t.prevDep,t.prevDep&&(t.prevDep.nextDep=i),t.prevDep=ze.depsTail,t.nextDep=void 0,ze.depsTail.nextDep=t,ze.depsTail=t,ze.deps===t&&(ze.deps=i)}return t}trigger(e){this.version++,ia++,this.notify(e)}notify(e){Vf();try{for(let t=this.subs;t;t=t.prevSub)t.sub.notify()&&t.sub.dep.notify()}finally{Lf()}}}function G_(n){if(n.dep.sc++,n.sub.flags&4){const e=n.dep.computed;if(e&&!n.dep.subs){e.flags|=20;for(let i=e.deps;i;i=i.nextDep)G_(i)}const t=n.dep.subs;t!==n&&(n.prevSub=t,t&&(t.nextSub=n)),n.dep.subs=n}}const Zl=new WeakMap,zs=Symbol(""),bh=Symbol(""),sa=Symbol("");function Zt(n,e,t){if(Kn&&ze){let i=Zl.get(n);i||Zl.set(n,i=new Map);let s=i.get(t);s||(i.set(t,s=new eu),s.map=i,s.key=t),s.track()}}function Si(n,e,t,i,s,r){const o=Zl.get(n);if(!o){ia++;return}const a=l=>{l&&l.trigger()};if(Vf(),e==="clear")o.forEach(a);else{const l=ie(n),u=l&&Df(t);if(l&&t==="length"){const d=Number(i);o.forEach((p,g)=>{(g==="length"||g===sa||!En(g)&&g>=d)&&a(p)})}else switch((t!==void 0||o.has(void 0))&&a(o.get(t)),u&&a(o.get(sa)),e){case"add":l?u&&a(o.get("length")):(a(o.get(zs)),Fr(n)&&a(o.get(bh)));break;case"delete":l||(a(o.get(zs)),Fr(n)&&a(o.get(bh)));break;case"set":Fr(n)&&a(o.get(zs));break}}Lf()}function cA(n,e){const t=Zl.get(n);return t&&t.get(e)}function Ar(n){const e=Me(n);return e===n?e:(Zt(e,"iterate",sa),Sn(n)?e:e.map(Ft))}function tu(n){return Zt(n=Me(n),"iterate",sa),n}const uA={__proto__:null,[Symbol.iterator](){return Xu(this,Symbol.iterator,Ft)},concat(...n){return Ar(this).concat(...n.map(e=>ie(e)?Ar(e):e))},entries(){return Xu(this,"entries",n=>(n[1]=Ft(n[1]),n))},every(n,e){return Ei(this,"every",n,e,void 0,arguments)},filter(n,e){return Ei(this,"filter",n,e,t=>t.map(Ft),arguments)},find(n,e){return Ei(this,"find",n,e,Ft,arguments)},findIndex(n,e){return Ei(this,"findIndex",n,e,void 0,arguments)},findLast(n,e){return Ei(this,"findLast",n,e,Ft,arguments)},findLastIndex(n,e){return Ei(this,"findLastIndex",n,e,void 0,arguments)},forEach(n,e){return Ei(this,"forEach",n,e,void 0,arguments)},includes(...n){return ju(this,"includes",n)},indexOf(...n){return ju(this,"indexOf",n)},join(n){return Ar(this).join(n)},lastIndexOf(...n){return ju(this,"lastIndexOf",n)},map(n,e){return Ei(this,"map",n,e,void 0,arguments)},pop(){return Po(this,"pop")},push(...n){return Po(this,"push",n)},reduce(n,...e){return Zp(this,"reduce",n,e)},reduceRight(n,...e){return Zp(this,"reduceRight",n,e)},shift(){return Po(this,"shift")},some(n,e){return Ei(this,"some",n,e,void 0,arguments)},splice(...n){return Po(this,"splice",n)},toReversed(){return Ar(this).toReversed()},toSorted(n){return Ar(this).toSorted(n)},toSpliced(...n){return Ar(this).toSpliced(...n)},unshift(...n){return Po(this,"unshift",n)},values(){return Xu(this,"values",Ft)}};function Xu(n,e,t){const i=tu(n),s=i[e]();return i!==n&&!Sn(n)&&(s._next=s.next,s.next=()=>{const r=s._next();return r.done||(r.value=t(r.value)),r}),s}const hA=Array.prototype;function Ei(n,e,t,i,s,r){const o=tu(n),a=o!==n&&!Sn(n),l=o[e];if(l!==hA[e]){const p=l.apply(n,r);return a?Ft(p):p}let u=t;o!==n&&(a?u=function(p,g){return t.call(this,Ft(p),g,n)}:t.length>2&&(u=function(p,g){return t.call(this,p,g,n)}));const d=l.call(o,u,i);return a&&s?s(d):d}function Zp(n,e,t,i){const s=tu(n);let r=t;return s!==n&&(Sn(n)?t.length>3&&(r=function(o,a,l){return t.call(this,o,a,l,n)}):r=function(o,a,l){return t.call(this,o,Ft(a),l,n)}),s[e](r,...i)}function ju(n,e,t){const i=Me(n);Zt(i,"iterate",sa);const s=i[e](...t);return(s===-1||s===!1)&&su(t[0])?(t[0]=Me(t[0]),i[e](...t)):s}function Po(n,e,t=[]){Vi(),Vf();const i=Me(n)[e].apply(n,t);return Lf(),Li(),i}const fA=bn("__proto__,__v_isRef,__isVue"),W_=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(En));function dA(n){En(n)||(n=String(n));const e=Me(this);return Zt(e,"has",n),e.hasOwnProperty(n)}class K_{constructor(e=!1,t=!1){this._isReadonly=e,this._isShallow=t}get(e,t,i){if(t==="__v_skip")return e.__v_skip;const s=this._isReadonly,r=this._isShallow;if(t==="__v_isReactive")return!s;if(t==="__v_isReadonly")return s;if(t==="__v_isShallow")return r;if(t==="__v_raw")return i===(s?r?j_:X_:r?Q_:J_).get(e)||Object.getPrototypeOf(e)===Object.getPrototypeOf(i)?e:void 0;const o=ie(e);if(!s){let l;if(o&&(l=uA[t]))return l;if(t==="hasOwnProperty")return dA}const a=Reflect.get(e,t,It(e)?e:i);if((En(t)?W_.has(t):fA(t))||(s||Zt(e,"get",t),r))return a;if(It(a)){const l=o&&Df(t)?a:a.value;return s&&Ge(l)?ec(l):l}return Ge(a)?s?ec(a):ka(a):a}}class z_ extends K_{constructor(e=!1){super(!1,e)}set(e,t,i,s){let r=e[t];if(!this._isShallow){const l=Oi(r);if(!Sn(i)&&!Oi(i)&&(r=Me(r),i=Me(i)),!ie(e)&&It(r)&&!It(i))return l||(r.value=i),!0}const o=ie(e)&&Df(t)?Number(t)<e.length:Be(e,t),a=Reflect.set(e,t,i,It(e)?e:s);return e===Me(s)&&(o?cn(i,r)&&Si(e,"set",t,i):Si(e,"add",t,i)),a}deleteProperty(e,t){const i=Be(e,t);e[t];const s=Reflect.deleteProperty(e,t);return s&&i&&Si(e,"delete",t,void 0),s}has(e,t){const i=Reflect.has(e,t);return(!En(t)||!W_.has(t))&&Zt(e,"has",t),i}ownKeys(e){return Zt(e,"iterate",ie(e)?"length":zs),Reflect.ownKeys(e)}}class Y_ extends K_{constructor(e=!1){super(!0,e)}set(e,t){return!0}deleteProperty(e,t){return!0}}const pA=new z_,mA=new Y_,gA=new z_(!0),yA=new Y_(!0),Rh=n=>n,al=n=>Reflect.getPrototypeOf(n);function _A(n,e,t){return function(...i){const s=this.__v_raw,r=Me(s),o=Fr(r),a=n==="entries"||n===Symbol.iterator&&o,l=n==="keys"&&o,u=s[n](...i),d=t?Rh:e?tc:Ft;return!e&&Zt(r,"iterate",l?bh:zs),{next(){const{value:p,done:g}=u.next();return g?{value:p,done:g}:{value:a?[d(p[0]),d(p[1])]:d(p),done:g}},[Symbol.iterator](){return this}}}}function ll(n){return function(...e){return n==="delete"?!1:n==="clear"?void 0:this}}function vA(n,e){const t={get(s){const r=this.__v_raw,o=Me(r),a=Me(s);n||(cn(s,a)&&Zt(o,"get",s),Zt(o,"get",a));const{has:l}=al(o),u=e?Rh:n?tc:Ft;if(l.call(o,s))return u(r.get(s));if(l.call(o,a))return u(r.get(a));r!==o&&r.get(s)},get size(){const s=this.__v_raw;return!n&&Zt(Me(s),"iterate",zs),s.size},has(s){const r=this.__v_raw,o=Me(r),a=Me(s);return n||(cn(s,a)&&Zt(o,"has",s),Zt(o,"has",a)),s===a?r.has(s):r.has(s)||r.has(a)},forEach(s,r){const o=this,a=o.__v_raw,l=Me(a),u=e?Rh:n?tc:Ft;return!n&&Zt(l,"iterate",zs),a.forEach((d,p)=>s.call(r,u(d),u(p),o))}};return Ae(t,n?{add:ll("add"),set:ll("set"),delete:ll("delete"),clear:ll("clear")}:{add(s){!e&&!Sn(s)&&!Oi(s)&&(s=Me(s));const r=Me(this);return al(r).has.call(r,s)||(r.add(s),Si(r,"add",s,s)),this},set(s,r){!e&&!Sn(r)&&!Oi(r)&&(r=Me(r));const o=Me(this),{has:a,get:l}=al(o);let u=a.call(o,s);u||(s=Me(s),u=a.call(o,s));const d=l.call(o,s);return o.set(s,r),u?cn(r,d)&&Si(o,"set",s,r):Si(o,"add",s,r),this},delete(s){const r=Me(this),{has:o,get:a}=al(r);let l=o.call(r,s);l||(s=Me(s),l=o.call(r,s)),a&&a.call(r,s);const u=r.delete(s);return l&&Si(r,"delete",s,void 0),u},clear(){const s=Me(this),r=s.size!==0,o=s.clear();return r&&Si(s,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(s=>{t[s]=_A(s,n,e)}),t}function nu(n,e){const t=vA(n,e);return(i,s,r)=>s==="__v_isReactive"?!n:s==="__v_isReadonly"?n:s==="__v_raw"?i:Reflect.get(Be(t,s)&&s in i?t:i,s,r)}const TA={get:nu(!1,!1)},EA={get:nu(!1,!0)},wA={get:nu(!0,!1)},IA={get:nu(!0,!0)},J_=new WeakMap,Q_=new WeakMap,X_=new WeakMap,j_=new WeakMap;function CA(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function AA(n){return n.__v_skip||!Object.isExtensible(n)?0:CA(MC(n))}function ka(n){return Oi(n)?n:iu(n,!1,pA,TA,J_)}function Z_(n){return iu(n,!1,gA,EA,Q_)}function ec(n){return iu(n,!0,mA,wA,X_)}function SA(n){return iu(n,!0,yA,IA,j_)}function iu(n,e,t,i,s){if(!Ge(n)||n.__v_raw&&!(e&&n.__v_isReactive))return n;const r=AA(n);if(r===0)return n;const o=s.get(n);if(o)return o;const a=new Proxy(n,r===2?i:t);return s.set(n,a),a}function fs(n){return Oi(n)?fs(n.__v_raw):!!(n&&n.__v_isReactive)}function Oi(n){return!!(n&&n.__v_isReadonly)}function Sn(n){return!!(n&&n.__v_isShallow)}function su(n){return n?!!n.__v_raw:!1}function Me(n){const e=n&&n.__v_raw;return e?Me(e):n}function ev(n){return!Be(n,"__v_skip")&&Object.isExtensible(n)&&x_(n,"__v_skip",!0),n}const Ft=n=>Ge(n)?ka(n):n,tc=n=>Ge(n)?ec(n):n;function It(n){return n?n.__v_isRef===!0:!1}function re(n){return nv(n,!1)}function tv(n){return nv(n,!0)}function nv(n,e){return It(n)?n:new bA(n,e)}class bA{constructor(e,t){this.dep=new eu,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=t?e:Me(e),this._value=t?e:Ft(e),this.__v_isShallow=t}get value(){return this.dep.track(),this._value}set value(e){const t=this._rawValue,i=this.__v_isShallow||Sn(e)||Oi(e);e=i?e:Me(e),cn(e,t)&&(this._rawValue=e,this._value=i?e:Ft(e),this.dep.trigger())}}function RA(n){n.dep&&n.dep.trigger()}function ru(n){return It(n)?n.value:n}function PA(n){return de(n)?n():ru(n)}const kA={get:(n,e,t)=>e==="__v_raw"?n:ru(Reflect.get(n,e,t)),set:(n,e,t,i)=>{const s=n[e];return It(s)&&!It(t)?(s.value=t,!0):Reflect.set(n,e,t,i)}};function Ff(n){return fs(n)?n:new Proxy(n,kA)}class xA{constructor(e){this.__v_isRef=!0,this._value=void 0;const t=this.dep=new eu,{get:i,set:s}=e(t.track.bind(t),t.trigger.bind(t));this._get=i,this._set=s}get value(){return this._value=this._get()}set value(e){this._set(e)}}function iv(n){return new xA(n)}function NA(n){const e=ie(n)?new Array(n.length):{};for(const t in n)e[t]=sv(n,t);return e}class DA{constructor(e,t,i){this._object=e,this._key=t,this._defaultValue=i,this.__v_isRef=!0,this._value=void 0}get value(){const e=this._object[this._key];return this._value=e===void 0?this._defaultValue:e}set value(e){this._object[this._key]=e}get dep(){return cA(Me(this._object),this._key)}}class MA{constructor(e){this._getter=e,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function VA(n,e,t){return It(n)?n:de(n)?new MA(n):Ge(n)&&arguments.length>1?sv(n,e,t):re(n)}function sv(n,e,t){const i=n[e];return It(i)?i:new DA(n,e,t)}class LA{constructor(e,t,i){this.fn=e,this.setter=t,this._value=void 0,this.dep=new eu(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=ia-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!t,this.isSSR=i}notify(){if(this.flags|=16,!(this.flags&8)&&ze!==this)return U_(this,!0),!0}get value(){const e=this.dep.track();return q_(this),e&&(e.version=this.dep.version),this._value}set value(e){this.setter&&this.setter(e)}}function OA(n,e,t=!1){let i,s;return de(n)?i=n:(i=n.get,s=n.set),new LA(i,s,t)}const FA={GET:"get",HAS:"has",ITERATE:"iterate"},UA={SET:"set",ADD:"add",DELETE:"delete",CLEAR:"clear"},cl={},nc=new WeakMap;let is;function BA(){return is}function rv(n,e=!1,t=is){if(t){let i=nc.get(t);i||nc.set(t,i=[]),i.push(n)}}function $A(n,e,t=Re){const{immediate:i,deep:s,once:r,scheduler:o,augmentJob:a,call:l}=t,u=x=>s?x:Sn(x)||s===!1||s===0?bi(x,1):bi(x);let d,p,g,_,E=!1,I=!1;if(It(n)?(p=()=>n.value,E=Sn(n)):fs(n)?(p=()=>u(n),E=!0):ie(n)?(I=!0,E=n.some(x=>fs(x)||Sn(x)),p=()=>n.map(x=>{if(It(x))return x.value;if(fs(x))return u(x);if(de(x))return l?l(x,2):x()})):de(n)?e?p=l?()=>l(n,2):n:p=()=>{if(g){Vi();try{g()}finally{Li()}}const x=is;is=d;try{return l?l(n,3,[_]):n(_)}finally{is=x}}:p=qt,e&&s){const x=p,L=s===!0?1/0:s;p=()=>bi(x(),L)}const k=O_(),D=()=>{d.stop(),k&&k.active&&xf(k.effects,d)};if(r&&e){const x=e;e=(...L)=>{x(...L),D()}}let M=I?new Array(n.length).fill(cl):cl;const P=x=>{if(!(!(d.flags&1)||!d.dirty&&!x))if(e){const L=d.run();if(s||E||(I?L.some((F,R)=>cn(F,M[R])):cn(L,M))){g&&g();const F=is;is=d;try{const R=[L,M===cl?void 0:I&&M[0]===cl?[]:M,_];M=L,l?l(e,3,R):e(...R)}finally{is=F}}}else d.run()};return a&&a(P),d=new na(p),d.scheduler=o?()=>o(P,!1):P,_=x=>rv(x,!1,d),g=d.onStop=()=>{const x=nc.get(d);if(x){if(l)l(x,4);else for(const L of x)L();nc.delete(d)}},e?i?P(!0):M=d.run():o?o(P.bind(null,!0),!0):d.run(),D.pause=d.pause.bind(d),D.resume=d.resume.bind(d),D.stop=D,D}function bi(n,e=1/0,t){if(e<=0||!Ge(n)||n.__v_skip||(t=t||new Map,(t.get(n)||0)>=e))return n;if(t.set(n,e),e--,It(n))bi(n.value,e,t);else if(ie(n))for(let i=0;i<n.length;i++)bi(n[i],e,t);else if(hr(n)||Fr(n))n.forEach(i=>{bi(i,e,t)});else if(Qc(n)){for(const i in n)bi(n[i],e,t);for(const i of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,i)&&bi(n[i],e,t)}return n}/**
* @vue/runtime-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ov=[];function qA(n){ov.push(n)}function HA(){ov.pop()}function GA(n,e){}const WA={SETUP_FUNCTION:0,0:"SETUP_FUNCTION",RENDER_FUNCTION:1,1:"RENDER_FUNCTION",NATIVE_EVENT_HANDLER:5,5:"NATIVE_EVENT_HANDLER",COMPONENT_EVENT_HANDLER:6,6:"COMPONENT_EVENT_HANDLER",VNODE_HOOK:7,7:"VNODE_HOOK",DIRECTIVE_HOOK:8,8:"DIRECTIVE_HOOK",TRANSITION_HOOK:9,9:"TRANSITION_HOOK",APP_ERROR_HANDLER:10,10:"APP_ERROR_HANDLER",APP_WARN_HANDLER:11,11:"APP_WARN_HANDLER",FUNCTION_REF:12,12:"FUNCTION_REF",ASYNC_COMPONENT_LOADER:13,13:"ASYNC_COMPONENT_LOADER",SCHEDULER:14,14:"SCHEDULER",COMPONENT_UPDATE:15,15:"COMPONENT_UPDATE",APP_UNMOUNT_CLEANUP:16,16:"APP_UNMOUNT_CLEANUP"},KA={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",0:"setup function",1:"render function",2:"watcher getter",3:"watcher callback",4:"watcher cleanup function",5:"native event handler",6:"component event handler",7:"vnode hook",8:"directive hook",9:"transition hook",10:"app errorHandler",11:"app warnHandler",12:"ref function",13:"async component loader",14:"scheduler flush",15:"component update",16:"app unmount cleanup function"};function ho(n,e,t,i){try{return i?n(...i):n()}catch(s){dr(s,e,t)}}function Fn(n,e,t,i){if(de(n)){const s=ho(n,e,t,i);return s&&Nf(s)&&s.catch(r=>{dr(r,e,t)}),s}if(ie(n)){const s=[];for(let r=0;r<n.length;r++)s.push(Fn(n[r],e,t,i));return s}}function dr(n,e,t,i=!0){const s=e?e.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=e&&e.appContext.config||Re;if(e){let a=e.parent;const l=e.proxy,u=`https://vuejs.org/error-reference/#runtime-${t}`;for(;a;){const d=a.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](n,l,u)===!1)return}a=a.parent}if(r){Vi(),ho(r,null,10,[n,l,u]),Li();return}}zA(n,t,s,i,o)}function zA(n,e,t,i=!0,s=!1){if(s)throw n;console.error(n)}const un=[];let ei=-1;const $r=[];let ss=null,Rr=0;const av=Promise.resolve();let ic=null;function xa(n){const e=ic||av;return n?e.then(this?n.bind(this):n):e}function YA(n){let e=ei+1,t=un.length;for(;e<t;){const i=e+t>>>1,s=un[i],r=oa(s);r<n||r===n&&s.flags&2?e=i+1:t=i}return e}function Uf(n){if(!(n.flags&1)){const e=oa(n),t=un[un.length-1];!t||!(n.flags&2)&&e>=oa(t)?un.push(n):un.splice(YA(e),0,n),n.flags|=1,lv()}}function lv(){ic||(ic=av.then(cv))}function ra(n){ie(n)?$r.push(...n):ss&&n.id===-1?ss.splice(Rr+1,0,n):n.flags&1||($r.push(n),n.flags|=1),lv()}function em(n,e,t=ei+1){for(;t<un.length;t++){const i=un[t];if(i&&i.flags&2){if(n&&i.id!==n.uid)continue;un.splice(t,1),t--,i.flags&4&&(i.flags&=-2),i(),i.flags&4||(i.flags&=-2)}}}function sc(n){if($r.length){const e=[...new Set($r)].sort((t,i)=>oa(t)-oa(i));if($r.length=0,ss){ss.push(...e);return}for(ss=e,Rr=0;Rr<ss.length;Rr++){const t=ss[Rr];t.flags&4&&(t.flags&=-2),t.flags&8||t(),t.flags&=-2}ss=null,Rr=0}}const oa=n=>n.id==null?n.flags&2?-1:1/0:n.id;function cv(n){try{for(ei=0;ei<un.length;ei++){const e=un[ei];e&&!(e.flags&8)&&(e.flags&4&&(e.flags&=-2),ho(e,e.i,e.i?15:14),e.flags&4||(e.flags&=-2))}}finally{for(;ei<un.length;ei++){const e=un[ei];e&&(e.flags&=-2)}ei=-1,un.length=0,sc(),ic=null,(un.length||$r.length)&&cv()}}let Pr,ul=[];function uv(n,e){var t,i;Pr=n,Pr?(Pr.enabled=!0,ul.forEach(({event:s,args:r})=>Pr.emit(s,...r)),ul=[]):typeof window<"u"&&window.HTMLElement&&!((i=(t=window.navigator)==null?void 0:t.userAgent)!=null&&i.includes("jsdom"))?((e.__VUE_DEVTOOLS_HOOK_REPLAY__=e.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(r=>{uv(r,e)}),setTimeout(()=>{Pr||(e.__VUE_DEVTOOLS_HOOK_REPLAY__=null,ul=[])},3e3)):ul=[]}let $t=null,ou=null;function aa(n){const e=$t;return $t=n,ou=n&&n.type.__scopeId||null,e}function JA(n){ou=n}function QA(){ou=null}const XA=n=>Bf;function Bf(n,e=$t,t){if(!e||n._n)return n;const i=(...s)=>{i._d&&ha(-1);const r=aa(e);let o;try{o=n(...s)}finally{aa(r),i._d&&ha(1)}return o};return i._n=!0,i._c=!0,i._d=!0,i}function jA(n,e){if($t===null)return n;const t=Ma($t),i=n.dirs||(n.dirs=[]);for(let s=0;s<e.length;s++){let[r,o,a,l=Re]=e[s];r&&(de(r)&&(r={mounted:r,updated:r}),r.deep&&bi(o),i.push({dir:r,instance:t,value:o,oldValue:void 0,arg:a,modifiers:l}))}return n}function ti(n,e,t,i){const s=n.dirs,r=e&&e.dirs;for(let o=0;o<s.length;o++){const a=s[o];r&&(a.oldValue=r[o].value);let l=a.dir[i];l&&(Vi(),Fn(l,t,8,[n.el,a,n,e]),Li())}}const hv=Symbol("_vte"),fv=n=>n.__isTeleport,Ho=n=>n&&(n.disabled||n.disabled===""),tm=n=>n&&(n.defer||n.defer===""),nm=n=>typeof SVGElement<"u"&&n instanceof SVGElement,im=n=>typeof MathMLElement=="function"&&n instanceof MathMLElement,Ph=(n,e)=>{const t=n&&n.to;return ye(t)?e?e(t):null:t},dv={name:"Teleport",__isTeleport:!0,process(n,e,t,i,s,r,o,a,l,u){const{mc:d,pc:p,pbc:g,o:{insert:_,querySelector:E,createText:I,createComment:k}}=u,D=Ho(e.props);let{shapeFlag:M,children:P,dynamicChildren:x}=e;if(n==null){const L=e.el=I(""),F=e.anchor=I("");_(L,t,i),_(F,t,i);const R=(v,w)=>{M&16&&d(P,v,w,s,r,o,a,l)},T=()=>{const v=e.target=Ph(e.props,E),w=pv(v,e,I,_);v&&(o!=="svg"&&nm(v)?o="svg":o!=="mathml"&&im(v)&&(o="mathml"),s&&s.isCE&&(s.ce._teleportTargets||(s.ce._teleportTargets=new Set)).add(v),D||(R(v,w),kl(e,!1)))};D&&(R(t,F),kl(e,!0)),tm(e.props)?(e.el.__isMounted=!1,Tt(()=>{T(),delete e.el.__isMounted},r)):T()}else{if(tm(e.props)&&n.el.__isMounted===!1){Tt(()=>{dv.process(n,e,t,i,s,r,o,a,l,u)},r);return}e.el=n.el,e.targetStart=n.targetStart;const L=e.anchor=n.anchor,F=e.target=n.target,R=e.targetAnchor=n.targetAnchor,T=Ho(n.props),v=T?t:F,w=T?L:R;if(o==="svg"||nm(F)?o="svg":(o==="mathml"||im(F))&&(o="mathml"),x?(g(n.dynamicChildren,x,v,s,r,o,a),Xf(n,e,!0)):l||p(n,e,v,w,s,r,o,a,!1),D)T?e.props&&n.props&&e.props.to!==n.props.to&&(e.props.to=n.props.to):hl(e,t,L,u,1);else if((e.props&&e.props.to)!==(n.props&&n.props.to)){const b=e.target=Ph(e.props,E);b&&hl(e,b,null,u,0)}else T&&hl(e,F,R,u,1);kl(e,D)}},remove(n,e,t,{um:i,o:{remove:s}},r){const{shapeFlag:o,children:a,anchor:l,targetStart:u,targetAnchor:d,target:p,props:g}=n;if(p&&(s(u),s(d)),r&&s(l),o&16){const _=r||!Ho(g);for(let E=0;E<a.length;E++){const I=a[E];i(I,e,t,_,!!I.dynamicChildren)}}},move:hl,hydrate:ZA};function hl(n,e,t,{o:{insert:i},m:s},r=2){r===0&&i(n.targetAnchor,e,t);const{el:o,anchor:a,shapeFlag:l,children:u,props:d}=n,p=r===2;if(p&&i(o,e,t),(!p||Ho(d))&&l&16)for(let g=0;g<u.length;g++)s(u[g],e,t,2);p&&i(a,e,t)}function ZA(n,e,t,i,s,r,{o:{nextSibling:o,parentNode:a,querySelector:l,insert:u,createText:d}},p){function g(I,k,D,M){k.anchor=p(o(I),k,a(I),t,i,s,r),k.targetStart=D,k.targetAnchor=M}const _=e.target=Ph(e.props,l),E=Ho(e.props);if(_){const I=_._lpa||_.firstChild;if(e.shapeFlag&16)if(E)g(n,e,I,I&&o(I));else{e.anchor=o(n);let k=I;for(;k;){if(k&&k.nodeType===8){if(k.data==="teleport start anchor")e.targetStart=k;else if(k.data==="teleport anchor"){e.targetAnchor=k,_._lpa=e.targetAnchor&&o(e.targetAnchor);break}}k=o(k)}e.targetAnchor||pv(_,e,d,u),p(I&&o(I),e,_,t,i,s,r)}kl(e,E)}else E&&e.shapeFlag&16&&g(n,e,n,o(n));return e.anchor&&o(e.anchor)}const eS=dv;function kl(n,e){const t=n.ctx;if(t&&t.ut){let i,s;for(e?(i=n.el,s=n.anchor):(i=n.targetStart,s=n.targetAnchor);i&&i!==s;)i.nodeType===1&&i.setAttribute("data-v-owner",t.uid),i=i.nextSibling;t.ut()}}function pv(n,e,t,i){const s=e.targetStart=t(""),r=e.targetAnchor=t("");return s[hv]=r,n&&(i(s,n),i(r,n)),r}const Ai=Symbol("_leaveCb"),fl=Symbol("_enterCb");function $f(){const n={isMounted:!1,isLeaving:!1,isUnmounting:!1,leavingVNodes:new Map};return pi(()=>{n.isMounted=!0}),uu(()=>{n.isUnmounting=!0}),n}const xn=[Function,Array],qf={mode:String,appear:Boolean,persisted:Boolean,onBeforeEnter:xn,onEnter:xn,onAfterEnter:xn,onEnterCancelled:xn,onBeforeLeave:xn,onLeave:xn,onAfterLeave:xn,onLeaveCancelled:xn,onBeforeAppear:xn,onAppear:xn,onAfterAppear:xn,onAppearCancelled:xn},mv=n=>{const e=n.subTree;return e.component?mv(e.component):e},tS={name:"BaseTransition",props:qf,setup(n,{slots:e}){const t=wn(),i=$f();return()=>{const s=e.default&&au(e.default(),!0);if(!s||!s.length)return;const r=gv(s),o=Me(n),{mode:a}=o;if(i.isLeaving)return Zu(r);const l=sm(r);if(!l)return Zu(r);let u=Yr(l,o,i,t,p=>u=p);l.type!==pt&&Fi(l,u);let d=t.subTree&&sm(t.subTree);if(d&&d.type!==pt&&!qn(d,l)&&mv(t).type!==pt){let p=Yr(d,o,i,t);if(Fi(d,p),a==="out-in"&&l.type!==pt)return i.isLeaving=!0,p.afterLeave=()=>{i.isLeaving=!1,t.job.flags&8||t.update(),delete p.afterLeave,d=void 0},Zu(r);a==="in-out"&&l.type!==pt?p.delayLeave=(g,_,E)=>{const I=_v(i,d);I[String(d.key)]=d,g[Ai]=()=>{_(),g[Ai]=void 0,delete u.delayedLeave,d=void 0},u.delayedLeave=()=>{E(),delete u.delayedLeave,d=void 0}}:d=void 0}else d&&(d=void 0);return r}}};function gv(n){let e=n[0];if(n.length>1){for(const t of n)if(t.type!==pt){e=t;break}}return e}const yv=tS;function _v(n,e){const{leavingVNodes:t}=n;let i=t.get(e.type);return i||(i=Object.create(null),t.set(e.type,i)),i}function Yr(n,e,t,i,s){const{appear:r,mode:o,persisted:a=!1,onBeforeEnter:l,onEnter:u,onAfterEnter:d,onEnterCancelled:p,onBeforeLeave:g,onLeave:_,onAfterLeave:E,onLeaveCancelled:I,onBeforeAppear:k,onAppear:D,onAfterAppear:M,onAppearCancelled:P}=e,x=String(n.key),L=_v(t,n),F=(v,w)=>{v&&Fn(v,i,9,w)},R=(v,w)=>{const b=w[1];F(v,w),ie(v)?v.every(S=>S.length<=1)&&b():v.length<=1&&b()},T={mode:o,persisted:a,beforeEnter(v){let w=l;if(!t.isMounted)if(r)w=k||l;else return;v[Ai]&&v[Ai](!0);const b=L[x];b&&qn(n,b)&&b.el[Ai]&&b.el[Ai](),F(w,[v])},enter(v){let w=u,b=d,S=p;if(!t.isMounted)if(r)w=D||u,b=M||d,S=P||p;else return;let A=!1;const j=v[fl]=oe=>{A||(A=!0,oe?F(S,[v]):F(b,[v]),T.delayedLeave&&T.delayedLeave(),v[fl]=void 0)};w?R(w,[v,j]):j()},leave(v,w){const b=String(n.key);if(v[fl]&&v[fl](!0),t.isUnmounting)return w();F(g,[v]);let S=!1;const A=v[Ai]=j=>{S||(S=!0,w(),j?F(I,[v]):F(E,[v]),v[Ai]=void 0,L[b]===n&&delete L[b])};L[b]=n,_?R(_,[v,A]):A()},clone(v){const w=Yr(v,e,t,i,s);return s&&s(w),w}};return T}function Zu(n){if(Na(n))return n=ui(n),n.children=null,n}function sm(n){if(!Na(n))return fv(n.type)&&n.children?gv(n.children):n;if(n.component)return n.component.subTree;const{shapeFlag:e,children:t}=n;if(t){if(e&16)return t[0];if(e&32&&de(t.default))return t.default()}}function Fi(n,e){n.shapeFlag&6&&n.component?(n.transition=e,Fi(n.component.subTree,e)):n.shapeFlag&128?(n.ssContent.transition=e.clone(n.ssContent),n.ssFallback.transition=e.clone(n.ssFallback)):n.transition=e}function au(n,e=!1,t){let i=[],s=0;for(let r=0;r<n.length;r++){let o=n[r];const a=t==null?o.key:String(t)+String(o.key!=null?o.key:r);o.type===Pt?(o.patchFlag&128&&s++,i=i.concat(au(o.children,e,a))):(e||o.type!==pt)&&i.push(a!=null?ui(o,{key:a}):o)}if(s>1)for(let r=0;r<i.length;r++)i[r].patchFlag=-2;return i}function ks(n,e){return de(n)?Ae({name:n.name},e,{setup:n}):n}function nS(){const n=wn();return n?(n.appContext.config.idPrefix||"v")+"-"+n.ids[0]+n.ids[1]++:""}function Hf(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function iS(n){const e=wn(),t=tv(null);if(e){const s=e.refs===Re?e.refs={}:e.refs;Object.defineProperty(s,n,{enumerable:!0,get:()=>t.value,set:r=>t.value=r})}return t}const rc=new WeakMap;function qr(n,e,t,i,s=!1){if(ie(n)){n.forEach((E,I)=>qr(E,e&&(ie(e)?e[I]:e),t,i,s));return}if(ds(i)&&!s){i.shapeFlag&512&&i.type.__asyncResolved&&i.component.subTree.component&&qr(n,e,t,i.component.subTree);return}const r=i.shapeFlag&4?Ma(i.component):i.el,o=s?null:r,{i:a,r:l}=n,u=e&&e.r,d=a.refs===Re?a.refs={}:a.refs,p=a.setupState,g=Me(p),_=p===Re?Mr:E=>Be(g,E);if(u!=null&&u!==l){if(rm(e),ye(u))d[u]=null,_(u)&&(p[u]=null);else if(It(u)){u.value=null;const E=e;E.k&&(d[E.k]=null)}}if(de(l))ho(l,a,12,[o,d]);else{const E=ye(l),I=It(l);if(E||I){const k=()=>{if(n.f){const D=E?_(l)?p[l]:d[l]:l.value;if(s)ie(D)&&xf(D,r);else if(ie(D))D.includes(r)||D.push(r);else if(E)d[l]=[r],_(l)&&(p[l]=d[l]);else{const M=[r];l.value=M,n.k&&(d[n.k]=M)}}else E?(d[l]=o,_(l)&&(p[l]=o)):I&&(l.value=o,n.k&&(d[n.k]=o))};if(o){const D=()=>{k(),rc.delete(n)};D.id=-1,rc.set(n,D),Tt(D,t)}else rm(n),k()}}}function rm(n){const e=rc.get(n);e&&(e.flags|=8,rc.delete(n))}let om=!1;const Sr=()=>{om||(console.error("Hydration completed but contains mismatches."),om=!0)},sS=n=>n.namespaceURI.includes("svg")&&n.tagName!=="foreignObject",rS=n=>n.namespaceURI.includes("MathML"),dl=n=>{if(n.nodeType===1){if(sS(n))return"svg";if(rS(n))return"mathml"}},Vr=n=>n.nodeType===8;function oS(n){const{mt:e,p:t,o:{patchProp:i,createText:s,nextSibling:r,parentNode:o,remove:a,insert:l,createComment:u}}=n,d=(P,x)=>{if(!x.hasChildNodes()){t(null,P,x),sc(),x._vnode=P;return}p(x.firstChild,P,null,null,null),sc(),x._vnode=P},p=(P,x,L,F,R,T=!1)=>{T=T||!!x.dynamicChildren;const v=Vr(P)&&P.data==="[",w=()=>I(P,x,L,F,R,v),{type:b,ref:S,shapeFlag:A,patchFlag:j}=x;let oe=P.nodeType;x.el=P,j===-2&&(T=!1,x.dynamicChildren=null);let ee=null;switch(b){case ps:oe!==3?x.children===""?(l(x.el=s(""),o(P),P),ee=P):ee=w():(P.data!==x.children&&(Sr(),P.data=x.children),ee=r(P));break;case pt:M(P)?(ee=r(P),D(x.el=P.content.firstChild,P,L)):oe!==8||v?ee=w():ee=r(P);break;case Qs:if(v&&(P=r(P),oe=P.nodeType),oe===1||oe===3){ee=P;const ce=!x.children.length;for(let ne=0;ne<x.staticCount;ne++)ce&&(x.children+=ee.nodeType===1?ee.outerHTML:ee.data),ne===x.staticCount-1&&(x.anchor=ee),ee=r(ee);return v?r(ee):ee}else w();break;case Pt:v?ee=E(P,x,L,F,R,T):ee=w();break;default:if(A&1)(oe!==1||x.type.toLowerCase()!==P.tagName.toLowerCase())&&!M(P)?ee=w():ee=g(P,x,L,F,R,T);else if(A&6){x.slotScopeIds=R;const ce=o(P);if(v?ee=k(P):Vr(P)&&P.data==="teleport start"?ee=k(P,P.data,"teleport end"):ee=r(P),e(x,ce,null,L,F,dl(ce),T),ds(x)&&!x.type.__asyncResolved){let ne;v?(ne=Qe(Pt),ne.anchor=ee?ee.previousSibling:ce.lastChild):ne=P.nodeType===3?Zf(""):Qe("div"),ne.el=P,x.component.subTree=ne}}else A&64?oe!==8?ee=w():ee=x.type.hydrate(P,x,L,F,R,T,n,_):A&128&&(ee=x.type.hydrate(P,x,L,F,dl(o(P)),R,T,n,p))}return S!=null&&qr(S,null,F,x),ee},g=(P,x,L,F,R,T)=>{T=T||!!x.dynamicChildren;const{type:v,props:w,patchFlag:b,shapeFlag:S,dirs:A,transition:j}=x,oe=v==="input"||v==="option";if(oe||b!==-1){A&&ti(x,null,L,"created");let ee=!1;if(M(P)){ee=Hv(null,j)&&L&&L.vnode.props&&L.vnode.props.appear;const ne=P.content.firstChild;if(ee){const xe=ne.getAttribute("class");xe&&(ne.$cls=xe),j.beforeEnter(ne)}D(ne,P,L),x.el=P=ne}if(S&16&&!(w&&(w.innerHTML||w.textContent))){let ne=_(P.firstChild,x,P,L,F,R,T);for(;ne;){pl(P,1)||Sr();const xe=ne;ne=ne.nextSibling,a(xe)}}else if(S&8){let ne=x.children;ne[0]===`
`&&(P.tagName==="PRE"||P.tagName==="TEXTAREA")&&(ne=ne.slice(1)),P.textContent!==ne&&(pl(P,0)||Sr(),P.textContent=x.children)}if(w){if(oe||!T||b&48){const ne=P.tagName.includes("-");for(const xe in w)(oe&&(xe.endsWith("value")||xe==="indeterminate")||ur(xe)&&!hs(xe)||xe[0]==="."||ne)&&i(P,xe,null,w[xe],void 0,L)}else if(w.onClick)i(P,"onClick",null,w.onClick,void 0,L);else if(b&4&&fs(w.style))for(const ne in w.style)w.style[ne]}let ce;(ce=w&&w.onVnodeBeforeMount)&&pn(ce,L,x),A&&ti(x,null,L,"beforeMount"),((ce=w&&w.onVnodeMounted)||A||ee)&&jv(()=>{ce&&pn(ce,L,x),ee&&j.enter(P),A&&ti(x,null,L,"mounted")},F)}return P.nextSibling},_=(P,x,L,F,R,T,v)=>{v=v||!!x.dynamicChildren;const w=x.children,b=w.length;for(let S=0;S<b;S++){const A=v?w[S]:w[S]=gn(w[S]),j=A.type===ps;P?(j&&!v&&S+1<b&&gn(w[S+1]).type===ps&&(l(s(P.data.slice(A.children.length)),L,r(P)),P.data=A.children),P=p(P,A,F,R,T,v)):j&&!A.children?l(A.el=s(""),L):(pl(L,1)||Sr(),t(null,A,L,null,F,R,dl(L),T))}return P},E=(P,x,L,F,R,T)=>{const{slotScopeIds:v}=x;v&&(R=R?R.concat(v):v);const w=o(P),b=_(r(P),x,w,L,F,R,T);return b&&Vr(b)&&b.data==="]"?r(x.anchor=b):(Sr(),l(x.anchor=u("]"),w,b),b)},I=(P,x,L,F,R,T)=>{if(pl(P.parentElement,1)||Sr(),x.el=null,T){const b=k(P);for(;;){const S=r(P);if(S&&S!==b)a(S);else break}}const v=r(P),w=o(P);return a(P),t(null,x,w,v,L,F,dl(w),R),L&&(L.vnode.el=x.el,fu(L,x.el)),v},k=(P,x="[",L="]")=>{let F=0;for(;P;)if(P=r(P),P&&Vr(P)&&(P.data===x&&F++,P.data===L)){if(F===0)return r(P);F--}return P},D=(P,x,L)=>{const F=x.parentNode;F&&F.replaceChild(P,x);let R=L;for(;R;)R.vnode.el===x&&(R.vnode.el=R.subTree.el=P),R=R.parent},M=P=>P.nodeType===1&&P.tagName==="TEMPLATE";return[d,p]}const am="data-allow-mismatch",aS={0:"text",1:"children",2:"class",3:"style",4:"attribute"};function pl(n,e){if(e===0||e===1)for(;n&&!n.hasAttribute(am);)n=n.parentElement;const t=n&&n.getAttribute(am);if(t==null)return!1;if(t==="")return!0;{const i=t.split(",");return e===0&&i.includes("children")?!0:i.includes(aS[e])}}const lS=jc().requestIdleCallback||(n=>setTimeout(n,1)),cS=jc().cancelIdleCallback||(n=>clearTimeout(n)),uS=(n=1e4)=>e=>{const t=lS(e,{timeout:n});return()=>cS(t)};function hS(n){const{top:e,left:t,bottom:i,right:s}=n.getBoundingClientRect(),{innerHeight:r,innerWidth:o}=window;return(e>0&&e<r||i>0&&i<r)&&(t>0&&t<o||s>0&&s<o)}const fS=n=>(e,t)=>{const i=new IntersectionObserver(s=>{for(const r of s)if(r.isIntersecting){i.disconnect(),e();break}},n);return t(s=>{if(s instanceof Element){if(hS(s))return e(),i.disconnect(),!1;i.observe(s)}}),()=>i.disconnect()},dS=n=>e=>{if(n){const t=matchMedia(n);if(t.matches)e();else return t.addEventListener("change",e,{once:!0}),()=>t.removeEventListener("change",e)}},pS=(n=[])=>(e,t)=>{ye(n)&&(n=[n]);let i=!1;const s=o=>{i||(i=!0,r(),e(),o.target.dispatchEvent(new o.constructor(o.type,o)))},r=()=>{t(o=>{for(const a of n)o.removeEventListener(a,s)})};return t(o=>{for(const a of n)o.addEventListener(a,s,{once:!0})}),r};function mS(n,e){if(Vr(n)&&n.data==="["){let t=1,i=n.nextSibling;for(;i;){if(i.nodeType===1){if(e(i)===!1)break}else if(Vr(i))if(i.data==="]"){if(--t===0)break}else i.data==="["&&t++;i=i.nextSibling}}else e(n)}const ds=n=>!!n.type.__asyncLoader;function gS(n){de(n)&&(n={loader:n});const{loader:e,loadingComponent:t,errorComponent:i,delay:s=200,hydrate:r,timeout:o,suspensible:a=!0,onError:l}=n;let u=null,d,p=0;const g=()=>(p++,u=null,_()),_=()=>{let E;return u||(E=u=e().catch(I=>{if(I=I instanceof Error?I:new Error(String(I)),l)return new Promise((k,D)=>{l(I,()=>k(g()),()=>D(I),p+1)});throw I}).then(I=>E!==u&&u?u:(I&&(I.__esModule||I[Symbol.toStringTag]==="Module")&&(I=I.default),d=I,I)))};return ks({name:"AsyncComponentWrapper",__asyncLoader:_,__asyncHydrate(E,I,k){let D=!1;(I.bu||(I.bu=[])).push(()=>D=!0);const M=()=>{D||k()},P=r?()=>{const x=r(M,L=>mS(E,L));x&&(I.bum||(I.bum=[])).push(x)}:M;d?P():_().then(()=>!I.isUnmounted&&P())},get __asyncResolved(){return d},setup(){const E=Ut;if(Hf(E),d)return()=>eh(d,E);const I=P=>{u=null,dr(P,E,13,!i)};if(a&&E.suspense||Jr)return _().then(P=>()=>eh(P,E)).catch(P=>(I(P),()=>i?Qe(i,{error:P}):null));const k=re(!1),D=re(),M=re(!!s);return s&&setTimeout(()=>{M.value=!1},s),o!=null&&setTimeout(()=>{if(!k.value&&!D.value){const P=new Error(`Async component timed out after ${o}ms.`);I(P),D.value=P}},o),_().then(()=>{k.value=!0,E.parent&&Na(E.parent.vnode)&&E.parent.update()}).catch(P=>{I(P),D.value=P}),()=>{if(k.value&&d)return eh(d,E);if(D.value&&i)return Qe(i,{error:D.value});if(t&&!M.value)return Qe(t)}}})}function eh(n,e){const{ref:t,props:i,children:s,ce:r}=e.vnode,o=Qe(n,i,s);return o.ref=t,o.ce=r,delete e.vnode.ce,o}const Na=n=>n.type.__isKeepAlive,yS={name:"KeepAlive",__isKeepAlive:!0,props:{include:[String,RegExp,Array],exclude:[String,RegExp,Array],max:[String,Number]},setup(n,{slots:e}){const t=wn(),i=t.ctx;if(!i.renderer)return()=>{const M=e.default&&e.default();return M&&M.length===1?M[0]:M};const s=new Map,r=new Set;let o=null;const a=t.suspense,{renderer:{p:l,m:u,um:d,o:{createElement:p}}}=i,g=p("div");i.activate=(M,P,x,L,F)=>{const R=M.component;u(M,P,x,0,a),l(R.vnode,M,P,x,R,a,L,M.slotScopeIds,F),Tt(()=>{R.isDeactivated=!1,R.a&&Br(R.a);const T=M.props&&M.props.onVnodeMounted;T&&pn(T,R.parent,M)},a)},i.deactivate=M=>{const P=M.component;ac(P.m),ac(P.a),u(M,g,null,1,a),Tt(()=>{P.da&&Br(P.da);const x=M.props&&M.props.onVnodeUnmounted;x&&pn(x,P.parent,M),P.isDeactivated=!0},a)};function _(M){th(M),d(M,t,a,!0)}function E(M){s.forEach((P,x)=>{const L=Bh(P.type);L&&!M(L)&&I(x)})}function I(M){const P=s.get(M);P&&(!o||!qn(P,o))?_(P):o&&th(o),s.delete(M),r.delete(M)}Js(()=>[n.include,n.exclude],([M,P])=>{M&&E(x=>No(M,x)),P&&E(x=>!No(P,x))},{flush:"post",deep:!0});let k=null;const D=()=>{k!=null&&(lc(t.subTree.type)?Tt(()=>{s.set(k,ml(t.subTree))},t.subTree.suspense):s.set(k,ml(t.subTree)))};return pi(D),cu(D),uu(()=>{s.forEach(M=>{const{subTree:P,suspense:x}=t,L=ml(P);if(M.type===L.type&&M.key===L.key){th(L);const F=L.component.da;F&&Tt(F,x);return}_(M)})}),()=>{if(k=null,!e.default)return o=null;const M=e.default(),P=M[0];if(M.length>1)return o=null,M;if(!Ui(P)||!(P.shapeFlag&4)&&!(P.shapeFlag&128))return o=null,P;let x=ml(P);if(x.type===pt)return o=null,x;const L=x.type,F=Bh(ds(x)?x.type.__asyncResolved||{}:L),{include:R,exclude:T,max:v}=n;if(R&&(!F||!No(R,F))||T&&F&&No(T,F))return x.shapeFlag&=-257,o=x,P;const w=x.key==null?L:x.key,b=s.get(w);return x.el&&(x=ui(x),P.shapeFlag&128&&(P.ssContent=x)),k=w,b?(x.el=b.el,x.component=b.component,x.transition&&Fi(x,x.transition),x.shapeFlag|=512,r.delete(w),r.add(w)):(r.add(w),v&&r.size>parseInt(v,10)&&I(r.values().next().value)),x.shapeFlag|=256,o=x,lc(P.type)?P:x}}},_S=yS;function No(n,e){return ie(n)?n.some(t=>No(t,e)):ye(n)?n.split(",").includes(e):DC(n)?(n.lastIndex=0,n.test(e)):!1}function vv(n,e){Ev(n,"a",e)}function Tv(n,e){Ev(n,"da",e)}function Ev(n,e,t=Ut){const i=n.__wdc||(n.__wdc=()=>{let s=t;for(;s;){if(s.isDeactivated)return;s=s.parent}return n()});if(lu(e,i,t),t){let s=t.parent;for(;s&&s.parent;)Na(s.parent.vnode)&&vS(i,e,t,s),s=s.parent}}function vS(n,e,t,i){const s=lu(e,n,i,!0);xs(()=>{xf(i[e],s)},t)}function th(n){n.shapeFlag&=-257,n.shapeFlag&=-513}function ml(n){return n.shapeFlag&128?n.ssContent:n}function lu(n,e,t=Ut,i=!1){if(t){const s=t[n]||(t[n]=[]),r=e.__weh||(e.__weh=(...o)=>{Vi();const a=tr(t),l=Fn(e,t,n,o);return a(),Li(),l});return i?s.unshift(r):s.push(r),r}}const Gi=n=>(e,t=Ut)=>{(!Jr||n==="sp")&&lu(n,(...i)=>e(...i),t)},wv=Gi("bm"),pi=Gi("m"),Gf=Gi("bu"),cu=Gi("u"),uu=Gi("bum"),xs=Gi("um"),Iv=Gi("sp"),Cv=Gi("rtg"),Av=Gi("rtc");function Sv(n,e=Ut){lu("ec",n,e)}const Wf="components",TS="directives";function ES(n,e){return Kf(Wf,n,!0,e)||n}const bv=Symbol.for("v-ndc");function wS(n){return ye(n)?Kf(Wf,n,!1)||n:n||bv}function IS(n){return Kf(TS,n)}function Kf(n,e,t=!0,i=!1){const s=$t||Ut;if(s){const r=s.type;if(n===Wf){const a=Bh(r,!1);if(a&&(a===e||a===Xe(e)||a===fr(Xe(e))))return r}const o=lm(s[n]||r[n],e)||lm(s.appContext[n],e);return!o&&i?r:o}}function lm(n,e){return n&&(n[e]||n[Xe(e)]||n[fr(Xe(e))])}function CS(n,e,t,i){let s;const r=t&&t[i],o=ie(n);if(o||ye(n)){const a=o&&fs(n);let l=!1,u=!1;a&&(l=!Sn(n),u=Oi(n),n=tu(n)),s=new Array(n.length);for(let d=0,p=n.length;d<p;d++)s[d]=e(l?u?tc(Ft(n[d])):Ft(n[d]):n[d],d,void 0,r&&r[d])}else if(typeof n=="number"){s=new Array(n);for(let a=0;a<n;a++)s[a]=e(a+1,a,void 0,r&&r[a])}else if(Ge(n))if(n[Symbol.iterator])s=Array.from(n,(a,l)=>e(a,l,void 0,r&&r[l]));else{const a=Object.keys(n);s=new Array(a.length);for(let l=0,u=a.length;l<u;l++){const d=a[l];s[l]=e(n[d],d,l,r&&r[l])}}else s=[];return t&&(t[i]=s),s}function AS(n,e){for(let t=0;t<e.length;t++){const i=e[t];if(ie(i))for(let s=0;s<i.length;s++)n[i[s].name]=i[s].fn;else i&&(n[i.name]=i.key?(...s)=>{const r=i.fn(...s);return r&&(r.key=i.key),r}:i.fn)}return n}function SS(n,e,t={},i,s){if($t.ce||$t.parent&&ds($t.parent)&&$t.parent.ce){const u=Object.keys(t).length>0;return e!=="default"&&(t.name=e),ua(),cc(Pt,null,[Qe("slot",t,i&&i())],u?-2:64)}let r=n[e];r&&r._c&&(r._d=!1),ua();const o=r&&zf(r(t)),a=t.key||o&&o.key,l=cc(Pt,{key:(a&&!En(a)?a:`_${e}`)+(!o&&i?"_fb":"")},o||(i?i():[]),o&&n._===1?64:-2);return!s&&l.scopeId&&(l.slotScopeIds=[l.scopeId+"-s"]),r&&r._c&&(r._d=!0),l}function zf(n){return n.some(e=>Ui(e)?!(e.type===pt||e.type===Pt&&!zf(e.children)):!0)?n:null}function bS(n,e){const t={};for(const i in n)t[e&&/[A-Z]/.test(i)?`on:${i}`:Ur(i)]=n[i];return t}const kh=n=>n?rT(n)?Ma(n):kh(n.parent):null,Go=Ae(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>kh(n.parent),$root:n=>kh(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>Yf(n),$forceUpdate:n=>n.f||(n.f=()=>{Uf(n.update)}),$nextTick:n=>n.n||(n.n=xa.bind(n.proxy)),$watch:n=>rb.bind(n)}),nh=(n,e)=>n!==Re&&!n.__isScriptSetup&&Be(n,e),xh={get({_:n},e){if(e==="__v_skip")return!0;const{ctx:t,setupState:i,data:s,props:r,accessCache:o,type:a,appContext:l}=n;let u;if(e[0]!=="$"){const _=o[e];if(_!==void 0)switch(_){case 1:return i[e];case 2:return s[e];case 4:return t[e];case 3:return r[e]}else{if(nh(i,e))return o[e]=1,i[e];if(s!==Re&&Be(s,e))return o[e]=2,s[e];if((u=n.propsOptions[0])&&Be(u,e))return o[e]=3,r[e];if(t!==Re&&Be(t,e))return o[e]=4,t[e];Nh&&(o[e]=0)}}const d=Go[e];let p,g;if(d)return e==="$attrs"&&Zt(n.attrs,"get",""),d(n);if((p=a.__cssModules)&&(p=p[e]))return p;if(t!==Re&&Be(t,e))return o[e]=4,t[e];if(g=l.config.globalProperties,Be(g,e))return g[e]},set({_:n},e,t){const{data:i,setupState:s,ctx:r}=n;return nh(s,e)?(s[e]=t,!0):i!==Re&&Be(i,e)?(i[e]=t,!0):Be(n.props,e)||e[0]==="$"&&e.slice(1)in n?!1:(r[e]=t,!0)},has({_:{data:n,setupState:e,accessCache:t,ctx:i,appContext:s,propsOptions:r,type:o}},a){let l,u;return!!(t[a]||n!==Re&&a[0]!=="$"&&Be(n,a)||nh(e,a)||(l=r[0])&&Be(l,a)||Be(i,a)||Be(Go,a)||Be(s.config.globalProperties,a)||(u=o.__cssModules)&&u[a])},defineProperty(n,e,t){return t.get!=null?n._.accessCache[e]=0:Be(t,"value")&&this.set(n,e,t.value,null),Reflect.defineProperty(n,e,t)}},RS=Ae({},xh,{get(n,e){if(e!==Symbol.unscopables)return xh.get(n,e,n)},has(n,e){return e[0]!=="_"&&!BC(e)}});function PS(){return null}function kS(){return null}function xS(n){}function NS(n){}function DS(){return null}function MS(){}function VS(n,e){return null}function LS(){return Rv().slots}function OS(){return Rv().attrs}function Rv(n){const e=wn();return e.setupContext||(e.setupContext=cT(e))}function la(n){return ie(n)?n.reduce((e,t)=>(e[t]=null,e),{}):n}function FS(n,e){const t=la(n);for(const i in e){if(i.startsWith("__skip"))continue;let s=t[i];s?ie(s)||de(s)?s=t[i]={type:s,default:e[i]}:s.default=e[i]:s===null&&(s=t[i]={default:e[i]}),s&&e[`__skip_${i}`]&&(s.skipFactory=!0)}return t}function US(n,e){return!n||!e?n||e:ie(n)&&ie(e)?n.concat(e):Ae({},la(n),la(e))}function BS(n,e){const t={};for(const i in n)e.includes(i)||Object.defineProperty(t,i,{enumerable:!0,get:()=>n[i]});return t}function $S(n){const e=wn();let t=n();return Oh(),Nf(t)&&(t=t.catch(i=>{throw tr(e),i})),[t,()=>tr(e)]}let Nh=!0;function qS(n){const e=Yf(n),t=n.proxy,i=n.ctx;Nh=!1,e.beforeCreate&&cm(e.beforeCreate,n,"bc");const{data:s,computed:r,methods:o,watch:a,provide:l,inject:u,created:d,beforeMount:p,mounted:g,beforeUpdate:_,updated:E,activated:I,deactivated:k,beforeDestroy:D,beforeUnmount:M,destroyed:P,unmounted:x,render:L,renderTracked:F,renderTriggered:R,errorCaptured:T,serverPrefetch:v,expose:w,inheritAttrs:b,components:S,directives:A,filters:j}=e;if(u&&HS(u,i,null),o)for(const ce in o){const ne=o[ce];de(ne)&&(i[ce]=ne.bind(t))}if(s){const ce=s.call(t,t);Ge(ce)&&(n.data=ka(ce))}if(Nh=!0,r)for(const ce in r){const ne=r[ce],xe=de(ne)?ne.bind(t,t):de(ne.get)?ne.get.bind(t,t):qt,qe=!de(ne)&&de(ne.set)?ne.set.bind(t):qt,ut=Rt({get:xe,set:qe});Object.defineProperty(i,ce,{enumerable:!0,configurable:!0,get:()=>ut.value,set:_t=>ut.value=_t})}if(a)for(const ce in a)Pv(a[ce],i,t,ce);if(l){const ce=de(l)?l.call(t):l;Reflect.ownKeys(ce).forEach(ne=>{xv(ne,ce[ne])})}d&&cm(d,n,"c");function ee(ce,ne){ie(ne)?ne.forEach(xe=>ce(xe.bind(t))):ne&&ce(ne.bind(t))}if(ee(wv,p),ee(pi,g),ee(Gf,_),ee(cu,E),ee(vv,I),ee(Tv,k),ee(Sv,T),ee(Av,F),ee(Cv,R),ee(uu,M),ee(xs,x),ee(Iv,v),ie(w))if(w.length){const ce=n.exposed||(n.exposed={});w.forEach(ne=>{Object.defineProperty(ce,ne,{get:()=>t[ne],set:xe=>t[ne]=xe,enumerable:!0})})}else n.exposed||(n.exposed={});L&&n.render===qt&&(n.render=L),b!=null&&(n.inheritAttrs=b),S&&(n.components=S),A&&(n.directives=A),v&&Hf(n)}function HS(n,e,t=qt){ie(n)&&(n=Dh(n));for(const i in n){const s=n[i];let r;Ge(s)?"default"in s?r=Wo(s.from||i,s.default,!0):r=Wo(s.from||i):r=Wo(s),It(r)?Object.defineProperty(e,i,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):e[i]=r}}function cm(n,e,t){Fn(ie(n)?n.map(i=>i.bind(e.proxy)):n.bind(e.proxy),e,t)}function Pv(n,e,t,i){let s=i.includes(".")?Yv(t,i):()=>t[i];if(ye(n)){const r=e[n];de(r)&&Js(s,r)}else if(de(n))Js(s,n.bind(t));else if(Ge(n))if(ie(n))n.forEach(r=>Pv(r,e,t,i));else{const r=de(n.handler)?n.handler.bind(t):e[n.handler];de(r)&&Js(s,r,n)}}function Yf(n){const e=n.type,{mixins:t,extends:i}=e,{mixins:s,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(e);let l;return a?l=a:!s.length&&!t&&!i?l=e:(l={},s.length&&s.forEach(u=>oc(l,u,o,!0)),oc(l,e,o)),Ge(e)&&r.set(e,l),l}function oc(n,e,t,i=!1){const{mixins:s,extends:r}=e;r&&oc(n,r,t,!0),s&&s.forEach(o=>oc(n,o,t,!0));for(const o in e)if(!(i&&o==="expose")){const a=GS[o]||t&&t[o];n[o]=a?a(n[o],e[o]):e[o]}return n}const GS={data:um,props:hm,emits:hm,methods:Do,computed:Do,beforeCreate:ln,created:ln,beforeMount:ln,mounted:ln,beforeUpdate:ln,updated:ln,beforeDestroy:ln,beforeUnmount:ln,destroyed:ln,unmounted:ln,activated:ln,deactivated:ln,errorCaptured:ln,serverPrefetch:ln,components:Do,directives:Do,watch:KS,provide:um,inject:WS};function um(n,e){return e?n?function(){return Ae(de(n)?n.call(this,this):n,de(e)?e.call(this,this):e)}:e:n}function WS(n,e){return Do(Dh(n),Dh(e))}function Dh(n){if(ie(n)){const e={};for(let t=0;t<n.length;t++)e[n[t]]=n[t];return e}return n}function ln(n,e){return n?[...new Set([].concat(n,e))]:e}function Do(n,e){return n?Ae(Object.create(null),n,e):e}function hm(n,e){return n?ie(n)&&ie(e)?[...new Set([...n,...e])]:Ae(Object.create(null),la(n),la(e??{})):e}function KS(n,e){if(!n)return e;if(!e)return n;const t=Ae(Object.create(null),n);for(const i in e)t[i]=ln(n[i],e[i]);return t}function kv(){return{app:null,config:{isNativeTag:Mr,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let zS=0;function YS(n,e){return function(i,s=null){de(i)||(i=Ae({},i)),s!=null&&!Ge(s)&&(s=null);const r=kv(),o=new WeakSet,a=[];let l=!1;const u=r.app={_uid:zS++,_component:i,_props:s,_container:null,_context:r,_instance:null,version:fT,get config(){return r.config},set config(d){},use(d,...p){return o.has(d)||(d&&de(d.install)?(o.add(d),d.install(u,...p)):de(d)&&(o.add(d),d(u,...p))),u},mixin(d){return r.mixins.includes(d)||r.mixins.push(d),u},component(d,p){return p?(r.components[d]=p,u):r.components[d]},directive(d,p){return p?(r.directives[d]=p,u):r.directives[d]},mount(d,p,g){if(!l){const _=u._ceVNode||Qe(i,s);return _.appContext=r,g===!0?g="svg":g===!1&&(g=void 0),p&&e?e(_,d):n(_,d,g),l=!0,u._container=d,d.__vue_app__=u,Ma(_.component)}},onUnmount(d){a.push(d)},unmount(){l&&(Fn(a,u._instance,16),n(null,u._container),delete u._container.__vue_app__)},provide(d,p){return r.provides[d]=p,u},runWithContext(d){const p=Ys;Ys=u;try{return d()}finally{Ys=p}}};return u}}let Ys=null;function xv(n,e){if(Ut){let t=Ut.provides;const i=Ut.parent&&Ut.parent.provides;i===t&&(t=Ut.provides=Object.create(i)),t[n]=e}}function Wo(n,e,t=!1){const i=wn();if(i||Ys){let s=Ys?Ys._context.provides:i?i.parent==null||i.ce?i.vnode.appContext&&i.vnode.appContext.provides:i.parent.provides:void 0;if(s&&n in s)return s[n];if(arguments.length>1)return t&&de(e)?e.call(i&&i.proxy):e}}function JS(){return!!(wn()||Ys)}const Nv={},Dv=()=>Object.create(Nv),Mv=n=>Object.getPrototypeOf(n)===Nv;function QS(n,e,t,i=!1){const s={},r=Dv();n.propsDefaults=Object.create(null),Vv(n,e,s,r);for(const o in n.propsOptions[0])o in s||(s[o]=void 0);t?n.props=i?s:Z_(s):n.type.props?n.props=s:n.props=r,n.attrs=r}function XS(n,e,t,i){const{props:s,attrs:r,vnode:{patchFlag:o}}=n,a=Me(s),[l]=n.propsOptions;let u=!1;if((i||o>0)&&!(o&16)){if(o&8){const d=n.vnode.dynamicProps;for(let p=0;p<d.length;p++){let g=d[p];if(hu(n.emitsOptions,g))continue;const _=e[g];if(l)if(Be(r,g))_!==r[g]&&(r[g]=_,u=!0);else{const E=Xe(g);s[E]=Mh(l,a,E,_,n,!1)}else _!==r[g]&&(r[g]=_,u=!0)}}}else{Vv(n,e,s,r)&&(u=!0);let d;for(const p in a)(!e||!Be(e,p)&&((d=yn(p))===p||!Be(e,d)))&&(l?t&&(t[p]!==void 0||t[d]!==void 0)&&(s[p]=Mh(l,a,p,void 0,n,!0)):delete s[p]);if(r!==a)for(const p in r)(!e||!Be(e,p))&&(delete r[p],u=!0)}u&&Si(n.attrs,"set","")}function Vv(n,e,t,i){const[s,r]=n.propsOptions;let o=!1,a;if(e)for(let l in e){if(hs(l))continue;const u=e[l];let d;s&&Be(s,d=Xe(l))?!r||!r.includes(d)?t[d]=u:(a||(a={}))[d]=u:hu(n.emitsOptions,l)||(!(l in i)||u!==i[l])&&(i[l]=u,o=!0)}if(r){const l=Me(t),u=a||Re;for(let d=0;d<r.length;d++){const p=r[d];t[p]=Mh(s,l,p,u[p],n,!Be(u,p))}}return o}function Mh(n,e,t,i,s,r){const o=n[t];if(o!=null){const a=Be(o,"default");if(a&&i===void 0){const l=o.default;if(o.type!==Function&&!o.skipFactory&&de(l)){const{propsDefaults:u}=s;if(t in u)i=u[t];else{const d=tr(s);i=u[t]=l.call(null,e),d()}}else i=l;s.ce&&s.ce._setProp(t,i)}o[0]&&(r&&!a?i=!1:o[1]&&(i===""||i===yn(t))&&(i=!0))}return i}const jS=new WeakMap;function Lv(n,e,t=!1){const i=t?jS:e.propsCache,s=i.get(n);if(s)return s;const r=n.props,o={},a=[];let l=!1;if(!de(n)){const d=p=>{l=!0;const[g,_]=Lv(p,e,!0);Ae(o,g),_&&a.push(..._)};!t&&e.mixins.length&&e.mixins.forEach(d),n.extends&&d(n.extends),n.mixins&&n.mixins.forEach(d)}if(!r&&!l)return Ge(n)&&i.set(n,Or),Or;if(ie(r))for(let d=0;d<r.length;d++){const p=Xe(r[d]);fm(p)&&(o[p]=Re)}else if(r)for(const d in r){const p=Xe(d);if(fm(p)){const g=r[d],_=o[p]=ie(g)||de(g)?{type:g}:Ae({},g),E=_.type;let I=!1,k=!0;if(ie(E))for(let D=0;D<E.length;++D){const M=E[D],P=de(M)&&M.name;if(P==="Boolean"){I=!0;break}else P==="String"&&(k=!1)}else I=de(E)&&E.name==="Boolean";_[0]=I,_[1]=k,(I||Be(_,"default"))&&a.push(p)}}const u=[o,a];return Ge(n)&&i.set(n,u),u}function fm(n){return n[0]!=="$"&&!hs(n)}const Jf=n=>n==="_"||n==="_ctx"||n==="$stable",Qf=n=>ie(n)?n.map(gn):[gn(n)],ZS=(n,e,t)=>{if(e._n)return e;const i=Bf((...s)=>Qf(e(...s)),t);return i._c=!1,i},Ov=(n,e,t)=>{const i=n._ctx;for(const s in n){if(Jf(s))continue;const r=n[s];if(de(r))e[s]=ZS(s,r,i);else if(r!=null){const o=Qf(r);e[s]=()=>o}}},Fv=(n,e)=>{const t=Qf(e);n.slots.default=()=>t},Uv=(n,e,t)=>{for(const i in e)(t||!Jf(i))&&(n[i]=e[i])},eb=(n,e,t)=>{const i=n.slots=Dv();if(n.vnode.shapeFlag&32){const s=e._;s?(Uv(i,e,t),t&&x_(i,"_",s,!0)):Ov(e,i)}else e&&Fv(n,e)},tb=(n,e,t)=>{const{vnode:i,slots:s}=n;let r=!0,o=Re;if(i.shapeFlag&32){const a=e._;a?t&&a===1?r=!1:Uv(s,e,t):(r=!e.$stable,Ov(e,s)),o=e}else e&&(Fv(n,e),o={default:1});if(r)for(const a in s)!Jf(a)&&o[a]==null&&delete s[a]},Tt=jv;function Bv(n){return qv(n)}function $v(n){return qv(n,oS)}function qv(n,e){const t=jc();t.__VUE__=!0;const{insert:i,remove:s,patchProp:r,createElement:o,createText:a,createComment:l,setText:u,setElementText:d,parentNode:p,nextSibling:g,setScopeId:_=qt,insertStaticContent:E}=n,I=(N,V,B,G=null,q=null,$=null,J=void 0,z=null,Q=!!V.dynamicChildren)=>{if(N===V)return;N&&!qn(N,V)&&(G=fn(N),_t(N,q,$,!0),N=null),V.patchFlag===-2&&(Q=!1,V.dynamicChildren=null);const{type:W,ref:le,shapeFlag:te}=V;switch(W){case ps:k(N,V,B,G);break;case pt:D(N,V,B,G);break;case Qs:N==null&&M(V,B,G,J);break;case Pt:S(N,V,B,G,q,$,J,z,Q);break;default:te&1?L(N,V,B,G,q,$,J,z,Q):te&6?A(N,V,B,G,q,$,J,z,Q):(te&64||te&128)&&W.process(N,V,B,G,q,$,J,z,Q,Dt)}le!=null&&q?qr(le,N&&N.ref,$,V||N,!V):le==null&&N&&N.ref!=null&&qr(N.ref,null,$,N,!0)},k=(N,V,B,G)=>{if(N==null)i(V.el=a(V.children),B,G);else{const q=V.el=N.el;V.children!==N.children&&u(q,V.children)}},D=(N,V,B,G)=>{N==null?i(V.el=l(V.children||""),B,G):V.el=N.el},M=(N,V,B,G)=>{[N.el,N.anchor]=E(N.children,V,B,G,N.el,N.anchor)},P=({el:N,anchor:V},B,G)=>{let q;for(;N&&N!==V;)q=g(N),i(N,B,G),N=q;i(V,B,G)},x=({el:N,anchor:V})=>{let B;for(;N&&N!==V;)B=g(N),s(N),N=B;s(V)},L=(N,V,B,G,q,$,J,z,Q)=>{V.type==="svg"?J="svg":V.type==="math"&&(J="mathml"),N==null?F(V,B,G,q,$,J,z,Q):v(N,V,q,$,J,z,Q)},F=(N,V,B,G,q,$,J,z)=>{let Q,W;const{props:le,shapeFlag:te,transition:ae,dirs:fe}=N;if(Q=N.el=o(N.type,$,le&&le.is,le),te&8?d(Q,N.children):te&16&&T(N.children,Q,null,G,q,ih(N,$),J,z),fe&&ti(N,null,G,"created"),R(Q,N,N.scopeId,J,G),le){for(const Oe in le)Oe!=="value"&&!hs(Oe)&&r(Q,Oe,null,le[Oe],$,G);"value"in le&&r(Q,"value",null,le.value,$),(W=le.onVnodeBeforeMount)&&pn(W,G,N)}fe&&ti(N,null,G,"beforeMount");const Te=Hv(q,ae);Te&&ae.beforeEnter(Q),i(Q,V,B),((W=le&&le.onVnodeMounted)||Te||fe)&&Tt(()=>{W&&pn(W,G,N),Te&&ae.enter(Q),fe&&ti(N,null,G,"mounted")},q)},R=(N,V,B,G,q)=>{if(B&&_(N,B),G)for(let $=0;$<G.length;$++)_(N,G[$]);if(q){let $=q.subTree;if(V===$||lc($.type)&&($.ssContent===V||$.ssFallback===V)){const J=q.vnode;R(N,J,J.scopeId,J.slotScopeIds,q.parent)}}},T=(N,V,B,G,q,$,J,z,Q=0)=>{for(let W=Q;W<N.length;W++){const le=N[W]=z?rs(N[W]):gn(N[W]);I(null,le,V,B,G,q,$,J,z)}},v=(N,V,B,G,q,$,J)=>{const z=V.el=N.el;let{patchFlag:Q,dynamicChildren:W,dirs:le}=V;Q|=N.patchFlag&16;const te=N.props||Re,ae=V.props||Re;let fe;if(B&&Us(B,!1),(fe=ae.onVnodeBeforeUpdate)&&pn(fe,B,V,N),le&&ti(V,N,B,"beforeUpdate"),B&&Us(B,!0),(te.innerHTML&&ae.innerHTML==null||te.textContent&&ae.textContent==null)&&d(z,""),W?w(N.dynamicChildren,W,z,B,G,ih(V,q),$):J||ne(N,V,z,null,B,G,ih(V,q),$,!1),Q>0){if(Q&16)b(z,te,ae,B,q);else if(Q&2&&te.class!==ae.class&&r(z,"class",null,ae.class,q),Q&4&&r(z,"style",te.style,ae.style,q),Q&8){const Te=V.dynamicProps;for(let Oe=0;Oe<Te.length;Oe++){const Ve=Te[Oe],At=te[Ve],ht=ae[Ve];(ht!==At||Ve==="value")&&r(z,Ve,At,ht,q,B)}}Q&1&&N.children!==V.children&&d(z,V.children)}else!J&&W==null&&b(z,te,ae,B,q);((fe=ae.onVnodeUpdated)||le)&&Tt(()=>{fe&&pn(fe,B,V,N),le&&ti(V,N,B,"updated")},G)},w=(N,V,B,G,q,$,J)=>{for(let z=0;z<V.length;z++){const Q=N[z],W=V[z],le=Q.el&&(Q.type===Pt||!qn(Q,W)||Q.shapeFlag&198)?p(Q.el):B;I(Q,W,le,null,G,q,$,J,!0)}},b=(N,V,B,G,q)=>{if(V!==B){if(V!==Re)for(const $ in V)!hs($)&&!($ in B)&&r(N,$,V[$],null,q,G);for(const $ in B){if(hs($))continue;const J=B[$],z=V[$];J!==z&&$!=="value"&&r(N,$,z,J,q,G)}"value"in B&&r(N,"value",V.value,B.value,q)}},S=(N,V,B,G,q,$,J,z,Q)=>{const W=V.el=N?N.el:a(""),le=V.anchor=N?N.anchor:a("");let{patchFlag:te,dynamicChildren:ae,slotScopeIds:fe}=V;fe&&(z=z?z.concat(fe):fe),N==null?(i(W,B,G),i(le,B,G),T(V.children||[],B,le,q,$,J,z,Q)):te>0&&te&64&&ae&&N.dynamicChildren?(w(N.dynamicChildren,ae,B,q,$,J,z),(V.key!=null||q&&V===q.subTree)&&Xf(N,V,!0)):ne(N,V,B,le,q,$,J,z,Q)},A=(N,V,B,G,q,$,J,z,Q)=>{V.slotScopeIds=z,N==null?V.shapeFlag&512?q.ctx.activate(V,B,G,J,Q):j(V,B,G,q,$,J,Q):oe(N,V,Q)},j=(N,V,B,G,q,$,J)=>{const z=N.component=sT(N,G,q);if(Na(N)&&(z.ctx.renderer=Dt),oT(z,!1,J),z.asyncDep){if(q&&q.registerDep(z,ee,J),!N.el){const Q=z.subTree=Qe(pt);D(null,Q,V,B),N.placeholder=Q.el}}else ee(z,N,V,B,q,$,J)},oe=(N,V,B)=>{const G=V.component=N.component;if(fb(N,V,B))if(G.asyncDep&&!G.asyncResolved){ce(G,V,B);return}else G.next=V,G.update();else V.el=N.el,G.vnode=V},ee=(N,V,B,G,q,$,J)=>{const z=()=>{if(N.isMounted){let{next:te,bu:ae,u:fe,parent:Te,vnode:Oe}=N;{const rt=Gv(N);if(rt){te&&(te.el=Oe.el,ce(N,te,J)),rt.asyncDep.then(()=>{N.isUnmounted||z()});return}}let Ve=te,At;Us(N,!1),te?(te.el=Oe.el,ce(N,te,J)):te=Oe,ae&&Br(ae),(At=te.props&&te.props.onVnodeBeforeUpdate)&&pn(At,Te,te,Oe),Us(N,!0);const ht=xl(N),Kt=N.subTree;N.subTree=ht,I(Kt,ht,p(Kt.el),fn(Kt),N,q,$),te.el=ht.el,Ve===null&&fu(N,ht.el),fe&&Tt(fe,q),(At=te.props&&te.props.onVnodeUpdated)&&Tt(()=>pn(At,Te,te,Oe),q)}else{let te;const{el:ae,props:fe}=V,{bm:Te,m:Oe,parent:Ve,root:At,type:ht}=N,Kt=ds(V);if(Us(N,!1),Te&&Br(Te),!Kt&&(te=fe&&fe.onVnodeBeforeMount)&&pn(te,Ve,V),Us(N,!0),ae&&on){const rt=()=>{N.subTree=xl(N),on(ae,N.subTree,N,q,null)};Kt&&ht.__asyncHydrate?ht.__asyncHydrate(ae,N,rt):rt()}else{At.ce&&At.ce._def.shadowRoot!==!1&&At.ce._injectChildStyle(ht);const rt=N.subTree=xl(N);I(null,rt,B,G,N,q,$),V.el=rt.el}if(Oe&&Tt(Oe,q),!Kt&&(te=fe&&fe.onVnodeMounted)){const rt=V;Tt(()=>pn(te,Ve,rt),q)}(V.shapeFlag&256||Ve&&ds(Ve.vnode)&&Ve.vnode.shapeFlag&256)&&N.a&&Tt(N.a,q),N.isMounted=!0,V=B=G=null}};N.scope.on();const Q=N.effect=new na(z);N.scope.off();const W=N.update=Q.run.bind(Q),le=N.job=Q.runIfDirty.bind(Q);le.i=N,le.id=N.uid,Q.scheduler=()=>Uf(le),Us(N,!0),W()},ce=(N,V,B)=>{V.component=N;const G=N.vnode.props;N.vnode=V,N.next=null,XS(N,V.props,G,B),tb(N,V.children,B),Vi(),em(N),Li()},ne=(N,V,B,G,q,$,J,z,Q=!1)=>{const W=N&&N.children,le=N?N.shapeFlag:0,te=V.children,{patchFlag:ae,shapeFlag:fe}=V;if(ae>0){if(ae&128){qe(W,te,B,G,q,$,J,z,Q);return}else if(ae&256){xe(W,te,B,G,q,$,J,z,Q);return}}fe&8?(le&16&&je(W,q,$),te!==W&&d(B,te)):le&16?fe&16?qe(W,te,B,G,q,$,J,z,Q):je(W,q,$,!0):(le&8&&d(B,""),fe&16&&T(te,B,G,q,$,J,z,Q))},xe=(N,V,B,G,q,$,J,z,Q)=>{N=N||Or,V=V||Or;const W=N.length,le=V.length,te=Math.min(W,le);let ae;for(ae=0;ae<te;ae++){const fe=V[ae]=Q?rs(V[ae]):gn(V[ae]);I(N[ae],fe,B,null,q,$,J,z,Q)}W>le?je(N,q,$,!0,!1,te):T(V,B,G,q,$,J,z,Q,te)},qe=(N,V,B,G,q,$,J,z,Q)=>{let W=0;const le=V.length;let te=N.length-1,ae=le-1;for(;W<=te&&W<=ae;){const fe=N[W],Te=V[W]=Q?rs(V[W]):gn(V[W]);if(qn(fe,Te))I(fe,Te,B,null,q,$,J,z,Q);else break;W++}for(;W<=te&&W<=ae;){const fe=N[te],Te=V[ae]=Q?rs(V[ae]):gn(V[ae]);if(qn(fe,Te))I(fe,Te,B,null,q,$,J,z,Q);else break;te--,ae--}if(W>te){if(W<=ae){const fe=ae+1,Te=fe<le?V[fe].el:G;for(;W<=ae;)I(null,V[W]=Q?rs(V[W]):gn(V[W]),B,Te,q,$,J,z,Q),W++}}else if(W>ae)for(;W<=te;)_t(N[W],q,$,!0),W++;else{const fe=W,Te=W,Oe=new Map;for(W=Te;W<=ae;W++){const tt=V[W]=Q?rs(V[W]):gn(V[W]);tt.key!=null&&Oe.set(tt.key,W)}let Ve,At=0;const ht=ae-Te+1;let Kt=!1,rt=0;const Bn=new Array(ht);for(W=0;W<ht;W++)Bn[W]=0;for(W=fe;W<=te;W++){const tt=N[W];if(At>=ht){_t(tt,q,$,!0);continue}let an;if(tt.key!=null)an=Oe.get(tt.key);else for(Ve=Te;Ve<=ae;Ve++)if(Bn[Ve-Te]===0&&qn(tt,V[Ve])){an=Ve;break}an===void 0?_t(tt,q,$,!0):(Bn[an-Te]=W+1,an>=rt?rt=an:Kt=!0,I(tt,V[an],B,null,q,$,J,z,Q),At++)}const zi=Kt?nb(Bn):Or;for(Ve=zi.length-1,W=ht-1;W>=0;W--){const tt=Te+W,an=V[tt],_i=V[tt+1],Ms=tt+1<le?_i.el||_i.placeholder:G;Bn[W]===0?I(null,an,B,Ms,q,$,J,z,Q):Kt&&(Ve<0||W!==zi[Ve]?ut(an,B,Ms,2):Ve--)}}},ut=(N,V,B,G,q=null)=>{const{el:$,type:J,transition:z,children:Q,shapeFlag:W}=N;if(W&6){ut(N.component.subTree,V,B,G);return}if(W&128){N.suspense.move(V,B,G);return}if(W&64){J.move(N,V,B,Dt);return}if(J===Pt){i($,V,B);for(let te=0;te<Q.length;te++)ut(Q[te],V,B,G);i(N.anchor,V,B);return}if(J===Qs){P(N,V,B);return}if(G!==2&&W&1&&z)if(G===0)z.beforeEnter($),i($,V,B),Tt(()=>z.enter($),q);else{const{leave:te,delayLeave:ae,afterLeave:fe}=z,Te=()=>{N.ctx.isUnmounted?s($):i($,V,B)},Oe=()=>{$._isLeaving&&$[Ai](!0),te($,()=>{Te(),fe&&fe()})};ae?ae($,Te,Oe):Oe()}else i($,V,B)},_t=(N,V,B,G=!1,q=!1)=>{const{type:$,props:J,ref:z,children:Q,dynamicChildren:W,shapeFlag:le,patchFlag:te,dirs:ae,cacheIndex:fe}=N;if(te===-2&&(q=!1),z!=null&&(Vi(),qr(z,null,B,N,!0),Li()),fe!=null&&(V.renderCache[fe]=void 0),le&256){V.ctx.deactivate(N);return}const Te=le&1&&ae,Oe=!ds(N);let Ve;if(Oe&&(Ve=J&&J.onVnodeBeforeUnmount)&&pn(Ve,V,N),le&6)X(N.component,B,G);else{if(le&128){N.suspense.unmount(B,G);return}Te&&ti(N,null,V,"beforeUnmount"),le&64?N.type.remove(N,V,B,Dt,G):W&&!W.hasOnce&&($!==Pt||te>0&&te&64)?je(W,V,B,!1,!0):($===Pt&&te&384||!q&&le&16)&&je(Q,V,B),G&&Pn(N)}(Oe&&(Ve=J&&J.onVnodeUnmounted)||Te)&&Tt(()=>{Ve&&pn(Ve,V,N),Te&&ti(N,null,V,"unmounted")},B)},Pn=N=>{const{type:V,el:B,anchor:G,transition:q}=N;if(V===Pt){Nt(B,G);return}if(V===Qs){x(N);return}const $=()=>{s(B),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(N.shapeFlag&1&&q&&!q.persisted){const{leave:J,delayLeave:z}=q,Q=()=>J(B,$);z?z(N.el,$,Q):Q()}else $()},Nt=(N,V)=>{let B;for(;N!==V;)B=g(N),s(N),N=B;s(V)},X=(N,V,B)=>{const{bum:G,scope:q,job:$,subTree:J,um:z,m:Q,a:W}=N;ac(Q),ac(W),G&&Br(G),q.stop(),$&&($.flags|=8,_t(J,N,V,B)),z&&Tt(z,V),Tt(()=>{N.isUnmounted=!0},V)},je=(N,V,B,G=!1,q=!1,$=0)=>{for(let J=$;J<N.length;J++)_t(N[J],V,B,G,q)},fn=N=>{if(N.shapeFlag&6)return fn(N.component.subTree);if(N.shapeFlag&128)return N.suspense.next();const V=g(N.anchor||N.el),B=V&&V[hv];return B?g(B):V};let st=!1;const Wt=(N,V,B)=>{N==null?V._vnode&&_t(V._vnode,null,null,!0):I(V._vnode||null,N,V,null,null,null,B),V._vnode=N,st||(st=!0,em(),sc(),st=!1)},Dt={p:I,um:_t,m:ut,r:Pn,mt:j,mc:T,pc:ne,pbc:w,n:fn,o:n};let rn,on;return e&&([rn,on]=e(Dt)),{render:Wt,hydrate:rn,createApp:YS(Wt,rn)}}function ih({type:n,props:e},t){return t==="svg"&&n==="foreignObject"||t==="mathml"&&n==="annotation-xml"&&e&&e.encoding&&e.encoding.includes("html")?void 0:t}function Us({effect:n,job:e},t){t?(n.flags|=32,e.flags|=4):(n.flags&=-33,e.flags&=-5)}function Hv(n,e){return(!n||n&&!n.pendingBranch)&&e&&!e.persisted}function Xf(n,e,t=!1){const i=n.children,s=e.children;if(ie(i)&&ie(s))for(let r=0;r<i.length;r++){const o=i[r];let a=s[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=s[r]=rs(s[r]),a.el=o.el),!t&&a.patchFlag!==-2&&Xf(o,a)),a.type===ps&&a.patchFlag!==-1&&(a.el=o.el),a.type===pt&&!a.el&&(a.el=o.el)}}function nb(n){const e=n.slice(),t=[0];let i,s,r,o,a;const l=n.length;for(i=0;i<l;i++){const u=n[i];if(u!==0){if(s=t[t.length-1],n[s]<u){e[i]=s,t.push(i);continue}for(r=0,o=t.length-1;r<o;)a=r+o>>1,n[t[a]]<u?r=a+1:o=a;u<n[t[r]]&&(r>0&&(e[i]=t[r-1]),t[r]=i)}}for(r=t.length,o=t[r-1];r-- >0;)t[r]=o,o=e[o];return t}function Gv(n){const e=n.subTree.component;if(e)return e.asyncDep&&!e.asyncResolved?e:Gv(e)}function ac(n){if(n)for(let e=0;e<n.length;e++)n[e].flags|=8}const Wv=Symbol.for("v-scx"),Kv=()=>Wo(Wv);function ib(n,e){return Da(n,null,e)}function sb(n,e){return Da(n,null,{flush:"post"})}function zv(n,e){return Da(n,null,{flush:"sync"})}function Js(n,e,t){return Da(n,e,t)}function Da(n,e,t=Re){const{immediate:i,deep:s,flush:r,once:o}=t,a=Ae({},t),l=e&&i||!e&&r!=="post";let u;if(Jr){if(r==="sync"){const _=Kv();u=_.__watcherHandles||(_.__watcherHandles=[])}else if(!l){const _=()=>{};return _.stop=qt,_.resume=qt,_.pause=qt,_}}const d=Ut;a.call=(_,E,I)=>Fn(_,d,E,I);let p=!1;r==="post"?a.scheduler=_=>{Tt(_,d&&d.suspense)}:r!=="sync"&&(p=!0,a.scheduler=(_,E)=>{E?_():Uf(_)}),a.augmentJob=_=>{e&&(_.flags|=4),p&&(_.flags|=2,d&&(_.id=d.uid,_.i=d))};const g=$A(n,e,a);return Jr&&(u?u.push(g):l&&g()),g}function rb(n,e,t){const i=this.proxy,s=ye(n)?n.includes(".")?Yv(i,n):()=>i[n]:n.bind(i,i);let r;de(e)?r=e:(r=e.handler,t=e);const o=tr(this),a=Da(s,r.bind(i),t);return o(),a}function Yv(n,e){const t=e.split(".");return()=>{let i=n;for(let s=0;s<t.length&&i;s++)i=i[t[s]];return i}}function ob(n,e,t=Re){const i=wn(),s=Xe(e),r=yn(e),o=Jv(n,s),a=iv((l,u)=>{let d,p=Re,g;return zv(()=>{const _=n[s];cn(d,_)&&(d=_,u())}),{get(){return l(),t.get?t.get(d):d},set(_){const E=t.set?t.set(_):_;if(!cn(E,d)&&!(p!==Re&&cn(_,p)))return;const I=i.vnode.props;I&&(e in I||s in I||r in I)&&(`onUpdate:${e}`in I||`onUpdate:${s}`in I||`onUpdate:${r}`in I)||(d=_,u()),i.emit(`update:${e}`,E),cn(_,E)&&cn(_,p)&&!cn(E,g)&&u(),p=_,g=E}}});return a[Symbol.iterator]=()=>{let l=0;return{next(){return l<2?{value:l++?o||Re:a,done:!1}:{done:!0}}}},a}const Jv=(n,e)=>e==="modelValue"||e==="model-value"?n.modelModifiers:n[`${e}Modifiers`]||n[`${Xe(e)}Modifiers`]||n[`${yn(e)}Modifiers`];function ab(n,e,...t){if(n.isUnmounted)return;const i=n.vnode.props||Re;let s=t;const r=e.startsWith("update:"),o=r&&Jv(i,e.slice(7));o&&(o.trim&&(s=t.map(d=>ye(d)?d.trim():d)),o.number&&(s=t.map(Xl)));let a,l=i[a=Ur(e)]||i[a=Ur(Xe(e))];!l&&r&&(l=i[a=Ur(yn(e))]),l&&Fn(l,n,6,s);const u=i[a+"Once"];if(u){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Fn(u,n,6,s)}}const lb=new WeakMap;function Qv(n,e,t=!1){const i=t?lb:e.emitsCache,s=i.get(n);if(s!==void 0)return s;const r=n.emits;let o={},a=!1;if(!de(n)){const l=u=>{const d=Qv(u,e,!0);d&&(a=!0,Ae(o,d))};!t&&e.mixins.length&&e.mixins.forEach(l),n.extends&&l(n.extends),n.mixins&&n.mixins.forEach(l)}return!r&&!a?(Ge(n)&&i.set(n,null),null):(ie(r)?r.forEach(l=>o[l]=null):Ae(o,r),Ge(n)&&i.set(n,o),o)}function hu(n,e){return!n||!ur(e)?!1:(e=e.slice(2).replace(/Once$/,""),Be(n,e[0].toLowerCase()+e.slice(1))||Be(n,yn(e))||Be(n,e))}function xl(n){const{type:e,vnode:t,proxy:i,withProxy:s,propsOptions:[r],slots:o,attrs:a,emit:l,render:u,renderCache:d,props:p,data:g,setupState:_,ctx:E,inheritAttrs:I}=n,k=aa(n);let D,M;try{if(t.shapeFlag&4){const x=s||i,L=x;D=gn(u.call(L,x,d,p,_,g,E)),M=a}else{const x=e;D=gn(x.length>1?x(p,{attrs:a,slots:o,emit:l}):x(p,null)),M=e.props?a:ub(a)}}catch(x){Ko.length=0,dr(x,n,1),D=Qe(pt)}let P=D;if(M&&I!==!1){const x=Object.keys(M),{shapeFlag:L}=P;x.length&&L&7&&(r&&x.some(kf)&&(M=hb(M,r)),P=ui(P,M,!1,!0))}return t.dirs&&(P=ui(P,null,!1,!0),P.dirs=P.dirs?P.dirs.concat(t.dirs):t.dirs),t.transition&&Fi(P,t.transition),D=P,aa(k),D}function cb(n,e=!0){let t;for(let i=0;i<n.length;i++){const s=n[i];if(Ui(s)){if(s.type!==pt||s.children==="v-if"){if(t)return;t=s}}else return}return t}const ub=n=>{let e;for(const t in n)(t==="class"||t==="style"||ur(t))&&((e||(e={}))[t]=n[t]);return e},hb=(n,e)=>{const t={};for(const i in n)(!kf(i)||!(i.slice(9)in e))&&(t[i]=n[i]);return t};function fb(n,e,t){const{props:i,children:s,component:r}=n,{props:o,children:a,patchFlag:l}=e,u=r.emitsOptions;if(e.dirs||e.transition)return!0;if(t&&l>=0){if(l&1024)return!0;if(l&16)return i?dm(i,o,u):!!o;if(l&8){const d=e.dynamicProps;for(let p=0;p<d.length;p++){const g=d[p];if(o[g]!==i[g]&&!hu(u,g))return!0}}}else return(s||a)&&(!a||!a.$stable)?!0:i===o?!1:i?o?dm(i,o,u):!0:!!o;return!1}function dm(n,e,t){const i=Object.keys(e);if(i.length!==Object.keys(n).length)return!0;for(let s=0;s<i.length;s++){const r=i[s];if(e[r]!==n[r]&&!hu(t,r))return!0}return!1}function fu({vnode:n,parent:e},t){for(;e;){const i=e.subTree;if(i.suspense&&i.suspense.activeBranch===n&&(i.el=n.el),i===n)(n=e.vnode).el=t,e=e.parent;else break}}const lc=n=>n.__isSuspense;let Vh=0;const db={name:"Suspense",__isSuspense:!0,process(n,e,t,i,s,r,o,a,l,u){if(n==null)mb(e,t,i,s,r,o,a,l,u);else{if(r&&r.deps>0&&!n.suspense.isInFallback){e.suspense=n.suspense,e.suspense.vnode=e,e.el=n.el;return}gb(n,e,t,i,s,o,a,l,u)}},hydrate:yb,normalize:_b},pb=db;function ca(n,e){const t=n.props&&n.props[e];de(t)&&t()}function mb(n,e,t,i,s,r,o,a,l){const{p:u,o:{createElement:d}}=l,p=d("div"),g=n.suspense=Xv(n,s,i,e,p,t,r,o,a,l);u(null,g.pendingBranch=n.ssContent,p,null,i,g,r,o),g.deps>0?(ca(n,"onPending"),ca(n,"onFallback"),u(null,n.ssFallback,e,t,i,null,r,o),Hr(g,n.ssFallback)):g.resolve(!1,!0)}function gb(n,e,t,i,s,r,o,a,{p:l,um:u,o:{createElement:d}}){const p=e.suspense=n.suspense;p.vnode=e,e.el=n.el;const g=e.ssContent,_=e.ssFallback,{activeBranch:E,pendingBranch:I,isInFallback:k,isHydrating:D}=p;if(I)p.pendingBranch=g,qn(I,g)?(l(I,g,p.hiddenContainer,null,s,p,r,o,a),p.deps<=0?p.resolve():k&&(D||(l(E,_,t,i,s,null,r,o,a),Hr(p,_)))):(p.pendingId=Vh++,D?(p.isHydrating=!1,p.activeBranch=I):u(I,s,p),p.deps=0,p.effects.length=0,p.hiddenContainer=d("div"),k?(l(null,g,p.hiddenContainer,null,s,p,r,o,a),p.deps<=0?p.resolve():(l(E,_,t,i,s,null,r,o,a),Hr(p,_))):E&&qn(E,g)?(l(E,g,t,i,s,p,r,o,a),p.resolve(!0)):(l(null,g,p.hiddenContainer,null,s,p,r,o,a),p.deps<=0&&p.resolve()));else if(E&&qn(E,g))l(E,g,t,i,s,p,r,o,a),Hr(p,g);else if(ca(e,"onPending"),p.pendingBranch=g,g.shapeFlag&512?p.pendingId=g.component.suspenseId:p.pendingId=Vh++,l(null,g,p.hiddenContainer,null,s,p,r,o,a),p.deps<=0)p.resolve();else{const{timeout:M,pendingId:P}=p;M>0?setTimeout(()=>{p.pendingId===P&&p.fallback(_)},M):M===0&&p.fallback(_)}}function Xv(n,e,t,i,s,r,o,a,l,u,d=!1){const{p,m:g,um:_,n:E,o:{parentNode:I,remove:k}}=u;let D;const M=vb(n);M&&e&&e.pendingBranch&&(D=e.pendingId,e.deps++);const P=n.props?jl(n.props.timeout):void 0,x=r,L={vnode:n,parent:e,parentComponent:t,namespace:o,container:i,hiddenContainer:s,deps:0,pendingId:Vh++,timeout:typeof P=="number"?P:-1,activeBranch:null,pendingBranch:null,isInFallback:!d,isHydrating:d,isUnmounted:!1,effects:[],resolve(F=!1,R=!1){const{vnode:T,activeBranch:v,pendingBranch:w,pendingId:b,effects:S,parentComponent:A,container:j}=L;let oe=!1;L.isHydrating?L.isHydrating=!1:F||(oe=v&&w.transition&&w.transition.mode==="out-in",oe&&(v.transition.afterLeave=()=>{b===L.pendingId&&(g(w,j,r===x?E(v):r,0),ra(S))}),v&&(I(v.el)===j&&(r=E(v)),_(v,A,L,!0)),oe||g(w,j,r,0)),Hr(L,w),L.pendingBranch=null,L.isInFallback=!1;let ee=L.parent,ce=!1;for(;ee;){if(ee.pendingBranch){ee.effects.push(...S),ce=!0;break}ee=ee.parent}!ce&&!oe&&ra(S),L.effects=[],M&&e&&e.pendingBranch&&D===e.pendingId&&(e.deps--,e.deps===0&&!R&&e.resolve()),ca(T,"onResolve")},fallback(F){if(!L.pendingBranch)return;const{vnode:R,activeBranch:T,parentComponent:v,container:w,namespace:b}=L;ca(R,"onFallback");const S=E(T),A=()=>{L.isInFallback&&(p(null,F,w,S,v,null,b,a,l),Hr(L,F))},j=F.transition&&F.transition.mode==="out-in";j&&(T.transition.afterLeave=A),L.isInFallback=!0,_(T,v,null,!0),j||A()},move(F,R,T){L.activeBranch&&g(L.activeBranch,F,R,T),L.container=F},next(){return L.activeBranch&&E(L.activeBranch)},registerDep(F,R,T){const v=!!L.pendingBranch;v&&L.deps++;const w=F.vnode.el;F.asyncDep.catch(b=>{dr(b,F,0)}).then(b=>{if(F.isUnmounted||L.isUnmounted||L.pendingId!==F.suspenseId)return;F.asyncResolved=!0;const{vnode:S}=F;Fh(F,b,!1),w&&(S.el=w);const A=!w&&F.subTree.el;R(F,S,I(w||F.subTree.el),w?null:E(F.subTree),L,o,T),A&&k(A),fu(F,S.el),v&&--L.deps===0&&L.resolve()})},unmount(F,R){L.isUnmounted=!0,L.activeBranch&&_(L.activeBranch,t,F,R),L.pendingBranch&&_(L.pendingBranch,t,F,R)}};return L}function yb(n,e,t,i,s,r,o,a,l){const u=e.suspense=Xv(e,i,t,n.parentNode,document.createElement("div"),null,s,r,o,a,!0),d=l(n,u.pendingBranch=e.ssContent,t,u,r,o);return u.deps===0&&u.resolve(!1,!0),d}function _b(n){const{shapeFlag:e,children:t}=n,i=e&32;n.ssContent=pm(i?t.default:t),n.ssFallback=i?pm(t.fallback):Qe(pt)}function pm(n){let e;if(de(n)){const t=er&&n._c;t&&(n._d=!1,ua()),n=n(),t&&(n._d=!0,e=tn,Zv())}return ie(n)&&(n=cb(n)),n=gn(n),e&&!n.dynamicChildren&&(n.dynamicChildren=e.filter(t=>t!==n)),n}function jv(n,e){e&&e.pendingBranch?ie(n)?e.effects.push(...n):e.effects.push(n):ra(n)}function Hr(n,e){n.activeBranch=e;const{vnode:t,parentComponent:i}=n;let s=e.el;for(;!s&&e.component;)e=e.component.subTree,s=e.el;t.el=s,i&&i.subTree===t&&(i.vnode.el=s,fu(i,s))}function vb(n){const e=n.props&&n.props.suspensible;return e!=null&&e!==!1}const Pt=Symbol.for("v-fgt"),ps=Symbol.for("v-txt"),pt=Symbol.for("v-cmt"),Qs=Symbol.for("v-stc"),Ko=[];let tn=null;function ua(n=!1){Ko.push(tn=n?null:[])}function Zv(){Ko.pop(),tn=Ko[Ko.length-1]||null}let er=1;function ha(n,e=!1){er+=n,n<0&&tn&&e&&(tn.hasOnce=!0)}function eT(n){return n.dynamicChildren=er>0?tn||Or:null,Zv(),er>0&&tn&&tn.push(n),n}function Tb(n,e,t,i,s,r){return eT(jf(n,e,t,i,s,r,!0))}function cc(n,e,t,i,s){return eT(Qe(n,e,t,i,s,!0))}function Ui(n){return n?n.__v_isVNode===!0:!1}function qn(n,e){return n.type===e.type&&n.key===e.key}function Eb(n){}const tT=({key:n})=>n??null,Nl=({ref:n,ref_key:e,ref_for:t})=>(typeof n=="number"&&(n=""+n),n!=null?ye(n)||It(n)||de(n)?{i:$t,r:n,k:e,f:!!t}:n:null);function jf(n,e=null,t=null,i=0,s=null,r=n===Pt?0:1,o=!1,a=!1){const l={__v_isVNode:!0,__v_skip:!0,type:n,props:e,key:e&&tT(e),ref:e&&Nl(e),scopeId:ou,slotScopeIds:null,children:t,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:i,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:$t};return a?(ed(l,t),r&128&&n.normalize(l)):t&&(l.shapeFlag|=ye(t)?8:16),er>0&&!o&&tn&&(l.patchFlag>0||r&6)&&l.patchFlag!==32&&tn.push(l),l}const Qe=wb;function wb(n,e=null,t=null,i=0,s=null,r=!1){if((!n||n===bv)&&(n=pt),Ui(n)){const a=ui(n,e,!0);return t&&ed(a,t),er>0&&!r&&tn&&(a.shapeFlag&6?tn[tn.indexOf(n)]=a:tn.push(a)),a.patchFlag=-2,a}if(kb(n)&&(n=n.__vccOpts),e){e=nT(e);let{class:a,style:l}=e;a&&!ye(a)&&(e.class=Pa(a)),Ge(l)&&(su(l)&&!ie(l)&&(l=Ae({},l)),e.style=Ra(l))}const o=ye(n)?1:lc(n)?128:fv(n)?64:Ge(n)?4:de(n)?2:0;return jf(n,e,t,i,s,o,r,!0)}function nT(n){return n?su(n)||Mv(n)?Ae({},n):n:null}function ui(n,e,t=!1,i=!1){const{props:s,ref:r,patchFlag:o,children:a,transition:l}=n,u=e?iT(s||{},e):s,d={__v_isVNode:!0,__v_skip:!0,type:n.type,props:u,key:u&&tT(u),ref:e&&e.ref?t&&r?ie(r)?r.concat(Nl(e)):[r,Nl(e)]:Nl(e):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:e&&n.type!==Pt?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:l,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&ui(n.ssContent),ssFallback:n.ssFallback&&ui(n.ssFallback),placeholder:n.placeholder,el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return l&&i&&Fi(d,l.clone(d)),d}function Zf(n=" ",e=0){return Qe(ps,null,n,e)}function Ib(n,e){const t=Qe(Qs,null,n);return t.staticCount=e,t}function Cb(n="",e=!1){return e?(ua(),cc(pt,null,n)):Qe(pt,null,n)}function gn(n){return n==null||typeof n=="boolean"?Qe(pt):ie(n)?Qe(Pt,null,n.slice()):Ui(n)?rs(n):Qe(ps,null,String(n))}function rs(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:ui(n)}function ed(n,e){let t=0;const{shapeFlag:i}=n;if(e==null)e=null;else if(ie(e))t=16;else if(typeof e=="object")if(i&65){const s=e.default;s&&(s._c&&(s._d=!1),ed(n,s()),s._c&&(s._d=!0));return}else{t=32;const s=e._;!s&&!Mv(e)?e._ctx=$t:s===3&&$t&&($t.slots._===1?e._=1:(e._=2,n.patchFlag|=1024))}else de(e)?(e={default:e,_ctx:$t},t=32):(e=String(e),i&64?(t=16,e=[Zf(e)]):t=8);n.children=e,n.shapeFlag|=t}function iT(...n){const e={};for(let t=0;t<n.length;t++){const i=n[t];for(const s in i)if(s==="class")e.class!==i.class&&(e.class=Pa([e.class,i.class]));else if(s==="style")e.style=Ra([e.style,i.style]);else if(ur(s)){const r=e[s],o=i[s];o&&r!==o&&!(ie(r)&&r.includes(o))&&(e[s]=r?[].concat(r,o):o)}else s!==""&&(e[s]=i[s])}return e}function pn(n,e,t,i=null){Fn(n,e,7,[t,i])}const Ab=kv();let Sb=0;function sT(n,e,t){const i=n.type,s=(e?e.appContext:n.appContext)||Ab,r={uid:Sb++,vnode:n,type:i,parent:e,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mf(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:e?e.provides:Object.create(s.provides),ids:e?e.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Lv(i,s),emitsOptions:Qv(i,s),emit:null,emitted:null,propsDefaults:Re,inheritAttrs:i.inheritAttrs,ctx:Re,data:Re,props:Re,attrs:Re,slots:Re,refs:Re,setupState:Re,setupContext:null,suspense:t,suspenseId:t?t.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=e?e.root:r,r.emit=ab.bind(null,r),n.ce&&n.ce(r),r}let Ut=null;const wn=()=>Ut||$t;let uc,Lh;{const n=jc(),e=(t,i)=>{let s;return(s=n[t])||(s=n[t]=[]),s.push(i),r=>{s.length>1?s.forEach(o=>o(r)):s[0](r)}};uc=e("__VUE_INSTANCE_SETTERS__",t=>Ut=t),Lh=e("__VUE_SSR_SETTERS__",t=>Jr=t)}const tr=n=>{const e=Ut;return uc(n),n.scope.on(),()=>{n.scope.off(),uc(e)}},Oh=()=>{Ut&&Ut.scope.off(),uc(null)};function rT(n){return n.vnode.shapeFlag&4}let Jr=!1;function oT(n,e=!1,t=!1){e&&Lh(e);const{props:i,children:s}=n.vnode,r=rT(n);QS(n,i,r,e),eb(n,s,t||e);const o=r?bb(n,e):void 0;return e&&Lh(!1),o}function bb(n,e){const t=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,xh);const{setup:i}=t;if(i){Vi();const s=n.setupContext=i.length>1?cT(n):null,r=tr(n),o=ho(i,n,0,[n.props,s]),a=Nf(o);if(Li(),r(),(a||n.sp)&&!ds(n)&&Hf(n),a){if(o.then(Oh,Oh),e)return o.then(l=>{Fh(n,l,e)}).catch(l=>{dr(l,n,0)});n.asyncDep=o}else Fh(n,o,e)}else lT(n,e)}function Fh(n,e,t){de(e)?n.type.__ssrInlineRender?n.ssrRender=e:n.render=e:Ge(e)&&(n.setupState=Ff(e)),lT(n,t)}let hc,Uh;function aT(n){hc=n,Uh=e=>{e.render._rc&&(e.withProxy=new Proxy(e.ctx,RS))}}const Rb=()=>!hc;function lT(n,e,t){const i=n.type;if(!n.render){if(!e&&hc&&!i.render){const s=i.template||Yf(n).template;if(s){const{isCustomElement:r,compilerOptions:o}=n.appContext.config,{delimiters:a,compilerOptions:l}=i,u=Ae(Ae({isCustomElement:r,delimiters:a},o),l);i.render=hc(s,u)}}n.render=i.render||qt,Uh&&Uh(n)}{const s=tr(n);Vi();try{qS(n)}finally{Li(),s()}}}const Pb={get(n,e){return Zt(n,"get",""),n[e]}};function cT(n){const e=t=>{n.exposed=t||{}};return{attrs:new Proxy(n.attrs,Pb),slots:n.slots,emit:n.emit,expose:e}}function Ma(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(Ff(ev(n.exposed)),{get(e,t){if(t in e)return e[t];if(t in Go)return Go[t](n)},has(e,t){return t in e||t in Go}})):n.proxy}function Bh(n,e=!0){return de(n)?n.displayName||n.name:n.name||e&&n.__name}function kb(n){return de(n)&&"__vccOpts"in n}const Rt=(n,e)=>OA(n,e,Jr);function uT(n,e,t){try{ha(-1);const i=arguments.length;return i===2?Ge(e)&&!ie(e)?Ui(e)?Qe(n,null,[e]):Qe(n,e):Qe(n,null,e):(i>3?t=Array.prototype.slice.call(arguments,2):i===3&&Ui(t)&&(t=[t]),Qe(n,e,t))}finally{ha(1)}}function xb(){}function Nb(n,e,t,i){const s=t[i];if(s&&hT(s,n))return s;const r=e();return r.memo=n.slice(),r.cacheIndex=i,t[i]=r}function hT(n,e){const t=n.memo;if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(cn(t[i],e[i]))return!1;return er>0&&tn&&tn.push(n),!0}const fT="3.5.22",Db=qt,Mb=KA,Vb=Pr,Lb=uv,Ob={createComponentInstance:sT,setupComponent:oT,renderComponentRoot:xl,setCurrentRenderingInstance:aa,isVNode:Ui,normalizeVNode:gn,getComponentPublicInstance:Ma,ensureValidVNode:zf,pushWarningContext:qA,popWarningContext:HA},Fb=Ob,Ub=null,Bb=null,$b=null;/**
* @vue/runtime-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let $h;const mm=typeof window<"u"&&window.trustedTypes;if(mm)try{$h=mm.createPolicy("vue",{createHTML:n=>n})}catch{}const dT=$h?n=>$h.createHTML(n):n=>n,qb="http://www.w3.org/2000/svg",Hb="http://www.w3.org/1998/Math/MathML",Ci=typeof document<"u"?document:null,gm=Ci&&Ci.createElement("template"),Gb={insert:(n,e,t)=>{e.insertBefore(n,t||null)},remove:n=>{const e=n.parentNode;e&&e.removeChild(n)},createElement:(n,e,t,i)=>{const s=e==="svg"?Ci.createElementNS(qb,n):e==="mathml"?Ci.createElementNS(Hb,n):t?Ci.createElement(n,{is:t}):Ci.createElement(n);return n==="select"&&i&&i.multiple!=null&&s.setAttribute("multiple",i.multiple),s},createText:n=>Ci.createTextNode(n),createComment:n=>Ci.createComment(n),setText:(n,e)=>{n.nodeValue=e},setElementText:(n,e)=>{n.textContent=e},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Ci.querySelector(n),setScopeId(n,e){n.setAttribute(e,"")},insertStaticContent(n,e,t,i,s,r){const o=t?t.previousSibling:e.lastChild;if(s&&(s===r||s.nextSibling))for(;e.insertBefore(s.cloneNode(!0),t),!(s===r||!(s=s.nextSibling)););else{gm.innerHTML=dT(i==="svg"?`<svg>${n}</svg>`:i==="mathml"?`<math>${n}</math>`:n);const a=gm.content;if(i==="svg"||i==="mathml"){const l=a.firstChild;for(;l.firstChild;)a.appendChild(l.firstChild);a.removeChild(l)}e.insertBefore(a,t)}return[o?o.nextSibling:e.firstChild,t?t.previousSibling:e.lastChild]}},Zi="transition",ko="animation",Qr=Symbol("_vtc"),pT={name:String,type:String,css:{type:Boolean,default:!0},duration:[String,Number,Object],enterFromClass:String,enterActiveClass:String,enterToClass:String,appearFromClass:String,appearActiveClass:String,appearToClass:String,leaveFromClass:String,leaveActiveClass:String,leaveToClass:String},mT=Ae({},qf,pT),Wb=n=>(n.displayName="Transition",n.props=mT,n),Kb=Wb((n,{slots:e})=>uT(yv,gT(n),e)),Bs=(n,e=[])=>{ie(n)?n.forEach(t=>t(...e)):n&&n(...e)},ym=n=>n?ie(n)?n.some(e=>e.length>1):n.length>1:!1;function gT(n){const e={};for(const S in n)S in pT||(e[S]=n[S]);if(n.css===!1)return e;const{name:t="v",type:i,duration:s,enterFromClass:r=`${t}-enter-from`,enterActiveClass:o=`${t}-enter-active`,enterToClass:a=`${t}-enter-to`,appearFromClass:l=r,appearActiveClass:u=o,appearToClass:d=a,leaveFromClass:p=`${t}-leave-from`,leaveActiveClass:g=`${t}-leave-active`,leaveToClass:_=`${t}-leave-to`}=n,E=zb(s),I=E&&E[0],k=E&&E[1],{onBeforeEnter:D,onEnter:M,onEnterCancelled:P,onLeave:x,onLeaveCancelled:L,onBeforeAppear:F=D,onAppear:R=M,onAppearCancelled:T=P}=e,v=(S,A,j,oe)=>{S._enterCancelled=oe,ns(S,A?d:a),ns(S,A?u:o),j&&j()},w=(S,A)=>{S._isLeaving=!1,ns(S,p),ns(S,_),ns(S,g),A&&A()},b=S=>(A,j)=>{const oe=S?R:M,ee=()=>v(A,S,j);Bs(oe,[A,ee]),_m(()=>{ns(A,S?l:r),Zn(A,S?d:a),ym(oe)||vm(A,i,I,ee)})};return Ae(e,{onBeforeEnter(S){Bs(D,[S]),Zn(S,r),Zn(S,o)},onBeforeAppear(S){Bs(F,[S]),Zn(S,l),Zn(S,u)},onEnter:b(!1),onAppear:b(!0),onLeave(S,A){S._isLeaving=!0;const j=()=>w(S,A);Zn(S,p),S._enterCancelled?(Zn(S,g),qh(S)):(qh(S),Zn(S,g)),_m(()=>{S._isLeaving&&(ns(S,p),Zn(S,_),ym(x)||vm(S,i,k,j))}),Bs(x,[S,j])},onEnterCancelled(S){v(S,!1,void 0,!0),Bs(P,[S])},onAppearCancelled(S){v(S,!0,void 0,!0),Bs(T,[S])},onLeaveCancelled(S){w(S),Bs(L,[S])}})}function zb(n){if(n==null)return null;if(Ge(n))return[sh(n.enter),sh(n.leave)];{const e=sh(n);return[e,e]}}function sh(n){return jl(n)}function Zn(n,e){e.split(/\s+/).forEach(t=>t&&n.classList.add(t)),(n[Qr]||(n[Qr]=new Set)).add(e)}function ns(n,e){e.split(/\s+/).forEach(i=>i&&n.classList.remove(i));const t=n[Qr];t&&(t.delete(e),t.size||(n[Qr]=void 0))}function _m(n){requestAnimationFrame(()=>{requestAnimationFrame(n)})}let Yb=0;function vm(n,e,t,i){const s=n._endId=++Yb,r=()=>{s===n._endId&&i()};if(t!=null)return setTimeout(r,t);const{type:o,timeout:a,propCount:l}=yT(n,e);if(!o)return i();const u=o+"end";let d=0;const p=()=>{n.removeEventListener(u,g),r()},g=_=>{_.target===n&&++d>=l&&p()};setTimeout(()=>{d<l&&p()},a+1),n.addEventListener(u,g)}function yT(n,e){const t=window.getComputedStyle(n),i=E=>(t[E]||"").split(", "),s=i(`${Zi}Delay`),r=i(`${Zi}Duration`),o=Tm(s,r),a=i(`${ko}Delay`),l=i(`${ko}Duration`),u=Tm(a,l);let d=null,p=0,g=0;e===Zi?o>0&&(d=Zi,p=o,g=r.length):e===ko?u>0&&(d=ko,p=u,g=l.length):(p=Math.max(o,u),d=p>0?o>u?Zi:ko:null,g=d?d===Zi?r.length:l.length:0);const _=d===Zi&&/\b(?:transform|all)(?:,|$)/.test(i(`${Zi}Property`).toString());return{type:d,timeout:p,propCount:g,hasTransform:_}}function Tm(n,e){for(;n.length<e.length;)n=n.concat(n);return Math.max(...e.map((t,i)=>Em(t)+Em(n[i])))}function Em(n){return n==="auto"?0:Number(n.slice(0,-1).replace(",","."))*1e3}function qh(n){return(n?n.ownerDocument:document).body.offsetHeight}function Jb(n,e,t){const i=n[Qr];i&&(e=(e?[e,...i]:[...i]).join(" ")),e==null?n.removeAttribute("class"):t?n.setAttribute("class",e):n.className=e}const fc=Symbol("_vod"),_T=Symbol("_vsh"),vT={name:"show",beforeMount(n,{value:e},{transition:t}){n[fc]=n.style.display==="none"?"":n.style.display,t&&e?t.beforeEnter(n):xo(n,e)},mounted(n,{value:e},{transition:t}){t&&e&&t.enter(n)},updated(n,{value:e,oldValue:t},{transition:i}){!e!=!t&&(i?e?(i.beforeEnter(n),xo(n,!0),i.enter(n)):i.leave(n,()=>{xo(n,!1)}):xo(n,e))},beforeUnmount(n,{value:e}){xo(n,e)}};function xo(n,e){n.style.display=e?n[fc]:"none",n[_T]=!e}function Qb(){vT.getSSRProps=({value:n})=>{if(!n)return{style:{display:"none"}}}}const TT=Symbol("");function Xb(n){const e=wn();if(!e)return;const t=e.ut=(s=n(e.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${e.uid}"]`)).forEach(r=>dc(r,s))},i=()=>{const s=n(e.proxy);e.ce?dc(e.ce,s):Hh(e.subTree,s),t(s)};Gf(()=>{ra(i)}),pi(()=>{Js(i,qt,{flush:"post"});const s=new MutationObserver(i);s.observe(e.subTree.el.parentNode,{childList:!0}),xs(()=>s.disconnect())})}function Hh(n,e){if(n.shapeFlag&128){const t=n.suspense;n=t.activeBranch,t.pendingBranch&&!t.isHydrating&&t.effects.push(()=>{Hh(t.activeBranch,e)})}for(;n.component;)n=n.component.subTree;if(n.shapeFlag&1&&n.el)dc(n.el,e);else if(n.type===Pt)n.children.forEach(t=>Hh(t,e));else if(n.type===Qs){let{el:t,anchor:i}=n;for(;t&&(dc(t,e),t!==i);)t=t.nextSibling}}function dc(n,e){if(n.nodeType===1){const t=n.style;let i="";for(const s in e){const r=nA(e[s]);t.setProperty(`--${s}`,r),i+=`--${s}: ${r};`}t[TT]=i}}const jb=/(?:^|;)\s*display\s*:/;function Zb(n,e,t){const i=n.style,s=ye(t);let r=!1;if(t&&!s){if(e)if(ye(e))for(const o of e.split(";")){const a=o.slice(0,o.indexOf(":")).trim();t[a]==null&&Dl(i,a,"")}else for(const o in e)t[o]==null&&Dl(i,o,"");for(const o in t)o==="display"&&(r=!0),Dl(i,o,t[o])}else if(s){if(e!==t){const o=i[TT];o&&(t+=";"+o),i.cssText=t,r=jb.test(t)}}else e&&n.removeAttribute("style");fc in n&&(n[fc]=r?i.display:"",n[_T]&&(i.display="none"))}const wm=/\s*!important$/;function Dl(n,e,t){if(ie(t))t.forEach(i=>Dl(n,e,i));else if(t==null&&(t=""),e.startsWith("--"))n.setProperty(e,t);else{const i=e0(n,e);wm.test(t)?n.setProperty(yn(i),t.replace(wm,""),"important"):n[i]=t}}const Im=["Webkit","Moz","ms"],rh={};function e0(n,e){const t=rh[e];if(t)return t;let i=Xe(e);if(i!=="filter"&&i in n)return rh[e]=i;i=fr(i);for(let s=0;s<Im.length;s++){const r=Im[s]+i;if(r in n)return rh[e]=r}return e}const Cm="http://www.w3.org/1999/xlink";function Am(n,e,t,i,s,r=eA(e)){i&&e.startsWith("xlink:")?t==null?n.removeAttributeNS(Cm,e.slice(6,e.length)):n.setAttributeNS(Cm,e,t):t==null||r&&!D_(t)?n.removeAttribute(e):n.setAttribute(e,r?"":En(t)?String(t):t)}function Sm(n,e,t,i,s){if(e==="innerHTML"||e==="textContent"){t!=null&&(n[e]=e==="innerHTML"?dT(t):t);return}const r=n.tagName;if(e==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,l=t==null?n.type==="checkbox"?"on":"":String(t);(a!==l||!("_value"in n))&&(n.value=l),t==null&&n.removeAttribute(e),n._value=t;return}let o=!1;if(t===""||t==null){const a=typeof n[e];a==="boolean"?t=D_(t):t==null&&a==="string"?(t="",o=!0):a==="number"&&(t=0,o=!0)}try{n[e]=t}catch{}o&&n.removeAttribute(s||e)}function Ri(n,e,t,i){n.addEventListener(e,t,i)}function t0(n,e,t,i){n.removeEventListener(e,t,i)}const bm=Symbol("_vei");function n0(n,e,t,i,s=null){const r=n[bm]||(n[bm]={}),o=r[e];if(i&&o)o.value=i;else{const[a,l]=i0(e);if(i){const u=r[e]=o0(i,s);Ri(n,a,u,l)}else o&&(t0(n,a,o,l),r[e]=void 0)}}const Rm=/(?:Once|Passive|Capture)$/;function i0(n){let e;if(Rm.test(n)){e={};let i;for(;i=n.match(Rm);)n=n.slice(0,n.length-i[0].length),e[i[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):yn(n.slice(2)),e]}let oh=0;const s0=Promise.resolve(),r0=()=>oh||(s0.then(()=>oh=0),oh=Date.now());function o0(n,e){const t=i=>{if(!i._vts)i._vts=Date.now();else if(i._vts<=t.attached)return;Fn(a0(i,t.value),e,5,[i])};return t.value=n,t.attached=r0(),t}function a0(n,e){if(ie(e)){const t=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{t.call(n),n._stopped=!0},e.map(i=>s=>!s._stopped&&i&&i(s))}else return e}const Pm=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,l0=(n,e,t,i,s,r)=>{const o=s==="svg";e==="class"?Jb(n,i,o):e==="style"?Zb(n,t,i):ur(e)?kf(e)||n0(n,e,t,i,r):(e[0]==="."?(e=e.slice(1),!0):e[0]==="^"?(e=e.slice(1),!1):c0(n,e,i,o))?(Sm(n,e,i),!n.tagName.includes("-")&&(e==="value"||e==="checked"||e==="selected")&&Am(n,e,i,o,r,e!=="value")):n._isVueCE&&(/[A-Z]/.test(e)||!ye(i))?Sm(n,Xe(e),i,r,e):(e==="true-value"?n._trueValue=i:e==="false-value"&&(n._falseValue=i),Am(n,e,i,o))};function c0(n,e,t,i){if(i)return!!(e==="innerHTML"||e==="textContent"||e in n&&Pm(e)&&de(t));if(e==="spellcheck"||e==="draggable"||e==="translate"||e==="autocorrect"||e==="form"||e==="list"&&n.tagName==="INPUT"||e==="type"&&n.tagName==="TEXTAREA")return!1;if(e==="width"||e==="height"){const s=n.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Pm(e)&&ye(t)?!1:e in n}const km={};function ET(n,e,t){let i=ks(n,e);Qc(i)&&(i=Ae({},i,e));class s extends du{constructor(o){super(i,o,t)}}return s.def=i,s}const u0=((n,e)=>ET(n,e,DT)),h0=typeof HTMLElement<"u"?HTMLElement:class{};class du extends h0{constructor(e,t={},i=gc){super(),this._def=e,this._props=t,this._createApp=i,this._isVueCE=!0,this._instance=null,this._app=null,this._nonce=this._def.nonce,this._connected=!1,this._resolved=!1,this._numberProps=null,this._styleChildren=new WeakSet,this._ob=null,this.shadowRoot&&i!==gc?this._root=this.shadowRoot:e.shadowRoot!==!1?(this.attachShadow(Ae({},e.shadowRootOptions,{mode:"open"})),this._root=this.shadowRoot):this._root=this}connectedCallback(){if(!this.isConnected)return;!this.shadowRoot&&!this._resolved&&this._parseSlots(),this._connected=!0;let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof du){this._parent=e;break}this._instance||(this._resolved?this._mount(this._def):e&&e._pendingResolve?this._pendingResolve=e._pendingResolve.then(()=>{this._pendingResolve=void 0,this._resolveDef()}):this._resolveDef())}_setParent(e=this._parent){e&&(this._instance.parent=e._instance,this._inheritParentContext(e))}_inheritParentContext(e=this._parent){e&&this._app&&Object.setPrototypeOf(this._app._context.provides,e._instance.provides)}disconnectedCallback(){this._connected=!1,xa(()=>{this._connected||(this._ob&&(this._ob.disconnect(),this._ob=null),this._app&&this._app.unmount(),this._instance&&(this._instance.ce=void 0),this._app=this._instance=null,this._teleportTargets&&(this._teleportTargets.clear(),this._teleportTargets=void 0))})}_processMutations(e){for(const t of e)this._setAttr(t.attributeName)}_resolveDef(){if(this._pendingResolve)return;for(let i=0;i<this.attributes.length;i++)this._setAttr(this.attributes[i].name);this._ob=new MutationObserver(this._processMutations.bind(this)),this._ob.observe(this,{attributes:!0});const e=(i,s=!1)=>{this._resolved=!0,this._pendingResolve=void 0;const{props:r,styles:o}=i;let a;if(r&&!ie(r))for(const l in r){const u=r[l];(u===Number||u&&u.type===Number)&&(l in this._props&&(this._props[l]=jl(this._props[l])),(a||(a=Object.create(null)))[Xe(l)]=!0)}this._numberProps=a,this._resolveProps(i),this.shadowRoot&&this._applyStyles(o),this._mount(i)},t=this._def.__asyncLoader;t?this._pendingResolve=t().then(i=>{i.configureApp=this._def.configureApp,e(this._def=i,!0)}):e(this._def)}_mount(e){this._app=this._createApp(e),this._inheritParentContext(),e.configureApp&&e.configureApp(this._app),this._app._ceVNode=this._createVNode(),this._app.mount(this._root);const t=this._instance&&this._instance.exposed;if(t)for(const i in t)Be(this,i)||Object.defineProperty(this,i,{get:()=>ru(t[i])})}_resolveProps(e){const{props:t}=e,i=ie(t)?t:Object.keys(t||{});for(const s of Object.keys(this))s[0]!=="_"&&i.includes(s)&&this._setProp(s,this[s]);for(const s of i.map(Xe))Object.defineProperty(this,s,{get(){return this._getProp(s)},set(r){this._setProp(s,r,!0,!0)}})}_setAttr(e){if(e.startsWith("data-v-"))return;const t=this.hasAttribute(e);let i=t?this.getAttribute(e):km;const s=Xe(e);t&&this._numberProps&&this._numberProps[s]&&(i=jl(i)),this._setProp(s,i,!1,!0)}_getProp(e){return this._props[e]}_setProp(e,t,i=!0,s=!1){if(t!==this._props[e]&&(t===km?delete this._props[e]:(this._props[e]=t,e==="key"&&this._app&&(this._app._ceVNode.key=t)),s&&this._instance&&this._update(),i)){const r=this._ob;r&&(this._processMutations(r.takeRecords()),r.disconnect()),t===!0?this.setAttribute(yn(e),""):typeof t=="string"||typeof t=="number"?this.setAttribute(yn(e),t+""):t||this.removeAttribute(yn(e)),r&&r.observe(this,{attributes:!0})}}_update(){const e=this._createVNode();this._app&&(e.appContext=this._app._context),NT(e,this._root)}_createVNode(){const e={};this.shadowRoot||(e.onVnodeMounted=e.onVnodeUpdated=this._renderSlots.bind(this));const t=Qe(this._def,Ae(e,this._props));return this._instance||(t.ce=i=>{this._instance=i,i.ce=this,i.isCE=!0;const s=(r,o)=>{this.dispatchEvent(new CustomEvent(r,Qc(o[0])?Ae({detail:o},o[0]):{detail:o}))};i.emit=(r,...o)=>{s(r,o),yn(r)!==r&&s(yn(r),o)},this._setParent()}),t}_applyStyles(e,t){if(!e)return;if(t){if(t===this._def||this._styleChildren.has(t))return;this._styleChildren.add(t)}const i=this._nonce;for(let s=e.length-1;s>=0;s--){const r=document.createElement("style");i&&r.setAttribute("nonce",i),r.textContent=e[s],this.shadowRoot.prepend(r)}}_parseSlots(){const e=this._slots={};let t;for(;t=this.firstChild;){const i=t.nodeType===1&&t.getAttribute("slot")||"default";(e[i]||(e[i]=[])).push(t),this.removeChild(t)}}_renderSlots(){const e=this._getSlots(),t=this._instance.type.__scopeId;for(let i=0;i<e.length;i++){const s=e[i],r=s.getAttribute("name")||"default",o=this._slots[r],a=s.parentNode;if(o)for(const l of o){if(t&&l.nodeType===1){const u=t+"-s",d=document.createTreeWalker(l,1);l.setAttribute(u,"");let p;for(;p=d.nextNode();)p.setAttribute(u,"")}a.insertBefore(l,s)}else for(;s.firstChild;)a.insertBefore(s.firstChild,s);a.removeChild(s)}}_getSlots(){const e=[this];return this._teleportTargets&&e.push(...this._teleportTargets),e.reduce((t,i)=>(t.push(...Array.from(i.querySelectorAll("slot"))),t),[])}_injectChildStyle(e){this._applyStyles(e.styles,e)}_removeChildStyle(e){}}function wT(n){const e=wn(),t=e&&e.ce;return t||null}function f0(){const n=wT();return n&&n.shadowRoot}function d0(n="$style"){{const e=wn();if(!e)return Re;const t=e.type.__cssModules;if(!t)return Re;const i=t[n];return i||Re}}const IT=new WeakMap,CT=new WeakMap,pc=Symbol("_moveCb"),xm=Symbol("_enterCb"),p0=n=>(delete n.props.mode,n),m0=p0({name:"TransitionGroup",props:Ae({},mT,{tag:String,moveClass:String}),setup(n,{slots:e}){const t=wn(),i=$f();let s,r;return cu(()=>{if(!s.length)return;const o=n.moveClass||`${n.name||"v"}-move`;if(!T0(s[0].el,t.vnode.el,o)){s=[];return}s.forEach(y0),s.forEach(_0);const a=s.filter(v0);qh(t.vnode.el),a.forEach(l=>{const u=l.el,d=u.style;Zn(u,o),d.transform=d.webkitTransform=d.transitionDuration="";const p=u[pc]=g=>{g&&g.target!==u||(!g||g.propertyName.endsWith("transform"))&&(u.removeEventListener("transitionend",p),u[pc]=null,ns(u,o))};u.addEventListener("transitionend",p)}),s=[]}),()=>{const o=Me(n),a=gT(o);let l=o.tag||Pt;if(s=[],r)for(let u=0;u<r.length;u++){const d=r[u];d.el&&d.el instanceof Element&&(s.push(d),Fi(d,Yr(d,a,i,t)),IT.set(d,d.el.getBoundingClientRect()))}r=e.default?au(e.default()):[];for(let u=0;u<r.length;u++){const d=r[u];d.key!=null&&Fi(d,Yr(d,a,i,t))}return Qe(l,null,r)}}}),g0=m0;function y0(n){const e=n.el;e[pc]&&e[pc](),e[xm]&&e[xm]()}function _0(n){CT.set(n,n.el.getBoundingClientRect())}function v0(n){const e=IT.get(n),t=CT.get(n),i=e.left-t.left,s=e.top-t.top;if(i||s){const r=n.el.style;return r.transform=r.webkitTransform=`translate(${i}px,${s}px)`,r.transitionDuration="0s",n}}function T0(n,e,t){const i=n.cloneNode(),s=n[Qr];s&&s.forEach(a=>{a.split(/\s+/).forEach(l=>l&&i.classList.remove(l))}),t.split(/\s+/).forEach(a=>a&&i.classList.add(a)),i.style.display="none";const r=e.nodeType===1?e:e.parentNode;r.appendChild(i);const{hasTransform:o}=yT(i);return r.removeChild(i),o}const ws=n=>{const e=n.props["onUpdate:modelValue"]||!1;return ie(e)?t=>Br(e,t):e};function E0(n){n.target.composing=!0}function Nm(n){const e=n.target;e.composing&&(e.composing=!1,e.dispatchEvent(new Event("input")))}const Ln=Symbol("_assign"),mc={created(n,{modifiers:{lazy:e,trim:t,number:i}},s){n[Ln]=ws(s);const r=i||s.props&&s.props.type==="number";Ri(n,e?"change":"input",o=>{if(o.target.composing)return;let a=n.value;t&&(a=a.trim()),r&&(a=Xl(a)),n[Ln](a)}),t&&Ri(n,"change",()=>{n.value=n.value.trim()}),e||(Ri(n,"compositionstart",E0),Ri(n,"compositionend",Nm),Ri(n,"change",Nm))},mounted(n,{value:e}){n.value=e??""},beforeUpdate(n,{value:e,oldValue:t,modifiers:{lazy:i,trim:s,number:r}},o){if(n[Ln]=ws(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?Xl(n.value):n.value,l=e??"";a!==l&&(document.activeElement===n&&n.type!=="range"&&(i&&e===t||s&&n.value.trim()===l)||(n.value=l))}},td={deep:!0,created(n,e,t){n[Ln]=ws(t),Ri(n,"change",()=>{const i=n._modelValue,s=Xr(n),r=n.checked,o=n[Ln];if(ie(i)){const a=Zc(i,s),l=a!==-1;if(r&&!l)o(i.concat(s));else if(!r&&l){const u=[...i];u.splice(a,1),o(u)}}else if(hr(i)){const a=new Set(i);r?a.add(s):a.delete(s),o(a)}else o(ST(n,r))})},mounted:Dm,beforeUpdate(n,e,t){n[Ln]=ws(t),Dm(n,e,t)}};function Dm(n,{value:e,oldValue:t},i){n._modelValue=e;let s;if(ie(e))s=Zc(e,i.props.value)>-1;else if(hr(e))s=e.has(i.props.value);else{if(e===t)return;s=Es(e,ST(n,!0))}n.checked!==s&&(n.checked=s)}const nd={created(n,{value:e},t){n.checked=Es(e,t.props.value),n[Ln]=ws(t),Ri(n,"change",()=>{n[Ln](Xr(n))})},beforeUpdate(n,{value:e,oldValue:t},i){n[Ln]=ws(i),e!==t&&(n.checked=Es(e,i.props.value))}},AT={deep:!0,created(n,{value:e,modifiers:{number:t}},i){const s=hr(e);Ri(n,"change",()=>{const r=Array.prototype.filter.call(n.options,o=>o.selected).map(o=>t?Xl(Xr(o)):Xr(o));n[Ln](n.multiple?s?new Set(r):r:r[0]),n._assigning=!0,xa(()=>{n._assigning=!1})}),n[Ln]=ws(i)},mounted(n,{value:e}){Mm(n,e)},beforeUpdate(n,e,t){n[Ln]=ws(t)},updated(n,{value:e}){n._assigning||Mm(n,e)}};function Mm(n,e){const t=n.multiple,i=ie(e);if(!(t&&!i&&!hr(e))){for(let s=0,r=n.options.length;s<r;s++){const o=n.options[s],a=Xr(o);if(t)if(i){const l=typeof a;l==="string"||l==="number"?o.selected=e.some(u=>String(u)===String(a)):o.selected=Zc(e,a)>-1}else o.selected=e.has(a);else if(Es(Xr(o),e)){n.selectedIndex!==s&&(n.selectedIndex=s);return}}!t&&n.selectedIndex!==-1&&(n.selectedIndex=-1)}}function Xr(n){return"_value"in n?n._value:n.value}function ST(n,e){const t=e?"_trueValue":"_falseValue";return t in n?n[t]:e}const bT={created(n,e,t){gl(n,e,t,null,"created")},mounted(n,e,t){gl(n,e,t,null,"mounted")},beforeUpdate(n,e,t,i){gl(n,e,t,i,"beforeUpdate")},updated(n,e,t,i){gl(n,e,t,i,"updated")}};function RT(n,e){switch(n){case"SELECT":return AT;case"TEXTAREA":return mc;default:switch(e){case"checkbox":return td;case"radio":return nd;default:return mc}}}function gl(n,e,t,i,s){const o=RT(n.tagName,t.props&&t.props.type)[s];o&&o(n,e,t,i)}function w0(){mc.getSSRProps=({value:n})=>({value:n}),nd.getSSRProps=({value:n},e)=>{if(e.props&&Es(e.props.value,n))return{checked:!0}},td.getSSRProps=({value:n},e)=>{if(ie(n)){if(e.props&&Zc(n,e.props.value)>-1)return{checked:!0}}else if(hr(n)){if(e.props&&n.has(e.props.value))return{checked:!0}}else if(n)return{checked:!0}},bT.getSSRProps=(n,e)=>{if(typeof e.type!="string")return;const t=RT(e.type.toUpperCase(),e.props&&e.props.type);if(t.getSSRProps)return t.getSSRProps(n,e)}}const I0=["ctrl","shift","alt","meta"],C0={stop:n=>n.stopPropagation(),prevent:n=>n.preventDefault(),self:n=>n.target!==n.currentTarget,ctrl:n=>!n.ctrlKey,shift:n=>!n.shiftKey,alt:n=>!n.altKey,meta:n=>!n.metaKey,left:n=>"button"in n&&n.button!==0,middle:n=>"button"in n&&n.button!==1,right:n=>"button"in n&&n.button!==2,exact:(n,e)=>I0.some(t=>n[`${t}Key`]&&!e.includes(t))},A0=(n,e)=>{const t=n._withMods||(n._withMods={}),i=e.join(".");return t[i]||(t[i]=((s,...r)=>{for(let o=0;o<e.length;o++){const a=C0[e[o]];if(a&&a(s,e))return}return n(s,...r)}))},S0={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},b0=(n,e)=>{const t=n._withKeys||(n._withKeys={}),i=e.join(".");return t[i]||(t[i]=(s=>{if(!("key"in s))return;const r=yn(s.key);if(e.some(o=>o===r||S0[o]===r))return n(s)}))},PT=Ae({patchProp:l0},Gb);let zo,Vm=!1;function kT(){return zo||(zo=Bv(PT))}function xT(){return zo=Vm?zo:$v(PT),Vm=!0,zo}const NT=((...n)=>{kT().render(...n)}),R0=((...n)=>{xT().hydrate(...n)}),gc=((...n)=>{const e=kT().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=VT(i);if(!s)return;const r=e._component;!de(r)&&!r.render&&!r.template&&(r.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const o=t(s,!1,MT(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),o},e}),DT=((...n)=>{const e=xT().createApp(...n),{mount:t}=e;return e.mount=i=>{const s=VT(i);if(s)return t(s,!0,MT(s))},e});function MT(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function VT(n){return ye(n)?document.querySelector(n):n}let Lm=!1;const P0=()=>{Lm||(Lm=!0,w0(),Qb())},k0=Object.freeze(Object.defineProperty({__proto__:null,BaseTransition:yv,BaseTransitionPropsValidators:qf,Comment:pt,DeprecationTypes:$b,EffectScope:Mf,ErrorCodes:WA,ErrorTypeStrings:Mb,Fragment:Pt,KeepAlive:_S,ReactiveEffect:na,Static:Qs,Suspense:pb,Teleport:eS,Text:ps,TrackOpTypes:FA,Transition:Kb,TransitionGroup:g0,TriggerOpTypes:UA,VueElement:du,assertNumber:GA,callWithAsyncErrorHandling:Fn,callWithErrorHandling:ho,camelize:Xe,capitalize:fr,cloneVNode:ui,compatUtils:Bb,computed:Rt,createApp:gc,createBlock:cc,createCommentVNode:Cb,createElementBlock:Tb,createElementVNode:jf,createHydrationRenderer:$v,createPropsRestProxy:BS,createRenderer:Bv,createSSRApp:DT,createSlots:AS,createStaticVNode:Ib,createTextVNode:Zf,createVNode:Qe,customRef:iv,defineAsyncComponent:gS,defineComponent:ks,defineCustomElement:ET,defineEmits:kS,defineExpose:xS,defineModel:MS,defineOptions:NS,defineProps:PS,defineSSRCustomElement:u0,defineSlots:DS,devtools:Vb,effect:oA,effectScope:iA,getCurrentInstance:wn,getCurrentScope:O_,getCurrentWatcher:BA,getTransitionRawChildren:au,guardReactiveProps:nT,h:uT,handleError:dr,hasInjectionContext:JS,hydrate:R0,hydrateOnIdle:uS,hydrateOnInteraction:pS,hydrateOnMediaQuery:dS,hydrateOnVisible:fS,initCustomFormatter:xb,initDirectivesForSSR:P0,inject:Wo,isMemoSame:hT,isProxy:su,isReactive:fs,isReadonly:Oi,isRef:It,isRuntimeOnly:Rb,isShallow:Sn,isVNode:Ui,markRaw:ev,mergeDefaults:FS,mergeModels:US,mergeProps:iT,nextTick:xa,normalizeClass:Pa,normalizeProps:GC,normalizeStyle:Ra,onActivated:vv,onBeforeMount:wv,onBeforeUnmount:uu,onBeforeUpdate:Gf,onDeactivated:Tv,onErrorCaptured:Sv,onMounted:pi,onRenderTracked:Av,onRenderTriggered:Cv,onScopeDispose:sA,onServerPrefetch:Iv,onUnmounted:xs,onUpdated:cu,onWatcherCleanup:rv,openBlock:ua,popScopeId:QA,provide:xv,proxyRefs:Ff,pushScopeId:JA,queuePostFlushCb:ra,reactive:ka,readonly:ec,ref:re,registerRuntimeCompiler:aT,render:NT,renderList:CS,renderSlot:SS,resolveComponent:ES,resolveDirective:IS,resolveDynamicComponent:wS,resolveFilter:Ub,resolveTransitionHooks:Yr,setBlockTracking:ha,setDevtoolsHook:Lb,setTransitionHooks:Fi,shallowReactive:Z_,shallowReadonly:SA,shallowRef:tv,ssrContextKey:Wv,ssrUtils:Fb,stop:aA,toDisplayString:V_,toHandlerKey:Ur,toHandlers:bS,toRaw:Me,toRef:VA,toRefs:NA,toValue:PA,transformVNodeArgs:Eb,triggerRef:RA,unref:ru,useAttrs:OS,useCssModule:d0,useCssVars:Xb,useHost:wT,useId:nS,useModel:ob,useSSRContext:Kv,useShadowRoot:f0,useSlots:LS,useTemplateRef:iS,useTransitionState:$f,vModelCheckbox:td,vModelDynamic:bT,vModelRadio:nd,vModelSelect:AT,vModelText:mc,vShow:vT,version:fT,warn:Db,watch:Js,watchEffect:ib,watchPostEffect:sb,watchSyncEffect:zv,withAsyncContext:$S,withCtx:Bf,withDefaults:VS,withDirectives:jA,withKeys:b0,withMemo:Nb,withModifiers:A0,withScopeId:XA},Symbol.toStringTag,{value:"Module"}));/**
* @vue/compiler-core v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const fa=Symbol(""),Yo=Symbol(""),id=Symbol(""),yc=Symbol(""),LT=Symbol(""),nr=Symbol(""),OT=Symbol(""),FT=Symbol(""),sd=Symbol(""),rd=Symbol(""),Va=Symbol(""),od=Symbol(""),UT=Symbol(""),ad=Symbol(""),ld=Symbol(""),cd=Symbol(""),ud=Symbol(""),hd=Symbol(""),fd=Symbol(""),BT=Symbol(""),$T=Symbol(""),pu=Symbol(""),_c=Symbol(""),dd=Symbol(""),pd=Symbol(""),da=Symbol(""),La=Symbol(""),md=Symbol(""),Gh=Symbol(""),x0=Symbol(""),Wh=Symbol(""),vc=Symbol(""),N0=Symbol(""),D0=Symbol(""),gd=Symbol(""),M0=Symbol(""),V0=Symbol(""),yd=Symbol(""),qT=Symbol(""),jr={[fa]:"Fragment",[Yo]:"Teleport",[id]:"Suspense",[yc]:"KeepAlive",[LT]:"BaseTransition",[nr]:"openBlock",[OT]:"createBlock",[FT]:"createElementBlock",[sd]:"createVNode",[rd]:"createElementVNode",[Va]:"createCommentVNode",[od]:"createTextVNode",[UT]:"createStaticVNode",[ad]:"resolveComponent",[ld]:"resolveDynamicComponent",[cd]:"resolveDirective",[ud]:"resolveFilter",[hd]:"withDirectives",[fd]:"renderList",[BT]:"renderSlot",[$T]:"createSlots",[pu]:"toDisplayString",[_c]:"mergeProps",[dd]:"normalizeClass",[pd]:"normalizeStyle",[da]:"normalizeProps",[La]:"guardReactiveProps",[md]:"toHandlers",[Gh]:"camelize",[x0]:"capitalize",[Wh]:"toHandlerKey",[vc]:"setBlockTracking",[N0]:"pushScopeId",[D0]:"popScopeId",[gd]:"withCtx",[M0]:"unref",[V0]:"isRef",[yd]:"withMemo",[qT]:"isMemoSame"};function L0(n){Object.getOwnPropertySymbols(n).forEach(e=>{jr[e]=n[e]})}const Rn={start:{line:1,column:1,offset:0},end:{line:1,column:1,offset:0},source:""};function O0(n,e=""){return{type:0,source:e,children:n,helpers:new Set,components:[],directives:[],hoists:[],imports:[],cached:[],temps:0,codegenNode:void 0,loc:Rn}}function pa(n,e,t,i,s,r,o,a=!1,l=!1,u=!1,d=Rn){return n&&(a?(n.helper(nr),n.helper(to(n.inSSR,u))):n.helper(eo(n.inSSR,u)),o&&n.helper(hd)),{type:13,tag:e,props:t,children:i,patchFlag:s,dynamicProps:r,directives:o,isBlock:a,disableTracking:l,isComponent:u,loc:d}}function Xs(n,e=Rn){return{type:17,loc:e,elements:n}}function Vn(n,e=Rn){return{type:15,loc:e,properties:n}}function gt(n,e){return{type:16,loc:Rn,key:ye(n)?ve(n,!0):n,value:e}}function ve(n,e=!1,t=Rn,i=0){return{type:4,loc:t,content:n,isStatic:e,constType:e?3:i}}function zn(n,e=Rn){return{type:8,loc:e,children:n}}function Et(n,e=[],t=Rn){return{type:14,loc:t,callee:n,arguments:e}}function Zr(n,e=void 0,t=!1,i=!1,s=Rn){return{type:18,params:n,returns:e,newline:t,isSlot:i,loc:s}}function Kh(n,e,t,i=!0){return{type:19,test:n,consequent:e,alternate:t,newline:i,loc:Rn}}function F0(n,e,t=!1,i=!1){return{type:20,index:n,value:e,needPauseTracking:t,inVOnce:i,needArraySpread:!1,loc:Rn}}function U0(n){return{type:21,body:n,loc:Rn}}function eo(n,e){return n||e?sd:rd}function to(n,e){return n||e?OT:FT}function _d(n,{helper:e,removeHelper:t,inSSR:i}){n.isBlock||(n.isBlock=!0,t(eo(i,n.isComponent)),e(nr),e(to(i,n.isComponent)))}const Om=new Uint8Array([123,123]),Fm=new Uint8Array([125,125]);function Um(n){return n>=97&&n<=122||n>=65&&n<=90}function Cn(n){return n===32||n===10||n===9||n===12||n===13}function es(n){return n===47||n===62||Cn(n)}function Tc(n){const e=new Uint8Array(n.length);for(let t=0;t<n.length;t++)e[t]=n.charCodeAt(t);return e}const zt={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97])};class B0{constructor(e,t){this.stack=e,this.cbs=t,this.state=1,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=1,this.inRCDATA=!1,this.inXML=!1,this.inVPre=!1,this.newlines=[],this.mode=0,this.delimiterOpen=Om,this.delimiterClose=Fm,this.delimiterIndex=-1,this.currentSequence=void 0,this.sequenceIndex=0}get inSFCRoot(){return this.mode===2&&this.stack.length===0}reset(){this.state=1,this.mode=0,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=1,this.inRCDATA=!1,this.currentSequence=void 0,this.newlines.length=0,this.delimiterOpen=Om,this.delimiterClose=Fm}getPos(e){let t=1,i=e+1;for(let s=this.newlines.length-1;s>=0;s--){const r=this.newlines[s];if(e>r){t=s+2,i=e-r;break}}return{column:i,line:t,offset:e}}peek(){return this.buffer.charCodeAt(this.index+1)}stateText(e){e===60?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=5,this.sectionStart=this.index):!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e))}stateInterpolationOpen(e){if(e===this.delimiterOpen[this.delimiterIndex])if(this.delimiterIndex===this.delimiterOpen.length-1){const t=this.index+1-this.delimiterOpen.length;t>this.sectionStart&&this.cbs.ontext(this.sectionStart,t),this.state=3,this.sectionStart=t}else this.delimiterIndex++;else this.inRCDATA?(this.state=32,this.stateInRCDATA(e)):(this.state=1,this.stateText(e))}stateInterpolation(e){e===this.delimiterClose[0]&&(this.state=4,this.delimiterIndex=0,this.stateInterpolationClose(e))}stateInterpolationClose(e){e===this.delimiterClose[this.delimiterIndex]?this.delimiterIndex===this.delimiterClose.length-1?(this.cbs.oninterpolation(this.sectionStart,this.index+1),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):this.delimiterIndex++:(this.state=3,this.stateInterpolation(e))}stateSpecialStartSequence(e){const t=this.sequenceIndex===this.currentSequence.length;if(!(t?es(e):(e|32)===this.currentSequence[this.sequenceIndex]))this.inRCDATA=!1;else if(!t){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=6,this.stateInTagName(e)}stateInRCDATA(e){if(this.sequenceIndex===this.currentSequence.length){if(e===62||Cn(e)){const t=this.index-this.currentSequence.length;if(this.sectionStart<t){const i=this.index;this.index=t,this.cbs.ontext(this.sectionStart,t),this.index=i}this.sectionStart=t+2,this.stateInClosingTagName(e),this.inRCDATA=!1;return}this.sequenceIndex=0}(e|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===zt.TitleEnd||this.currentSequence===zt.TextareaEnd&&!this.inSFCRoot?!this.inVPre&&e===this.delimiterOpen[0]&&(this.state=2,this.delimiterIndex=0,this.stateInterpolationOpen(e)):this.fastForwardTo(60)&&(this.sequenceIndex=1):this.sequenceIndex=+(e===60)}stateCDATASequence(e){e===zt.Cdata[this.sequenceIndex]?++this.sequenceIndex===zt.Cdata.length&&(this.state=28,this.currentSequence=zt.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=23,this.stateInDeclaration(e))}fastForwardTo(e){for(;++this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);if(t===10&&this.newlines.push(this.index),t===e)return!0}return this.index=this.buffer.length-1,!1}stateInCommentLike(e){e===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===zt.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index-2):this.cbs.oncomment(this.sectionStart,this.index-2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=1):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):e!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}startSpecial(e,t){this.enterRCDATA(e,t),this.state=31}enterRCDATA(e,t){this.inRCDATA=!0,this.currentSequence=e,this.sequenceIndex=t}stateBeforeTagName(e){e===33?(this.state=22,this.sectionStart=this.index+1):e===63?(this.state=24,this.sectionStart=this.index+1):Um(e)?(this.sectionStart=this.index,this.mode===0?this.state=6:this.inSFCRoot?this.state=34:this.inXML?this.state=6:e===116?this.state=30:this.state=e===115?29:6):e===47?this.state=8:(this.state=1,this.stateText(e))}stateInTagName(e){es(e)&&this.handleTagName(e)}stateInSFCRootTagName(e){if(es(e)){const t=this.buffer.slice(this.sectionStart,this.index);t!=="template"&&this.enterRCDATA(Tc("</"+t),0),this.handleTagName(e)}}handleTagName(e){this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)}stateBeforeClosingTagName(e){Cn(e)||(e===62?(this.state=1,this.sectionStart=this.index+1):(this.state=Um(e)?9:27,this.sectionStart=this.index))}stateInClosingTagName(e){(e===62||Cn(e))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=10,this.stateAfterClosingTagName(e))}stateAfterClosingTagName(e){e===62&&(this.state=1,this.sectionStart=this.index+1)}stateBeforeAttrName(e){e===62?(this.cbs.onopentagend(this.index),this.inRCDATA?this.state=32:this.state=1,this.sectionStart=this.index+1):e===47?this.state=7:e===60&&this.peek()===47?(this.cbs.onopentagend(this.index),this.state=5,this.sectionStart=this.index):Cn(e)||this.handleAttrStart(e)}handleAttrStart(e){e===118&&this.peek()===45?(this.state=13,this.sectionStart=this.index):e===46||e===58||e===64||e===35?(this.cbs.ondirname(this.index,this.index+1),this.state=14,this.sectionStart=this.index+1):(this.state=12,this.sectionStart=this.index)}stateInSelfClosingTag(e){e===62?(this.cbs.onselfclosingtag(this.index),this.state=1,this.sectionStart=this.index+1,this.inRCDATA=!1):Cn(e)||(this.state=11,this.stateBeforeAttrName(e))}stateInAttrName(e){(e===61||es(e))&&(this.cbs.onattribname(this.sectionStart,this.index),this.handleAttrNameEnd(e))}stateInDirName(e){e===61||es(e)?(this.cbs.ondirname(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===58?(this.cbs.ondirname(this.sectionStart,this.index),this.state=14,this.sectionStart=this.index+1):e===46&&(this.cbs.ondirname(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDirArg(e){e===61||es(e)?(this.cbs.ondirarg(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===91?this.state=15:e===46&&(this.cbs.ondirarg(this.sectionStart,this.index),this.state=16,this.sectionStart=this.index+1)}stateInDynamicDirArg(e){e===93?this.state=14:(e===61||es(e))&&(this.cbs.ondirarg(this.sectionStart,this.index+1),this.handleAttrNameEnd(e))}stateInDirModifier(e){e===61||es(e)?(this.cbs.ondirmodifier(this.sectionStart,this.index),this.handleAttrNameEnd(e)):e===46&&(this.cbs.ondirmodifier(this.sectionStart,this.index),this.sectionStart=this.index+1)}handleAttrNameEnd(e){this.sectionStart=this.index,this.state=17,this.cbs.onattribnameend(this.index),this.stateAfterAttrName(e)}stateAfterAttrName(e){e===61?this.state=18:e===47||e===62?(this.cbs.onattribend(0,this.sectionStart),this.sectionStart=-1,this.state=11,this.stateBeforeAttrName(e)):Cn(e)||(this.cbs.onattribend(0,this.sectionStart),this.handleAttrStart(e))}stateBeforeAttrValue(e){e===34?(this.state=19,this.sectionStart=this.index+1):e===39?(this.state=20,this.sectionStart=this.index+1):Cn(e)||(this.sectionStart=this.index,this.state=21,this.stateInAttrValueNoQuotes(e))}handleInAttrValue(e,t){(e===t||this.fastForwardTo(t))&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(t===34?3:2,this.index+1),this.state=11)}stateInAttrValueDoubleQuotes(e){this.handleInAttrValue(e,34)}stateInAttrValueSingleQuotes(e){this.handleInAttrValue(e,39)}stateInAttrValueNoQuotes(e){Cn(e)||e===62?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(1,this.index),this.state=11,this.stateBeforeAttrName(e)):(e===39||e===60||e===61||e===96)&&this.cbs.onerr(18,this.index)}stateBeforeDeclaration(e){e===91?(this.state=26,this.sequenceIndex=0):this.state=e===45?25:23}stateInDeclaration(e){(e===62||this.fastForwardTo(62))&&(this.state=1,this.sectionStart=this.index+1)}stateInProcessingInstruction(e){(e===62||this.fastForwardTo(62))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeComment(e){e===45?(this.state=28,this.currentSequence=zt.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=23}stateInSpecialComment(e){(e===62||this.fastForwardTo(62))&&(this.cbs.oncomment(this.sectionStart,this.index),this.state=1,this.sectionStart=this.index+1)}stateBeforeSpecialS(e){e===zt.ScriptEnd[3]?this.startSpecial(zt.ScriptEnd,4):e===zt.StyleEnd[3]?this.startSpecial(zt.StyleEnd,4):(this.state=6,this.stateInTagName(e))}stateBeforeSpecialT(e){e===zt.TitleEnd[3]?this.startSpecial(zt.TitleEnd,4):e===zt.TextareaEnd[3]?this.startSpecial(zt.TextareaEnd,4):(this.state=6,this.stateInTagName(e))}startEntity(){}stateInEntity(){}parse(e){for(this.buffer=e;this.index<this.buffer.length;){const t=this.buffer.charCodeAt(this.index);switch(t===10&&this.state!==33&&this.newlines.push(this.index),this.state){case 1:{this.stateText(t);break}case 2:{this.stateInterpolationOpen(t);break}case 3:{this.stateInterpolation(t);break}case 4:{this.stateInterpolationClose(t);break}case 31:{this.stateSpecialStartSequence(t);break}case 32:{this.stateInRCDATA(t);break}case 26:{this.stateCDATASequence(t);break}case 19:{this.stateInAttrValueDoubleQuotes(t);break}case 12:{this.stateInAttrName(t);break}case 13:{this.stateInDirName(t);break}case 14:{this.stateInDirArg(t);break}case 15:{this.stateInDynamicDirArg(t);break}case 16:{this.stateInDirModifier(t);break}case 28:{this.stateInCommentLike(t);break}case 27:{this.stateInSpecialComment(t);break}case 11:{this.stateBeforeAttrName(t);break}case 6:{this.stateInTagName(t);break}case 34:{this.stateInSFCRootTagName(t);break}case 9:{this.stateInClosingTagName(t);break}case 5:{this.stateBeforeTagName(t);break}case 17:{this.stateAfterAttrName(t);break}case 20:{this.stateInAttrValueSingleQuotes(t);break}case 18:{this.stateBeforeAttrValue(t);break}case 8:{this.stateBeforeClosingTagName(t);break}case 10:{this.stateAfterClosingTagName(t);break}case 29:{this.stateBeforeSpecialS(t);break}case 30:{this.stateBeforeSpecialT(t);break}case 21:{this.stateInAttrValueNoQuotes(t);break}case 7:{this.stateInSelfClosingTag(t);break}case 23:{this.stateInDeclaration(t);break}case 22:{this.stateBeforeDeclaration(t);break}case 25:{this.stateBeforeComment(t);break}case 24:{this.stateInProcessingInstruction(t);break}case 33:{this.stateInEntity();break}}this.index++}this.cleanup(),this.finish()}cleanup(){this.sectionStart!==this.index&&(this.state===1||this.state===32&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===19||this.state===20||this.state===21)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}finish(){this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const e=this.buffer.length;this.sectionStart>=e||(this.state===28?this.currentSequence===zt.CdataEnd?this.cbs.oncdata(this.sectionStart,e):this.cbs.oncomment(this.sectionStart,e):this.state===6||this.state===11||this.state===18||this.state===17||this.state===12||this.state===13||this.state===14||this.state===15||this.state===16||this.state===20||this.state===19||this.state===21||this.state===9||this.cbs.ontext(this.sectionStart,e))}emitCodePoint(e,t){}}function Bm(n,{compatConfig:e}){const t=e&&e[n];return n==="MODE"?t||3:t}function js(n,e){const t=Bm("MODE",e),i=Bm(n,e);return t===3?i===!0:i!==!1}function ma(n,e,t,...i){return js(n,e)}function vd(n){throw n}function HT(n){}function et(n,e,t,i){const s=`https://vuejs.org/error-reference/#compiler-${n}`,r=new SyntaxError(String(s));return r.code=n,r.loc=e,r}const vn=n=>n.type===4&&n.isStatic;function GT(n){switch(n){case"Teleport":case"teleport":return Yo;case"Suspense":case"suspense":return id;case"KeepAlive":case"keep-alive":return yc;case"BaseTransition":case"base-transition":return LT}}const $0=/^$|^\d|[^\$\w\xA0-\uFFFF]/,Td=n=>!$0.test(n),WT=/[A-Za-z_$\xA0-\uFFFF]/,q0=/[\.\?\w$\xA0-\uFFFF]/,H0=/\s+[.[]\s*|\s*[.[]\s+/g,KT=n=>n.type===4?n.content:n.loc.source,G0=n=>{const e=KT(n).trim().replace(H0,a=>a.trim());let t=0,i=[],s=0,r=0,o=null;for(let a=0;a<e.length;a++){const l=e.charAt(a);switch(t){case 0:if(l==="[")i.push(t),t=1,s++;else if(l==="(")i.push(t),t=2,r++;else if(!(a===0?WT:q0).test(l))return!1;break;case 1:l==="'"||l==='"'||l==="`"?(i.push(t),t=3,o=l):l==="["?s++:l==="]"&&(--s||(t=i.pop()));break;case 2:if(l==="'"||l==='"'||l==="`")i.push(t),t=3,o=l;else if(l==="(")r++;else if(l===")"){if(a===e.length-1)return!1;--r||(t=i.pop())}break;case 3:l===o&&(t=i.pop(),o=null);break}}return!s&&!r},zT=G0,W0=/^\s*(?:async\s*)?(?:\([^)]*?\)|[\w$_]+)\s*(?::[^=]+)?=>|^\s*(?:async\s+)?function(?:\s+[\w$]+)?\s*\(/,K0=n=>W0.test(KT(n)),z0=K0;function Nn(n,e,t=!1){for(let i=0;i<n.props.length;i++){const s=n.props[i];if(s.type===7&&(t||s.exp)&&(ye(e)?s.name===e:e.test(s.name)))return s}}function mu(n,e,t=!1,i=!1){for(let s=0;s<n.props.length;s++){const r=n.props[s];if(r.type===6){if(t)continue;if(r.name===e&&(r.value||i))return r}else if(r.name==="bind"&&(r.exp||i)&&Hs(r.arg,e))return r}}function Hs(n,e){return!!(n&&vn(n)&&n.content===e)}function Y0(n){return n.props.some(e=>e.type===7&&e.name==="bind"&&(!e.arg||e.arg.type!==4||!e.arg.isStatic))}function ah(n){return n.type===5||n.type===2}function $m(n){return n.type===7&&n.name==="pre"}function J0(n){return n.type===7&&n.name==="slot"}function Ec(n){return n.type===1&&n.tagType===3}function wc(n){return n.type===1&&n.tagType===2}const Q0=new Set([da,La]);function YT(n,e=[]){if(n&&!ye(n)&&n.type===14){const t=n.callee;if(!ye(t)&&Q0.has(t))return YT(n.arguments[0],e.concat(n))}return[n,e]}function Ic(n,e,t){let i,s=n.type===13?n.props:n.arguments[2],r=[],o;if(s&&!ye(s)&&s.type===14){const a=YT(s);s=a[0],r=a[1],o=r[r.length-1]}if(s==null||ye(s))i=Vn([e]);else if(s.type===14){const a=s.arguments[0];!ye(a)&&a.type===15?qm(e,a)||a.properties.unshift(e):s.callee===md?i=Et(t.helper(_c),[Vn([e]),s]):s.arguments.unshift(Vn([e])),!i&&(i=s)}else s.type===15?(qm(e,s)||s.properties.unshift(e),i=s):(i=Et(t.helper(_c),[Vn([e]),s]),o&&o.callee===La&&(o=r[r.length-2]));n.type===13?o?o.arguments[0]=i:n.props=i:o?o.arguments[0]=i:n.arguments[2]=i}function qm(n,e){let t=!1;if(n.key.type===4){const i=n.key.content;t=e.properties.some(s=>s.key.type===4&&s.key.content===i)}return t}function ga(n,e){return`_${e}_${n.replace(/[^\w]/g,(t,i)=>t==="-"?"_":n.charCodeAt(i).toString())}`}function X0(n){return n.type===14&&n.callee===yd?n.arguments[1].returns:n}const j0=/([\s\S]*?)\s+(?:in|of)\s+(\S[\s\S]*)/,JT={parseMode:"base",ns:0,delimiters:["{{","}}"],getNamespace:()=>0,isVoidTag:Mr,isPreTag:Mr,isIgnoreNewlineTag:Mr,isCustomElement:Mr,onError:vd,onWarn:HT,comments:!1,prefixIdentifiers:!1};let $e=JT,ya=null,Ni="",Qt=null,Se=null,dn="",Ii=-1,$s=-1,Ed=0,os=!1,zh=null;const Ze=[],lt=new B0(Ze,{onerr:wi,ontext(n,e){yl(Lt(n,e),n,e)},ontextentity(n,e,t){yl(n,e,t)},oninterpolation(n,e){if(os)return yl(Lt(n,e),n,e);let t=n+lt.delimiterOpen.length,i=e-lt.delimiterClose.length;for(;Cn(Ni.charCodeAt(t));)t++;for(;Cn(Ni.charCodeAt(i-1));)i--;let s=Lt(t,i);s.includes("&")&&(s=$e.decodeEntities(s,!1)),Yh({type:5,content:Vl(s,!1,ft(t,i)),loc:ft(n,e)})},onopentagname(n,e){const t=Lt(n,e);Qt={type:1,tag:t,ns:$e.getNamespace(t,Ze[0],$e.ns),tagType:0,props:[],children:[],loc:ft(n-1,e),codegenNode:void 0}},onopentagend(n){Gm(n)},onclosetag(n,e){const t=Lt(n,e);if(!$e.isVoidTag(t)){let i=!1;for(let s=0;s<Ze.length;s++)if(Ze[s].tag.toLowerCase()===t.toLowerCase()){i=!0,s>0&&wi(24,Ze[0].loc.start.offset);for(let o=0;o<=s;o++){const a=Ze.shift();Ml(a,e,o<s)}break}i||wi(23,QT(n,60))}},onselfclosingtag(n){const e=Qt.tag;Qt.isSelfClosing=!0,Gm(n),Ze[0]&&Ze[0].tag===e&&Ml(Ze.shift(),n)},onattribname(n,e){Se={type:6,name:Lt(n,e),nameLoc:ft(n,e),value:void 0,loc:ft(n)}},ondirname(n,e){const t=Lt(n,e),i=t==="."||t===":"?"bind":t==="@"?"on":t==="#"?"slot":t.slice(2);if(!os&&i===""&&wi(26,n),os||i==="")Se={type:6,name:t,nameLoc:ft(n,e),value:void 0,loc:ft(n)};else if(Se={type:7,name:i,rawName:t,exp:void 0,arg:void 0,modifiers:t==="."?[ve("prop")]:[],loc:ft(n)},i==="pre"){os=lt.inVPre=!0,zh=Qt;const s=Qt.props;for(let r=0;r<s.length;r++)s[r].type===7&&(s[r]=cR(s[r]))}},ondirarg(n,e){if(n===e)return;const t=Lt(n,e);if(os&&!$m(Se))Se.name+=t,Gs(Se.nameLoc,e);else{const i=t[0]!=="[";Se.arg=Vl(i?t:t.slice(1,-1),i,ft(n,e),i?3:0)}},ondirmodifier(n,e){const t=Lt(n,e);if(os&&!$m(Se))Se.name+="."+t,Gs(Se.nameLoc,e);else if(Se.name==="slot"){const i=Se.arg;i&&(i.content+="."+t,Gs(i.loc,e))}else{const i=ve(t,!0,ft(n,e));Se.modifiers.push(i)}},onattribdata(n,e){dn+=Lt(n,e),Ii<0&&(Ii=n),$s=e},onattribentity(n,e,t){dn+=n,Ii<0&&(Ii=e),$s=t},onattribnameend(n){const e=Se.loc.start.offset,t=Lt(e,n);Se.type===7&&(Se.rawName=t),Qt.props.some(i=>(i.type===7?i.rawName:i.name)===t)&&wi(2,e)},onattribend(n,e){if(Qt&&Se){if(Gs(Se.loc,e),n!==0)if(dn.includes("&")&&(dn=$e.decodeEntities(dn,!0)),Se.type===6)Se.name==="class"&&(dn=jT(dn).trim()),n===1&&!dn&&wi(13,e),Se.value={type:2,content:dn,loc:n===1?ft(Ii,$s):ft(Ii-1,$s+1)},lt.inSFCRoot&&Qt.tag==="template"&&Se.name==="lang"&&dn&&dn!=="html"&&lt.enterRCDATA(Tc("</template"),0);else{let t=0;Se.exp=Vl(dn,!1,ft(Ii,$s),0,t),Se.name==="for"&&(Se.forParseResult=eR(Se.exp));let i=-1;Se.name==="bind"&&(i=Se.modifiers.findIndex(s=>s.content==="sync"))>-1&&ma("COMPILER_V_BIND_SYNC",$e,Se.loc,Se.arg.loc.source)&&(Se.name="model",Se.modifiers.splice(i,1))}(Se.type!==7||Se.name!=="pre")&&Qt.props.push(Se)}dn="",Ii=$s=-1},oncomment(n,e){$e.comments&&Yh({type:3,content:Lt(n,e),loc:ft(n-4,e+3)})},onend(){const n=Ni.length;for(let e=0;e<Ze.length;e++)Ml(Ze[e],n-1),wi(24,Ze[e].loc.start.offset)},oncdata(n,e){Ze[0].ns!==0?yl(Lt(n,e),n,e):wi(1,n-9)},onprocessinginstruction(n){(Ze[0]?Ze[0].ns:$e.ns)===0&&wi(21,n-1)}}),Hm=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,Z0=/^\(|\)$/g;function eR(n){const e=n.loc,t=n.content,i=t.match(j0);if(!i)return;const[,s,r]=i,o=(p,g,_=!1)=>{const E=e.start.offset+g,I=E+p.length;return Vl(p,!1,ft(E,I),0,_?1:0)},a={source:o(r.trim(),t.indexOf(r,s.length)),value:void 0,key:void 0,index:void 0,finalized:!1};let l=s.trim().replace(Z0,"").trim();const u=s.indexOf(l),d=l.match(Hm);if(d){l=l.replace(Hm,"").trim();const p=d[1].trim();let g;if(p&&(g=t.indexOf(p,u+l.length),a.key=o(p,g,!0)),d[2]){const _=d[2].trim();_&&(a.index=o(_,t.indexOf(_,a.key?g+p.length:u+l.length),!0))}}return l&&(a.value=o(l,u,!0)),a}function Lt(n,e){return Ni.slice(n,e)}function Gm(n){lt.inSFCRoot&&(Qt.innerLoc=ft(n+1,n+1)),Yh(Qt);const{tag:e,ns:t}=Qt;t===0&&$e.isPreTag(e)&&Ed++,$e.isVoidTag(e)?Ml(Qt,n):(Ze.unshift(Qt),(t===1||t===2)&&(lt.inXML=!0)),Qt=null}function yl(n,e,t){{const r=Ze[0]&&Ze[0].tag;r!=="script"&&r!=="style"&&n.includes("&")&&(n=$e.decodeEntities(n,!1))}const i=Ze[0]||ya,s=i.children[i.children.length-1];s&&s.type===2?(s.content+=n,Gs(s.loc,t)):i.children.push({type:2,content:n,loc:ft(e,t)})}function Ml(n,e,t=!1){t?Gs(n.loc,QT(e,60)):Gs(n.loc,tR(e,62)+1),lt.inSFCRoot&&(n.children.length?n.innerLoc.end=Ae({},n.children[n.children.length-1].loc.end):n.innerLoc.end=Ae({},n.innerLoc.start),n.innerLoc.source=Lt(n.innerLoc.start.offset,n.innerLoc.end.offset));const{tag:i,ns:s,children:r}=n;if(os||(i==="slot"?n.tagType=2:Wm(n)?n.tagType=3:iR(n)&&(n.tagType=1)),lt.inRCDATA||(n.children=XT(r)),s===0&&$e.isIgnoreNewlineTag(i)){const o=r[0];o&&o.type===2&&(o.content=o.content.replace(/^\r?\n/,""))}s===0&&$e.isPreTag(i)&&Ed--,zh===n&&(os=lt.inVPre=!1,zh=null),lt.inXML&&(Ze[0]?Ze[0].ns:$e.ns)===0&&(lt.inXML=!1);{const o=n.props;if(!lt.inSFCRoot&&js("COMPILER_NATIVE_TEMPLATE",$e)&&n.tag==="template"&&!Wm(n)){const l=Ze[0]||ya,u=l.children.indexOf(n);l.children.splice(u,1,...n.children)}const a=o.find(l=>l.type===6&&l.name==="inline-template");a&&ma("COMPILER_INLINE_TEMPLATE",$e,a.loc)&&n.children.length&&(a.value={type:2,content:Lt(n.children[0].loc.start.offset,n.children[n.children.length-1].loc.end.offset),loc:a.loc})}}function tR(n,e){let t=n;for(;Ni.charCodeAt(t)!==e&&t<Ni.length-1;)t++;return t}function QT(n,e){let t=n;for(;Ni.charCodeAt(t)!==e&&t>=0;)t--;return t}const nR=new Set(["if","else","else-if","for","slot"]);function Wm({tag:n,props:e}){if(n==="template"){for(let t=0;t<e.length;t++)if(e[t].type===7&&nR.has(e[t].name))return!0}return!1}function iR({tag:n,props:e}){if($e.isCustomElement(n))return!1;if(n==="component"||sR(n.charCodeAt(0))||GT(n)||$e.isBuiltInComponent&&$e.isBuiltInComponent(n)||$e.isNativeTag&&!$e.isNativeTag(n))return!0;for(let t=0;t<e.length;t++){const i=e[t];if(i.type===6){if(i.name==="is"&&i.value){if(i.value.content.startsWith("vue:"))return!0;if(ma("COMPILER_IS_ON_ELEMENT",$e,i.loc))return!0}}else if(i.name==="bind"&&Hs(i.arg,"is")&&ma("COMPILER_IS_ON_ELEMENT",$e,i.loc))return!0}return!1}function sR(n){return n>64&&n<91}const rR=/\r\n/g;function XT(n){const e=$e.whitespace!=="preserve";let t=!1;for(let i=0;i<n.length;i++){const s=n[i];if(s.type===2)if(Ed)s.content=s.content.replace(rR,`
`);else if(oR(s.content)){const r=n[i-1]&&n[i-1].type,o=n[i+1]&&n[i+1].type;!r||!o||e&&(r===3&&(o===3||o===1)||r===1&&(o===3||o===1&&aR(s.content)))?(t=!0,n[i]=null):s.content=" "}else e&&(s.content=jT(s.content))}return t?n.filter(Boolean):n}function oR(n){for(let e=0;e<n.length;e++)if(!Cn(n.charCodeAt(e)))return!1;return!0}function aR(n){for(let e=0;e<n.length;e++){const t=n.charCodeAt(e);if(t===10||t===13)return!0}return!1}function jT(n){let e="",t=!1;for(let i=0;i<n.length;i++)Cn(n.charCodeAt(i))?t||(e+=" ",t=!0):(e+=n[i],t=!1);return e}function Yh(n){(Ze[0]||ya).children.push(n)}function ft(n,e){return{start:lt.getPos(n),end:e==null?e:lt.getPos(e),source:e==null?e:Lt(n,e)}}function lR(n){return ft(n.start.offset,n.end.offset)}function Gs(n,e){n.end=lt.getPos(e),n.source=Lt(n.start.offset,e)}function cR(n){const e={type:6,name:n.rawName,nameLoc:ft(n.loc.start.offset,n.loc.start.offset+n.rawName.length),value:void 0,loc:n.loc};if(n.exp){const t=n.exp.loc;t.end.offset<n.loc.end.offset&&(t.start.offset--,t.start.column--,t.end.offset++,t.end.column++),e.value={type:2,content:n.exp.content,loc:t}}return e}function Vl(n,e=!1,t,i=0,s=0){return ve(n,e,t,i)}function wi(n,e,t){$e.onError(et(n,ft(e,e)))}function uR(){lt.reset(),Qt=null,Se=null,dn="",Ii=-1,$s=-1,Ze.length=0}function hR(n,e){if(uR(),Ni=n,$e=Ae({},JT),e){let s;for(s in e)e[s]!=null&&($e[s]=e[s])}lt.mode=$e.parseMode==="html"?1:$e.parseMode==="sfc"?2:0,lt.inXML=$e.ns===1||$e.ns===2;const t=e&&e.delimiters;t&&(lt.delimiterOpen=Tc(t[0]),lt.delimiterClose=Tc(t[1]));const i=ya=O0([],n);return lt.parse(Ni),i.loc=ft(0,n.length),i.children=XT(i.children),ya=null,i}function fR(n,e){Ll(n,void 0,e,!!ZT(n))}function ZT(n){const e=n.children.filter(t=>t.type!==3);return e.length===1&&e[0].type===1&&!wc(e[0])?e[0]:null}function Ll(n,e,t,i=!1,s=!1){const{children:r}=n,o=[];for(let d=0;d<r.length;d++){const p=r[d];if(p.type===1&&p.tagType===0){const g=i?0:An(p,t);if(g>0){if(g>=2){p.codegenNode.patchFlag=-1,o.push(p);continue}}else{const _=p.codegenNode;if(_.type===13){const E=_.patchFlag;if((E===void 0||E===512||E===1)&&tE(p,t)>=2){const I=nE(p);I&&(_.props=t.hoist(I))}_.dynamicProps&&(_.dynamicProps=t.hoist(_.dynamicProps))}}}else if(p.type===12&&(i?0:An(p,t))>=2){p.codegenNode.type===14&&p.codegenNode.arguments.length>0&&p.codegenNode.arguments.push("-1"),o.push(p);continue}if(p.type===1){const g=p.tagType===1;g&&t.scopes.vSlot++,Ll(p,n,t,!1,s),g&&t.scopes.vSlot--}else if(p.type===11)Ll(p,n,t,p.children.length===1,!0);else if(p.type===9)for(let g=0;g<p.branches.length;g++)Ll(p.branches[g],n,t,p.branches[g].children.length===1,s)}let a=!1;if(o.length===r.length&&n.type===1){if(n.tagType===0&&n.codegenNode&&n.codegenNode.type===13&&ie(n.codegenNode.children))n.codegenNode.children=l(Xs(n.codegenNode.children)),a=!0;else if(n.tagType===1&&n.codegenNode&&n.codegenNode.type===13&&n.codegenNode.children&&!ie(n.codegenNode.children)&&n.codegenNode.children.type===15){const d=u(n.codegenNode,"default");d&&(d.returns=l(Xs(d.returns)),a=!0)}else if(n.tagType===3&&e&&e.type===1&&e.tagType===1&&e.codegenNode&&e.codegenNode.type===13&&e.codegenNode.children&&!ie(e.codegenNode.children)&&e.codegenNode.children.type===15){const d=Nn(n,"slot",!0),p=d&&d.arg&&u(e.codegenNode,d.arg);p&&(p.returns=l(Xs(p.returns)),a=!0)}}if(!a)for(const d of o)d.codegenNode=t.cache(d.codegenNode);function l(d){const p=t.cache(d);return p.needArraySpread=!0,p}function u(d,p){if(d.children&&!ie(d.children)&&d.children.type===15){const g=d.children.properties.find(_=>_.key===p||_.key.content===p);return g&&g.value}}o.length&&t.transformHoist&&t.transformHoist(r,t,n)}function An(n,e){const{constantCache:t}=e;switch(n.type){case 1:if(n.tagType!==0)return 0;const i=t.get(n);if(i!==void 0)return i;const s=n.codegenNode;if(s.type!==13||s.isBlock&&n.tag!=="svg"&&n.tag!=="foreignObject"&&n.tag!=="math")return 0;if(s.patchFlag===void 0){let o=3;const a=tE(n,e);if(a===0)return t.set(n,0),0;a<o&&(o=a);for(let l=0;l<n.children.length;l++){const u=An(n.children[l],e);if(u===0)return t.set(n,0),0;u<o&&(o=u)}if(o>1)for(let l=0;l<n.props.length;l++){const u=n.props[l];if(u.type===7&&u.name==="bind"&&u.exp){const d=An(u.exp,e);if(d===0)return t.set(n,0),0;d<o&&(o=d)}}if(s.isBlock){for(let l=0;l<n.props.length;l++)if(n.props[l].type===7)return t.set(n,0),0;e.removeHelper(nr),e.removeHelper(to(e.inSSR,s.isComponent)),s.isBlock=!1,e.helper(eo(e.inSSR,s.isComponent))}return t.set(n,o),o}else return t.set(n,0),0;case 2:case 3:return 3;case 9:case 11:case 10:return 0;case 5:case 12:return An(n.content,e);case 4:return n.constType;case 8:let r=3;for(let o=0;o<n.children.length;o++){const a=n.children[o];if(ye(a)||En(a))continue;const l=An(a,e);if(l===0)return 0;l<r&&(r=l)}return r;case 20:return 2;default:return 0}}const dR=new Set([dd,pd,da,La]);function eE(n,e){if(n.type===14&&!ye(n.callee)&&dR.has(n.callee)){const t=n.arguments[0];if(t.type===4)return An(t,e);if(t.type===14)return eE(t,e)}return 0}function tE(n,e){let t=3;const i=nE(n);if(i&&i.type===15){const{properties:s}=i;for(let r=0;r<s.length;r++){const{key:o,value:a}=s[r],l=An(o,e);if(l===0)return l;l<t&&(t=l);let u;if(a.type===4?u=An(a,e):a.type===14?u=eE(a,e):u=0,u===0)return u;u<t&&(t=u)}}return t}function nE(n){const e=n.codegenNode;if(e.type===13)return e.props}function pR(n,{filename:e="",prefixIdentifiers:t=!1,hoistStatic:i=!1,hmr:s=!1,cacheHandlers:r=!1,nodeTransforms:o=[],directiveTransforms:a={},transformHoist:l=null,isBuiltInComponent:u=qt,isCustomElement:d=qt,expressionPlugins:p=[],scopeId:g=null,slotted:_=!0,ssr:E=!1,inSSR:I=!1,ssrCssVars:k="",bindingMetadata:D=Re,inline:M=!1,isTS:P=!1,onError:x=vd,onWarn:L=HT,compatConfig:F}){const R=e.replace(/\?.*$/,"").match(/([^/\\]+)\.\w+$/),T={filename:e,selfName:R&&fr(Xe(R[1])),prefixIdentifiers:t,hoistStatic:i,hmr:s,cacheHandlers:r,nodeTransforms:o,directiveTransforms:a,transformHoist:l,isBuiltInComponent:u,isCustomElement:d,expressionPlugins:p,scopeId:g,slotted:_,ssr:E,inSSR:I,ssrCssVars:k,bindingMetadata:D,inline:M,isTS:P,onError:x,onWarn:L,compatConfig:F,root:n,helpers:new Map,components:new Set,directives:new Set,hoists:[],imports:[],cached:[],constantCache:new WeakMap,temps:0,identifiers:Object.create(null),scopes:{vFor:0,vSlot:0,vPre:0,vOnce:0},parent:null,grandParent:null,currentNode:n,childIndex:0,inVOnce:!1,helper(v){const w=T.helpers.get(v)||0;return T.helpers.set(v,w+1),v},removeHelper(v){const w=T.helpers.get(v);if(w){const b=w-1;b?T.helpers.set(v,b):T.helpers.delete(v)}},helperString(v){return`_${jr[T.helper(v)]}`},replaceNode(v){T.parent.children[T.childIndex]=T.currentNode=v},removeNode(v){const w=T.parent.children,b=v?w.indexOf(v):T.currentNode?T.childIndex:-1;!v||v===T.currentNode?(T.currentNode=null,T.onNodeRemoved()):T.childIndex>b&&(T.childIndex--,T.onNodeRemoved()),T.parent.children.splice(b,1)},onNodeRemoved:qt,addIdentifiers(v){},removeIdentifiers(v){},hoist(v){ye(v)&&(v=ve(v)),T.hoists.push(v);const w=ve(`_hoisted_${T.hoists.length}`,!1,v.loc,2);return w.hoisted=v,w},cache(v,w=!1,b=!1){const S=F0(T.cached.length,v,w,b);return T.cached.push(S),S}};return T.filters=new Set,T}function mR(n,e){const t=pR(n,e);gu(n,t),e.hoistStatic&&fR(n,t),e.ssr||gR(n,t),n.helpers=new Set([...t.helpers.keys()]),n.components=[...t.components],n.directives=[...t.directives],n.imports=t.imports,n.hoists=t.hoists,n.temps=t.temps,n.cached=t.cached,n.transformed=!0,n.filters=[...t.filters]}function gR(n,e){const{helper:t}=e,{children:i}=n;if(i.length===1){const s=ZT(n);if(s&&s.codegenNode){const r=s.codegenNode;r.type===13&&_d(r,e),n.codegenNode=r}else n.codegenNode=i[0]}else if(i.length>1){let s=64;n.codegenNode=pa(e,t(fa),void 0,n.children,s,void 0,void 0,!0,void 0,!1)}}function yR(n,e){let t=0;const i=()=>{t--};for(;t<n.children.length;t++){const s=n.children[t];ye(s)||(e.grandParent=e.parent,e.parent=n,e.childIndex=t,e.onNodeRemoved=i,gu(s,e))}}function gu(n,e){e.currentNode=n;const{nodeTransforms:t}=e,i=[];for(let r=0;r<t.length;r++){const o=t[r](n,e);if(o&&(ie(o)?i.push(...o):i.push(o)),e.currentNode)n=e.currentNode;else return}switch(n.type){case 3:e.ssr||e.helper(Va);break;case 5:e.ssr||e.helper(pu);break;case 9:for(let r=0;r<n.branches.length;r++)gu(n.branches[r],e);break;case 10:case 11:case 1:case 0:yR(n,e);break}e.currentNode=n;let s=i.length;for(;s--;)i[s]()}function iE(n,e){const t=ye(n)?i=>i===n:i=>n.test(i);return(i,s)=>{if(i.type===1){const{props:r}=i;if(i.tagType===3&&r.some(J0))return;const o=[];for(let a=0;a<r.length;a++){const l=r[a];if(l.type===7&&t(l.name)){r.splice(a,1),a--;const u=e(i,l,s);u&&o.push(u)}}return o}}}const yu="/*@__PURE__*/",sE=n=>`${jr[n]}: _${jr[n]}`;function _R(n,{mode:e="function",prefixIdentifiers:t=e==="module",sourceMap:i=!1,filename:s="template.vue.html",scopeId:r=null,optimizeImports:o=!1,runtimeGlobalName:a="Vue",runtimeModuleName:l="vue",ssrRuntimeModuleName:u="vue/server-renderer",ssr:d=!1,isTS:p=!1,inSSR:g=!1}){const _={mode:e,prefixIdentifiers:t,sourceMap:i,filename:s,scopeId:r,optimizeImports:o,runtimeGlobalName:a,runtimeModuleName:l,ssrRuntimeModuleName:u,ssr:d,isTS:p,inSSR:g,source:n.source,code:"",column:1,line:1,offset:0,indentLevel:0,pure:!1,map:void 0,helper(I){return`_${jr[I]}`},push(I,k=-2,D){_.code+=I},indent(){E(++_.indentLevel)},deindent(I=!1){I?--_.indentLevel:E(--_.indentLevel)},newline(){E(_.indentLevel)}};function E(I){_.push(`
`+"  ".repeat(I),0)}return _}function vR(n,e={}){const t=_R(n,e);e.onContextCreated&&e.onContextCreated(t);const{mode:i,push:s,prefixIdentifiers:r,indent:o,deindent:a,newline:l,scopeId:u,ssr:d}=t,p=Array.from(n.helpers),g=p.length>0,_=!r&&i!=="module";TR(n,t);const I=d?"ssrRender":"render",D=(d?["_ctx","_push","_parent","_attrs"]:["_ctx","_cache"]).join(", ");if(s(`function ${I}(${D}) {`),o(),_&&(s("with (_ctx) {"),o(),g&&(s(`const { ${p.map(sE).join(", ")} } = _Vue
`,-1),l())),n.components.length&&(lh(n.components,"component",t),(n.directives.length||n.temps>0)&&l()),n.directives.length&&(lh(n.directives,"directive",t),n.temps>0&&l()),n.filters&&n.filters.length&&(l(),lh(n.filters,"filter",t),l()),n.temps>0){s("let ");for(let M=0;M<n.temps;M++)s(`${M>0?", ":""}_temp${M}`)}return(n.components.length||n.directives.length||n.temps)&&(s(`
`,0),l()),d||s("return "),n.codegenNode?nn(n.codegenNode,t):s("null"),_&&(a(),s("}")),a(),s("}"),{ast:n,code:t.code,preamble:"",map:t.map?t.map.toJSON():void 0}}function TR(n,e){const{ssr:t,prefixIdentifiers:i,push:s,newline:r,runtimeModuleName:o,runtimeGlobalName:a,ssrRuntimeModuleName:l}=e,u=a,d=Array.from(n.helpers);if(d.length>0&&(s(`const _Vue = ${u}
`,-1),n.hoists.length)){const p=[sd,rd,Va,od,UT].filter(g=>d.includes(g)).map(sE).join(", ");s(`const { ${p} } = _Vue
`,-1)}ER(n.hoists,e),r(),s("return ")}function lh(n,e,{helper:t,push:i,newline:s,isTS:r}){const o=t(e==="filter"?ud:e==="component"?ad:cd);for(let a=0;a<n.length;a++){let l=n[a];const u=l.endsWith("__self");u&&(l=l.slice(0,-6)),i(`const ${ga(l,e)} = ${o}(${JSON.stringify(l)}${u?", true":""})${r?"!":""}`),a<n.length-1&&s()}}function ER(n,e){if(!n.length)return;e.pure=!0;const{push:t,newline:i}=e;i();for(let s=0;s<n.length;s++){const r=n[s];r&&(t(`const _hoisted_${s+1} = `),nn(r,e),i())}e.pure=!1}function wd(n,e){const t=n.length>3||!1;e.push("["),t&&e.indent(),Oa(n,e,t),t&&e.deindent(),e.push("]")}function Oa(n,e,t=!1,i=!0){const{push:s,newline:r}=e;for(let o=0;o<n.length;o++){const a=n[o];ye(a)?s(a,-3):ie(a)?wd(a,e):nn(a,e),o<n.length-1&&(t?(i&&s(","),r()):i&&s(", "))}}function nn(n,e){if(ye(n)){e.push(n,-3);return}if(En(n)){e.push(e.helper(n));return}switch(n.type){case 1:case 9:case 11:nn(n.codegenNode,e);break;case 2:wR(n,e);break;case 4:rE(n,e);break;case 5:IR(n,e);break;case 12:nn(n.codegenNode,e);break;case 8:oE(n,e);break;case 3:AR(n,e);break;case 13:SR(n,e);break;case 14:RR(n,e);break;case 15:PR(n,e);break;case 17:kR(n,e);break;case 18:xR(n,e);break;case 19:NR(n,e);break;case 20:DR(n,e);break;case 21:Oa(n.body,e,!0,!1);break}}function wR(n,e){e.push(JSON.stringify(n.content),-3,n)}function rE(n,e){const{content:t,isStatic:i}=n;e.push(i?JSON.stringify(t):t,-3,n)}function IR(n,e){const{push:t,helper:i,pure:s}=e;s&&t(yu),t(`${i(pu)}(`),nn(n.content,e),t(")")}function oE(n,e){for(let t=0;t<n.children.length;t++){const i=n.children[t];ye(i)?e.push(i,-3):nn(i,e)}}function CR(n,e){const{push:t}=e;if(n.type===8)t("["),oE(n,e),t("]");else if(n.isStatic){const i=Td(n.content)?n.content:JSON.stringify(n.content);t(i,-2,n)}else t(`[${n.content}]`,-3,n)}function AR(n,e){const{push:t,helper:i,pure:s}=e;s&&t(yu),t(`${i(Va)}(${JSON.stringify(n.content)})`,-3,n)}function SR(n,e){const{push:t,helper:i,pure:s}=e,{tag:r,props:o,children:a,patchFlag:l,dynamicProps:u,directives:d,isBlock:p,disableTracking:g,isComponent:_}=n;let E;l&&(E=String(l)),d&&t(i(hd)+"("),p&&t(`(${i(nr)}(${g?"true":""}), `),s&&t(yu);const I=p?to(e.inSSR,_):eo(e.inSSR,_);t(i(I)+"(",-2,n),Oa(bR([r,o,a,E,u]),e),t(")"),p&&t(")"),d&&(t(", "),nn(d,e),t(")"))}function bR(n){let e=n.length;for(;e--&&n[e]==null;);return n.slice(0,e+1).map(t=>t||"null")}function RR(n,e){const{push:t,helper:i,pure:s}=e,r=ye(n.callee)?n.callee:i(n.callee);s&&t(yu),t(r+"(",-2,n),Oa(n.arguments,e),t(")")}function PR(n,e){const{push:t,indent:i,deindent:s,newline:r}=e,{properties:o}=n;if(!o.length){t("{}",-2,n);return}const a=o.length>1||!1;t(a?"{":"{ "),a&&i();for(let l=0;l<o.length;l++){const{key:u,value:d}=o[l];CR(u,e),t(": "),nn(d,e),l<o.length-1&&(t(","),r())}a&&s(),t(a?"}":" }")}function kR(n,e){wd(n.elements,e)}function xR(n,e){const{push:t,indent:i,deindent:s}=e,{params:r,returns:o,body:a,newline:l,isSlot:u}=n;u&&t(`_${jr[gd]}(`),t("(",-2,n),ie(r)?Oa(r,e):r&&nn(r,e),t(") => "),(l||a)&&(t("{"),i()),o?(l&&t("return "),ie(o)?wd(o,e):nn(o,e)):a&&nn(a,e),(l||a)&&(s(),t("}")),u&&(n.isNonScopedSlot&&t(", undefined, true"),t(")"))}function NR(n,e){const{test:t,consequent:i,alternate:s,newline:r}=n,{push:o,indent:a,deindent:l,newline:u}=e;if(t.type===4){const p=!Td(t.content);p&&o("("),rE(t,e),p&&o(")")}else o("("),nn(t,e),o(")");r&&a(),e.indentLevel++,r||o(" "),o("? "),nn(i,e),e.indentLevel--,r&&u(),r||o(" "),o(": ");const d=s.type===19;d||e.indentLevel++,nn(s,e),d||e.indentLevel--,r&&l(!0)}function DR(n,e){const{push:t,helper:i,indent:s,deindent:r,newline:o}=e,{needPauseTracking:a,needArraySpread:l}=n;l&&t("[...("),t(`_cache[${n.index}] || (`),a&&(s(),t(`${i(vc)}(-1`),n.inVOnce&&t(", true"),t("),"),o(),t("(")),t(`_cache[${n.index}] = `),nn(n.value,e),a&&(t(`).cacheIndex = ${n.index},`),o(),t(`${i(vc)}(1),`),o(),t(`_cache[${n.index}]`),r()),t(")"),l&&t(")]")}new RegExp("\\b"+"arguments,await,break,case,catch,class,const,continue,debugger,default,delete,do,else,export,extends,finally,for,function,if,import,let,new,return,super,switch,throw,try,var,void,while,with,yield".split(",").join("\\b|\\b")+"\\b");const MR=iE(/^(?:if|else|else-if)$/,(n,e,t)=>VR(n,e,t,(i,s,r)=>{const o=t.parent.children;let a=o.indexOf(i),l=0;for(;a-->=0;){const u=o[a];u&&u.type===9&&(l+=u.branches.length)}return()=>{if(r)i.codegenNode=zm(s,l,t);else{const u=LR(i.codegenNode);u.alternate=zm(s,l+i.branches.length-1,t)}}}));function VR(n,e,t,i){if(e.name!=="else"&&(!e.exp||!e.exp.content.trim())){const s=e.exp?e.exp.loc:n.loc;t.onError(et(28,e.loc)),e.exp=ve("true",!1,s)}if(e.name==="if"){const s=Km(n,e),r={type:9,loc:lR(n.loc),branches:[s]};if(t.replaceNode(r),i)return i(r,s,!0)}else{const s=t.parent.children;let r=s.indexOf(n);for(;r-->=-1;){const o=s[r];if(o&&o.type===3){t.removeNode(o);continue}if(o&&o.type===2&&!o.content.trim().length){t.removeNode(o);continue}if(o&&o.type===9){(e.name==="else-if"||e.name==="else")&&o.branches[o.branches.length-1].condition===void 0&&t.onError(et(30,n.loc)),t.removeNode();const a=Km(n,e);o.branches.push(a);const l=i&&i(o,a,!1);gu(a,t),l&&l(),t.currentNode=null}else t.onError(et(30,n.loc));break}}}function Km(n,e){const t=n.tagType===3;return{type:10,loc:n.loc,condition:e.name==="else"?void 0:e.exp,children:t&&!Nn(n,"for")?n.children:[n],userKey:mu(n,"key"),isTemplateIf:t}}function zm(n,e,t){return n.condition?Kh(n.condition,Ym(n,e,t),Et(t.helper(Va),['""',"true"])):Ym(n,e,t)}function Ym(n,e,t){const{helper:i}=t,s=gt("key",ve(`${e}`,!1,Rn,2)),{children:r}=n,o=r[0];if(r.length!==1||o.type!==1)if(r.length===1&&o.type===11){const l=o.codegenNode;return Ic(l,s,t),l}else return pa(t,i(fa),Vn([s]),r,64,void 0,void 0,!0,!1,!1,n.loc);else{const l=o.codegenNode,u=X0(l);return u.type===13&&_d(u,t),Ic(u,s,t),l}}function LR(n){for(;;)if(n.type===19)if(n.alternate.type===19)n=n.alternate;else return n;else n.type===20&&(n=n.value)}const OR=iE("for",(n,e,t)=>{const{helper:i,removeHelper:s}=t;return FR(n,e,t,r=>{const o=Et(i(fd),[r.source]),a=Ec(n),l=Nn(n,"memo"),u=mu(n,"key",!1,!0);u&&u.type;let d=u&&(u.type===6?u.value?ve(u.value.content,!0):void 0:u.exp);const p=u&&d?gt("key",d):null,g=r.source.type===4&&r.source.constType>0,_=g?64:u?128:256;return r.codegenNode=pa(t,i(fa),void 0,o,_,void 0,void 0,!0,!g,!1,n.loc),()=>{let E;const{children:I}=r,k=I.length!==1||I[0].type!==1,D=wc(n)?n:a&&n.children.length===1&&wc(n.children[0])?n.children[0]:null;if(D?(E=D.codegenNode,a&&p&&Ic(E,p,t)):k?E=pa(t,i(fa),p?Vn([p]):void 0,n.children,64,void 0,void 0,!0,void 0,!1):(E=I[0].codegenNode,a&&p&&Ic(E,p,t),E.isBlock!==!g&&(E.isBlock?(s(nr),s(to(t.inSSR,E.isComponent))):s(eo(t.inSSR,E.isComponent))),E.isBlock=!g,E.isBlock?(i(nr),i(to(t.inSSR,E.isComponent))):i(eo(t.inSSR,E.isComponent))),l){const M=Zr(Jh(r.parseResult,[ve("_cached")]));M.body=U0([zn(["const _memo = (",l.exp,")"]),zn(["if (_cached",...d?[" && _cached.key === ",d]:[],` && ${t.helperString(qT)}(_cached, _memo)) return _cached`]),zn(["const _item = ",E]),ve("_item.memo = _memo"),ve("return _item")]),o.arguments.push(M,ve("_cache"),ve(String(t.cached.length))),t.cached.push(null)}else o.arguments.push(Zr(Jh(r.parseResult),E,!0))}})});function FR(n,e,t,i){if(!e.exp){t.onError(et(31,e.loc));return}const s=e.forParseResult;if(!s){t.onError(et(32,e.loc));return}aE(s);const{addIdentifiers:r,removeIdentifiers:o,scopes:a}=t,{source:l,value:u,key:d,index:p}=s,g={type:11,loc:e.loc,source:l,valueAlias:u,keyAlias:d,objectIndexAlias:p,parseResult:s,children:Ec(n)?n.children:[n]};t.replaceNode(g),a.vFor++;const _=i&&i(g);return()=>{a.vFor--,_&&_()}}function aE(n,e){n.finalized||(n.finalized=!0)}function Jh({value:n,key:e,index:t},i=[]){return UR([n,e,t,...i])}function UR(n){let e=n.length;for(;e--&&!n[e];);return n.slice(0,e+1).map((t,i)=>t||ve("_".repeat(i+1),!1))}const Jm=ve("undefined",!1),BR=(n,e)=>{if(n.type===1&&(n.tagType===1||n.tagType===3)){const t=Nn(n,"slot");if(t)return t.exp,e.scopes.vSlot++,()=>{e.scopes.vSlot--}}},$R=(n,e,t,i)=>Zr(n,t,!1,!0,t.length?t[0].loc:i);function qR(n,e,t=$R){e.helper(gd);const{children:i,loc:s}=n,r=[],o=[];let a=e.scopes.vSlot>0||e.scopes.vFor>0;const l=Nn(n,"slot",!0);if(l){const{arg:k,exp:D}=l;k&&!vn(k)&&(a=!0),r.push(gt(k||ve("default",!0),t(D,void 0,i,s)))}let u=!1,d=!1;const p=[],g=new Set;let _=0;for(let k=0;k<i.length;k++){const D=i[k];let M;if(!Ec(D)||!(M=Nn(D,"slot",!0))){D.type!==3&&p.push(D);continue}if(l){e.onError(et(37,M.loc));break}u=!0;const{children:P,loc:x}=D,{arg:L=ve("default",!0),exp:F,loc:R}=M;let T;vn(L)?T=L?L.content:"default":a=!0;const v=Nn(D,"for"),w=t(F,v,P,x);let b,S;if(b=Nn(D,"if"))a=!0,o.push(Kh(b.exp,_l(L,w,_++),Jm));else if(S=Nn(D,/^else(?:-if)?$/,!0)){let A=k,j;for(;A--&&(j=i[A],!(j.type!==3&&Qh(j))););if(j&&Ec(j)&&Nn(j,/^(?:else-)?if$/)){let oe=o[o.length-1];for(;oe.alternate.type===19;)oe=oe.alternate;oe.alternate=S.exp?Kh(S.exp,_l(L,w,_++),Jm):_l(L,w,_++)}else e.onError(et(30,S.loc))}else if(v){a=!0;const A=v.forParseResult;A?(aE(A),o.push(Et(e.helper(fd),[A.source,Zr(Jh(A),_l(L,w),!0)]))):e.onError(et(32,v.loc))}else{if(T){if(g.has(T)){e.onError(et(38,R));continue}g.add(T),T==="default"&&(d=!0)}r.push(gt(L,w))}}if(!l){const k=(D,M)=>{const P=t(D,void 0,M,s);return e.compatConfig&&(P.isNonScopedSlot=!0),gt("default",P)};u?p.length&&p.some(D=>Qh(D))&&(d?e.onError(et(39,p[0].loc)):r.push(k(void 0,p))):r.push(k(void 0,i))}const E=a?2:Ol(n.children)?3:1;let I=Vn(r.concat(gt("_",ve(E+"",!1))),s);return o.length&&(I=Et(e.helper($T),[I,Xs(o)])),{slots:I,hasDynamicSlots:a}}function _l(n,e,t){const i=[gt("name",n),gt("fn",e)];return t!=null&&i.push(gt("key",ve(String(t),!0))),Vn(i)}function Ol(n){for(let e=0;e<n.length;e++){const t=n[e];switch(t.type){case 1:if(t.tagType===2||Ol(t.children))return!0;break;case 9:if(Ol(t.branches))return!0;break;case 10:case 11:if(Ol(t.children))return!0;break}}return!1}function Qh(n){return n.type!==2&&n.type!==12?!0:n.type===2?!!n.content.trim():Qh(n.content)}const lE=new WeakMap,HR=(n,e)=>function(){if(n=e.currentNode,!(n.type===1&&(n.tagType===0||n.tagType===1)))return;const{tag:i,props:s}=n,r=n.tagType===1;let o=r?GR(n,e):`"${i}"`;const a=Ge(o)&&o.callee===ld;let l,u,d=0,p,g,_,E=a||o===Yo||o===id||!r&&(i==="svg"||i==="foreignObject"||i==="math");if(s.length>0){const I=cE(n,e,void 0,r,a);l=I.props,d=I.patchFlag,g=I.dynamicPropNames;const k=I.directives;_=k&&k.length?Xs(k.map(D=>KR(D,e))):void 0,I.shouldUseBlock&&(E=!0)}if(n.children.length>0)if(o===yc&&(E=!0,d|=1024),r&&o!==Yo&&o!==yc){const{slots:k,hasDynamicSlots:D}=qR(n,e);u=k,D&&(d|=1024)}else if(n.children.length===1&&o!==Yo){const k=n.children[0],D=k.type,M=D===5||D===8;M&&An(k,e)===0&&(d|=1),M||D===2?u=k:u=n.children}else u=n.children;g&&g.length&&(p=zR(g)),n.codegenNode=pa(e,o,l,u,d===0?void 0:d,p,_,!!E,!1,r,n.loc)};function GR(n,e,t=!1){let{tag:i}=n;const s=Xh(i),r=mu(n,"is",!1,!0);if(r)if(s||js("COMPILER_IS_ON_ELEMENT",e)){let a;if(r.type===6?a=r.value&&ve(r.value.content,!0):(a=r.exp,a||(a=ve("is",!1,r.arg.loc))),a)return Et(e.helper(ld),[a])}else r.type===6&&r.value.content.startsWith("vue:")&&(i=r.value.content.slice(4));const o=GT(i)||e.isBuiltInComponent(i);return o?(t||e.helper(o),o):(e.helper(ad),e.components.add(i),ga(i,"component"))}function cE(n,e,t=n.props,i,s,r=!1){const{tag:o,loc:a,children:l}=n;let u=[];const d=[],p=[],g=l.length>0;let _=!1,E=0,I=!1,k=!1,D=!1,M=!1,P=!1,x=!1;const L=[],F=w=>{u.length&&(d.push(Vn(Qm(u),a)),u=[]),w&&d.push(w)},R=()=>{e.scopes.vFor>0&&u.push(gt(ve("ref_for",!0),ve("true")))},T=({key:w,value:b})=>{if(vn(w)){const S=w.content,A=ur(S);if(A&&(!i||s)&&S.toLowerCase()!=="onclick"&&S!=="onUpdate:modelValue"&&!hs(S)&&(M=!0),A&&hs(S)&&(x=!0),A&&b.type===14&&(b=b.arguments[0]),b.type===20||(b.type===4||b.type===8)&&An(b,e)>0)return;S==="ref"?I=!0:S==="class"?k=!0:S==="style"?D=!0:S!=="key"&&!L.includes(S)&&L.push(S),i&&(S==="class"||S==="style")&&!L.includes(S)&&L.push(S)}else P=!0};for(let w=0;w<t.length;w++){const b=t[w];if(b.type===6){const{loc:S,name:A,nameLoc:j,value:oe}=b;let ee=!0;if(A==="ref"&&(I=!0,R()),A==="is"&&(Xh(o)||oe&&oe.content.startsWith("vue:")||js("COMPILER_IS_ON_ELEMENT",e)))continue;u.push(gt(ve(A,!0,j),ve(oe?oe.content:"",ee,oe?oe.loc:S)))}else{const{name:S,arg:A,exp:j,loc:oe,modifiers:ee}=b,ce=S==="bind",ne=S==="on";if(S==="slot"){i||e.onError(et(40,oe));continue}if(S==="once"||S==="memo"||S==="is"||ce&&Hs(A,"is")&&(Xh(o)||js("COMPILER_IS_ON_ELEMENT",e))||ne&&r)continue;if((ce&&Hs(A,"key")||ne&&g&&Hs(A,"vue:before-update"))&&(_=!0),ce&&Hs(A,"ref")&&R(),!A&&(ce||ne)){if(P=!0,j)if(ce){if(F(),js("COMPILER_V_BIND_OBJECT_ORDER",e)){d.unshift(j);continue}R(),F(),d.push(j)}else F({type:14,loc:oe,callee:e.helper(md),arguments:i?[j]:[j,"true"]});else e.onError(et(ce?34:35,oe));continue}ce&&ee.some(qe=>qe.content==="prop")&&(E|=32);const xe=e.directiveTransforms[S];if(xe){const{props:qe,needRuntime:ut}=xe(b,n,e);!r&&qe.forEach(T),ne&&A&&!vn(A)?F(Vn(qe,a)):u.push(...qe),ut&&(p.push(b),En(ut)&&lE.set(b,ut))}else VC(S)||(p.push(b),g&&(_=!0))}}let v;if(d.length?(F(),d.length>1?v=Et(e.helper(_c),d,a):v=d[0]):u.length&&(v=Vn(Qm(u),a)),P?E|=16:(k&&!i&&(E|=2),D&&!i&&(E|=4),L.length&&(E|=8),M&&(E|=32)),!_&&(E===0||E===32)&&(I||x||p.length>0)&&(E|=512),!e.inSSR&&v)switch(v.type){case 15:let w=-1,b=-1,S=!1;for(let oe=0;oe<v.properties.length;oe++){const ee=v.properties[oe].key;vn(ee)?ee.content==="class"?w=oe:ee.content==="style"&&(b=oe):ee.isHandlerKey||(S=!0)}const A=v.properties[w],j=v.properties[b];S?v=Et(e.helper(da),[v]):(A&&!vn(A.value)&&(A.value=Et(e.helper(dd),[A.value])),j&&(D||j.value.type===4&&j.value.content.trim()[0]==="["||j.value.type===17)&&(j.value=Et(e.helper(pd),[j.value])));break;case 14:break;default:v=Et(e.helper(da),[Et(e.helper(La),[v])]);break}return{props:v,directives:p,patchFlag:E,dynamicPropNames:L,shouldUseBlock:_}}function Qm(n){const e=new Map,t=[];for(let i=0;i<n.length;i++){const s=n[i];if(s.key.type===8||!s.key.isStatic){t.push(s);continue}const r=s.key.content,o=e.get(r);o?(r==="style"||r==="class"||ur(r))&&WR(o,s):(e.set(r,s),t.push(s))}return t}function WR(n,e){n.value.type===17?n.value.elements.push(e.value):n.value=Xs([n.value,e.value],n.loc)}function KR(n,e){const t=[],i=lE.get(n);i?t.push(e.helperString(i)):(e.helper(cd),e.directives.add(n.name),t.push(ga(n.name,"directive")));const{loc:s}=n;if(n.exp&&t.push(n.exp),n.arg&&(n.exp||t.push("void 0"),t.push(n.arg)),Object.keys(n.modifiers).length){n.arg||(n.exp||t.push("void 0"),t.push("void 0"));const r=ve("true",!1,s);t.push(Vn(n.modifiers.map(o=>gt(o,r)),s))}return Xs(t,n.loc)}function zR(n){let e="[";for(let t=0,i=n.length;t<i;t++)e+=JSON.stringify(n[t]),t<i-1&&(e+=", ");return e+"]"}function Xh(n){return n==="component"||n==="Component"}const YR=(n,e)=>{if(wc(n)){const{children:t,loc:i}=n,{slotName:s,slotProps:r}=JR(n,e),o=[e.prefixIdentifiers?"_ctx.$slots":"$slots",s,"{}","undefined","true"];let a=2;r&&(o[2]=r,a=3),t.length&&(o[3]=Zr([],t,!1,!1,i),a=4),e.scopeId&&!e.slotted&&(a=5),o.splice(a),n.codegenNode=Et(e.helper(BT),o,i)}};function JR(n,e){let t='"default"',i;const s=[];for(let r=0;r<n.props.length;r++){const o=n.props[r];if(o.type===6)o.value&&(o.name==="name"?t=JSON.stringify(o.value.content):(o.name=Xe(o.name),s.push(o)));else if(o.name==="bind"&&Hs(o.arg,"name")){if(o.exp)t=o.exp;else if(o.arg&&o.arg.type===4){const a=Xe(o.arg.content);t=o.exp=ve(a,!1,o.arg.loc)}}else o.name==="bind"&&o.arg&&vn(o.arg)&&(o.arg.content=Xe(o.arg.content)),s.push(o)}if(s.length>0){const{props:r,directives:o}=cE(n,e,s,!1,!1);i=r,o.length&&e.onError(et(36,o[0].loc))}return{slotName:t,slotProps:i}}const uE=(n,e,t,i)=>{const{loc:s,modifiers:r,arg:o}=n;!n.exp&&!r.length&&t.onError(et(35,s));let a;if(o.type===4)if(o.isStatic){let p=o.content;p.startsWith("vue:")&&(p=`vnode-${p.slice(4)}`);const g=e.tagType!==0||p.startsWith("vnode")||!/[A-Z]/.test(p)?Ur(Xe(p)):`on:${p}`;a=ve(g,!0,o.loc)}else a=zn([`${t.helperString(Wh)}(`,o,")"]);else a=o,a.children.unshift(`${t.helperString(Wh)}(`),a.children.push(")");let l=n.exp;l&&!l.content.trim()&&(l=void 0);let u=t.cacheHandlers&&!l&&!t.inVOnce;if(l){const p=zT(l),g=!(p||z0(l)),_=l.content.includes(";");(g||u&&p)&&(l=zn([`${g?"$event":"(...args)"} => ${_?"{":"("}`,l,_?"}":")"]))}let d={props:[gt(a,l||ve("() => {}",!1,s))]};return i&&(d=i(d)),u&&(d.props[0].value=t.cache(d.props[0].value)),d.props.forEach(p=>p.key.isHandlerKey=!0),d},QR=(n,e,t)=>{const{modifiers:i,loc:s}=n,r=n.arg;let{exp:o}=n;return o&&o.type===4&&!o.content.trim()&&(o=void 0),r.type!==4?(r.children.unshift("("),r.children.push(') || ""')):r.isStatic||(r.content=r.content?`${r.content} || ""`:'""'),i.some(a=>a.content==="camel")&&(r.type===4?r.isStatic?r.content=Xe(r.content):r.content=`${t.helperString(Gh)}(${r.content})`:(r.children.unshift(`${t.helperString(Gh)}(`),r.children.push(")"))),t.inSSR||(i.some(a=>a.content==="prop")&&Xm(r,"."),i.some(a=>a.content==="attr")&&Xm(r,"^")),{props:[gt(r,o)]}},Xm=(n,e)=>{n.type===4?n.isStatic?n.content=e+n.content:n.content=`\`${e}\${${n.content}}\``:(n.children.unshift(`'${e}' + (`),n.children.push(")"))},XR=(n,e)=>{if(n.type===0||n.type===1||n.type===11||n.type===10)return()=>{const t=n.children;let i,s=!1;for(let r=0;r<t.length;r++){const o=t[r];if(ah(o)){s=!0;for(let a=r+1;a<t.length;a++){const l=t[a];if(ah(l))i||(i=t[r]=zn([o],o.loc)),i.children.push(" + ",l),t.splice(a,1),a--;else{i=void 0;break}}}}if(!(!s||t.length===1&&(n.type===0||n.type===1&&n.tagType===0&&!n.props.find(r=>r.type===7&&!e.directiveTransforms[r.name])&&n.tag!=="template")))for(let r=0;r<t.length;r++){const o=t[r];if(ah(o)||o.type===8){const a=[];(o.type!==2||o.content!==" ")&&a.push(o),!e.ssr&&An(o,e)===0&&a.push("1"),t[r]={type:12,content:o,loc:o.loc,codegenNode:Et(e.helper(od),a)}}}}},jm=new WeakSet,jR=(n,e)=>{if(n.type===1&&Nn(n,"once",!0))return jm.has(n)||e.inVOnce||e.inSSR?void 0:(jm.add(n),e.inVOnce=!0,e.helper(vc),()=>{e.inVOnce=!1;const t=e.currentNode;t.codegenNode&&(t.codegenNode=e.cache(t.codegenNode,!0,!0))})},hE=(n,e,t)=>{const{exp:i,arg:s}=n;if(!i)return t.onError(et(41,n.loc)),vl();const r=i.loc.source.trim(),o=i.type===4?i.content:r,a=t.bindingMetadata[r];if(a==="props"||a==="props-aliased")return t.onError(et(44,i.loc)),vl();if(!o.trim()||!zT(i))return t.onError(et(42,i.loc)),vl();const l=s||ve("modelValue",!0),u=s?vn(s)?`onUpdate:${Xe(s.content)}`:zn(['"onUpdate:" + ',s]):"onUpdate:modelValue";let d;const p=t.isTS?"($event: any)":"$event";d=zn([`${p} => ((`,i,") = $event)"]);const g=[gt(l,n.exp),gt(u,d)];if(n.modifiers.length&&e.tagType===1){const _=n.modifiers.map(I=>I.content).map(I=>(Td(I)?I:JSON.stringify(I))+": true").join(", "),E=s?vn(s)?`${s.content}Modifiers`:zn([s,' + "Modifiers"']):"modelModifiers";g.push(gt(E,ve(`{ ${_} }`,!1,n.loc,2)))}return vl(g)};function vl(n=[]){return{props:n}}const ZR=/[\w).+\-_$\]]/,eP=(n,e)=>{js("COMPILER_FILTERS",e)&&(n.type===5?Cc(n.content,e):n.type===1&&n.props.forEach(t=>{t.type===7&&t.name!=="for"&&t.exp&&Cc(t.exp,e)}))};function Cc(n,e){if(n.type===4)Zm(n,e);else for(let t=0;t<n.children.length;t++){const i=n.children[t];typeof i=="object"&&(i.type===4?Zm(i,e):i.type===8?Cc(n,e):i.type===5&&Cc(i.content,e))}}function Zm(n,e){const t=n.content;let i=!1,s=!1,r=!1,o=!1,a=0,l=0,u=0,d=0,p,g,_,E,I=[];for(_=0;_<t.length;_++)if(g=p,p=t.charCodeAt(_),i)p===39&&g!==92&&(i=!1);else if(s)p===34&&g!==92&&(s=!1);else if(r)p===96&&g!==92&&(r=!1);else if(o)p===47&&g!==92&&(o=!1);else if(p===124&&t.charCodeAt(_+1)!==124&&t.charCodeAt(_-1)!==124&&!a&&!l&&!u)E===void 0?(d=_+1,E=t.slice(0,_).trim()):k();else{switch(p){case 34:s=!0;break;case 39:i=!0;break;case 96:r=!0;break;case 40:u++;break;case 41:u--;break;case 91:l++;break;case 93:l--;break;case 123:a++;break;case 125:a--;break}if(p===47){let D=_-1,M;for(;D>=0&&(M=t.charAt(D),M===" ");D--);(!M||!ZR.test(M))&&(o=!0)}}E===void 0?E=t.slice(0,_).trim():d!==0&&k();function k(){I.push(t.slice(d,_).trim()),d=_+1}if(I.length){for(_=0;_<I.length;_++)E=tP(E,I[_],e);n.content=E,n.ast=void 0}}function tP(n,e,t){t.helper(ud);const i=e.indexOf("(");if(i<0)return t.filters.add(e),`${ga(e,"filter")}(${n})`;{const s=e.slice(0,i),r=e.slice(i+1);return t.filters.add(s),`${ga(s,"filter")}(${n}${r!==")"?","+r:r}`}}const eg=new WeakSet,nP=(n,e)=>{if(n.type===1){const t=Nn(n,"memo");return!t||eg.has(n)||e.inSSR?void 0:(eg.add(n),()=>{const i=n.codegenNode||e.currentNode.codegenNode;i&&i.type===13&&(n.tagType!==1&&_d(i,e),n.codegenNode=Et(e.helper(yd),[t.exp,Zr(void 0,i),"_cache",String(e.cached.length)]),e.cached.push(null))})}},iP=(n,e)=>{if(n.type===1){for(const t of n.props)if(t.type===7&&t.name==="bind"&&!t.exp){const i=t.arg;if(i.type!==4||!i.isStatic)e.onError(et(52,i.loc)),t.exp=ve("",!0,i.loc);else{const s=Xe(i.content);(WT.test(s[0])||s[0]==="-")&&(t.exp=ve(s,!1,i.loc))}}}};function sP(n){return[[iP,jR,MR,nP,OR,eP,YR,HR,BR,XR],{on:uE,bind:QR,model:hE}]}function rP(n,e={}){const t=e.onError||vd,i=e.mode==="module";e.prefixIdentifiers===!0?t(et(47)):i&&t(et(48));const s=!1;e.cacheHandlers&&t(et(49)),e.scopeId&&!i&&t(et(50));const r=Ae({},e,{prefixIdentifiers:s}),o=ye(n)?hR(n,r):n,[a,l]=sP();return mR(o,Ae({},r,{nodeTransforms:[...a,...e.nodeTransforms||[]],directiveTransforms:Ae({},l,e.directiveTransforms||{})})),vR(o,r)}const oP=()=>({props:[]});/**
* @vue/compiler-dom v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const fE=Symbol(""),dE=Symbol(""),pE=Symbol(""),mE=Symbol(""),jh=Symbol(""),gE=Symbol(""),yE=Symbol(""),_E=Symbol(""),vE=Symbol(""),TE=Symbol("");L0({[fE]:"vModelRadio",[dE]:"vModelCheckbox",[pE]:"vModelText",[mE]:"vModelSelect",[jh]:"vModelDynamic",[gE]:"withModifiers",[yE]:"withKeys",[_E]:"vShow",[vE]:"Transition",[TE]:"TransitionGroup"});let br;function aP(n,e=!1){return br||(br=document.createElement("div")),e?(br.innerHTML=`<div foo="${n.replace(/"/g,"&quot;")}">`,br.children[0].getAttribute("foo")):(br.innerHTML=n,br.textContent)}const lP={parseMode:"html",isVoidTag:jC,isNativeTag:n=>JC(n)||QC(n)||XC(n),isPreTag:n=>n==="pre",isIgnoreNewlineTag:n=>n==="pre"||n==="textarea",decodeEntities:aP,isBuiltInComponent:n=>{if(n==="Transition"||n==="transition")return vE;if(n==="TransitionGroup"||n==="transition-group")return TE},getNamespace(n,e,t){let i=e?e.ns:t;if(e&&i===2)if(e.tag==="annotation-xml"){if(n==="svg")return 1;e.props.some(s=>s.type===6&&s.name==="encoding"&&s.value!=null&&(s.value.content==="text/html"||s.value.content==="application/xhtml+xml"))&&(i=0)}else/^m(?:[ions]|text)$/.test(e.tag)&&n!=="mglyph"&&n!=="malignmark"&&(i=0);else e&&i===1&&(e.tag==="foreignObject"||e.tag==="desc"||e.tag==="title")&&(i=0);if(i===0){if(n==="svg")return 1;if(n==="math")return 2}return i}},cP=n=>{n.type===1&&n.props.forEach((e,t)=>{e.type===6&&e.name==="style"&&e.value&&(n.props[t]={type:7,name:"bind",arg:ve("style",!0,e.loc),exp:uP(e.value.content,e.loc),modifiers:[],loc:e.loc})})},uP=(n,e)=>{const t=N_(n);return ve(JSON.stringify(t),!1,e,3)};function ms(n,e){return et(n,e)}const hP=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(ms(53,s)),e.children.length&&(t.onError(ms(54,s)),e.children.length=0),{props:[gt(ve("innerHTML",!0,s),i||ve("",!0))]}},fP=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(ms(55,s)),e.children.length&&(t.onError(ms(56,s)),e.children.length=0),{props:[gt(ve("textContent",!0),i?An(i,t)>0?i:Et(t.helperString(pu),[i],s):ve("",!0))]}},dP=(n,e,t)=>{const i=hE(n,e,t);if(!i.props.length||e.tagType===1)return i;n.arg&&t.onError(ms(58,n.arg.loc));const{tag:s}=e,r=t.isCustomElement(s);if(s==="input"||s==="textarea"||s==="select"||r){let o=pE,a=!1;if(s==="input"||r){const l=mu(e,"type");if(l){if(l.type===7)o=jh;else if(l.value)switch(l.value.content){case"radio":o=fE;break;case"checkbox":o=dE;break;case"file":a=!0,t.onError(ms(59,n.loc));break}}else Y0(e)&&(o=jh)}else s==="select"&&(o=mE);a||(i.needRuntime=t.helper(o))}else t.onError(ms(57,n.loc));return i.props=i.props.filter(o=>!(o.key.type===4&&o.key.content==="modelValue")),i},pP=bn("passive,once,capture"),mP=bn("stop,prevent,self,ctrl,shift,alt,meta,exact,middle"),gP=bn("left,right"),EE=bn("onkeyup,onkeydown,onkeypress"),yP=(n,e,t,i)=>{const s=[],r=[],o=[];for(let a=0;a<e.length;a++){const l=e[a].content;l==="native"&&ma("COMPILER_V_ON_NATIVE",t)||pP(l)?o.push(l):gP(l)?vn(n)?EE(n.content.toLowerCase())?s.push(l):r.push(l):(s.push(l),r.push(l)):mP(l)?r.push(l):s.push(l)}return{keyModifiers:s,nonKeyModifiers:r,eventOptionModifiers:o}},tg=(n,e)=>vn(n)&&n.content.toLowerCase()==="onclick"?ve(e,!0):n.type!==4?zn(["(",n,`) === "onClick" ? "${e}" : (`,n,")"]):n,_P=(n,e,t)=>uE(n,e,t,i=>{const{modifiers:s}=n;if(!s.length)return i;let{key:r,value:o}=i.props[0];const{keyModifiers:a,nonKeyModifiers:l,eventOptionModifiers:u}=yP(r,s,t,n.loc);if(l.includes("right")&&(r=tg(r,"onContextmenu")),l.includes("middle")&&(r=tg(r,"onMouseup")),l.length&&(o=Et(t.helper(gE),[o,JSON.stringify(l)])),a.length&&(!vn(r)||EE(r.content.toLowerCase()))&&(o=Et(t.helper(yE),[o,JSON.stringify(a)])),u.length){const d=u.map(fr).join("");r=vn(r)?ve(`${r.content}${d}`,!0):zn(["(",r,`) + "${d}"`])}return{props:[gt(r,o)]}}),vP=(n,e,t)=>{const{exp:i,loc:s}=n;return i||t.onError(ms(61,s)),{props:[],needRuntime:t.helper(_E)}},TP=(n,e)=>{n.type===1&&n.tagType===0&&(n.tag==="script"||n.tag==="style")&&e.removeNode()},EP=[cP],wP={cloak:oP,html:hP,text:fP,model:dP,on:_P,show:vP};function IP(n,e={}){return rP(n,Ae({},lP,e,{nodeTransforms:[TP,...EP,...e.nodeTransforms||[]],directiveTransforms:Ae({},wP,e.directiveTransforms||{}),transformHoist:null}))}/**
* vue v3.5.22
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/const ng=Object.create(null);function CP(n,e){if(!ye(n))if(n.nodeType)n=n.innerHTML;else return qt;const t=FC(n,e),i=ng[t];if(i)return i;if(n[0]==="#"){const a=document.querySelector(n);n=a?a.innerHTML:""}const s=Ae({hoistStatic:!0,onError:void 0,onWarn:qt},e);!s.isCustomElement&&typeof customElements<"u"&&(s.isCustomElement=a=>!!customElements.get(a));const{code:r}=IP(n,s),o=new Function("Vue",r)(k0);return o._rc=!0,ng[t]=o}aT(CP);/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class _u{}function Le(n,e){const t=/\{([^}]+)\}/g;return n.replace(t,(i,s)=>{if(Object.prototype.hasOwnProperty.call(e,s)){const r=e[s];return r!=null?String(r):""}else throw new Error(`Key '${s}' not found in valueMap.`)})}function h(n,e,t){for(let r=0;r<e.length-1;r++){const o=e[r];if(o.endsWith("[]")){const a=o.slice(0,-2);if(!(a in n))if(Array.isArray(t))n[a]=Array.from({length:t.length},()=>({}));else throw new Error(`Value must be a list given an array path ${o}`);if(Array.isArray(n[a])){const l=n[a];if(Array.isArray(t))for(let u=0;u<l.length;u++){const d=l[u];h(d,e.slice(r+1),t[u])}else for(const u of l)h(u,e.slice(r+1),t)}return}else if(o.endsWith("[0]")){const a=o.slice(0,-3);a in n||(n[a]=[{}]);const l=n[a];h(l[0],e.slice(r+1),t);return}(!n[o]||typeof n[o]!="object")&&(n[o]={}),n=n[o]}const i=e[e.length-1],s=n[i];if(s!==void 0){if(!t||typeof t=="object"&&Object.keys(t).length===0||t===s)return;if(typeof s=="object"&&typeof t=="object"&&s!==null&&t!==null)Object.assign(s,t);else throw new Error(`Cannot set value for an existing key. Key: ${i}`)}else n[i]=t}function f(n,e){try{if(e.length===1&&e[0]==="_self")return n;for(let t=0;t<e.length;t++){if(typeof n!="object"||n===null)return;const i=e[t];if(i.endsWith("[]")){const s=i.slice(0,-2);if(s in n){const r=n[s];return Array.isArray(r)?r.map(o=>f(o,e.slice(t+1))):void 0}else return}else n=n[i]}return n}catch(t){if(t instanceof TypeError)return;throw t}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xt(n,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(n.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const t=e.split("/",2);return`publishers/${t[0]}/models/${t[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function wE(n,e){const t=xt(n,e);return t?t.startsWith("publishers/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}`:t.startsWith("models/")&&n.isVertexAI()?`projects/${n.getProject()}/locations/${n.getLocation()}/publishers/google/${t}`:t:""}function ig(n,e){if(e==null)throw new Error("PartUnion is required");if(typeof e=="object")return e;if(typeof e=="string")return{text:e};throw new Error(`Unsupported part type: ${typeof e}`)}function IE(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("PartListUnion is required");return Array.isArray(e)?e.map(t=>ig(n,t)):[ig(n,e)]}function Zh(n){return n!=null&&typeof n=="object"&&"parts"in n&&Array.isArray(n.parts)}function sg(n){return n!=null&&typeof n=="object"&&"functionCall"in n}function rg(n){return n!=null&&typeof n=="object"&&"functionResponse"in n}function Tn(n,e){if(e==null)throw new Error("ContentUnion is required");return Zh(e)?e:{role:"user",parts:IE(n,e)}}function CE(n,e){if(!e)return[];if(n.isVertexAI()&&Array.isArray(e))return e.flatMap(t=>{const i=Tn(n,t);return i.parts&&i.parts.length>0&&i.parts[0].text!==void 0?[i.parts[0].text]:[]});if(n.isVertexAI()){const t=Tn(n,e);return t.parts&&t.parts.length>0&&t.parts[0].text!==void 0?[t.parts[0].text]:[]}return Array.isArray(e)?e.map(t=>Tn(n,t)):[Tn(n,e)]}function ct(n,e){if(e==null||Array.isArray(e)&&e.length===0)throw new Error("contents are required");if(!Array.isArray(e)){if(sg(e)||rg(e))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[Tn(n,e)]}const t=[],i=[],s=Zh(e[0]);for(const r of e){const o=Zh(r);if(o!=s)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(o)t.push(r);else{if(sg(r)||rg(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");i.push(r)}}return s||t.push({role:"user",parts:IE(n,i)}),t}function Fl(n,e){if(!n.isVertexAI()&&"default"in e)throw new Error("Default value is not supported in the response schema for the Gemini API.");if("anyOf"in e&&e.anyOf!==void 0)for(const t of e.anyOf)Fl(n,t);if("items"in e&&e.items!==void 0&&Fl(n,e.items),"properties"in e&&e.properties!==void 0)for(const t of Object.values(e.properties))Fl(n,t)}function AE(n,e){return Fl(n,e),e}function SE(n,e){if(typeof e=="object"&&"voiceConfig"in e)return e;if(typeof e=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:e}}};throw new Error(`Unsupported speechConfig type: ${typeof e}`)}function vu(n,e){return e}function On(n,e){if(!Array.isArray(e))throw new Error("tool is required and must be an array of Tools");return e}function AP(n,e,t,i=1){const s=!e.startsWith(`${t}/`)&&e.split("/").length===i;return n.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${n.getProject()}/${e}`:e.startsWith(`${t}/`)?`projects/${n.getProject()}/locations/${n.getLocation()}/${e}`:s?`projects/${n.getProject()}/locations/${n.getLocation()}/${t}/${e}`:e:s?`${t}/${e}`:e}function Ns(n,e){if(typeof e!="string")throw new Error("name must be a string");return AP(n,e,"cachedContents")}function Ds(n,e){if(typeof e!="string")throw new Error("fromImageBytes must be a string");return e}function bE(n,e){if(typeof e!="string")throw new Error("fromName must be a string");return e.startsWith("files/")?e.split("files/")[1]:e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function SP(n,e){const t={};if(f(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=f(e,["thought"]);i!=null&&h(t,["thought"],i);const s=f(e,["codeExecutionResult"]);s!=null&&h(t,["codeExecutionResult"],s);const r=f(e,["executableCode"]);r!=null&&h(t,["executableCode"],r);const o=f(e,["fileData"]);o!=null&&h(t,["fileData"],o);const a=f(e,["functionCall"]);a!=null&&h(t,["functionCall"],a);const l=f(e,["functionResponse"]);l!=null&&h(t,["functionResponse"],l);const u=f(e,["inlineData"]);u!=null&&h(t,["inlineData"],u);const d=f(e,["text"]);return d!=null&&h(t,["text"],d),t}function og(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>SP(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function bP(n,e){const t={};if(f(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const s=f(e,["name"]);s!=null&&h(t,["name"],s);const r=f(e,["parameters"]);return r!=null&&h(t,["parameters"],r),t}function RP(){return{}}function PP(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function kP(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],PP(n,i)),t}function xP(n,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(a=>bP(n,a))):h(t,["functionDeclarations"],i)),f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(e,["googleSearch"])!=null&&h(t,["googleSearch"],RP());const r=f(e,["googleSearchRetrieval"]);r!=null&&h(t,["googleSearchRetrieval"],kP(n,r));const o=f(e,["codeExecution"]);return o!=null&&h(t,["codeExecution"],o),t}function NP(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["allowedFunctionNames"]);return s!=null&&h(t,["allowedFunctionNames"],s),t}function DP(n,e){const t={},i=f(e,["functionCallingConfig"]);return i!=null&&h(t,["functionCallingConfig"],NP(n,i)),t}function MP(n,e,t){const i={},s=f(e,["ttl"]);t!==void 0&&s!=null&&h(t,["ttl"],s);const r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const o=f(e,["displayName"]);t!==void 0&&o!=null&&h(t,["displayName"],o);const a=f(e,["contents"]);t!==void 0&&a!=null&&(Array.isArray(a)?h(t,["contents"],ct(n,ct(n,a).map(p=>og(n,p)))):h(t,["contents"],ct(n,a)));const l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],og(n,Tn(n,l)));const u=f(e,["tools"]);t!==void 0&&u!=null&&(Array.isArray(u)?h(t,["tools"],u.map(p=>xP(n,p))):h(t,["tools"],u));const d=f(e,["toolConfig"]);return t!==void 0&&d!=null&&h(t,["toolConfig"],DP(n,d)),i}function VP(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],wE(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],MP(n,s,t)),t}function LP(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function OP(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function FP(n,e,t){const i={},s=f(e,["ttl"]);t!==void 0&&s!=null&&h(t,["ttl"],s);const r=f(e,["expireTime"]);return t!==void 0&&r!=null&&h(t,["expireTime"],r),i}function UP(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],FP(n,s,t)),t}function BP(n,e,t){const i={},s=f(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=f(e,["pageToken"]);return t!==void 0&&r!=null&&h(t,["_query","pageToken"],r),i}function $P(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],BP(n,i,t)),t}function qP(n,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],i);const s=f(e,["thought"]);s!=null&&h(t,["thought"],s);const r=f(e,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const o=f(e,["executableCode"]);o!=null&&h(t,["executableCode"],o);const a=f(e,["fileData"]);a!=null&&h(t,["fileData"],a);const l=f(e,["functionCall"]);l!=null&&h(t,["functionCall"],l);const u=f(e,["functionResponse"]);u!=null&&h(t,["functionResponse"],u);const d=f(e,["inlineData"]);d!=null&&h(t,["inlineData"],d);const p=f(e,["text"]);return p!=null&&h(t,["text"],p),t}function ag(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>qP(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function HP(n,e){const t={},i=f(e,["example"]);i!=null&&h(t,["example"],i);const s=f(e,["pattern"]);s!=null&&h(t,["pattern"],s);const r=f(e,["default"]);r!=null&&h(t,["default"],r);const o=f(e,["maxLength"]);o!=null&&h(t,["maxLength"],o);const a=f(e,["minLength"]);a!=null&&h(t,["minLength"],a);const l=f(e,["minProperties"]);l!=null&&h(t,["minProperties"],l);const u=f(e,["maxProperties"]);u!=null&&h(t,["maxProperties"],u);const d=f(e,["anyOf"]);d!=null&&h(t,["anyOf"],d);const p=f(e,["description"]);p!=null&&h(t,["description"],p);const g=f(e,["enum"]);g!=null&&h(t,["enum"],g);const _=f(e,["format"]);_!=null&&h(t,["format"],_);const E=f(e,["items"]);E!=null&&h(t,["items"],E);const I=f(e,["maxItems"]);I!=null&&h(t,["maxItems"],I);const k=f(e,["maximum"]);k!=null&&h(t,["maximum"],k);const D=f(e,["minItems"]);D!=null&&h(t,["minItems"],D);const M=f(e,["minimum"]);M!=null&&h(t,["minimum"],M);const P=f(e,["nullable"]);P!=null&&h(t,["nullable"],P);const x=f(e,["properties"]);x!=null&&h(t,["properties"],x);const L=f(e,["propertyOrdering"]);L!=null&&h(t,["propertyOrdering"],L);const F=f(e,["required"]);F!=null&&h(t,["required"],F);const R=f(e,["title"]);R!=null&&h(t,["title"],R);const T=f(e,["type"]);return T!=null&&h(t,["type"],T),t}function GP(n,e){const t={},i=f(e,["response"]);i!=null&&h(t,["response"],HP(n,i));const s=f(e,["description"]);s!=null&&h(t,["description"],s);const r=f(e,["name"]);r!=null&&h(t,["name"],r);const o=f(e,["parameters"]);return o!=null&&h(t,["parameters"],o),t}function WP(){return{}}function KP(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function zP(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],KP(n,i)),t}function YP(n,e){const t={},i=f(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(l=>GP(n,l))):h(t,["functionDeclarations"],i));const s=f(e,["retrieval"]);s!=null&&h(t,["retrieval"],s),f(e,["googleSearch"])!=null&&h(t,["googleSearch"],WP());const o=f(e,["googleSearchRetrieval"]);o!=null&&h(t,["googleSearchRetrieval"],zP(n,o));const a=f(e,["codeExecution"]);return a!=null&&h(t,["codeExecution"],a),t}function JP(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["allowedFunctionNames"]);return s!=null&&h(t,["allowedFunctionNames"],s),t}function QP(n,e){const t={},i=f(e,["functionCallingConfig"]);return i!=null&&h(t,["functionCallingConfig"],JP(n,i)),t}function XP(n,e,t){const i={},s=f(e,["ttl"]);t!==void 0&&s!=null&&h(t,["ttl"],s);const r=f(e,["expireTime"]);t!==void 0&&r!=null&&h(t,["expireTime"],r);const o=f(e,["displayName"]);t!==void 0&&o!=null&&h(t,["displayName"],o);const a=f(e,["contents"]);t!==void 0&&a!=null&&(Array.isArray(a)?h(t,["contents"],ct(n,ct(n,a).map(p=>ag(n,p)))):h(t,["contents"],ct(n,a)));const l=f(e,["systemInstruction"]);t!==void 0&&l!=null&&h(t,["systemInstruction"],ag(n,Tn(n,l)));const u=f(e,["tools"]);t!==void 0&&u!=null&&(Array.isArray(u)?h(t,["tools"],u.map(p=>YP(n,p))):h(t,["tools"],u));const d=f(e,["toolConfig"]);return t!==void 0&&d!=null&&h(t,["toolConfig"],QP(n,d)),i}function jP(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["model"],wE(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],XP(n,s,t)),t}function ZP(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function ek(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function tk(n,e,t){const i={},s=f(e,["ttl"]);t!==void 0&&s!=null&&h(t,["ttl"],s);const r=f(e,["expireTime"]);return t!==void 0&&r!=null&&h(t,["expireTime"],r),i}function nk(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","name"],Ns(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],tk(n,s,t)),t}function ik(n,e,t){const i={},s=f(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=f(e,["pageToken"]);return t!==void 0&&r!=null&&h(t,["_query","pageToken"],r),i}function sk(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],ik(n,i,t)),t}function Ul(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["model"]);r!=null&&h(t,["model"],r);const o=f(e,["createTime"]);o!=null&&h(t,["createTime"],o);const a=f(e,["updateTime"]);a!=null&&h(t,["updateTime"],a);const l=f(e,["expireTime"]);l!=null&&h(t,["expireTime"],l);const u=f(e,["usageMetadata"]);return u!=null&&h(t,["usageMetadata"],u),t}function rk(){return{}}function ok(n,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const s=f(e,["cachedContents"]);return s!=null&&(Array.isArray(s)?h(t,["cachedContents"],s.map(r=>Ul(n,r))):h(t,["cachedContents"],s)),t}function Bl(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["model"]);r!=null&&h(t,["model"],r);const o=f(e,["createTime"]);o!=null&&h(t,["createTime"],o);const a=f(e,["updateTime"]);a!=null&&h(t,["updateTime"],a);const l=f(e,["expireTime"]);l!=null&&h(t,["expireTime"],l);const u=f(e,["usageMetadata"]);return u!=null&&h(t,["usageMetadata"],u),t}function ak(){return{}}function lk(n,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const s=f(e,["cachedContents"]);return s!=null&&(Array.isArray(s)?h(t,["cachedContents"],s.map(r=>Bl(n,r))):h(t,["cachedContents"],s)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Ac;(function(n){n.PAGED_ITEM_BATCH_JOBS="batchJobs",n.PAGED_ITEM_MODELS="models",n.PAGED_ITEM_TUNING_JOBS="tuningJobs",n.PAGED_ITEM_FILES="files",n.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Ac||(Ac={}));class RE{constructor(e,t,i,s){this.pageInternal=[],this.paramsInternal={},this.requestInternal=t,this.init(e,i,s)}init(e,t,i){var s,r;this.nameInternal=e,this.pageInternal=t[this.nameInternal]||[],this.idxInternal=0;let o={config:{}};i?typeof i=="object"?o=Object.assign({},i):o=i:o={config:{}},o.config&&(o.config.pageToken=t.nextPageToken),this.paramsInternal=o,this.pageInternalSize=(r=(s=o.config)===null||s===void 0?void 0:s.pageSize)!==null&&r!==void 0?r:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var lg;(function(n){n.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",n.OUTCOME_OK="OUTCOME_OK",n.OUTCOME_FAILED="OUTCOME_FAILED",n.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(lg||(lg={}));var cg;(function(n){n.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",n.PYTHON="PYTHON"})(cg||(cg={}));var Vt;(function(n){n.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",n.STRING="STRING",n.NUMBER="NUMBER",n.INTEGER="INTEGER",n.BOOLEAN="BOOLEAN",n.ARRAY="ARRAY",n.OBJECT="OBJECT"})(Vt||(Vt={}));var ug;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(ug||(ug={}));var hg;(function(n){n.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",n.SEVERITY="SEVERITY",n.PROBABILITY="PROBABILITY"})(hg||(hg={}));var fg;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE",n.OFF="OFF"})(fg||(fg={}));var dg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(dg||(dg={}));var pg;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.IMAGE_SAFETY="IMAGE_SAFETY"})(pg||(pg={}));var mg;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(mg||(mg={}));var gg;(function(n){n.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",n.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",n.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",n.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",n.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(gg||(gg={}));var yg;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT"})(yg||(yg={}));var _g;(function(n){n.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",n.ON_DEMAND="ON_DEMAND",n.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_g||(_g={}));var ir;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.AUDIO="AUDIO"})(ir||(ir={}));var vg;(function(n){n.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",n.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",n.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",n.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(vg||(vg={}));var Tg;(function(n){n.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",n.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",n.BALANCED="BALANCED",n.PRIORITIZE_COST="PRIORITIZE_COST"})(Tg||(Tg={}));var Eg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(Eg||(Eg={}));var wg;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(wg||(wg={}));var Ig;(function(n){n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ig||(Ig={}));var Cg;(function(n){n.DONT_ALLOW="DONT_ALLOW",n.ALLOW_ADULT="ALLOW_ADULT",n.ALLOW_ALL="ALLOW_ALL"})(Cg||(Cg={}));var Ag;(function(n){n.auto="auto",n.en="en",n.ja="ja",n.ko="ko",n.hi="hi"})(Ag||(Ag={}));var Sg;(function(n){n.STATE_UNSPECIFIED="STATE_UNSPECIFIED",n.PROCESSING="PROCESSING",n.ACTIVE="ACTIVE",n.FAILED="FAILED"})(Sg||(Sg={}));var bg;(function(n){n.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",n.UPLOADED="UPLOADED",n.GENERATED="GENERATED"})(bg||(bg={}));var Rg;(function(n){n.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",n.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",n.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",n.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",n.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Rg||(Rg={}));var Pg;(function(n){n.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",n.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",n.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",n.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Pg||(Pg={}));var kg;(function(n){n.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",n.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",n.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",n.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(kg||(kg={}));var xg;(function(n){n.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",n.TEXT="TEXT",n.IMAGE="IMAGE",n.VIDEO="VIDEO",n.AUDIO="AUDIO",n.DOCUMENT="DOCUMENT"})(xg||(xg={}));var gs;(function(n){n.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",n.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",n.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(gs||(gs={}));var ef;(function(n){n.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",n.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",n.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(ef||(ef={}));var Ng;(function(n){n.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",n.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",n.NO_INTERRUPTION="NO_INTERRUPTION"})(Ng||(Ng={}));var Dg;(function(n){n.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",n.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",n.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(Dg||(Dg={}));class Tl{get text(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let u="",d=!1;const p=[];for(const g of(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)!==null&&l!==void 0?l:[]){for(const[_,E]of Object.entries(g))_!=="text"&&_!=="thought"&&(E!==null||E!==void 0)&&p.push(_);if(typeof g.text=="string"){if(typeof g.thought=="boolean"&&g.thought)continue;d=!0,u+=g.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),d?u:void 0}get functionCalls(){var e,t,i,s,r,o,a,l;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const u=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(d=>d.functionCall).map(d=>d.functionCall).filter(d=>d!==void 0);if((u==null?void 0:u.length)!==0)return u}get executableCode(){var e,t,i,s,r,o,a,l,u;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const d=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.code}get codeExecutionResult(){var e,t,i,s,r,o,a,l,u;if(((s=(i=(t=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||t===void 0?void 0:t.content)===null||i===void 0?void 0:i.parts)===null||s===void 0?void 0:s.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const d=(l=(a=(o=(r=this.candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content)===null||a===void 0?void 0:a.parts)===null||l===void 0?void 0:l.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((d==null?void 0:d.length)!==0)return(u=d==null?void 0:d[0])===null||u===void 0?void 0:u.output}}class Mg{}class Vg{}class Lg{}class ck{}class Og{}class Fg{}class uk{}class tf{constructor(e){const t={};for(const i of e.headers.entries())t[i[0]]=i[1];this.headers=t,this.responseInternal=e}json(){return this.responseInternal.json()}}class hk{}class fk{}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class dk extends _u{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new RE(Ac.PAGED_ITEM_CACHED_CONTENTS,i=>this.listInternal(i),await this.listInternal(t),t)}async create(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=jP(this.apiClient,e);return r=Le("cachedContents",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>Bl(this.apiClient,l))}else{const a=VP(this.apiClient,e);return r=Le("cachedContents",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>Ul(this.apiClient,l))}}async get(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=ZP(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>Bl(this.apiClient,l))}else{const a=LP(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>Ul(this.apiClient,l))}}async delete(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=ek(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(()=>{const l=ak(),u=new Og;return Object.assign(u,l),u})}else{const a=OP(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"DELETE",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(()=>{const l=rk(),u=new Og;return Object.assign(u,l),u})}}async update(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=nk(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>Bl(this.apiClient,l))}else{const a=UP(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"PATCH",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>Ul(this.apiClient,l))}}async listInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=sk(this.apiClient,e);return r=Le("cachedContents",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>{const u=lk(this.apiClient,l),d=new Fg;return Object.assign(d,u),d})}else{const a=$P(this.apiClient,e);return r=Le("cachedContents",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>{const u=ok(this.apiClient,l),d=new Fg;return Object.assign(d,u),d})}}}function Ug(n){var e=typeof Symbol=="function"&&Symbol.iterator,t=e&&n[e],i=0;if(t)return t.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Xt(n){return this instanceof Xt?(this.v=n,this):new Xt(n)}function Sc(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),s,r=[];return s=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",o),s[Symbol.asyncIterator]=function(){return this},s;function o(_){return function(E){return Promise.resolve(E).then(_,p)}}function a(_,E){i[_]&&(s[_]=function(I){return new Promise(function(k,D){r.push([_,I,k,D])>1||l(_,I)})},E&&(s[_]=E(s[_])))}function l(_,E){try{u(i[_](E))}catch(I){g(r[0][3],I)}}function u(_){_.value instanceof Xt?Promise.resolve(_.value.v).then(d,p):g(r[0][2],_)}function d(_){l("next",_)}function p(_){l("throw",_)}function g(_,E){_(E),r.shift(),r.length&&l(r[0][0],r[0][1])}}function nf(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=n[Symbol.asyncIterator],t;return e?e.call(n):(n=typeof Ug=="function"?Ug(n):n[Symbol.iterator](),t={},i("next"),i("throw"),i("return"),t[Symbol.asyncIterator]=function(){return this},t);function i(r){t[r]=n[r]&&function(o){return new Promise(function(a,l){o=n[r](o),s(a,l,o.done,o.value)})}}function s(r,o,a,l){Promise.resolve(l).then(function(u){r({value:u,done:a})},o)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function pk(n){var e;if(n.candidates==null||n.candidates.length===0)return!1;const t=(e=n.candidates[0])===null||e===void 0?void 0:e.content;return t===void 0?!1:PE(t)}function PE(n){if(n.parts===void 0||n.parts.length===0)return!1;for(const e of n.parts)if(e===void 0||Object.keys(e).length===0||e.text!==void 0&&e.text==="")return!1;return!0}function mk(n){if(n.length!==0){if(n[0].role!=="user")throw new Error("History must start with a user turn.");for(const e of n)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function gk(n){if(n===void 0||n.length===0)return[];const e=[],t=n.length;let i=0,s=n[0];for(;i<t;)if(n[i].role==="user")s=n[i],i++;else{const r=[];let o=!0;for(;i<t&&n[i].role==="model";)r.push(n[i]),o&&!PE(n[i])&&(o=!1),i++;o&&(e.push(s),e.push(...r))}return e}class yk{constructor(e,t){this.modelsModule=e,this.apiClient=t}create(e){return new _k(this.apiClient,this.modelsModule,e.model,e.config,e.history)}}class _k{constructor(e,t,i,s={},r=[]){this.apiClient=e,this.modelsModule=t,this.model=i,this.config=s,this.history=r,this.sendPromise=Promise.resolve(),mk(r)}async sendMessage(e){var t;await this.sendPromise;const i=Tn(this.apiClient,e.message),s=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});return this.sendPromise=(async()=>{var r,o;const l=(o=(r=(await s).candidates)===null||r===void 0?void 0:r[0])===null||o===void 0?void 0:o.content,u=l?[l]:[];this.recordHistory(i,u)})(),await this.sendPromise,s}async sendMessageStream(e){var t;await this.sendPromise;const i=Tn(this.apiClient,e.message),s=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(i),config:(t=e.config)!==null&&t!==void 0?t:this.config});this.sendPromise=s.then(()=>{});const r=await s;return this.processStreamResponse(r,i)}getHistory(e=!1){return e?gk(this.history):this.history}processStreamResponse(e,t){var i,s;return Sc(this,arguments,function*(){var o,a,l,u;const d=[];try{for(var p=!0,g=nf(e),_;_=yield Xt(g.next()),o=_.done,!o;p=!0){u=_.value,p=!1;const E=u;if(pk(E)){const I=(s=(i=E.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content;I!==void 0&&d.push(I)}yield yield Xt(E)}}catch(E){a={error:E}}finally{try{!p&&!o&&(l=g.return)&&(yield Xt(l.call(g)))}finally{if(a)throw a.error}}this.recordHistory(t,d)})}recordHistory(e,t){let i=[];t.length>0&&t.every(s=>s.role==="model")?i=t:i.push({role:"model",parts:[]}),this.history.push(e),this.history.push(...i)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function vk(n,e,t){const i={},s=f(e,["pageSize"]);t!==void 0&&s!=null&&h(t,["_query","pageSize"],s);const r=f(e,["pageToken"]);return t!==void 0&&r!=null&&h(t,["_query","pageToken"],r),i}function Tk(n,e){const t={},i=f(e,["config"]);return i!=null&&h(t,["config"],vk(n,i,t)),t}function Ek(n,e){const t={},i=f(e,["details"]);i!=null&&h(t,["details"],i);const s=f(e,["message"]);s!=null&&h(t,["message"],s);const r=f(e,["code"]);return r!=null&&h(t,["code"],r),t}function wk(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["mimeType"]);r!=null&&h(t,["mimeType"],r);const o=f(e,["sizeBytes"]);o!=null&&h(t,["sizeBytes"],o);const a=f(e,["createTime"]);a!=null&&h(t,["createTime"],a);const l=f(e,["expirationTime"]);l!=null&&h(t,["expirationTime"],l);const u=f(e,["updateTime"]);u!=null&&h(t,["updateTime"],u);const d=f(e,["sha256Hash"]);d!=null&&h(t,["sha256Hash"],d);const p=f(e,["uri"]);p!=null&&h(t,["uri"],p);const g=f(e,["downloadUri"]);g!=null&&h(t,["downloadUri"],g);const _=f(e,["state"]);_!=null&&h(t,["state"],_);const E=f(e,["source"]);E!=null&&h(t,["source"],E);const I=f(e,["videoMetadata"]);I!=null&&h(t,["videoMetadata"],I);const k=f(e,["error"]);return k!=null&&h(t,["error"],Ek(n,k)),t}function Ik(n,e){const t={},i=f(e,["file"]);i!=null&&h(t,["file"],wk(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function Ck(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","file"],bE(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function Ak(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["_url","file"],bE(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function Sk(n,e){const t={},i=f(e,["details"]);i!=null&&h(t,["details"],i);const s=f(e,["message"]);s!=null&&h(t,["message"],s);const r=f(e,["code"]);return r!=null&&h(t,["code"],r),t}function sf(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["mimeType"]);r!=null&&h(t,["mimeType"],r);const o=f(e,["sizeBytes"]);o!=null&&h(t,["sizeBytes"],o);const a=f(e,["createTime"]);a!=null&&h(t,["createTime"],a);const l=f(e,["expirationTime"]);l!=null&&h(t,["expirationTime"],l);const u=f(e,["updateTime"]);u!=null&&h(t,["updateTime"],u);const d=f(e,["sha256Hash"]);d!=null&&h(t,["sha256Hash"],d);const p=f(e,["uri"]);p!=null&&h(t,["uri"],p);const g=f(e,["downloadUri"]);g!=null&&h(t,["downloadUri"],g);const _=f(e,["state"]);_!=null&&h(t,["state"],_);const E=f(e,["source"]);E!=null&&h(t,["source"],E);const I=f(e,["videoMetadata"]);I!=null&&h(t,["videoMetadata"],I);const k=f(e,["error"]);return k!=null&&h(t,["error"],Sk(n,k)),t}function bk(n,e){const t={},i=f(e,["nextPageToken"]);i!=null&&h(t,["nextPageToken"],i);const s=f(e,["files"]);return s!=null&&(Array.isArray(s)?h(t,["files"],s.map(r=>sf(n,r))):h(t,["files"],s)),t}function Rk(){return{}}function Pk(){return{}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class kk extends _u{constructor(e){super(),this.apiClient=e,this.list=async(t={})=>new RE(Ac.PAGED_ITEM_FILES,i=>this.listInternal(i),await this.listInternal(t),t)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(t=>sf(this.apiClient,t))}async listInternal(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Tk(this.apiClient,e);return s=Le("files",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(a=>{const l=bk(this.apiClient,a),u=new uk;return Object.assign(u,l),u})}}async createInternal(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ik(this.apiClient,e);return s=Le("upload/v1beta/files",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(()=>{const a=Rk(),l=new hk;return Object.assign(l,a),l})}}async get(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ck(this.apiClient,e);return s=Le("files/{file}",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(a=>sf(this.apiClient,a))}}async delete(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const o=Ak(this.apiClient,e);return s=Le("files/{file}",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"DELETE",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(()=>{const a=Pk(),l=new fk;return Object.assign(l,a),l})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function xk(n,e){const t={};if(f(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=f(e,["thought"]);i!=null&&h(t,["thought"],i);const s=f(e,["codeExecutionResult"]);s!=null&&h(t,["codeExecutionResult"],s);const r=f(e,["executableCode"]);r!=null&&h(t,["executableCode"],r);const o=f(e,["fileData"]);o!=null&&h(t,["fileData"],o);const a=f(e,["functionCall"]);a!=null&&h(t,["functionCall"],a);const l=f(e,["functionResponse"]);l!=null&&h(t,["functionResponse"],l);const u=f(e,["inlineData"]);u!=null&&h(t,["inlineData"],u);const d=f(e,["text"]);return d!=null&&h(t,["text"],d),t}function Nk(n,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],i);const s=f(e,["thought"]);s!=null&&h(t,["thought"],s);const r=f(e,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const o=f(e,["executableCode"]);o!=null&&h(t,["executableCode"],o);const a=f(e,["fileData"]);a!=null&&h(t,["fileData"],a);const l=f(e,["functionCall"]);l!=null&&h(t,["functionCall"],l);const u=f(e,["functionResponse"]);u!=null&&h(t,["functionResponse"],u);const d=f(e,["inlineData"]);d!=null&&h(t,["inlineData"],d);const p=f(e,["text"]);return p!=null&&h(t,["text"],p),t}function Dk(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>xk(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function Mk(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>Nk(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function Vk(n,e){const t={},i=f(e,["example"]);i!=null&&h(t,["example"],i);const s=f(e,["pattern"]);s!=null&&h(t,["pattern"],s);const r=f(e,["default"]);r!=null&&h(t,["default"],r);const o=f(e,["maxLength"]);o!=null&&h(t,["maxLength"],o);const a=f(e,["minLength"]);a!=null&&h(t,["minLength"],a);const l=f(e,["minProperties"]);l!=null&&h(t,["minProperties"],l);const u=f(e,["maxProperties"]);u!=null&&h(t,["maxProperties"],u);const d=f(e,["anyOf"]);d!=null&&h(t,["anyOf"],d);const p=f(e,["description"]);p!=null&&h(t,["description"],p);const g=f(e,["enum"]);g!=null&&h(t,["enum"],g);const _=f(e,["format"]);_!=null&&h(t,["format"],_);const E=f(e,["items"]);E!=null&&h(t,["items"],E);const I=f(e,["maxItems"]);I!=null&&h(t,["maxItems"],I);const k=f(e,["maximum"]);k!=null&&h(t,["maximum"],k);const D=f(e,["minItems"]);D!=null&&h(t,["minItems"],D);const M=f(e,["minimum"]);M!=null&&h(t,["minimum"],M);const P=f(e,["nullable"]);P!=null&&h(t,["nullable"],P);const x=f(e,["properties"]);x!=null&&h(t,["properties"],x);const L=f(e,["propertyOrdering"]);L!=null&&h(t,["propertyOrdering"],L);const F=f(e,["required"]);F!=null&&h(t,["required"],F);const R=f(e,["title"]);R!=null&&h(t,["title"],R);const T=f(e,["type"]);return T!=null&&h(t,["type"],T),t}function Lk(n,e){const t={};if(f(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const s=f(e,["name"]);s!=null&&h(t,["name"],s);const r=f(e,["parameters"]);return r!=null&&h(t,["parameters"],r),t}function Ok(n,e){const t={},i=f(e,["response"]);i!=null&&h(t,["response"],Vk(n,i));const s=f(e,["description"]);s!=null&&h(t,["description"],s);const r=f(e,["name"]);r!=null&&h(t,["name"],r);const o=f(e,["parameters"]);return o!=null&&h(t,["parameters"],o),t}function Fk(){return{}}function Uk(){return{}}function Bk(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function $k(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function qk(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],Bk(n,i)),t}function Hk(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],$k(n,i)),t}function Gk(n,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(a=>Lk(n,a))):h(t,["functionDeclarations"],i)),f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(e,["googleSearch"])!=null&&h(t,["googleSearch"],Fk());const r=f(e,["googleSearchRetrieval"]);r!=null&&h(t,["googleSearchRetrieval"],qk(n,r));const o=f(e,["codeExecution"]);return o!=null&&h(t,["codeExecution"],o),t}function Wk(n,e){const t={},i=f(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(l=>Ok(n,l))):h(t,["functionDeclarations"],i));const s=f(e,["retrieval"]);s!=null&&h(t,["retrieval"],s),f(e,["googleSearch"])!=null&&h(t,["googleSearch"],Uk());const o=f(e,["googleSearchRetrieval"]);o!=null&&h(t,["googleSearchRetrieval"],Hk(n,o));const a=f(e,["codeExecution"]);return a!=null&&h(t,["codeExecution"],a),t}function Kk(n,e){const t={},i=f(e,["handle"]);if(i!=null&&h(t,["handle"],i),f(e,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return t}function zk(n,e){const t={},i=f(e,["handle"]);i!=null&&h(t,["handle"],i);const s=f(e,["transparent"]);return s!=null&&h(t,["transparent"],s),t}function Yk(){return{}}function Bg(){return{}}function Jk(n,e){const t={},i=f(e,["disabled"]);i!=null&&h(t,["disabled"],i);const s=f(e,["startOfSpeechSensitivity"]);s!=null&&h(t,["startOfSpeechSensitivity"],s);const r=f(e,["endOfSpeechSensitivity"]);r!=null&&h(t,["endOfSpeechSensitivity"],r);const o=f(e,["prefixPaddingMs"]);o!=null&&h(t,["prefixPaddingMs"],o);const a=f(e,["silenceDurationMs"]);return a!=null&&h(t,["silenceDurationMs"],a),t}function Qk(n,e){const t={},i=f(e,["disabled"]);i!=null&&h(t,["disabled"],i);const s=f(e,["startOfSpeechSensitivity"]);s!=null&&h(t,["startOfSpeechSensitivity"],s);const r=f(e,["endOfSpeechSensitivity"]);r!=null&&h(t,["endOfSpeechSensitivity"],r);const o=f(e,["prefixPaddingMs"]);o!=null&&h(t,["prefixPaddingMs"],o);const a=f(e,["silenceDurationMs"]);return a!=null&&h(t,["silenceDurationMs"],a),t}function Xk(n,e){const t={},i=f(e,["automaticActivityDetection"]);i!=null&&h(t,["automaticActivityDetection"],Jk(n,i));const s=f(e,["activityHandling"]);s!=null&&h(t,["activityHandling"],s);const r=f(e,["turnCoverage"]);return r!=null&&h(t,["turnCoverage"],r),t}function jk(n,e){const t={},i=f(e,["automaticActivityDetection"]);i!=null&&h(t,["automaticActivityDetection"],Qk(n,i));const s=f(e,["activityHandling"]);s!=null&&h(t,["activityHandling"],s);const r=f(e,["turnCoverage"]);return r!=null&&h(t,["turnCoverage"],r),t}function Zk(n,e){const t={},i=f(e,["targetTokens"]);return i!=null&&h(t,["targetTokens"],i),t}function ex(n,e){const t={},i=f(e,["targetTokens"]);return i!=null&&h(t,["targetTokens"],i),t}function tx(n,e){const t={},i=f(e,["triggerTokens"]);i!=null&&h(t,["triggerTokens"],i);const s=f(e,["slidingWindow"]);return s!=null&&h(t,["slidingWindow"],Zk(n,s)),t}function nx(n,e){const t={},i=f(e,["triggerTokens"]);i!=null&&h(t,["triggerTokens"],i);const s=f(e,["slidingWindow"]);return s!=null&&h(t,["slidingWindow"],ex(n,s)),t}function ix(n,e,t){const i={},s=f(e,["generationConfig"]);t!==void 0&&s!=null&&h(t,["setup","generationConfig"],s);const r=f(e,["responseModalities"]);t!==void 0&&r!=null&&h(t,["setup","generationConfig","responseModalities"],r);const o=f(e,["temperature"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","temperature"],o);const a=f(e,["topP"]);t!==void 0&&a!=null&&h(t,["setup","generationConfig","topP"],a);const l=f(e,["topK"]);t!==void 0&&l!=null&&h(t,["setup","generationConfig","topK"],l);const u=f(e,["maxOutputTokens"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","maxOutputTokens"],u);const d=f(e,["mediaResolution"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","mediaResolution"],d);const p=f(e,["seed"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","seed"],p);const g=f(e,["speechConfig"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","speechConfig"],g);const _=f(e,["systemInstruction"]);t!==void 0&&_!=null&&h(t,["setup","systemInstruction"],Dk(n,Tn(n,_)));const E=f(e,["tools"]);t!==void 0&&E!=null&&(Array.isArray(E)?h(t,["setup","tools"],On(n,On(n,E).map(P=>Gk(n,vu(n,P))))):h(t,["setup","tools"],On(n,E)));const I=f(e,["sessionResumption"]);if(t!==void 0&&I!=null&&h(t,["setup","sessionResumption"],Kk(n,I)),f(e,["inputAudioTranscription"])!==void 0)throw new Error("inputAudioTranscription parameter is not supported in Gemini API.");const k=f(e,["outputAudioTranscription"]);t!==void 0&&k!=null&&h(t,["setup","outputAudioTranscription"],Yk());const D=f(e,["realtimeInputConfig"]);t!==void 0&&D!=null&&h(t,["setup","realtimeInputConfig"],Xk(n,D));const M=f(e,["contextWindowCompression"]);return t!==void 0&&M!=null&&h(t,["setup","contextWindowCompression"],tx(n,M)),i}function sx(n,e,t){const i={},s=f(e,["generationConfig"]);t!==void 0&&s!=null&&h(t,["setup","generationConfig"],s);const r=f(e,["responseModalities"]);t!==void 0&&r!=null&&h(t,["setup","generationConfig","responseModalities"],r);const o=f(e,["temperature"]);t!==void 0&&o!=null&&h(t,["setup","generationConfig","temperature"],o);const a=f(e,["topP"]);t!==void 0&&a!=null&&h(t,["setup","generationConfig","topP"],a);const l=f(e,["topK"]);t!==void 0&&l!=null&&h(t,["setup","generationConfig","topK"],l);const u=f(e,["maxOutputTokens"]);t!==void 0&&u!=null&&h(t,["setup","generationConfig","maxOutputTokens"],u);const d=f(e,["mediaResolution"]);t!==void 0&&d!=null&&h(t,["setup","generationConfig","mediaResolution"],d);const p=f(e,["seed"]);t!==void 0&&p!=null&&h(t,["setup","generationConfig","seed"],p);const g=f(e,["speechConfig"]);t!==void 0&&g!=null&&h(t,["setup","generationConfig","speechConfig"],g);const _=f(e,["systemInstruction"]);t!==void 0&&_!=null&&h(t,["setup","systemInstruction"],Mk(n,Tn(n,_)));const E=f(e,["tools"]);t!==void 0&&E!=null&&(Array.isArray(E)?h(t,["setup","tools"],On(n,On(n,E).map(x=>Wk(n,vu(n,x))))):h(t,["setup","tools"],On(n,E)));const I=f(e,["sessionResumption"]);t!==void 0&&I!=null&&h(t,["setup","sessionResumption"],zk(n,I));const k=f(e,["inputAudioTranscription"]);t!==void 0&&k!=null&&h(t,["setup","inputAudioTranscription"],Bg());const D=f(e,["outputAudioTranscription"]);t!==void 0&&D!=null&&h(t,["setup","outputAudioTranscription"],Bg());const M=f(e,["realtimeInputConfig"]);t!==void 0&&M!=null&&h(t,["setup","realtimeInputConfig"],jk(n,M));const P=f(e,["contextWindowCompression"]);return t!==void 0&&P!=null&&h(t,["setup","contextWindowCompression"],nx(n,P)),i}function rx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],xt(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],ix(n,s,t)),t}function ox(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["setup","model"],xt(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],sx(n,s,t)),t}function ax(){return{}}function lx(){return{}}function cx(n,e){const t={},i=f(e,["thought"]);i!=null&&h(t,["thought"],i);const s=f(e,["codeExecutionResult"]);s!=null&&h(t,["codeExecutionResult"],s);const r=f(e,["executableCode"]);r!=null&&h(t,["executableCode"],r);const o=f(e,["fileData"]);o!=null&&h(t,["fileData"],o);const a=f(e,["functionCall"]);a!=null&&h(t,["functionCall"],a);const l=f(e,["functionResponse"]);l!=null&&h(t,["functionResponse"],l);const u=f(e,["inlineData"]);u!=null&&h(t,["inlineData"],u);const d=f(e,["text"]);return d!=null&&h(t,["text"],d),t}function ux(n,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],i);const s=f(e,["thought"]);s!=null&&h(t,["thought"],s);const r=f(e,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const o=f(e,["executableCode"]);o!=null&&h(t,["executableCode"],o);const a=f(e,["fileData"]);a!=null&&h(t,["fileData"],a);const l=f(e,["functionCall"]);l!=null&&h(t,["functionCall"],l);const u=f(e,["functionResponse"]);u!=null&&h(t,["functionResponse"],u);const d=f(e,["inlineData"]);d!=null&&h(t,["inlineData"],d);const p=f(e,["text"]);return p!=null&&h(t,["text"],p),t}function hx(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>cx(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function fx(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>ux(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function $g(n,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const s=f(e,["finished"]);return s!=null&&h(t,["finished"],s),t}function qg(n,e){const t={},i=f(e,["text"]);i!=null&&h(t,["text"],i);const s=f(e,["finished"]);return s!=null&&h(t,["finished"],s),t}function dx(n,e){const t={},i=f(e,["modelTurn"]);i!=null&&h(t,["modelTurn"],hx(n,i));const s=f(e,["turnComplete"]);s!=null&&h(t,["turnComplete"],s);const r=f(e,["interrupted"]);r!=null&&h(t,["interrupted"],r);const o=f(e,["generationComplete"]);o!=null&&h(t,["generationComplete"],o);const a=f(e,["inputTranscription"]);a!=null&&h(t,["inputTranscription"],$g(n,a));const l=f(e,["outputTranscription"]);return l!=null&&h(t,["outputTranscription"],$g(n,l)),t}function px(n,e){const t={},i=f(e,["modelTurn"]);i!=null&&h(t,["modelTurn"],fx(n,i));const s=f(e,["turnComplete"]);s!=null&&h(t,["turnComplete"],s);const r=f(e,["interrupted"]);r!=null&&h(t,["interrupted"],r);const o=f(e,["generationComplete"]);o!=null&&h(t,["generationComplete"],o);const a=f(e,["inputTranscription"]);a!=null&&h(t,["inputTranscription"],qg(n,a));const l=f(e,["outputTranscription"]);return l!=null&&h(t,["outputTranscription"],qg(n,l)),t}function mx(n,e){const t={},i=f(e,["id"]);i!=null&&h(t,["id"],i);const s=f(e,["args"]);s!=null&&h(t,["args"],s);const r=f(e,["name"]);return r!=null&&h(t,["name"],r),t}function gx(n,e){const t={},i=f(e,["args"]);i!=null&&h(t,["args"],i);const s=f(e,["name"]);return s!=null&&h(t,["name"],s),t}function yx(n,e){const t={},i=f(e,["functionCalls"]);return i!=null&&(Array.isArray(i)?h(t,["functionCalls"],i.map(s=>mx(n,s))):h(t,["functionCalls"],i)),t}function _x(n,e){const t={},i=f(e,["functionCalls"]);return i!=null&&(Array.isArray(i)?h(t,["functionCalls"],i.map(s=>gx(n,s))):h(t,["functionCalls"],i)),t}function vx(n,e){const t={},i=f(e,["ids"]);return i!=null&&h(t,["ids"],i),t}function Tx(n,e){const t={},i=f(e,["ids"]);return i!=null&&h(t,["ids"],i),t}function El(n,e){const t={},i=f(e,["modality"]);i!=null&&h(t,["modality"],i);const s=f(e,["tokenCount"]);return s!=null&&h(t,["tokenCount"],s),t}function wl(n,e){const t={},i=f(e,["modality"]);i!=null&&h(t,["modality"],i);const s=f(e,["tokenCount"]);return s!=null&&h(t,["tokenCount"],s),t}function Ex(n,e){const t={},i=f(e,["promptTokenCount"]);i!=null&&h(t,["promptTokenCount"],i);const s=f(e,["cachedContentTokenCount"]);s!=null&&h(t,["cachedContentTokenCount"],s);const r=f(e,["responseTokenCount"]);r!=null&&h(t,["responseTokenCount"],r);const o=f(e,["toolUsePromptTokenCount"]);o!=null&&h(t,["toolUsePromptTokenCount"],o);const a=f(e,["thoughtsTokenCount"]);a!=null&&h(t,["thoughtsTokenCount"],a);const l=f(e,["totalTokenCount"]);l!=null&&h(t,["totalTokenCount"],l);const u=f(e,["promptTokensDetails"]);u!=null&&(Array.isArray(u)?h(t,["promptTokensDetails"],u.map(_=>El(n,_))):h(t,["promptTokensDetails"],u));const d=f(e,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?h(t,["cacheTokensDetails"],d.map(_=>El(n,_))):h(t,["cacheTokensDetails"],d));const p=f(e,["responseTokensDetails"]);p!=null&&(Array.isArray(p)?h(t,["responseTokensDetails"],p.map(_=>El(n,_))):h(t,["responseTokensDetails"],p));const g=f(e,["toolUsePromptTokensDetails"]);return g!=null&&(Array.isArray(g)?h(t,["toolUsePromptTokensDetails"],g.map(_=>El(n,_))):h(t,["toolUsePromptTokensDetails"],g)),t}function wx(n,e){const t={},i=f(e,["promptTokenCount"]);i!=null&&h(t,["promptTokenCount"],i);const s=f(e,["cachedContentTokenCount"]);s!=null&&h(t,["cachedContentTokenCount"],s);const r=f(e,["candidatesTokenCount"]);r!=null&&h(t,["responseTokenCount"],r);const o=f(e,["toolUsePromptTokenCount"]);o!=null&&h(t,["toolUsePromptTokenCount"],o);const a=f(e,["thoughtsTokenCount"]);a!=null&&h(t,["thoughtsTokenCount"],a);const l=f(e,["totalTokenCount"]);l!=null&&h(t,["totalTokenCount"],l);const u=f(e,["promptTokensDetails"]);u!=null&&(Array.isArray(u)?h(t,["promptTokensDetails"],u.map(E=>wl(n,E))):h(t,["promptTokensDetails"],u));const d=f(e,["cacheTokensDetails"]);d!=null&&(Array.isArray(d)?h(t,["cacheTokensDetails"],d.map(E=>wl(n,E))):h(t,["cacheTokensDetails"],d));const p=f(e,["candidatesTokensDetails"]);p!=null&&(Array.isArray(p)?h(t,["responseTokensDetails"],p.map(E=>wl(n,E))):h(t,["responseTokensDetails"],p));const g=f(e,["toolUsePromptTokensDetails"]);g!=null&&(Array.isArray(g)?h(t,["toolUsePromptTokensDetails"],g.map(E=>wl(n,E))):h(t,["toolUsePromptTokensDetails"],g));const _=f(e,["trafficType"]);return _!=null&&h(t,["trafficType"],_),t}function Ix(n,e){const t={},i=f(e,["timeLeft"]);return i!=null&&h(t,["timeLeft"],i),t}function Cx(n,e){const t={},i=f(e,["timeLeft"]);return i!=null&&h(t,["timeLeft"],i),t}function Ax(n,e){const t={},i=f(e,["newHandle"]);i!=null&&h(t,["newHandle"],i);const s=f(e,["resumable"]);s!=null&&h(t,["resumable"],s);const r=f(e,["lastConsumedClientMessageIndex"]);return r!=null&&h(t,["lastConsumedClientMessageIndex"],r),t}function Sx(n,e){const t={},i=f(e,["newHandle"]);i!=null&&h(t,["newHandle"],i);const s=f(e,["resumable"]);s!=null&&h(t,["resumable"],s);const r=f(e,["lastConsumedClientMessageIndex"]);return r!=null&&h(t,["lastConsumedClientMessageIndex"],r),t}function bx(n,e){const t={};f(e,["setupComplete"])!=null&&h(t,["setupComplete"],ax());const s=f(e,["serverContent"]);s!=null&&h(t,["serverContent"],dx(n,s));const r=f(e,["toolCall"]);r!=null&&h(t,["toolCall"],yx(n,r));const o=f(e,["toolCallCancellation"]);o!=null&&h(t,["toolCallCancellation"],vx(n,o));const a=f(e,["usageMetadata"]);a!=null&&h(t,["usageMetadata"],Ex(n,a));const l=f(e,["goAway"]);l!=null&&h(t,["goAway"],Ix(n,l));const u=f(e,["sessionResumptionUpdate"]);return u!=null&&h(t,["sessionResumptionUpdate"],Ax(n,u)),t}function Rx(n,e){const t={};f(e,["setupComplete"])!=null&&h(t,["setupComplete"],lx());const s=f(e,["serverContent"]);s!=null&&h(t,["serverContent"],px(n,s));const r=f(e,["toolCall"]);r!=null&&h(t,["toolCall"],_x(n,r));const o=f(e,["toolCallCancellation"]);o!=null&&h(t,["toolCallCancellation"],Tx(n,o));const a=f(e,["usageMetadata"]);a!=null&&h(t,["usageMetadata"],wx(n,a));const l=f(e,["goAway"]);l!=null&&h(t,["goAway"],Cx(n,l));const u=f(e,["sessionResumptionUpdate"]);return u!=null&&h(t,["sessionResumptionUpdate"],Sx(n,u)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Px(n,e){const t={};if(f(e,["videoMetadata"])!==void 0)throw new Error("videoMetadata parameter is not supported in Gemini API.");const i=f(e,["thought"]);i!=null&&h(t,["thought"],i);const s=f(e,["codeExecutionResult"]);s!=null&&h(t,["codeExecutionResult"],s);const r=f(e,["executableCode"]);r!=null&&h(t,["executableCode"],r);const o=f(e,["fileData"]);o!=null&&h(t,["fileData"],o);const a=f(e,["functionCall"]);a!=null&&h(t,["functionCall"],a);const l=f(e,["functionResponse"]);l!=null&&h(t,["functionResponse"],l);const u=f(e,["inlineData"]);u!=null&&h(t,["inlineData"],u);const d=f(e,["text"]);return d!=null&&h(t,["text"],d),t}function Tu(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>Px(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function kx(n,e){const t={};if(f(e,["example"])!==void 0)throw new Error("example parameter is not supported in Gemini API.");if(f(e,["pattern"])!==void 0)throw new Error("pattern parameter is not supported in Gemini API.");if(f(e,["default"])!==void 0)throw new Error("default parameter is not supported in Gemini API.");if(f(e,["maxLength"])!==void 0)throw new Error("maxLength parameter is not supported in Gemini API.");if(f(e,["minLength"])!==void 0)throw new Error("minLength parameter is not supported in Gemini API.");if(f(e,["minProperties"])!==void 0)throw new Error("minProperties parameter is not supported in Gemini API.");if(f(e,["maxProperties"])!==void 0)throw new Error("maxProperties parameter is not supported in Gemini API.");const i=f(e,["anyOf"]);i!=null&&h(t,["anyOf"],i);const s=f(e,["description"]);s!=null&&h(t,["description"],s);const r=f(e,["enum"]);r!=null&&h(t,["enum"],r);const o=f(e,["format"]);o!=null&&h(t,["format"],o);const a=f(e,["items"]);a!=null&&h(t,["items"],a);const l=f(e,["maxItems"]);l!=null&&h(t,["maxItems"],l);const u=f(e,["maximum"]);u!=null&&h(t,["maximum"],u);const d=f(e,["minItems"]);d!=null&&h(t,["minItems"],d);const p=f(e,["minimum"]);p!=null&&h(t,["minimum"],p);const g=f(e,["nullable"]);g!=null&&h(t,["nullable"],g);const _=f(e,["properties"]);_!=null&&h(t,["properties"],_);const E=f(e,["propertyOrdering"]);E!=null&&h(t,["propertyOrdering"],E);const I=f(e,["required"]);I!=null&&h(t,["required"],I);const k=f(e,["title"]);k!=null&&h(t,["title"],k);const D=f(e,["type"]);return D!=null&&h(t,["type"],D),t}function xx(n,e){const t={};if(f(e,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const i=f(e,["category"]);i!=null&&h(t,["category"],i);const s=f(e,["threshold"]);return s!=null&&h(t,["threshold"],s),t}function Nx(n,e){const t={};if(f(e,["response"])!==void 0)throw new Error("response parameter is not supported in Gemini API.");const i=f(e,["description"]);i!=null&&h(t,["description"],i);const s=f(e,["name"]);s!=null&&h(t,["name"],s);const r=f(e,["parameters"]);return r!=null&&h(t,["parameters"],r),t}function Dx(){return{}}function Mx(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function Vx(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],Mx(n,i)),t}function Lx(n,e){const t={},i=f(e,["functionDeclarations"]);if(i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(a=>Nx(n,a))):h(t,["functionDeclarations"],i)),f(e,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");f(e,["googleSearch"])!=null&&h(t,["googleSearch"],Dx());const r=f(e,["googleSearchRetrieval"]);r!=null&&h(t,["googleSearchRetrieval"],Vx(n,r));const o=f(e,["codeExecution"]);return o!=null&&h(t,["codeExecution"],o),t}function Ox(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["allowedFunctionNames"]);return s!=null&&h(t,["allowedFunctionNames"],s),t}function Fx(n,e){const t={},i=f(e,["functionCallingConfig"]);return i!=null&&h(t,["functionCallingConfig"],Ox(n,i)),t}function Ux(n,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function Bx(n,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],Ux(n,i)),t}function $x(n,e){const t={},i=f(e,["voiceConfig"]);i!=null&&h(t,["voiceConfig"],Bx(n,i));const s=f(e,["languageCode"]);return s!=null&&h(t,["languageCode"],s),t}function qx(n,e){const t={},i=f(e,["includeThoughts"]);i!=null&&h(t,["includeThoughts"],i);const s=f(e,["thinkingBudget"]);return s!=null&&h(t,["thinkingBudget"],s),t}function Hx(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],Tu(n,Tn(n,s)));const r=f(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=f(e,["topP"]);o!=null&&h(i,["topP"],o);const a=f(e,["topK"]);a!=null&&h(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&h(i,["maxOutputTokens"],u);const d=f(e,["stopSequences"]);d!=null&&h(i,["stopSequences"],d);const p=f(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const g=f(e,["logprobs"]);g!=null&&h(i,["logprobs"],g);const _=f(e,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const E=f(e,["frequencyPenalty"]);E!=null&&h(i,["frequencyPenalty"],E);const I=f(e,["seed"]);I!=null&&h(i,["seed"],I);const k=f(e,["responseMimeType"]);k!=null&&h(i,["responseMimeType"],k);const D=f(e,["responseSchema"]);if(D!=null&&h(i,["responseSchema"],kx(n,AE(n,D))),f(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(f(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const M=f(e,["safetySettings"]);t!==void 0&&M!=null&&(Array.isArray(M)?h(t,["safetySettings"],M.map(w=>xx(n,w))):h(t,["safetySettings"],M));const P=f(e,["tools"]);t!==void 0&&P!=null&&(Array.isArray(P)?h(t,["tools"],On(n,On(n,P).map(w=>Lx(n,vu(n,w))))):h(t,["tools"],On(n,P)));const x=f(e,["toolConfig"]);if(t!==void 0&&x!=null&&h(t,["toolConfig"],Fx(n,x)),f(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const L=f(e,["cachedContent"]);t!==void 0&&L!=null&&h(t,["cachedContent"],Ns(n,L));const F=f(e,["responseModalities"]);F!=null&&h(i,["responseModalities"],F);const R=f(e,["mediaResolution"]);R!=null&&h(i,["mediaResolution"],R);const T=f(e,["speechConfig"]);if(T!=null&&h(i,["speechConfig"],$x(n,SE(n,T))),f(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const v=f(e,["thinkingConfig"]);return v!=null&&h(i,["thinkingConfig"],qx(n,v)),i}function Hg(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&(Array.isArray(s)?h(t,["contents"],ct(n,ct(n,s).map(o=>Tu(n,o)))):h(t,["contents"],ct(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["generationConfig"],Hx(n,r,t)),t}function Gx(n,e,t){const i={},s=f(e,["taskType"]);t!==void 0&&s!=null&&h(t,["requests[]","taskType"],s);const r=f(e,["title"]);t!==void 0&&r!=null&&h(t,["requests[]","title"],r);const o=f(e,["outputDimensionality"]);if(t!==void 0&&o!=null&&h(t,["requests[]","outputDimensionality"],o),f(e,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(f(e,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return i}function Wx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&h(t,["requests[]","content"],CE(n,s));const r=f(e,["config"]);r!=null&&h(t,["config"],Gx(n,r,t));const o=f(e,["model"]);return o!==void 0&&h(t,["requests[]","model"],xt(n,o)),t}function Kx(n,e,t){const i={};if(f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const s=f(e,["numberOfImages"]);t!==void 0&&s!=null&&h(t,["parameters","sampleCount"],s);const r=f(e,["aspectRatio"]);t!==void 0&&r!=null&&h(t,["parameters","aspectRatio"],r);const o=f(e,["guidanceScale"]);if(t!==void 0&&o!=null&&h(t,["parameters","guidanceScale"],o),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const a=f(e,["safetyFilterLevel"]);t!==void 0&&a!=null&&h(t,["parameters","safetySetting"],a);const l=f(e,["personGeneration"]);t!==void 0&&l!=null&&h(t,["parameters","personGeneration"],l);const u=f(e,["includeSafetyAttributes"]);t!==void 0&&u!=null&&h(t,["parameters","includeSafetyAttributes"],u);const d=f(e,["includeRaiReason"]);t!==void 0&&d!=null&&h(t,["parameters","includeRaiReason"],d);const p=f(e,["language"]);t!==void 0&&p!=null&&h(t,["parameters","language"],p);const g=f(e,["outputMimeType"]);t!==void 0&&g!=null&&h(t,["parameters","outputOptions","mimeType"],g);const _=f(e,["outputCompressionQuality"]);if(t!==void 0&&_!=null&&h(t,["parameters","outputOptions","compressionQuality"],_),f(e,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function zx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&h(t,["config"],Kx(n,r,t)),t}function Yx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],xt(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function Jx(n,e){const t={};if(f(e,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(f(e,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(f(e,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return t}function Qx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&(Array.isArray(s)?h(t,["contents"],ct(n,ct(n,s).map(o=>Tu(n,o)))):h(t,["contents"],ct(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["config"],Jx(n,r)),t}function Xx(n,e){const t={};if(f(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const i=f(e,["imageBytes"]);i!=null&&h(t,["bytesBase64Encoded"],Ds(n,i));const s=f(e,["mimeType"]);return s!=null&&h(t,["mimeType"],s),t}function jx(n,e,t){const i={},s=f(e,["numberOfVideos"]);if(t!==void 0&&s!=null&&h(t,["parameters","sampleCount"],s),f(e,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(f(e,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=f(e,["durationSeconds"]);if(t!==void 0&&r!=null&&h(t,["parameters","durationSeconds"],r),f(e,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const o=f(e,["aspectRatio"]);if(t!==void 0&&o!=null&&h(t,["parameters","aspectRatio"],o),f(e,["resolution"])!==void 0)throw new Error("resolution parameter is not supported in Gemini API.");const a=f(e,["personGeneration"]);if(t!==void 0&&a!=null&&h(t,["parameters","personGeneration"],a),f(e,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const l=f(e,["negativePrompt"]);if(t!==void 0&&l!=null&&h(t,["parameters","negativePrompt"],l),f(e,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return i}function Zx(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],Xx(n,r));const o=f(e,["config"]);return o!=null&&h(t,["config"],jx(n,o,t)),t}function e1(n,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],i);const s=f(e,["thought"]);s!=null&&h(t,["thought"],s);const r=f(e,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const o=f(e,["executableCode"]);o!=null&&h(t,["executableCode"],o);const a=f(e,["fileData"]);a!=null&&h(t,["fileData"],a);const l=f(e,["functionCall"]);l!=null&&h(t,["functionCall"],l);const u=f(e,["functionResponse"]);u!=null&&h(t,["functionResponse"],u);const d=f(e,["inlineData"]);d!=null&&h(t,["inlineData"],d);const p=f(e,["text"]);return p!=null&&h(t,["text"],p),t}function fo(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>e1(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function kE(n,e){const t={},i=f(e,["example"]);i!=null&&h(t,["example"],i);const s=f(e,["pattern"]);s!=null&&h(t,["pattern"],s);const r=f(e,["default"]);r!=null&&h(t,["default"],r);const o=f(e,["maxLength"]);o!=null&&h(t,["maxLength"],o);const a=f(e,["minLength"]);a!=null&&h(t,["minLength"],a);const l=f(e,["minProperties"]);l!=null&&h(t,["minProperties"],l);const u=f(e,["maxProperties"]);u!=null&&h(t,["maxProperties"],u);const d=f(e,["anyOf"]);d!=null&&h(t,["anyOf"],d);const p=f(e,["description"]);p!=null&&h(t,["description"],p);const g=f(e,["enum"]);g!=null&&h(t,["enum"],g);const _=f(e,["format"]);_!=null&&h(t,["format"],_);const E=f(e,["items"]);E!=null&&h(t,["items"],E);const I=f(e,["maxItems"]);I!=null&&h(t,["maxItems"],I);const k=f(e,["maximum"]);k!=null&&h(t,["maximum"],k);const D=f(e,["minItems"]);D!=null&&h(t,["minItems"],D);const M=f(e,["minimum"]);M!=null&&h(t,["minimum"],M);const P=f(e,["nullable"]);P!=null&&h(t,["nullable"],P);const x=f(e,["properties"]);x!=null&&h(t,["properties"],x);const L=f(e,["propertyOrdering"]);L!=null&&h(t,["propertyOrdering"],L);const F=f(e,["required"]);F!=null&&h(t,["required"],F);const R=f(e,["title"]);R!=null&&h(t,["title"],R);const T=f(e,["type"]);return T!=null&&h(t,["type"],T),t}function t1(n,e){const t={},i=f(e,["featureSelectionPreference"]);return i!=null&&h(t,["featureSelectionPreference"],i),t}function n1(n,e){const t={},i=f(e,["method"]);i!=null&&h(t,["method"],i);const s=f(e,["category"]);s!=null&&h(t,["category"],s);const r=f(e,["threshold"]);return r!=null&&h(t,["threshold"],r),t}function i1(n,e){const t={},i=f(e,["response"]);i!=null&&h(t,["response"],kE(n,i));const s=f(e,["description"]);s!=null&&h(t,["description"],s);const r=f(e,["name"]);r!=null&&h(t,["name"],r);const o=f(e,["parameters"]);return o!=null&&h(t,["parameters"],o),t}function s1(){return{}}function r1(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["dynamicThreshold"]);return s!=null&&h(t,["dynamicThreshold"],s),t}function o1(n,e){const t={},i=f(e,["dynamicRetrievalConfig"]);return i!=null&&h(t,["dynamicRetrievalConfig"],r1(n,i)),t}function xE(n,e){const t={},i=f(e,["functionDeclarations"]);i!=null&&(Array.isArray(i)?h(t,["functionDeclarations"],i.map(l=>i1(n,l))):h(t,["functionDeclarations"],i));const s=f(e,["retrieval"]);s!=null&&h(t,["retrieval"],s),f(e,["googleSearch"])!=null&&h(t,["googleSearch"],s1());const o=f(e,["googleSearchRetrieval"]);o!=null&&h(t,["googleSearchRetrieval"],o1(n,o));const a=f(e,["codeExecution"]);return a!=null&&h(t,["codeExecution"],a),t}function a1(n,e){const t={},i=f(e,["mode"]);i!=null&&h(t,["mode"],i);const s=f(e,["allowedFunctionNames"]);return s!=null&&h(t,["allowedFunctionNames"],s),t}function l1(n,e){const t={},i=f(e,["functionCallingConfig"]);return i!=null&&h(t,["functionCallingConfig"],a1(n,i)),t}function c1(n,e){const t={},i=f(e,["voiceName"]);return i!=null&&h(t,["voiceName"],i),t}function u1(n,e){const t={},i=f(e,["prebuiltVoiceConfig"]);return i!=null&&h(t,["prebuiltVoiceConfig"],c1(n,i)),t}function h1(n,e){const t={},i=f(e,["voiceConfig"]);i!=null&&h(t,["voiceConfig"],u1(n,i));const s=f(e,["languageCode"]);return s!=null&&h(t,["languageCode"],s),t}function f1(n,e){const t={},i=f(e,["includeThoughts"]);i!=null&&h(t,["includeThoughts"],i);const s=f(e,["thinkingBudget"]);return s!=null&&h(t,["thinkingBudget"],s),t}function d1(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],fo(n,Tn(n,s)));const r=f(e,["temperature"]);r!=null&&h(i,["temperature"],r);const o=f(e,["topP"]);o!=null&&h(i,["topP"],o);const a=f(e,["topK"]);a!=null&&h(i,["topK"],a);const l=f(e,["candidateCount"]);l!=null&&h(i,["candidateCount"],l);const u=f(e,["maxOutputTokens"]);u!=null&&h(i,["maxOutputTokens"],u);const d=f(e,["stopSequences"]);d!=null&&h(i,["stopSequences"],d);const p=f(e,["responseLogprobs"]);p!=null&&h(i,["responseLogprobs"],p);const g=f(e,["logprobs"]);g!=null&&h(i,["logprobs"],g);const _=f(e,["presencePenalty"]);_!=null&&h(i,["presencePenalty"],_);const E=f(e,["frequencyPenalty"]);E!=null&&h(i,["frequencyPenalty"],E);const I=f(e,["seed"]);I!=null&&h(i,["seed"],I);const k=f(e,["responseMimeType"]);k!=null&&h(i,["responseMimeType"],k);const D=f(e,["responseSchema"]);D!=null&&h(i,["responseSchema"],kE(n,AE(n,D)));const M=f(e,["routingConfig"]);M!=null&&h(i,["routingConfig"],M);const P=f(e,["modelSelectionConfig"]);P!=null&&h(i,["modelConfig"],t1(n,P));const x=f(e,["safetySettings"]);t!==void 0&&x!=null&&(Array.isArray(x)?h(t,["safetySettings"],x.map(j=>n1(n,j))):h(t,["safetySettings"],x));const L=f(e,["tools"]);t!==void 0&&L!=null&&(Array.isArray(L)?h(t,["tools"],On(n,On(n,L).map(j=>xE(n,vu(n,j))))):h(t,["tools"],On(n,L)));const F=f(e,["toolConfig"]);t!==void 0&&F!=null&&h(t,["toolConfig"],l1(n,F));const R=f(e,["labels"]);t!==void 0&&R!=null&&h(t,["labels"],R);const T=f(e,["cachedContent"]);t!==void 0&&T!=null&&h(t,["cachedContent"],Ns(n,T));const v=f(e,["responseModalities"]);v!=null&&h(i,["responseModalities"],v);const w=f(e,["mediaResolution"]);w!=null&&h(i,["mediaResolution"],w);const b=f(e,["speechConfig"]);b!=null&&h(i,["speechConfig"],h1(n,SE(n,b)));const S=f(e,["audioTimestamp"]);S!=null&&h(i,["audioTimestamp"],S);const A=f(e,["thinkingConfig"]);return A!=null&&h(i,["thinkingConfig"],f1(n,A)),i}function Gg(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&(Array.isArray(s)?h(t,["contents"],ct(n,ct(n,s).map(o=>fo(n,o)))):h(t,["contents"],ct(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["generationConfig"],d1(n,r,t)),t}function p1(n,e,t){const i={},s=f(e,["taskType"]);t!==void 0&&s!=null&&h(t,["instances[]","task_type"],s);const r=f(e,["title"]);t!==void 0&&r!=null&&h(t,["instances[]","title"],r);const o=f(e,["outputDimensionality"]);t!==void 0&&o!=null&&h(t,["parameters","outputDimensionality"],o);const a=f(e,["mimeType"]);t!==void 0&&a!=null&&h(t,["instances[]","mimeType"],a);const l=f(e,["autoTruncate"]);return t!==void 0&&l!=null&&h(t,["parameters","autoTruncate"],l),i}function m1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&h(t,["instances[]","content"],CE(n,s));const r=f(e,["config"]);return r!=null&&h(t,["config"],p1(n,r,t)),t}function g1(n,e,t){const i={},s=f(e,["outputGcsUri"]);t!==void 0&&s!=null&&h(t,["parameters","storageUri"],s);const r=f(e,["negativePrompt"]);t!==void 0&&r!=null&&h(t,["parameters","negativePrompt"],r);const o=f(e,["numberOfImages"]);t!==void 0&&o!=null&&h(t,["parameters","sampleCount"],o);const a=f(e,["aspectRatio"]);t!==void 0&&a!=null&&h(t,["parameters","aspectRatio"],a);const l=f(e,["guidanceScale"]);t!==void 0&&l!=null&&h(t,["parameters","guidanceScale"],l);const u=f(e,["seed"]);t!==void 0&&u!=null&&h(t,["parameters","seed"],u);const d=f(e,["safetyFilterLevel"]);t!==void 0&&d!=null&&h(t,["parameters","safetySetting"],d);const p=f(e,["personGeneration"]);t!==void 0&&p!=null&&h(t,["parameters","personGeneration"],p);const g=f(e,["includeSafetyAttributes"]);t!==void 0&&g!=null&&h(t,["parameters","includeSafetyAttributes"],g);const _=f(e,["includeRaiReason"]);t!==void 0&&_!=null&&h(t,["parameters","includeRaiReason"],_);const E=f(e,["language"]);t!==void 0&&E!=null&&h(t,["parameters","language"],E);const I=f(e,["outputMimeType"]);t!==void 0&&I!=null&&h(t,["parameters","outputOptions","mimeType"],I);const k=f(e,["outputCompressionQuality"]);t!==void 0&&k!=null&&h(t,["parameters","outputOptions","compressionQuality"],k);const D=f(e,["addWatermark"]);t!==void 0&&D!=null&&h(t,["parameters","addWatermark"],D);const M=f(e,["enhancePrompt"]);return t!==void 0&&M!=null&&h(t,["parameters","enhancePrompt"],M),i}function y1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["config"]);return r!=null&&h(t,["config"],g1(n,r,t)),t}function _1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","name"],xt(n,i));const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function v1(n,e,t){const i={},s=f(e,["systemInstruction"]);t!==void 0&&s!=null&&h(t,["systemInstruction"],fo(n,Tn(n,s)));const r=f(e,["tools"]);t!==void 0&&r!=null&&(Array.isArray(r)?h(t,["tools"],r.map(a=>xE(n,a))):h(t,["tools"],r));const o=f(e,["generationConfig"]);return t!==void 0&&o!=null&&h(t,["generationConfig"],o),i}function T1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&(Array.isArray(s)?h(t,["contents"],ct(n,ct(n,s).map(o=>fo(n,o)))):h(t,["contents"],ct(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["config"],v1(n,r,t)),t}function E1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["contents"]);s!=null&&(Array.isArray(s)?h(t,["contents"],ct(n,ct(n,s).map(o=>fo(n,o)))):h(t,["contents"],ct(n,s)));const r=f(e,["config"]);return r!=null&&h(t,["config"],r),t}function w1(n,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const s=f(e,["imageBytes"]);s!=null&&h(t,["bytesBase64Encoded"],Ds(n,s));const r=f(e,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function I1(n,e,t){const i={},s=f(e,["numberOfVideos"]);t!==void 0&&s!=null&&h(t,["parameters","sampleCount"],s);const r=f(e,["outputGcsUri"]);t!==void 0&&r!=null&&h(t,["parameters","storageUri"],r);const o=f(e,["fps"]);t!==void 0&&o!=null&&h(t,["parameters","fps"],o);const a=f(e,["durationSeconds"]);t!==void 0&&a!=null&&h(t,["parameters","durationSeconds"],a);const l=f(e,["seed"]);t!==void 0&&l!=null&&h(t,["parameters","seed"],l);const u=f(e,["aspectRatio"]);t!==void 0&&u!=null&&h(t,["parameters","aspectRatio"],u);const d=f(e,["resolution"]);t!==void 0&&d!=null&&h(t,["parameters","resolution"],d);const p=f(e,["personGeneration"]);t!==void 0&&p!=null&&h(t,["parameters","personGeneration"],p);const g=f(e,["pubsubTopic"]);t!==void 0&&g!=null&&h(t,["parameters","pubsubTopic"],g);const _=f(e,["negativePrompt"]);t!==void 0&&_!=null&&h(t,["parameters","negativePrompt"],_);const E=f(e,["enhancePrompt"]);return t!==void 0&&E!=null&&h(t,["parameters","enhancePrompt"],E),i}function C1(n,e){const t={},i=f(e,["model"]);i!=null&&h(t,["_url","model"],xt(n,i));const s=f(e,["prompt"]);s!=null&&h(t,["instances[0]","prompt"],s);const r=f(e,["image"]);r!=null&&h(t,["instances[0]","image"],w1(n,r));const o=f(e,["config"]);return o!=null&&h(t,["config"],I1(n,o,t)),t}function A1(n,e){const t={},i=f(e,["thought"]);i!=null&&h(t,["thought"],i);const s=f(e,["codeExecutionResult"]);s!=null&&h(t,["codeExecutionResult"],s);const r=f(e,["executableCode"]);r!=null&&h(t,["executableCode"],r);const o=f(e,["fileData"]);o!=null&&h(t,["fileData"],o);const a=f(e,["functionCall"]);a!=null&&h(t,["functionCall"],a);const l=f(e,["functionResponse"]);l!=null&&h(t,["functionResponse"],l);const u=f(e,["inlineData"]);u!=null&&h(t,["inlineData"],u);const d=f(e,["text"]);return d!=null&&h(t,["text"],d),t}function S1(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>A1(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function b1(n,e){const t={},i=f(e,["citationSources"]);return i!=null&&h(t,["citations"],i),t}function R1(n,e){const t={},i=f(e,["content"]);i!=null&&h(t,["content"],S1(n,i));const s=f(e,["citationMetadata"]);s!=null&&h(t,["citationMetadata"],b1(n,s));const r=f(e,["tokenCount"]);r!=null&&h(t,["tokenCount"],r);const o=f(e,["finishReason"]);o!=null&&h(t,["finishReason"],o);const a=f(e,["avgLogprobs"]);a!=null&&h(t,["avgLogprobs"],a);const l=f(e,["groundingMetadata"]);l!=null&&h(t,["groundingMetadata"],l);const u=f(e,["index"]);u!=null&&h(t,["index"],u);const d=f(e,["logprobsResult"]);d!=null&&h(t,["logprobsResult"],d);const p=f(e,["safetyRatings"]);return p!=null&&h(t,["safetyRatings"],p),t}function Wg(n,e){const t={},i=f(e,["candidates"]);i!=null&&(Array.isArray(i)?h(t,["candidates"],i.map(a=>R1(n,a))):h(t,["candidates"],i));const s=f(e,["modelVersion"]);s!=null&&h(t,["modelVersion"],s);const r=f(e,["promptFeedback"]);r!=null&&h(t,["promptFeedback"],r);const o=f(e,["usageMetadata"]);return o!=null&&h(t,["usageMetadata"],o),t}function P1(n,e){const t={},i=f(e,["values"]);return i!=null&&h(t,["values"],i),t}function k1(){return{}}function x1(n,e){const t={},i=f(e,["embeddings"]);return i!=null&&(Array.isArray(i)?h(t,["embeddings"],i.map(r=>P1(n,r))):h(t,["embeddings"],i)),f(e,["metadata"])!=null&&h(t,["metadata"],k1()),t}function N1(n,e){const t={},i=f(e,["bytesBase64Encoded"]);i!=null&&h(t,["imageBytes"],Ds(n,i));const s=f(e,["mimeType"]);return s!=null&&h(t,["mimeType"],s),t}function NE(n,e){const t={},i=f(e,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const s=f(e,["safetyAttributes","scores"]);s!=null&&h(t,["scores"],s);const r=f(e,["contentType"]);return r!=null&&h(t,["contentType"],r),t}function D1(n,e){const t={},i=f(e,["_self"]);i!=null&&h(t,["image"],N1(n,i));const s=f(e,["raiFilteredReason"]);s!=null&&h(t,["raiFilteredReason"],s);const r=f(e,["_self"]);return r!=null&&h(t,["safetyAttributes"],NE(n,r)),t}function M1(n,e){const t={},i=f(e,["predictions"]);i!=null&&(Array.isArray(i)?h(t,["generatedImages"],i.map(r=>D1(n,r))):h(t,["generatedImages"],i));const s=f(e,["positivePromptSafetyAttributes"]);return s!=null&&h(t,["positivePromptSafetyAttributes"],NE(n,s)),t}function V1(n,e){const t={},i=f(e,["baseModel"]);i!=null&&h(t,["baseModel"],i);const s=f(e,["createTime"]);s!=null&&h(t,["createTime"],s);const r=f(e,["updateTime"]);return r!=null&&h(t,["updateTime"],r),t}function L1(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["description"]);r!=null&&h(t,["description"],r);const o=f(e,["version"]);o!=null&&h(t,["version"],o);const a=f(e,["_self"]);a!=null&&h(t,["tunedModelInfo"],V1(n,a));const l=f(e,["inputTokenLimit"]);l!=null&&h(t,["inputTokenLimit"],l);const u=f(e,["outputTokenLimit"]);u!=null&&h(t,["outputTokenLimit"],u);const d=f(e,["supportedGenerationMethods"]);return d!=null&&h(t,["supportedActions"],d),t}function O1(n,e){const t={},i=f(e,["totalTokens"]);i!=null&&h(t,["totalTokens"],i);const s=f(e,["cachedContentTokenCount"]);return s!=null&&h(t,["cachedContentTokenCount"],s),t}function F1(n,e){const t={},i=f(e,["video","uri"]);i!=null&&h(t,["uri"],i);const s=f(e,["video","encodedVideo"]);s!=null&&h(t,["videoBytes"],Ds(n,s));const r=f(e,["encoding"]);return r!=null&&h(t,["mimeType"],r),t}function U1(n,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],F1(n,i)),t}function B1(n,e){const t={},i=f(e,["generatedSamples"]);i!=null&&(Array.isArray(i)?h(t,["generatedVideos"],i.map(o=>U1(n,o))):h(t,["generatedVideos"],i));const s=f(e,["raiMediaFilteredCount"]);s!=null&&h(t,["raiMediaFilteredCount"],s);const r=f(e,["raiMediaFilteredReasons"]);return r!=null&&h(t,["raiMediaFilteredReasons"],r),t}function $1(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["metadata"]);s!=null&&h(t,["metadata"],s);const r=f(e,["done"]);r!=null&&h(t,["done"],r);const o=f(e,["error"]);o!=null&&h(t,["error"],o);const a=f(e,["response","generateVideoResponse"]);return a!=null&&h(t,["response"],B1(n,a)),t}function q1(n,e){const t={},i=f(e,["videoMetadata"]);i!=null&&h(t,["videoMetadata"],i);const s=f(e,["thought"]);s!=null&&h(t,["thought"],s);const r=f(e,["codeExecutionResult"]);r!=null&&h(t,["codeExecutionResult"],r);const o=f(e,["executableCode"]);o!=null&&h(t,["executableCode"],o);const a=f(e,["fileData"]);a!=null&&h(t,["fileData"],a);const l=f(e,["functionCall"]);l!=null&&h(t,["functionCall"],l);const u=f(e,["functionResponse"]);u!=null&&h(t,["functionResponse"],u);const d=f(e,["inlineData"]);d!=null&&h(t,["inlineData"],d);const p=f(e,["text"]);return p!=null&&h(t,["text"],p),t}function H1(n,e){const t={},i=f(e,["parts"]);i!=null&&(Array.isArray(i)?h(t,["parts"],i.map(r=>q1(n,r))):h(t,["parts"],i));const s=f(e,["role"]);return s!=null&&h(t,["role"],s),t}function G1(n,e){const t={},i=f(e,["citations"]);return i!=null&&h(t,["citations"],i),t}function W1(n,e){const t={},i=f(e,["content"]);i!=null&&h(t,["content"],H1(n,i));const s=f(e,["citationMetadata"]);s!=null&&h(t,["citationMetadata"],G1(n,s));const r=f(e,["finishMessage"]);r!=null&&h(t,["finishMessage"],r);const o=f(e,["finishReason"]);o!=null&&h(t,["finishReason"],o);const a=f(e,["avgLogprobs"]);a!=null&&h(t,["avgLogprobs"],a);const l=f(e,["groundingMetadata"]);l!=null&&h(t,["groundingMetadata"],l);const u=f(e,["index"]);u!=null&&h(t,["index"],u);const d=f(e,["logprobsResult"]);d!=null&&h(t,["logprobsResult"],d);const p=f(e,["safetyRatings"]);return p!=null&&h(t,["safetyRatings"],p),t}function Kg(n,e){const t={},i=f(e,["candidates"]);i!=null&&(Array.isArray(i)?h(t,["candidates"],i.map(u=>W1(n,u))):h(t,["candidates"],i));const s=f(e,["createTime"]);s!=null&&h(t,["createTime"],s);const r=f(e,["responseId"]);r!=null&&h(t,["responseId"],r);const o=f(e,["modelVersion"]);o!=null&&h(t,["modelVersion"],o);const a=f(e,["promptFeedback"]);a!=null&&h(t,["promptFeedback"],a);const l=f(e,["usageMetadata"]);return l!=null&&h(t,["usageMetadata"],l),t}function K1(n,e){const t={},i=f(e,["truncated"]);i!=null&&h(t,["truncated"],i);const s=f(e,["token_count"]);return s!=null&&h(t,["tokenCount"],s),t}function z1(n,e){const t={},i=f(e,["values"]);i!=null&&h(t,["values"],i);const s=f(e,["statistics"]);return s!=null&&h(t,["statistics"],K1(n,s)),t}function Y1(n,e){const t={},i=f(e,["billableCharacterCount"]);return i!=null&&h(t,["billableCharacterCount"],i),t}function J1(n,e){const t={},i=f(e,["predictions[]","embeddings"]);i!=null&&(Array.isArray(i)?h(t,["embeddings"],i.map(r=>z1(n,r))):h(t,["embeddings"],i));const s=f(e,["metadata"]);return s!=null&&h(t,["metadata"],Y1(n,s)),t}function Q1(n,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["gcsUri"],i);const s=f(e,["bytesBase64Encoded"]);s!=null&&h(t,["imageBytes"],Ds(n,s));const r=f(e,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function DE(n,e){const t={},i=f(e,["safetyAttributes","categories"]);i!=null&&h(t,["categories"],i);const s=f(e,["safetyAttributes","scores"]);s!=null&&h(t,["scores"],s);const r=f(e,["contentType"]);return r!=null&&h(t,["contentType"],r),t}function X1(n,e){const t={},i=f(e,["_self"]);i!=null&&h(t,["image"],Q1(n,i));const s=f(e,["raiFilteredReason"]);s!=null&&h(t,["raiFilteredReason"],s);const r=f(e,["_self"]);r!=null&&h(t,["safetyAttributes"],DE(n,r));const o=f(e,["prompt"]);return o!=null&&h(t,["enhancedPrompt"],o),t}function j1(n,e){const t={},i=f(e,["predictions"]);i!=null&&(Array.isArray(i)?h(t,["generatedImages"],i.map(r=>X1(n,r))):h(t,["generatedImages"],i));const s=f(e,["positivePromptSafetyAttributes"]);return s!=null&&h(t,["positivePromptSafetyAttributes"],DE(n,s)),t}function Z1(n,e){const t={},i=f(e,["endpoint"]);i!=null&&h(t,["name"],i);const s=f(e,["deployedModelId"]);return s!=null&&h(t,["deployedModelId"],s),t}function eN(n,e){const t={},i=f(e,["labels","google-vertex-llm-tuning-base-model-id"]);i!=null&&h(t,["baseModel"],i);const s=f(e,["createTime"]);s!=null&&h(t,["createTime"],s);const r=f(e,["updateTime"]);return r!=null&&h(t,["updateTime"],r),t}function tN(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["displayName"]);s!=null&&h(t,["displayName"],s);const r=f(e,["description"]);r!=null&&h(t,["description"],r);const o=f(e,["versionId"]);o!=null&&h(t,["version"],o);const a=f(e,["deployedModels"]);a!=null&&(Array.isArray(a)?h(t,["endpoints"],a.map(d=>Z1(n,d))):h(t,["endpoints"],a));const l=f(e,["labels"]);l!=null&&h(t,["labels"],l);const u=f(e,["_self"]);return u!=null&&h(t,["tunedModelInfo"],eN(n,u)),t}function nN(n,e){const t={},i=f(e,["totalTokens"]);return i!=null&&h(t,["totalTokens"],i),t}function iN(n,e){const t={},i=f(e,["tokensInfo"]);return i!=null&&h(t,["tokensInfo"],i),t}function sN(n,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["uri"],i);const s=f(e,["bytesBase64Encoded"]);s!=null&&h(t,["videoBytes"],Ds(n,s));const r=f(e,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function rN(n,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],sN(n,i)),t}function oN(n,e){const t={},i=f(e,["videos"]);i!=null&&(Array.isArray(i)?h(t,["generatedVideos"],i.map(o=>rN(n,o))):h(t,["generatedVideos"],i));const s=f(e,["raiMediaFilteredCount"]);s!=null&&h(t,["raiMediaFilteredCount"],s);const r=f(e,["raiMediaFilteredReasons"]);return r!=null&&h(t,["raiMediaFilteredReasons"],r),t}function aN(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["metadata"]);s!=null&&h(t,["metadata"],s);const r=f(e,["done"]);r!=null&&h(t,["done"],r);const o=f(e,["error"]);o!=null&&h(t,["error"],o);const a=f(e,["response"]);return a!=null&&h(t,["response"],oN(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const lN="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function cN(n,e,t){let i,s;t.data instanceof Blob?s=JSON.parse(await t.data.text()):s=JSON.parse(t.data),n.isVertexAI()?i=Rx(n,s):i=bx(n,s),e(i)}class uN{constructor(e,t,i){this.apiClient=e,this.auth=t,this.webSocketFactory=i}async connect(e){var t,i,s,r;const o=this.apiClient.getWebsocketBaseUrl(),a=this.apiClient.getApiVersion();let l;const u=pN(this.apiClient.getDefaultHeaders());if(this.apiClient.isVertexAI())l=`${o}/ws/google.cloud.aiplatform.${a}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(u);else{const x=this.apiClient.getApiKey();l=`${o}/ws/google.ai.generativelanguage.${a}.GenerativeService.BidiGenerateContent?key=${x}`}let d=()=>{};const p=new Promise(x=>{d=x}),g=e.callbacks,_=function(){var x;(x=g==null?void 0:g.onopen)===null||x===void 0||x.call(g),d({})},E=this.apiClient,I={onopen:_,onmessage:x=>{cN(E,g.onmessage,x)},onerror:(t=g==null?void 0:g.onerror)!==null&&t!==void 0?t:function(x){},onclose:(i=g==null?void 0:g.onclose)!==null&&i!==void 0?i:function(x){}},k=this.webSocketFactory.create(l,dN(u),I);k.connect(),await p;let D=xt(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&D.startsWith("publishers/")){const x=this.apiClient.getProject(),L=this.apiClient.getLocation();D=`projects/${x}/locations/${L}/`+D}let M={};this.apiClient.isVertexAI()&&((s=e.config)===null||s===void 0?void 0:s.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[ir.AUDIO]}:e.config.responseModalities=[ir.AUDIO]),!((r=e.config)===null||r===void 0)&&r.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const P={model:D,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?M=ox(this.apiClient,P):M=rx(this.apiClient,P),delete M.config,k.send(JSON.stringify(M)),new fN(k,this.apiClient)}}const hN={turnComplete:!0};class fN{constructor(e,t){this.conn=e,this.apiClient=t}tLiveClientContent(e,t){if(t.turns!==null&&t.turns!==void 0){let i=[];try{i=ct(e,t.turns),e.isVertexAI()?i=i.map(s=>fo(e,s)):i=i.map(s=>Tu(e,s))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof t.turns}'`)}return{clientContent:{turns:i,turnComplete:t.turnComplete}}}return{clientContent:{turnComplete:t.turnComplete}}}tLiveClientRealtimeInput(e,t){let i={};if(!("media"in t)||!t.media)throw new Error(`Failed to convert realtime input "media", type: '${typeof t.media}'`);return i={realtimeInput:{mediaChunks:[t.media],activityStart:t.activityStart,activityEnd:t.activityEnd}},i}tLiveClienttToolResponse(e,t){let i=[];if(t.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(t.functionResponses)?i=t.functionResponses:i=[t.functionResponses],i.length===0)throw new Error("functionResponses is required.");for(const r of i){if(typeof r!="object"||r===null||!("name"in r)||!("response"in r))throw new Error(`Could not parse function response, type '${typeof r}'.`);if(!e.isVertexAI()&&!("id"in r))throw new Error(lN)}return{toolResponse:{functionResponses:i}}}sendClientContent(e){e=Object.assign(Object.assign({},hN),e);const t=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendRealtimeInput(e){if(e.media==null)throw new Error("Media is required.");const t=this.tLiveClientRealtimeInput(this.apiClient,e);this.conn.send(JSON.stringify(t))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const t=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(t))}close(){this.conn.close()}}function dN(n){const e={};return n.forEach((t,i)=>{e[i]=t}),e}function pN(n){const e=new Headers;for(const[t,i]of Object.entries(n))e.append(t,i);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class mN extends _u{constructor(e){super(),this.apiClient=e,this.generateContent=async t=>await this.generateContentInternal(t),this.generateContentStream=async t=>await this.generateContentStreamInternal(t),this.generateImages=async t=>await this.generateImagesInternal(t).then(i=>{var s;let r;const o=[];if(i!=null&&i.generatedImages)for(const l of i.generatedImages)l&&(l!=null&&l.safetyAttributes)&&((s=l==null?void 0:l.safetyAttributes)===null||s===void 0?void 0:s.contentType)==="Positive Prompt"?r=l==null?void 0:l.safetyAttributes:o.push(l);let a;return r?a={generatedImages:o,positivePromptSafetyAttributes:r}:a={generatedImages:o},a})}async generateContentInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=Gg(this.apiClient,e);return r=Le("{model}:generateContent",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>{const u=Kg(this.apiClient,l),d=new Tl;return Object.assign(d,u),d})}else{const a=Hg(this.apiClient,e);return r=Le("{model}:generateContent",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>{const u=Wg(this.apiClient,l),d=new Tl;return Object.assign(d,u),d})}}async generateContentStreamInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=Gg(this.apiClient,e);r=Le("{model}:streamGenerateContent?alt=sse",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=this.apiClient;return s=l.requestStream({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}),s.then(function(u){return Sc(this,arguments,function*(){var d,p,g,_;try{for(var E=!0,I=nf(u),k;k=yield Xt(I.next()),d=k.done,!d;E=!0){_=k.value,E=!1;const M=Kg(l,yield Xt(_.json())),P=new Tl;Object.assign(P,M),yield yield Xt(P)}}catch(D){p={error:D}}finally{try{!E&&!d&&(g=I.return)&&(yield Xt(g.call(I)))}finally{if(p)throw p.error}}})})}else{const a=Hg(this.apiClient,e);r=Le("{model}:streamGenerateContent?alt=sse",a._url),o=a._query,delete a.config,delete a._url,delete a._query;const l=this.apiClient;return s=l.requestStream({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}),s.then(function(u){return Sc(this,arguments,function*(){var d,p,g,_;try{for(var E=!0,I=nf(u),k;k=yield Xt(I.next()),d=k.done,!d;E=!0){_=k.value,E=!1;const M=Wg(l,yield Xt(_.json())),P=new Tl;Object.assign(P,M),yield yield Xt(P)}}catch(D){p={error:D}}finally{try{!E&&!d&&(g=I.return)&&(yield Xt(g.call(I)))}finally{if(p)throw p.error}}})})}}async embedContent(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=m1(this.apiClient,e);return r=Le("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>{const u=J1(this.apiClient,l),d=new Mg;return Object.assign(d,u),d})}else{const a=Wx(this.apiClient,e);return r=Le("{model}:batchEmbedContents",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>{const u=x1(this.apiClient,l),d=new Mg;return Object.assign(d,u),d})}}async generateImagesInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=y1(this.apiClient,e);return r=Le("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>{const u=j1(this.apiClient,l),d=new Vg;return Object.assign(d,u),d})}else{const a=zx(this.apiClient,e);return r=Le("{model}:predict",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>{const u=M1(this.apiClient,l),d=new Vg;return Object.assign(d,u),d})}}async get(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=_1(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>tN(this.apiClient,l))}else{const a=Yx(this.apiClient,e);return r=Le("{name}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>L1(this.apiClient,l))}}async countTokens(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=T1(this.apiClient,e);return r=Le("{model}:countTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>{const u=nN(this.apiClient,l),d=new Lg;return Object.assign(d,u),d})}else{const a=Qx(this.apiClient,e);return r=Le("{model}:countTokens",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>{const u=O1(this.apiClient,l),d=new Lg;return Object.assign(d,u),d})}}async computeTokens(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI()){const o=E1(this.apiClient,e);return s=Le("{model}:computeTokens",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(a=>{const l=iN(this.apiClient,a),u=new ck;return Object.assign(u,l),u})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideos(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=C1(this.apiClient,e);return r=Le("{model}:predictLongRunning",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>aN(this.apiClient,l))}else{const a=Zx(this.apiClient,e);return r=Le("{model}:predictLongRunning",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"POST",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>$1(this.apiClient,l))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function gN(n,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["_url","operationName"],i);const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function yN(n,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["_url","operationName"],i);const s=f(e,["config"]);return s!=null&&h(t,["config"],s),t}function _N(n,e){const t={},i=f(e,["operationName"]);i!=null&&h(t,["operationName"],i);const s=f(e,["resourceName"]);s!=null&&h(t,["_url","resourceName"],s);const r=f(e,["config"]);return r!=null&&h(t,["config"],r),t}function vN(n,e){const t={},i=f(e,["video","uri"]);i!=null&&h(t,["uri"],i);const s=f(e,["video","encodedVideo"]);s!=null&&h(t,["videoBytes"],Ds(n,s));const r=f(e,["encoding"]);return r!=null&&h(t,["mimeType"],r),t}function TN(n,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],vN(n,i)),t}function EN(n,e){const t={},i=f(e,["generatedSamples"]);i!=null&&(Array.isArray(i)?h(t,["generatedVideos"],i.map(o=>TN(n,o))):h(t,["generatedVideos"],i));const s=f(e,["raiMediaFilteredCount"]);s!=null&&h(t,["raiMediaFilteredCount"],s);const r=f(e,["raiMediaFilteredReasons"]);return r!=null&&h(t,["raiMediaFilteredReasons"],r),t}function wN(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["metadata"]);s!=null&&h(t,["metadata"],s);const r=f(e,["done"]);r!=null&&h(t,["done"],r);const o=f(e,["error"]);o!=null&&h(t,["error"],o);const a=f(e,["response","generateVideoResponse"]);return a!=null&&h(t,["response"],EN(n,a)),t}function IN(n,e){const t={},i=f(e,["gcsUri"]);i!=null&&h(t,["uri"],i);const s=f(e,["bytesBase64Encoded"]);s!=null&&h(t,["videoBytes"],Ds(n,s));const r=f(e,["mimeType"]);return r!=null&&h(t,["mimeType"],r),t}function CN(n,e){const t={},i=f(e,["_self"]);return i!=null&&h(t,["video"],IN(n,i)),t}function AN(n,e){const t={},i=f(e,["videos"]);i!=null&&(Array.isArray(i)?h(t,["generatedVideos"],i.map(o=>CN(n,o))):h(t,["generatedVideos"],i));const s=f(e,["raiMediaFilteredCount"]);s!=null&&h(t,["raiMediaFilteredCount"],s);const r=f(e,["raiMediaFilteredReasons"]);return r!=null&&h(t,["raiMediaFilteredReasons"],r),t}function zg(n,e){const t={},i=f(e,["name"]);i!=null&&h(t,["name"],i);const s=f(e,["metadata"]);s!=null&&h(t,["metadata"],s);const r=f(e,["done"]);r!=null&&h(t,["done"],r);const o=f(e,["error"]);o!=null&&h(t,["error"],o);const a=f(e,["response"]);return a!=null&&h(t,["response"],AN(n,a)),t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class SN extends _u{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const t=e.operation,i=e.config;if(t.name===void 0||t.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const s=t.name.split("/operations/")[0];let r;return i&&"httpOptions"in i&&(r=i.httpOptions),this.fetchPredictVideosOperationInternal({operationName:t.name,resourceName:s,config:{httpOptions:r}})}else return this.getVideosOperationInternal({operationName:t.name,config:i})}async getVideosOperationInternal(e){var t,i;let s,r="",o={};if(this.apiClient.isVertexAI()){const a=yN(this.apiClient,e);return r=Le("{operationName}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(l=>l.json()),s.then(l=>zg(this.apiClient,l))}else{const a=gN(this.apiClient,e);return r=Le("{operationName}",a._url),o=a._query,delete a.config,delete a._url,delete a._query,s=this.apiClient.request({path:r,queryParams:o,body:JSON.stringify(a),httpMethod:"GET",httpOptions:(i=e.config)===null||i===void 0?void 0:i.httpOptions}).then(l=>l.json()),s.then(l=>wN(this.apiClient,l))}}async fetchPredictVideosOperationInternal(e){var t;let i,s="",r={};if(this.apiClient.isVertexAI()){const o=_N(this.apiClient,e);return s=Le("{resourceName}:fetchPredictOperation",o._url),r=o._query,delete o.config,delete o._url,delete o._query,i=this.apiClient.request({path:s,queryParams:r,body:JSON.stringify(o),httpMethod:"POST",httpOptions:(t=e.config)===null||t===void 0?void 0:t.httpOptions}).then(a=>a.json()),i.then(a=>zg(this.apiClient,a))}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const bN="Content-Type",RN="X-Server-Timeout",PN="User-Agent",kN="x-goog-api-client",xN="0.9.0",NN=`google-genai-sdk/${xN}`,DN="v1beta1",MN="v1beta",Yg=/^data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class VN extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ClientError"}}class Jg extends Error{constructor(e,t){t?super(e,{cause:t}):super(e,{cause:new Error().stack}),this.message=e,this.name="ServerError"}}class LN{constructor(e){var t,i;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const s={};this.clientOptions.vertexai?(s.apiVersion=(t=this.clientOptions.apiVersion)!==null&&t!==void 0?t:DN,this.getProject()||this.getLocation()?(s.baseUrl=`https://${this.clientOptions.location}-aiplatform.googleapis.com/`,this.clientOptions.apiKey=void 0):(s.baseUrl="https://aiplatform.googleapis.com/",this.clientOptions.project=void 0,this.clientOptions.location=void 0)):(s.apiVersion=(i=this.clientOptions.apiVersion)!==null&&i!==void 0?i:MN,s.baseUrl="https://generativelanguage.googleapis.com/"),s.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=s,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(s,e.httpOptions))}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const i=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&i.push(e.apiVersion),i.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),t=new URL(e);return t.protocol="wss",t.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,t,i){const s=[this.getRequestUrlInternal(t)];return i&&s.push(this.getBaseResourcePath()),e!==""&&s.push(e),new URL(`${s.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);if(e.queryParams)for(const[o,a]of Object.entries(e.queryParams))s.searchParams.append(o,String(a));let r={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else r.body=e.body;return r=await this.includeExtraHttpOptionsToRequestInit(r,t),this.unaryApiCall(s,r,e.httpMethod)}patchHttpOptions(e,t){const i=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(t))typeof r=="object"?i[s]=Object.assign(Object.assign({},i[s]),r):r!==void 0&&(i[s]=r);return i}async requestStream(e){let t=this.clientOptions.httpOptions;e.httpOptions&&(t=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const i=this.shouldPrependVertexProjectPath(e),s=this.constructUrl(e.path,t,i);(!s.searchParams.has("alt")||s.searchParams.get("alt")!=="sse")&&s.searchParams.set("alt","sse");let r={};return r.body=e.body,r=await this.includeExtraHttpOptionsToRequestInit(r,t),this.streamApiCall(s,r,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,t){if(t&&t.timeout&&t.timeout>0){const i=new AbortController,s=i.signal;setTimeout(()=>i.abort(),t.timeout),e.signal=s}return e.headers=await this.getHeadersInternal(t),e}async unaryApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await Qg(s),new tf(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}async streamApiCall(e,t,i){return this.apiCall(e.toString(),Object.assign(Object.assign({},t),{method:i})).then(async s=>(await Qg(s),this.processStreamResponse(s))).catch(s=>{throw s instanceof Error?s:new Error(JSON.stringify(s))})}processStreamResponse(e){var t;return Sc(this,arguments,function*(){const s=(t=e==null?void 0:e.body)===null||t===void 0?void 0:t.getReader(),r=new TextDecoder("utf-8");if(!s)throw new Error("Response body is empty");try{let o="";for(;;){const{done:a,value:l}=yield Xt(s.read());if(a){if(o.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const u=r.decode(l);o+=u;let d=o.match(Yg);for(;d;){const p=d[1];try{const g=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield Xt(new tf(g)),o=o.slice(d[0].length),d=o.match(Yg)}catch(g){throw new Error(`exception parsing stream chunk ${p}. ${g}`)}}}}finally{s.releaseLock()}})}async apiCall(e,t){return fetch(e,t).catch(i=>{throw new Error(`exception ${i} sending request`)})}getDefaultHeaders(){const e={},t=NN+" "+this.clientOptions.userAgentExtra;return e[PN]=t,e[kN]=t,e[bN]="application/json",e}async getHeadersInternal(e){const t=new Headers;if(e&&e.headers){for(const[i,s]of Object.entries(e.headers))t.append(i,s);e.timeout&&e.timeout>0&&t.append(RN,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(t),t}async uploadFile(e,t){var i;const s={};t!=null&&(s.mimeType=t.mimeType,s.name=t.name,s.displayName=t.displayName),s.name&&!s.name.startsWith("files/")&&(s.name=`files/${s.name}`);const r=this.clientOptions.uploader,o=await r.stat(e);s.sizeBytes=String(o.size);const a=(i=t==null?void 0:t.mimeType)!==null&&i!==void 0?i:o.type;if(a===void 0||a==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");s.mimeType=a;const l=await this.fetchUploadUrl(s,t);return r.upload(e,l,this)}async fetchUploadUrl(e,t){var i;let s={};t!=null&&t.httpOptions?s=t.httpOptions:s={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const r={file:e},o=await this.request({path:Le("upload/v1beta/files",r._url),body:JSON.stringify(r),httpMethod:"POST",httpOptions:s});if(!o||!(o!=null&&o.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const a=(i=o==null?void 0:o.headers)===null||i===void 0?void 0:i["x-goog-upload-url"];if(a===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return a}}async function Qg(n){var e;if(n===void 0)throw new Jg("response is undefined");if(!n.ok){const t=n.status,i=n.statusText;let s;!((e=n.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?s=await n.json():s={error:{message:"exception parsing response",code:n.status,status:n.statusText}};const r=`got status: ${t} ${i}. ${JSON.stringify(s)}`;throw t>=400&&t<500?new VN(r):t>=500&&t<600?new Jg(r):new Error(r)}}const ON=1024*1024*8;async function FN(n,e,t){var i,s;let r=0,o=0,a=new tf(new Response),l="upload";for(r=n.size;o<r;){const d=Math.min(ON,r-o),p=n.slice(o,o+d);if(o+d>=r&&(l+=", finalize"),a=await t.request({path:"",body:p,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":l,"X-Goog-Upload-Offset":String(o),"Content-Length":String(d)}}}),o+=d,((i=a==null?void 0:a.headers)===null||i===void 0?void 0:i["x-goog-upload-status"])!=="active")break;if(r<=o)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const u=await(a==null?void 0:a.json());if(((s=a==null?void 0:a.headers)===null||s===void 0?void 0:s["x-goog-upload-status"])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return u.file}async function UN(n){return{size:n.size,type:n.type}}class BN{async upload(e,t,i){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await FN(e,t,i)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await UN(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class $N{create(e,t,i){return new qN(e,t,i)}}class qN{constructor(e,t,i){this.url=e,this.headers=t,this.callbacks=i}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Xg="x-goog-api-key";class HN{constructor(e){this.apiKey=e}async addAuthHeaders(e){e.get(Xg)===null&&e.append(Xg,this.apiKey)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const GN="gl-node/";class Lr{constructor(e){var t;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(t=e.vertexai)!==null&&t!==void 0?t:!1,this.apiKey=e.apiKey,this.apiVersion=e.apiVersion;const i=new HN(this.apiKey);this.apiClient=new LN({auth:i,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:GN+"web",uploader:new BN}),this.models=new mN(this.apiClient),this.live=new uN(this.apiClient,i,new $N),this.chats=new yk(this.models,this.apiClient),this.caches=new dk(this.apiClient),this.files=new kk(this.apiClient),this.operations=new SN(this.apiClient)}}const WN=()=>{};var jg={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ME=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let s=n.charCodeAt(i);s<128?e[t++]=s:s<2048?(e[t++]=s>>6|192,e[t++]=s&63|128):(s&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(s=65536+((s&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=s>>18|240,e[t++]=s>>12&63|128,e[t++]=s>>6&63|128,e[t++]=s&63|128):(e[t++]=s>>12|224,e[t++]=s>>6&63|128,e[t++]=s&63|128)}return e},KN=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const s=n[t++];if(s<128)e[i++]=String.fromCharCode(s);else if(s>191&&s<224){const r=n[t++];e[i++]=String.fromCharCode((s&31)<<6|r&63)}else if(s>239&&s<365){const r=n[t++],o=n[t++],a=n[t++],l=((s&7)<<18|(r&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const r=n[t++],o=n[t++];e[i++]=String.fromCharCode((s&15)<<12|(r&63)<<6|o&63)}}return e.join("")},VE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let s=0;s<n.length;s+=3){const r=n[s],o=s+1<n.length,a=o?n[s+1]:0,l=s+2<n.length,u=l?n[s+2]:0,d=r>>2,p=(r&3)<<4|a>>4;let g=(a&15)<<2|u>>6,_=u&63;l||(_=64,o||(g=64)),i.push(t[d],t[p],t[g],t[_])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ME(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):KN(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let s=0;s<n.length;){const r=t[n.charAt(s++)],a=s<n.length?t[n.charAt(s)]:0;++s;const u=s<n.length?t[n.charAt(s)]:64;++s;const p=s<n.length?t[n.charAt(s)]:64;if(++s,r==null||a==null||u==null||p==null)throw new zN;const g=r<<2|a>>4;if(i.push(g),u!==64){const _=a<<4&240|u>>2;if(i.push(_),p!==64){const E=u<<6&192|p;i.push(E)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class zN extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const YN=function(n){const e=ME(n);return VE.encodeByteArray(e,!0)},bc=function(n){return YN(n).replace(/\./g,"")},LE=function(n){try{return VE.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JN(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=()=>JN().__FIREBASE_DEFAULTS__,XN=()=>{if(typeof process>"u"||typeof jg>"u")return;const n=jg.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},jN=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LE(n[1]);return e&&JSON.parse(e)},Eu=()=>{try{return WN()||QN()||XN()||jN()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},OE=n=>{var e,t;return(t=(e=Eu())==null?void 0:e.emulatorHosts)==null?void 0:t[n]},FE=n=>{const e=OE(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},UE=()=>{var n;return(n=Eu())==null?void 0:n.config},BE=n=>{var e;return(e=Eu())==null?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZN{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pr(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Id(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $E(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",s=n.iat||0,r=n.sub||n.user_id;if(!r)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${i}`,aud:i,iat:s,exp:s+3600,auth_time:s,sub:r,user_id:r,firebase:{sign_in_provider:"custom",identities:{}},...n};return[bc(JSON.stringify(t)),bc(JSON.stringify(o)),""].join(".")}const Jo={};function eD(){const n={prod:[],emulator:[]};for(const e of Object.keys(Jo))Jo[e]?n.emulator.push(e):n.prod.push(e);return n}function tD(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let Zg=!1;function Cd(n,e){if(typeof window>"u"||typeof document>"u"||!pr(window.location.host)||Jo[n]===e||Jo[n]||Zg)return;Jo[n]=e;function t(g){return`__firebase__banner__${g}`}const i="__firebase__banner",r=eD().prod.length>0;function o(){const g=document.getElementById(i);g&&g.remove()}function a(g){g.style.display="flex",g.style.background="#7faaf0",g.style.position="fixed",g.style.bottom="5px",g.style.left="5px",g.style.padding=".5em",g.style.borderRadius="5px",g.style.alignItems="center"}function l(g,_){g.setAttribute("width","24"),g.setAttribute("id",_),g.setAttribute("height","24"),g.setAttribute("viewBox","0 0 24 24"),g.setAttribute("fill","none"),g.style.marginLeft="-6px"}function u(){const g=document.createElement("span");return g.style.cursor="pointer",g.style.marginLeft="16px",g.style.fontSize="24px",g.innerHTML=" &times;",g.onclick=()=>{Zg=!0,o()},g}function d(g,_){g.setAttribute("id",_),g.innerText="Learn more",g.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",g.setAttribute("target","__blank"),g.style.paddingLeft="5px",g.style.textDecoration="underline"}function p(){const g=tD(i),_=t("text"),E=document.getElementById(_)||document.createElement("span"),I=t("learnmore"),k=document.getElementById(I)||document.createElement("a"),D=t("preprendIcon"),M=document.getElementById(D)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(g.created){const P=g.element;a(P),d(k,I);const x=u();l(M,D),P.append(M,E,k,x),document.body.appendChild(P)}r?(E.innerText="Preview backend disconnected.",M.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(M.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,E.innerText="Preview backend running in this workspace."),E.setAttribute("id",_)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function nD(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(sn())}function iD(){var e;const n=(e=Eu())==null?void 0:e.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function sD(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function rD(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function oD(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function aD(){const n=sn();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function lD(){return!iD()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function cD(){try{return typeof indexedDB=="object"}catch{return!1}}function uD(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(i);s.onsuccess=()=>{s.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},s.onupgradeneeded=()=>{t=!1},s.onerror=()=>{var r;e(((r=s.error)==null?void 0:r.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hD="FirebaseError";class mi extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=hD,Object.setPrototypeOf(this,mi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Fa.prototype.create)}}class Fa{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},s=`${this.service}/${e}`,r=this.errors[e],o=r?fD(r,i):"Error",a=`${this.serviceName}: ${o} (${s}).`;return new mi(s,a,i)}}function fD(n,e){return n.replace(dD,(t,i)=>{const s=e[i];return s!=null?String(s):`<${i}?>`})}const dD=/\{\$([^}]+)}/g;function pD(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function sr(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const s of t){if(!i.includes(s))return!1;const r=n[s],o=e[s];if(ey(r)&&ey(o)){if(!sr(r,o))return!1}else if(r!==o)return!1}for(const s of i)if(!t.includes(s))return!1;return!0}function ey(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ua(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(s=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Mo(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[s,r]=i.split("=");e[decodeURIComponent(s)]=decodeURIComponent(r)}}),e}function Vo(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function mD(n,e){const t=new gD(n,e);return t.subscribe.bind(t)}class gD{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let s;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");yD(e,["next","error","complete"])?s=e:s={next:e,error:t,complete:i},s.next===void 0&&(s.next=ch),s.error===void 0&&(s.error=ch),s.complete===void 0&&(s.complete=ch);const r=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),r}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yD(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function ch(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hn(n){return n&&n._delegate?n._delegate:n}class Is{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ZN;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:t});s&&i.resolve(s)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(e==null?void 0:e.optional)??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(TD(e))try{this.getOrInitializeService({instanceIdentifier:qs})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(t);try{const r=this.getOrInitializeService({instanceIdentifier:s});i.resolve(r)}catch{}}}}clearInstance(e=qs){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qs){return this.instances.has(e)}getOptions(e=qs){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[r,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(r);i===a&&o.resolve(s)}return s}onInit(e,t){const i=this.normalizeInstanceIdentifier(t),s=this.onInitCallbacks.get(i)??new Set;s.add(e),this.onInitCallbacks.set(i,s);const r=this.instances.get(i);return r&&e(r,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const s of i)try{s(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:vD(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=qs){return this.component?this.component.multipleInstances?e:qs:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vD(n){return n===qs?void 0:n}function TD(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ED{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new _D(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var be;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(be||(be={}));const wD={debug:be.DEBUG,verbose:be.VERBOSE,info:be.INFO,warn:be.WARN,error:be.ERROR,silent:be.SILENT},ID=be.INFO,CD={[be.DEBUG]:"log",[be.VERBOSE]:"log",[be.INFO]:"info",[be.WARN]:"warn",[be.ERROR]:"error"},AD=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),s=CD[e];if(s)console[s](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Ad{constructor(e){this.name=e,this._logLevel=ID,this._logHandler=AD,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in be))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?wD[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,be.DEBUG,...e),this._logHandler(this,be.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,be.VERBOSE,...e),this._logHandler(this,be.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,be.INFO,...e),this._logHandler(this,be.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,be.WARN,...e),this._logHandler(this,be.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,be.ERROR,...e),this._logHandler(this,be.ERROR,...e)}}const SD=(n,e)=>e.some(t=>n instanceof t);let ty,ny;function bD(){return ty||(ty=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function RD(){return ny||(ny=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const qE=new WeakMap,rf=new WeakMap,HE=new WeakMap,uh=new WeakMap,Sd=new WeakMap;function PD(n){const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("success",r),n.removeEventListener("error",o)},r=()=>{t(ys(n.result)),s()},o=()=>{i(n.error),s()};n.addEventListener("success",r),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&qE.set(t,n)}).catch(()=>{}),Sd.set(e,n),e}function kD(n){if(rf.has(n))return;const e=new Promise((t,i)=>{const s=()=>{n.removeEventListener("complete",r),n.removeEventListener("error",o),n.removeEventListener("abort",o)},r=()=>{t(),s()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),s()};n.addEventListener("complete",r),n.addEventListener("error",o),n.addEventListener("abort",o)});rf.set(n,e)}let of={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return rf.get(n);if(e==="objectStoreNames")return n.objectStoreNames||HE.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ys(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function xD(n){of=n(of)}function ND(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(hh(this),e,...t);return HE.set(i,e.sort?e.sort():[e]),ys(i)}:RD().includes(n)?function(...e){return n.apply(hh(this),e),ys(qE.get(this))}:function(...e){return ys(n.apply(hh(this),e))}}function DD(n){return typeof n=="function"?ND(n):(n instanceof IDBTransaction&&kD(n),SD(n,bD())?new Proxy(n,of):n)}function ys(n){if(n instanceof IDBRequest)return PD(n);if(uh.has(n))return uh.get(n);const e=DD(n);return e!==n&&(uh.set(n,e),Sd.set(e,n)),e}const hh=n=>Sd.get(n);function MD(n,e,{blocked:t,upgrade:i,blocking:s,terminated:r}={}){const o=indexedDB.open(n,e),a=ys(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ys(o.result),l.oldVersion,l.newVersion,ys(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{r&&l.addEventListener("close",()=>r()),s&&l.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),a}const VD=["get","getKey","getAll","getAllKeys","count"],LD=["put","add","delete","clear"],fh=new Map;function iy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(fh.get(e))return fh.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,s=LD.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(s||VD.includes(t)))return;const r=async function(o,...a){const l=this.transaction(o,s?"readwrite":"readonly");let u=l.store;return i&&(u=u.index(a.shift())),(await Promise.all([u[t](...a),s&&l.done]))[0]};return fh.set(e,r),r}xD(n=>({...n,get:(e,t,i)=>iy(e,t)||n.get(e,t,i),has:(e,t)=>!!iy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(FD(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function FD(n){const e=n.getComponent();return(e==null?void 0:e.type)==="VERSION"}const af="@firebase/app",sy="0.14.4";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bi=new Ad("@firebase/app"),UD="@firebase/app-compat",BD="@firebase/analytics-compat",$D="@firebase/analytics",qD="@firebase/app-check-compat",HD="@firebase/app-check",GD="@firebase/auth",WD="@firebase/auth-compat",KD="@firebase/database",zD="@firebase/data-connect",YD="@firebase/database-compat",JD="@firebase/functions",QD="@firebase/functions-compat",XD="@firebase/installations",jD="@firebase/installations-compat",ZD="@firebase/messaging",eM="@firebase/messaging-compat",tM="@firebase/performance",nM="@firebase/performance-compat",iM="@firebase/remote-config",sM="@firebase/remote-config-compat",rM="@firebase/storage",oM="@firebase/storage-compat",aM="@firebase/firestore",lM="@firebase/ai",cM="@firebase/firestore-compat",uM="firebase",hM="12.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lf="[DEFAULT]",fM={[af]:"fire-core",[UD]:"fire-core-compat",[$D]:"fire-analytics",[BD]:"fire-analytics-compat",[HD]:"fire-app-check",[qD]:"fire-app-check-compat",[GD]:"fire-auth",[WD]:"fire-auth-compat",[KD]:"fire-rtdb",[zD]:"fire-data-connect",[YD]:"fire-rtdb-compat",[JD]:"fire-fn",[QD]:"fire-fn-compat",[XD]:"fire-iid",[jD]:"fire-iid-compat",[ZD]:"fire-fcm",[eM]:"fire-fcm-compat",[tM]:"fire-perf",[nM]:"fire-perf-compat",[iM]:"fire-rc",[sM]:"fire-rc-compat",[rM]:"fire-gcs",[oM]:"fire-gcs-compat",[aM]:"fire-fst",[cM]:"fire-fst-compat",[lM]:"fire-vertex","fire-js":"fire-js",[uM]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rc=new Map,dM=new Map,cf=new Map;function ry(n,e){try{n.container.addComponent(e)}catch(t){Bi.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function rr(n){const e=n.name;if(cf.has(e))return Bi.debug(`There were multiple attempts to register component ${e}.`),!1;cf.set(e,n);for(const t of Rc.values())ry(t,n);for(const t of dM.values())ry(t,n);return!0}function wu(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function _n(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pM={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},_s=new Fa("app","Firebase",pM);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mM{constructor(e,t,i){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new Is("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw _s.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=hM;function GE(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i={name:lf,automaticDataCollectionEnabled:!0,...e},s=i.name;if(typeof s!="string"||!s)throw _s.create("bad-app-name",{appName:String(s)});if(t||(t=UE()),!t)throw _s.create("no-options");const r=Rc.get(s);if(r){if(sr(t,r.options)&&sr(i,r.config))return r;throw _s.create("duplicate-app",{appName:s})}const o=new ED(s);for(const l of cf.values())o.addComponent(l);const a=new mM(t,i,o);return Rc.set(s,a),a}function bd(n=lf){const e=Rc.get(n);if(!e&&n===lf&&UE())return GE();if(!e)throw _s.create("no-app",{appName:n});return e}function si(n,e,t){let i=fM[n]??n;t&&(i+=`-${t}`);const s=i.match(/\s|\//),r=e.match(/\s|\//);if(s||r){const o=[`Unable to register library "${i}" with version "${e}":`];s&&o.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&r&&o.push("and"),r&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Bi.warn(o.join(" "));return}rr(new Is(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gM="firebase-heartbeat-database",yM=1,_a="firebase-heartbeat-store";let dh=null;function WE(){return dh||(dh=MD(gM,yM,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_a)}catch(t){console.warn(t)}}}}).catch(n=>{throw _s.create("idb-open",{originalErrorMessage:n.message})})),dh}async function _M(n){try{const t=(await WE()).transaction(_a),i=await t.objectStore(_a).get(KE(n));return await t.done,i}catch(e){if(e instanceof mi)Bi.warn(e.message);else{const t=_s.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Bi.warn(t.message)}}}async function oy(n,e){try{const i=(await WE()).transaction(_a,"readwrite");await i.objectStore(_a).put(e,KE(n)),await i.done}catch(t){if(t instanceof mi)Bi.warn(t.message);else{const i=_s.create("idb-set",{originalErrorMessage:t==null?void 0:t.message});Bi.warn(i.message)}}}function KE(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vM=1024,TM=30;class EM{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new IM(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ay();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(o=>o.date===r))return;if(this._heartbeatsCache.heartbeats.push({date:r,agent:s}),this._heartbeatsCache.heartbeats.length>TM){const o=CM(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Bi.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=ay(),{heartbeatsToSend:i,unsentEntries:s}=wM(this._heartbeatsCache.heartbeats),r=bc(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),r}catch(t){return Bi.warn(t),""}}}function ay(){return new Date().toISOString().substring(0,10)}function wM(n,e=vM){const t=[];let i=n.slice();for(const s of n){const r=t.find(o=>o.agent===s.agent);if(r){if(r.dates.push(s.date),ly(t)>e){r.dates.pop();break}}else if(t.push({agent:s.agent,dates:[s.date]}),ly(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class IM{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return cD()?uD().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await _M(this.app);return t!=null&&t.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const i=await this.read();return oy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function ly(n){return bc(JSON.stringify({version:2,heartbeats:n})).length}function CM(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AM(n){rr(new Is("platform-logger",e=>new OD(e),"PRIVATE")),rr(new Is("heartbeat",e=>new EM(e),"PRIVATE")),si(af,sy,n),si(af,sy,"esm2020"),si("fire-js","")}AM("");var SM="firebase",bM="12.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */si(SM,bM,"app");function zE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const RM=zE,YE=new Fa("auth","Firebase",zE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pc=new Ad("@firebase/auth");function PM(n,...e){Pc.logLevel<=be.WARN&&Pc.warn(`Auth (${mr}): ${n}`,...e)}function $l(n,...e){Pc.logLevel<=be.ERROR&&Pc.error(`Auth (${mr}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(n,...e){throw Pd(n,...e)}function Yn(n,...e){return Pd(n,...e)}function Rd(n,e,t){const i={...RM(),[e]:t};return new Fa("auth","Firebase",i).create(e,{appName:n.name})}function Di(n){return Rd(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function kM(n,e,t){const i=t;if(!(e instanceof i))throw i.name!==e.constructor.name&&Un(n,"argument-error"),Rd(n,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pd(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return YE.create(n,...e)}function pe(n,e,...t){if(!n)throw Pd(e,...t)}function ki(n){const e="INTERNAL ASSERTION FAILED: "+n;throw $l(e),new Error(e)}function $i(n,e){n||ki(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uf(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.href)||""}function xM(){return cy()==="http:"||cy()==="https:"}function cy(){var n;return typeof self<"u"&&((n=self.location)==null?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NM(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xM()||rD()||"connection"in navigator)?navigator.onLine:!0}function DM(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ba{constructor(e,t){this.shortDelay=e,this.longDelay=t,$i(t>e,"Short delay should be less than long delay!"),this.isMobile=nD()||oD()}get(){return NM()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kd(n,e){$i(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JE{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ki("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ki("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ki("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MM={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VM=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],LM=new Ba(3e4,6e4);function Wi(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function gi(n,e,t,i,s={}){return QE(n,s,async()=>{let r={},o={};i&&(e==="GET"?o=i:r={body:JSON.stringify(i)});const a=Ua({key:n.config.apiKey,...o}).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const u={method:e,headers:l,...r};return sD()||(u.referrerPolicy="no-referrer"),n.emulatorConfig&&pr(n.emulatorConfig.host)&&(u.credentials="include"),JE.fetch()(await XE(n,n.config.apiHost,t,a),u)})}async function QE(n,e,t){n._canInitEmulator=!1;const i={...MM,...e};try{const s=new FM(n),r=await Promise.race([t(),s.promise]);s.clearNetworkTimeout();const o=await r.json();if("needConfirmation"in o)throw Il(n,"account-exists-with-different-credential",o);if(r.ok&&!("errorMessage"in o))return o;{const a=r.ok?o.errorMessage:o.error.message,[l,u]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw Il(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw Il(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw Il(n,"user-disabled",o);const d=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw Rd(n,d,u);Un(n,d)}}catch(s){if(s instanceof mi)throw s;Un(n,"network-request-failed",{message:String(s)})}}async function $a(n,e,t,i,s={}){const r=await gi(n,e,t,i,s);return"mfaPendingCredential"in r&&Un(n,"multi-factor-auth-required",{_serverResponse:r}),r}async function XE(n,e,t,i){const s=`${e}${t}?${i}`,r=n,o=r.config.emulator?kd(n.config,s):`${n.config.apiScheme}://${s}`;return VM.includes(t)&&(await r._persistenceManagerAvailable,r._getPersistenceType()==="COOKIE")?r._getPersistence()._getFinalTarget(o).toString():o}function OM(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class FM{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(Yn(this.auth,"network-request-failed")),LM.get())})}}function Il(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const s=Yn(n,e,i);return s.customData._tokenResponse=t,s}function uy(n){return n!==void 0&&n.enterprise!==void 0}class UM{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return OM(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function BM(n,e){return gi(n,"GET","/v2/recaptchaConfig",Wi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $M(n,e){return gi(n,"POST","/v1/accounts:delete",e)}async function kc(n,e){return gi(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qo(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function qM(n,e=!1){const t=hn(n),i=await t.getIdToken(e),s=xd(i);pe(s&&s.exp&&s.auth_time&&s.iat,t.auth,"internal-error");const r=typeof s.firebase=="object"?s.firebase:void 0,o=r==null?void 0:r.sign_in_provider;return{claims:s,token:i,authTime:Qo(ph(s.auth_time)),issuedAtTime:Qo(ph(s.iat)),expirationTime:Qo(ph(s.exp)),signInProvider:o||null,signInSecondFactor:(r==null?void 0:r.sign_in_second_factor)||null}}function ph(n){return Number(n)*1e3}function xd(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return $l("JWT malformed, contained fewer than 3 sections"),null;try{const s=LE(t);return s?JSON.parse(s):($l("Failed to decode base64 JWT payload"),null)}catch(s){return $l("Caught error parsing JWT payload as JSON",s==null?void 0:s.toString()),null}}function hy(n){const e=xd(n);return pe(e,"internal-error"),pe(typeof e.exp<"u","internal-error"),pe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function no(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof mi&&HM(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function HM({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GM{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const i=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Qo(this.lastLoginAt),this.creationTime=Qo(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xc(n){var p;const e=n.auth,t=await n.getIdToken(),i=await no(n,kc(e,{idToken:t}));pe(i==null?void 0:i.users.length,e,"internal-error");const s=i.users[0];n._notifyReloadListener(s);const r=(p=s.providerUserInfo)!=null&&p.length?jE(s.providerUserInfo):[],o=KM(n.providerData,r),a=n.isAnonymous,l=!(n.email&&s.passwordHash)&&!(o!=null&&o.length),u=a?l:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new hf(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,d)}async function WM(n){const e=hn(n);await xc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function KM(n,e){return[...n.filter(i=>!e.some(s=>s.providerId===i.providerId)),...e]}function jE(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zM(n,e){const t=await QE(n,{},async()=>{const i=Ua({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:r}=n.config,o=await XE(n,s,"/v1/token",`key=${r}`),a=await n._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const l={method:"POST",headers:a,body:i};return n.emulatorConfig&&pr(n.emulatorConfig.host)&&(l.credentials="include"),JE.fetch()(o,l)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function YM(n,e){return gi(n,"POST","/v2/accounts:revokeToken",Wi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){pe(e.idToken,"internal-error"),pe(typeof e.idToken<"u","internal-error"),pe(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):hy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){pe(e.length!==0,"internal-error");const t=hy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(pe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:s,expiresIn:r}=await zM(e,t);this.updateTokensAndExpiration(i,s,Number(r))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:s,expirationTime:r}=t,o=new Gr;return i&&(pe(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),s&&(pe(typeof s=="string","internal-error",{appName:e}),o.accessToken=s),r&&(pe(typeof r=="number","internal-error",{appName:e}),o.expirationTime=r),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Gr,this.toJSON())}_performRefresh(){return ki("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ts(n,e){pe(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Hn{constructor({uid:e,auth:t,stsTokenManager:i,...s}){this.providerId="firebase",this.proactiveRefresh=new GM(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new hf(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await no(this,this.stsTokenManager.getToken(this.auth,e));return pe(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return qM(this,e)}reload(){return WM(this)}_assign(e){this!==e&&(pe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Hn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){pe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await xc(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(_n(this.auth.app))return Promise.reject(Di(this.auth));const e=await this.getIdToken();return await no(this,$M(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const i=t.displayName??void 0,s=t.email??void 0,r=t.phoneNumber??void 0,o=t.photoURL??void 0,a=t.tenantId??void 0,l=t._redirectEventId??void 0,u=t.createdAt??void 0,d=t.lastLoginAt??void 0,{uid:p,emailVerified:g,isAnonymous:_,providerData:E,stsTokenManager:I}=t;pe(p&&I,e,"internal-error");const k=Gr.fromJSON(this.name,I);pe(typeof p=="string",e,"internal-error"),ts(i,e.name),ts(s,e.name),pe(typeof g=="boolean",e,"internal-error"),pe(typeof _=="boolean",e,"internal-error"),ts(r,e.name),ts(o,e.name),ts(a,e.name),ts(l,e.name),ts(u,e.name),ts(d,e.name);const D=new Hn({uid:p,auth:e,email:s,emailVerified:g,displayName:i,isAnonymous:_,photoURL:o,phoneNumber:r,tenantId:a,stsTokenManager:k,createdAt:u,lastLoginAt:d});return E&&Array.isArray(E)&&(D.providerData=E.map(M=>({...M}))),l&&(D._redirectEventId=l),D}static async _fromIdTokenResponse(e,t,i=!1){const s=new Gr;s.updateFromServerResponse(t);const r=new Hn({uid:t.localId,auth:e,stsTokenManager:s,isAnonymous:i});return await xc(r),r}static async _fromGetAccountInfoResponse(e,t,i){const s=t.users[0];pe(s.localId!==void 0,"internal-error");const r=s.providerUserInfo!==void 0?jE(s.providerUserInfo):[],o=!(s.email&&s.passwordHash)&&!(r!=null&&r.length),a=new Gr;a.updateFromIdToken(i);const l=new Hn({uid:s.localId,auth:e,stsTokenManager:a,isAnonymous:o}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:r,metadata:new hf(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!(r!=null&&r.length)};return Object.assign(l,u),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fy=new Map;function xi(n){$i(n instanceof Function,"Expected a class definition");let e=fy.get(n);return e?($i(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,fy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}ZE.type="NONE";const dy=ZE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ql(n,e,t){return`firebase:${n}:${e}:${t}`}class Wr{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:s,name:r}=this.auth;this.fullUserKey=ql(this.userKey,s.apiKey,r),this.fullPersistenceKey=ql("persistence",s.apiKey,r),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await kc(this.auth,{idToken:e}).catch(()=>{});return t?Hn._fromGetAccountInfoResponse(this.auth,t,e):null}return Hn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Wr(xi(dy),e,i);const s=(await Promise.all(t.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let r=s[0]||xi(dy);const o=ql(i,e.config.apiKey,e.name);let a=null;for(const u of t)try{const d=await u._get(o);if(d){let p;if(typeof d=="string"){const g=await kc(e,{idToken:d}).catch(()=>{});if(!g)break;p=await Hn._fromGetAccountInfoResponse(e,g,d)}else p=Hn._fromJSON(e,d);u!==r&&(a=p),r=u;break}}catch{}const l=s.filter(u=>u._shouldAllowMigration);return!r._shouldAllowMigration||!l.length?new Wr(r,e,i):(r=l[0],a&&await r._set(o,a.toJSON()),await Promise.all(t.map(async u=>{if(u!==r)try{await u._remove(o)}catch{}})),new Wr(r,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function py(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(iw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ew(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(rw(e))return"Blackberry";if(ow(e))return"Webos";if(tw(e))return"Safari";if((e.includes("chrome/")||nw(e))&&!e.includes("edge/"))return"Chrome";if(sw(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if((i==null?void 0:i.length)===2)return i[1]}return"Other"}function ew(n=sn()){return/firefox\//i.test(n)}function tw(n=sn()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function nw(n=sn()){return/crios\//i.test(n)}function iw(n=sn()){return/iemobile/i.test(n)}function sw(n=sn()){return/android/i.test(n)}function rw(n=sn()){return/blackberry/i.test(n)}function ow(n=sn()){return/webos/i.test(n)}function Nd(n=sn()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function JM(n=sn()){var e;return Nd(n)&&!!((e=window.navigator)!=null&&e.standalone)}function QM(){return aD()&&document.documentMode===10}function aw(n=sn()){return Nd(n)||sw(n)||ow(n)||rw(n)||/windows phone/i.test(n)||iw(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lw(n,e=[]){let t;switch(n){case"Browser":t=py(sn());break;case"Worker":t=`${py(sn())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mr}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=r=>new Promise((o,a)=>{try{const l=e(r);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const s of t)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i==null?void 0:i.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jM(n,e={}){return gi(n,"GET","/v2/passwordPolicy",Wi(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZM=6;class eV{constructor(e){var i;const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??ZM,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((i=e.allowedNonAlphanumericCharacters)==null?void 0:i.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),s&&(t.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let s=0;s<e.length;s++)i=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,s,r){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tV{constructor(e,t,i,s){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new my(this),this.idTokenSubscription=new my(this),this.beforeStateQueue=new XM(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=YE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(r=>this._resolvePersistenceManagerAvailable=r)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xi(t)),this._initializationPromise=this.queue(async()=>{var i,s,r;if(!this._deleted&&(this.persistenceManager=await Wr.create(this,e),(i=this._resolvePersistenceManagerAvailable)==null||i.call(this),!this._deleted)){if((s=this._popupRedirectResolver)!=null&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)==null?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await kc(this,{idToken:e}),i=await Hn._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var r;if(_n(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let i=t,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(r=this.redirectUser)==null?void 0:r._redirectEventId,a=i==null?void 0:i._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&(l!=null&&l.user)&&(i=l.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return pe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await xc(e)}catch(t){if((t==null?void 0:t.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=DM()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(_n(this.app))return Promise.reject(Di(this));const t=e?hn(e):null;return t&&pe(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&pe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return _n(this.app)?Promise.reject(Di(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return _n(this.app)?Promise.reject(Di(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jM(this),t=new eV(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Fa("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await YM(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xi(e)||this._popupRedirectResolver;pe(t,this,"argument-error"),this.redirectPersistenceManager=await Wr.create(this,[xi(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)==null?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)==null?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((t=this.currentUser)==null?void 0:t.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,s){if(this._deleted)return()=>{};const r=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(pe(a,this,"internal-error"),a.then(()=>{o||r(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,s);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return pe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=lw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var s;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await((s=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:s.getHeartbeatsHeader());t&&(e["X-Firebase-Client"]=t);const i=await this._getAppCheckToken();return i&&(e["X-Firebase-AppCheck"]=i),e}async _getAppCheckToken(){var t;if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:t.getToken());return e!=null&&e.error&&PM(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function Ki(n){return hn(n)}class my{constructor(e){this.auth=e,this.observer=null,this.addObserver=mD(t=>this.observer=t)}get next(){return pe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Iu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nV(n){Iu=n}function cw(n){return Iu.loadJS(n)}function iV(){return Iu.recaptchaEnterpriseScript}function sV(){return Iu.gapiScript}function rV(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oV{constructor(){this.enterprise=new aV}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aV{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lV="recaptcha-enterprise",uw="NO_RECAPTCHA";class cV{constructor(e){this.type=lV,this.auth=Ki(e)}async verify(e="verify",t=!1){async function i(r){if(!t){if(r.tenantId==null&&r._agentRecaptchaConfig!=null)return r._agentRecaptchaConfig.siteKey;if(r.tenantId!=null&&r._tenantRecaptchaConfigs[r.tenantId]!==void 0)return r._tenantRecaptchaConfigs[r.tenantId].siteKey}return new Promise(async(o,a)=>{BM(r,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const u=new UM(l);return r.tenantId==null?r._agentRecaptchaConfig=u:r._tenantRecaptchaConfigs[r.tenantId]=u,o(u.siteKey)}}).catch(l=>{a(l)})})}function s(r,o,a){const l=window.grecaptcha;uy(l)?l.enterprise.ready(()=>{l.enterprise.execute(r,{action:e}).then(u=>{o(u)}).catch(()=>{o(uw)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oV().execute("siteKey",{action:"verify"}):new Promise((r,o)=>{i(this.auth).then(a=>{if(!t&&uy(window.grecaptcha))s(a,r,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iV();l.length!==0&&(l+=a),cw(l).then(()=>{s(a,r,o)}).catch(u=>{o(u)})}}).catch(a=>{o(a)})})}}async function gy(n,e,t,i=!1,s=!1){const r=new cV(n);let o;if(s)o=uw;else try{o=await r.verify(t)}catch{o=await r.verify(t,!0)}const a={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,u=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function Nc(n,e,t,i,s){var r;if((r=n._getRecaptchaConfig())!=null&&r.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await gy(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await gy(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uV(n,e){const t=wu(n,"auth");if(t.isInitialized()){const s=t.getImmediate(),r=t.getOptions();if(sr(r,e??{}))return s;Un(s,"already-initialized")}return t.initialize({options:e})}function hV(n,e){const t=(e==null?void 0:e.persistence)||[],i=(Array.isArray(t)?t:[t]).map(xi);e!=null&&e.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e==null?void 0:e.popupRedirectResolver)}function fV(n,e,t){const i=Ki(n);pe(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const s=!1,r=hw(e),{host:o,port:a}=dV(e),l=a===null?"":`:${a}`,u={url:`${r}//${o}${l}/`},d=Object.freeze({host:o,port:a,protocol:r.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!i._canInitEmulator){pe(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),pe(sr(u,i.config.emulator)&&sr(d,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=u,i.emulatorConfig=d,i.settings.appVerificationDisabledForTesting=!0,pr(o)?(Id(`${r}//${o}${l}`),Cd("Auth",!0)):pV()}function hw(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function dV(n){const e=hw(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(i);if(s){const r=s[1];return{host:r,port:yy(i.substr(r.length+1))}}else{const[r,o]=i.split(":");return{host:r,port:yy(o)}}}function yy(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pV(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dd{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ki("not implemented")}_getIdTokenResponse(e){return ki("not implemented")}_linkToIdToken(e,t){return ki("not implemented")}_getReauthenticationResolver(e){return ki("not implemented")}}async function mV(n,e){return gi(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gV(n,e){return $a(n,"POST","/v1/accounts:signInWithPassword",Wi(n,e))}async function yV(n,e){return gi(n,"POST","/v1/accounts:sendOobCode",Wi(n,e))}async function _V(n,e){return yV(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vV(n,e){return $a(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))}async function TV(n,e){return $a(n,"POST","/v1/accounts:signInWithEmailLink",Wi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class va extends Dd{constructor(e,t,i,s=null){super("password",i),this._email=e,this._password=t,this._tenantId=s}static _fromEmailAndPassword(e,t){return new va(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new va(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t!=null&&t.email&&(t!=null&&t.password)){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,t,"signInWithPassword",gV);case"emailLink":return vV(e,{email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Nc(e,i,"signUpPassword",mV);case"emailLink":return TV(e,{idToken:t,email:this._email,oobCode:this._password});default:Un(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Kr(n,e){return $a(n,"POST","/v1/accounts:signInWithIdp",Wi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EV="http://localhost";class or extends Dd{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new or(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Un("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:s,...r}=t;if(!i||!s)return null;const o=new or(i,s);return o.idToken=r.idToken||void 0,o.accessToken=r.accessToken||void 0,o.secret=r.secret,o.nonce=r.nonce,o.pendingToken=r.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Kr(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Kr(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Kr(e,t)}buildRequest(){const e={requestUri:EV,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Ua(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wV(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function IV(n){const e=Mo(Vo(n)).link,t=e?Mo(Vo(e)).deep_link_id:null,i=Mo(Vo(n)).deep_link_id;return(i?Mo(Vo(i)).link:null)||i||t||e||n}class Md{constructor(e){const t=Mo(Vo(e)),i=t.apiKey??null,s=t.oobCode??null,r=wV(t.mode??null);pe(i&&s&&r,"argument-error"),this.apiKey=i,this.operation=r,this.code=s,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=IV(e);try{return new Md(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{constructor(){this.providerId=po.PROVIDER_ID}static credential(e,t){return va._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=Md.parseLink(t);return pe(i,"argument-error"),va._fromEmailAndCode(e,i.code,i.tenantId)}}po.PROVIDER_ID="password";po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vd{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qa extends Vd{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class as extends qa{constructor(){super("facebook.com")}static credential(e){return or._fromParams({providerId:as.PROVIDER_ID,signInMethod:as.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return as.credentialFromTaggedObject(e)}static credentialFromError(e){return as.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return as.credential(e.oauthAccessToken)}catch{return null}}}as.FACEBOOK_SIGN_IN_METHOD="facebook.com";as.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi extends qa{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return or._fromParams({providerId:Pi.PROVIDER_ID,signInMethod:Pi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Pi.credentialFromTaggedObject(e)}static credentialFromError(e){return Pi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Pi.credential(t,i)}catch{return null}}}Pi.GOOGLE_SIGN_IN_METHOD="google.com";Pi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends qa{constructor(){super("github.com")}static credential(e){return or._fromParams({providerId:ls.PROVIDER_ID,signInMethod:ls.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ls.credentialFromTaggedObject(e)}static credentialFromError(e){return ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ls.credential(e.oauthAccessToken)}catch{return null}}}ls.GITHUB_SIGN_IN_METHOD="github.com";ls.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cs extends qa{constructor(){super("twitter.com")}static credential(e,t){return or._fromParams({providerId:cs.PROVIDER_ID,signInMethod:cs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return cs.credentialFromTaggedObject(e)}static credentialFromError(e){return cs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return cs.credential(t,i)}catch{return null}}}cs.TWITTER_SIGN_IN_METHOD="twitter.com";cs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CV(n,e){return $a(n,"POST","/v1/accounts:signUp",Wi(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ar{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,s=!1){const r=await Hn._fromIdTokenResponse(e,i,s),o=_y(i);return new ar({user:r,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const s=_y(i);return new ar({user:e,providerId:s,_tokenResponse:i,operationType:t})}}function _y(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dc extends mi{constructor(e,t,i,s){super(t.code,t.message),this.operationType=i,this.user=s,Object.setPrototypeOf(this,Dc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,s){return new Dc(e,t,i,s)}}function fw(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(r=>{throw r.code==="auth/multi-factor-auth-required"?Dc._fromErrorAndOperation(n,r,e,i):r})}async function AV(n,e,t=!1){const i=await no(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return ar._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function SV(n,e,t=!1){const{auth:i}=n;if(_n(i.app))return Promise.reject(Di(i));const s="reauthenticate";try{const r=await no(n,fw(i,s,e,n),t);pe(r.idToken,i,"internal-error");const o=xd(r.idToken);pe(o,i,"internal-error");const{sub:a}=o;return pe(n.uid===a,i,"user-mismatch"),ar._forOperation(n,s,r)}catch(r){throw(r==null?void 0:r.code)==="auth/user-not-found"&&Un(i,"user-mismatch"),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dw(n,e,t=!1){if(_n(n.app))return Promise.reject(Di(n));const i="signIn",s=await fw(n,i,e),r=await ar._fromIdTokenResponse(n,i,s);return t||await n._updateCurrentUser(r.user),r}async function bV(n,e){return dw(Ki(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pw(n){const e=Ki(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function RV(n,e,t){const i=Ki(n);await Nc(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",_V)}async function PV(n,e,t){if(_n(n.app))return Promise.reject(Di(n));const i=Ki(n),o=await Nc(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",CV).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&pw(n),l}),a=await ar._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function kV(n,e,t){return _n(n.app)?Promise.reject(Di(n)):bV(hn(n),po.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&pw(n),i})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xV(n,e){return gi(n,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NV(n,{displayName:e,photoURL:t}){if(e===void 0&&t===void 0)return;const i=hn(n),r={idToken:await i.getIdToken(),displayName:e,photoUrl:t,returnSecureToken:!0},o=await no(i,xV(i.auth,r));i.displayName=o.displayName||null,i.photoURL=o.photoUrl||null;const a=i.providerData.find(({providerId:l})=>l==="password");a&&(a.displayName=i.displayName,a.photoURL=i.photoURL),await i._updateTokensIfNecessary(o)}function DV(n,e,t,i){return hn(n).onIdTokenChanged(e,t,i)}function MV(n,e,t){return hn(n).beforeAuthStateChanged(e,t)}function VV(n,e,t,i){return hn(n).onAuthStateChanged(e,t,i)}function LV(n){return hn(n).signOut()}const Mc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mw{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Mc,"1"),this.storage.removeItem(Mc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OV=1e3,FV=10;class gw extends mw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=aw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),s=this.localCache[t];i!==s&&e(t,s,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const s=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},r=this.storage.getItem(i);QM()&&r!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,FV):s()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},OV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}gw.type="LOCAL";const UV=gw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw extends mw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}yw.type="SESSION";const _w=yw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BV(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(s=>s.isListeningto(e));if(t)return t;const i=new Cu(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:s,data:r}=t.data,o=this.handlersMap[s];if(!(o!=null&&o.size))return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:s});const a=Array.from(o).map(async u=>u(t.origin,r)),l=await BV(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:s,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $V{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let r,o;return new Promise((a,l)=>{const u=Ld("",20);s.port1.start();const d=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:s,onMessage(p){const g=p;if(g.data.eventId===u)switch(g.data.status){case"ack":clearTimeout(d),r=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(r),a(g.data.response);break;default:clearTimeout(d),clearTimeout(r),l(new Error("invalid_response"));break}}},this.handlers.add(o),s.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:u,data:t},[s.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ri(){return window}function qV(n){ri().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vw(){return typeof ri().WorkerGlobalScope<"u"&&typeof ri().importScripts=="function"}async function HV(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function GV(){var n;return((n=navigator==null?void 0:navigator.serviceWorker)==null?void 0:n.controller)||null}function WV(){return vw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tw="firebaseLocalStorageDb",KV=1,Vc="firebaseLocalStorage",Ew="fbase_key";class Ha{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function Au(n,e){return n.transaction([Vc],e?"readwrite":"readonly").objectStore(Vc)}function zV(){const n=indexedDB.deleteDatabase(Tw);return new Ha(n).toPromise()}function ff(){const n=indexedDB.open(Tw,KV);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(Vc,{keyPath:Ew})}catch(s){t(s)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(Vc)?e(i):(i.close(),await zV(),e(await ff()))})})}async function vy(n,e,t){const i=Au(n,!0).put({[Ew]:e,value:t});return new Ha(i).toPromise()}async function YV(n,e){const t=Au(n,!1).get(e),i=await new Ha(t).toPromise();return i===void 0?null:i.value}function Ty(n,e){const t=Au(n,!0).delete(e);return new Ha(t).toPromise()}const JV=800,QV=3;class ww{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await ff(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>QV)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cu._getInstance(WV()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var t,i;if(this.activeServiceWorker=await HV(),!this.activeServiceWorker)return;this.sender=new $V(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(t=e[0])!=null&&t.fulfilled&&(i=e[0])!=null&&i.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||GV()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await ff();return await vy(e,Mc,"1"),await Ty(e,Mc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>vy(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>YV(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Ty(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const r=Au(s,!1).getAll();return new Ha(r).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:s,value:r}of e)i.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(r)&&(this.notifyListeners(s,r),t.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!i.has(s)&&(this.notifyListeners(s,null),t.push(s));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const s of Array.from(i))s(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),JV)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ww.type="LOCAL";const XV=ww;new Ba(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iw(n,e){return e?xi(e):(pe(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od extends Dd{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Kr(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Kr(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Kr(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function jV(n){return dw(n.auth,new Od(n),n.bypassAuthState)}function ZV(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),SV(t,new Od(n),n.bypassAuthState)}async function eL(n){const{auth:e,user:t}=n;return pe(t,e,"internal-error"),AV(t,new Od(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cw{constructor(e,t,i,s,r=!1){this.auth=e,this.resolver=i,this.user=s,this.bypassAuthState=r,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:s,tenantId:r,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:r||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return jV;case"linkViaPopup":case"linkViaRedirect":return eL;case"reauthViaPopup":case"reauthViaRedirect":return ZV;default:Un(this.auth,"internal-error")}}resolve(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){$i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tL=new Ba(2e3,1e4);async function nL(n,e,t){if(_n(n.app))return Promise.reject(Yn(n,"operation-not-supported-in-this-environment"));const i=Ki(n);kM(n,e,Vd);const s=Iw(i,t);return new Ws(i,"signInViaPopup",e,s).executeNotNull()}class Ws extends Cw{constructor(e,t,i,s,r){super(e,t,s,r),this.provider=i,this.authWindow=null,this.pollId=null,Ws.currentPopupAction&&Ws.currentPopupAction.cancel(),Ws.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return pe(e,this.auth,"internal-error"),e}async onExecution(){$i(this.filter.length===1,"Popup operations only handle one event");const e=Ld();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(Yn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Yn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ws.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if((i=(t=this.authWindow)==null?void 0:t.window)!=null&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Yn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tL.get())};e()}}Ws.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iL="pendingRedirect",Hl=new Map;class sL extends Cw{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Hl.get(this.auth._key());if(!e){try{const i=await rL(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Hl.set(this.auth._key(),e)}return this.bypassAuthState||Hl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rL(n,e){const t=lL(e),i=aL(n);if(!await i._isAvailable())return!1;const s=await i._get(t)==="true";return await i._remove(t),s}function oL(n,e){Hl.set(n._key(),e)}function aL(n){return xi(n._redirectPersistence)}function lL(n){return ql(iL,n.config.apiKey,n.name)}async function cL(n,e,t=!1){if(_n(n.app))return Promise.reject(Di(n));const i=Ki(n),s=Iw(i,e),o=await new sL(i,s,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uL=600*1e3;class hL{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!fL(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Aw(e)){const s=((i=e.error.code)==null?void 0:i.split("auth/")[1])||"internal-error";t.onError(Yn(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=uL&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ey(e))}saveEventToCache(e){this.cachedEventUids.add(Ey(e)),this.lastProcessedEventTime=Date.now()}}function Ey(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Aw({type:n,error:e}){return n==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function fL(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Aw(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dL(n,e={}){return gi(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pL=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,mL=/^https?/;async function gL(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dL(n);for(const t of e)try{if(yL(t))return}catch{}Un(n,"unauthorized-domain")}function yL(n){const e=uf(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!mL.test(t))return!1;if(pL.test(n))return i===n;const s=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _L=new Ba(3e4,6e4);function wy(){const n=ri().___jsl;if(n!=null&&n.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vL(n){return new Promise((e,t)=>{var s,r,o;function i(){wy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{wy(),t(Yn(n,"network-request-failed"))},timeout:_L.get()})}if((r=(s=ri().gapi)==null?void 0:s.iframes)!=null&&r.Iframe)e(gapi.iframes.getContext());else if((o=ri().gapi)!=null&&o.load)i();else{const a=rV("iframefcb");return ri()[a]=()=>{gapi.load?i():t(Yn(n,"network-request-failed"))},cw(`${sV()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Gl=null,e})}let Gl=null;function TL(n){return Gl=Gl||vL(n),Gl}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const EL=new Ba(5e3,15e3),wL="__/auth/iframe",IL="emulator/auth/iframe",CL={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},AL=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function SL(n){const e=n.config;pe(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?kd(e,IL):`https://${n.config.authDomain}/${wL}`,i={apiKey:e.apiKey,appName:n.name,v:mr},s=AL.get(n.config.apiHost);s&&(i.eid=s);const r=n._getFrameworks();return r.length&&(i.fw=r.join(",")),`${t}?${Ua(i).slice(1)}`}async function bL(n){const e=await TL(n),t=ri().gapi;return pe(t,n,"internal-error"),e.open({where:document.body,url:SL(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:CL,dontclear:!0},i=>new Promise(async(s,r)=>{await i.restyle({setHideOnLeave:!1});const o=Yn(n,"network-request-failed"),a=ri().setTimeout(()=>{r(o)},EL.get());function l(){ri().clearTimeout(a),s(i)}i.ping(l).then(l,()=>{r(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RL={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},PL=500,kL=600,xL="_blank",NL="http://localhost";class Iy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function DL(n,e,t,i=PL,s=kL){const r=Math.max((window.screen.availHeight-s)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l={...RL,width:i.toString(),height:s.toString(),top:r,left:o},u=sn().toLowerCase();t&&(a=nw(u)?xL:t),ew(u)&&(e=e||NL,l.scrollbars="yes");const d=Object.entries(l).reduce((g,[_,E])=>`${g}${_}=${E},`,"");if(JM(u)&&a!=="_self")return ML(e||"",a),new Iy(null);const p=window.open(e||"",a,d);pe(p,n,"popup-blocked");try{p.focus()}catch{}return new Iy(p)}function ML(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VL="__/auth/handler",LL="emulator/auth/handler",OL=encodeURIComponent("fac");async function Cy(n,e,t,i,s,r){pe(n.config.authDomain,n,"auth-domain-config-required"),pe(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:mr,eventId:s};if(e instanceof Vd){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",pD(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,p]of Object.entries({}))o[d]=p}if(e instanceof qa){const d=e.getScopes().filter(p=>p!=="");d.length>0&&(o.scopes=d.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const l=await n._getAppCheckToken(),u=l?`#${OL}=${encodeURIComponent(l)}`:"";return`${FL(n)}?${Ua(a).slice(1)}${u}`}function FL({config:n}){return n.emulator?kd(n,LL):`https://${n.authDomain}/${VL}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mh="webStorageSupport";class UL{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=_w,this._completeRedirectFn=cL,this._overrideRedirectResult=oL}async _openPopup(e,t,i,s){var o;$i((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const r=await Cy(e,t,i,uf(),s);return DL(e,r,Ld())}async _openRedirect(e,t,i,s){await this._originValidation(e);const r=await Cy(e,t,i,uf(),s);return qV(r),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:s,promise:r}=this.eventManagers[t];return s?Promise.resolve(s):($i(r,"If manager is not set, promise should be"),r)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await bL(e),i=new hL(e);return t.register("authEvent",s=>(pe(s==null?void 0:s.authEvent,e,"invalid-auth-event"),{status:i.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(mh,{type:mh},s=>{var o;const r=(o=s==null?void 0:s[0])==null?void 0:o[mh];r!==void 0&&t(!!r),Un(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=gL(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return aw()||tw()||Nd()}}const BL=UL;var Ay="@firebase/auth",Sy="1.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $L{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e((i==null?void 0:i.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){pe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qL(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function HL(n){rr(new Is("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),r=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;pe(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:lw(n)},u=new tV(i,s,r,l);return hV(u,t),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),rr(new Is("auth-internal",e=>{const t=Ki(e.getProvider("auth").getImmediate());return(i=>new $L(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),si(Ay,Sy,qL(n)),si(Ay,Sy,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GL=300,WL=BE("authIdTokenMaxAge")||GL;let by=null;const KL=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>WL)return;const s=t==null?void 0:t.token;by!==s&&(by=s,await fetch(n,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function zL(n=bd()){const e=wu(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uV(n,{popupRedirectResolver:BL,persistence:[XV,UV,_w]}),i=BE("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const r=new URL(i,location.origin);if(location.origin===r.origin){const o=KL(r.toString());MV(t,o,()=>o(t.currentUser)),DV(t,a=>o(a))}}const s=OE("auth");return s&&fV(t,`http://${s}`),t}function YL(){var n;return((n=document.getElementsByTagName("head"))==null?void 0:n[0])??document}nV({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=s=>{const r=Yn("internal-error");r.customData=s,t(r)},i.type="text/javascript",i.charset="UTF-8",YL().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});HL("Browser");var Ry=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var vs,Sw;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(R,T){function v(){}v.prototype=T.prototype,R.F=T.prototype,R.prototype=new v,R.prototype.constructor=R,R.D=function(w,b,S){for(var A=Array(arguments.length-2),j=2;j<arguments.length;j++)A[j-2]=arguments[j];return T.prototype[b].apply(w,A)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(i,t),i.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(R,T,v){v||(v=0);const w=Array(16);if(typeof T=="string")for(var b=0;b<16;++b)w[b]=T.charCodeAt(v++)|T.charCodeAt(v++)<<8|T.charCodeAt(v++)<<16|T.charCodeAt(v++)<<24;else for(b=0;b<16;++b)w[b]=T[v++]|T[v++]<<8|T[v++]<<16|T[v++]<<24;T=R.g[0],v=R.g[1],b=R.g[2];let S=R.g[3],A;A=T+(S^v&(b^S))+w[0]+3614090360&4294967295,T=v+(A<<7&4294967295|A>>>25),A=S+(b^T&(v^b))+w[1]+3905402710&4294967295,S=T+(A<<12&4294967295|A>>>20),A=b+(v^S&(T^v))+w[2]+606105819&4294967295,b=S+(A<<17&4294967295|A>>>15),A=v+(T^b&(S^T))+w[3]+3250441966&4294967295,v=b+(A<<22&4294967295|A>>>10),A=T+(S^v&(b^S))+w[4]+4118548399&4294967295,T=v+(A<<7&4294967295|A>>>25),A=S+(b^T&(v^b))+w[5]+1200080426&4294967295,S=T+(A<<12&4294967295|A>>>20),A=b+(v^S&(T^v))+w[6]+2821735955&4294967295,b=S+(A<<17&4294967295|A>>>15),A=v+(T^b&(S^T))+w[7]+4249261313&4294967295,v=b+(A<<22&4294967295|A>>>10),A=T+(S^v&(b^S))+w[8]+1770035416&4294967295,T=v+(A<<7&4294967295|A>>>25),A=S+(b^T&(v^b))+w[9]+2336552879&4294967295,S=T+(A<<12&4294967295|A>>>20),A=b+(v^S&(T^v))+w[10]+4294925233&4294967295,b=S+(A<<17&4294967295|A>>>15),A=v+(T^b&(S^T))+w[11]+2304563134&4294967295,v=b+(A<<22&4294967295|A>>>10),A=T+(S^v&(b^S))+w[12]+1804603682&4294967295,T=v+(A<<7&4294967295|A>>>25),A=S+(b^T&(v^b))+w[13]+4254626195&4294967295,S=T+(A<<12&4294967295|A>>>20),A=b+(v^S&(T^v))+w[14]+2792965006&4294967295,b=S+(A<<17&4294967295|A>>>15),A=v+(T^b&(S^T))+w[15]+1236535329&4294967295,v=b+(A<<22&4294967295|A>>>10),A=T+(b^S&(v^b))+w[1]+4129170786&4294967295,T=v+(A<<5&4294967295|A>>>27),A=S+(v^b&(T^v))+w[6]+3225465664&4294967295,S=T+(A<<9&4294967295|A>>>23),A=b+(T^v&(S^T))+w[11]+643717713&4294967295,b=S+(A<<14&4294967295|A>>>18),A=v+(S^T&(b^S))+w[0]+3921069994&4294967295,v=b+(A<<20&4294967295|A>>>12),A=T+(b^S&(v^b))+w[5]+3593408605&4294967295,T=v+(A<<5&4294967295|A>>>27),A=S+(v^b&(T^v))+w[10]+38016083&4294967295,S=T+(A<<9&4294967295|A>>>23),A=b+(T^v&(S^T))+w[15]+3634488961&4294967295,b=S+(A<<14&4294967295|A>>>18),A=v+(S^T&(b^S))+w[4]+3889429448&4294967295,v=b+(A<<20&4294967295|A>>>12),A=T+(b^S&(v^b))+w[9]+568446438&4294967295,T=v+(A<<5&4294967295|A>>>27),A=S+(v^b&(T^v))+w[14]+3275163606&4294967295,S=T+(A<<9&4294967295|A>>>23),A=b+(T^v&(S^T))+w[3]+4107603335&4294967295,b=S+(A<<14&4294967295|A>>>18),A=v+(S^T&(b^S))+w[8]+1163531501&4294967295,v=b+(A<<20&4294967295|A>>>12),A=T+(b^S&(v^b))+w[13]+2850285829&4294967295,T=v+(A<<5&4294967295|A>>>27),A=S+(v^b&(T^v))+w[2]+4243563512&4294967295,S=T+(A<<9&4294967295|A>>>23),A=b+(T^v&(S^T))+w[7]+1735328473&4294967295,b=S+(A<<14&4294967295|A>>>18),A=v+(S^T&(b^S))+w[12]+2368359562&4294967295,v=b+(A<<20&4294967295|A>>>12),A=T+(v^b^S)+w[5]+4294588738&4294967295,T=v+(A<<4&4294967295|A>>>28),A=S+(T^v^b)+w[8]+2272392833&4294967295,S=T+(A<<11&4294967295|A>>>21),A=b+(S^T^v)+w[11]+1839030562&4294967295,b=S+(A<<16&4294967295|A>>>16),A=v+(b^S^T)+w[14]+4259657740&4294967295,v=b+(A<<23&4294967295|A>>>9),A=T+(v^b^S)+w[1]+2763975236&4294967295,T=v+(A<<4&4294967295|A>>>28),A=S+(T^v^b)+w[4]+1272893353&4294967295,S=T+(A<<11&4294967295|A>>>21),A=b+(S^T^v)+w[7]+4139469664&4294967295,b=S+(A<<16&4294967295|A>>>16),A=v+(b^S^T)+w[10]+3200236656&4294967295,v=b+(A<<23&4294967295|A>>>9),A=T+(v^b^S)+w[13]+681279174&4294967295,T=v+(A<<4&4294967295|A>>>28),A=S+(T^v^b)+w[0]+3936430074&4294967295,S=T+(A<<11&4294967295|A>>>21),A=b+(S^T^v)+w[3]+3572445317&4294967295,b=S+(A<<16&4294967295|A>>>16),A=v+(b^S^T)+w[6]+76029189&4294967295,v=b+(A<<23&4294967295|A>>>9),A=T+(v^b^S)+w[9]+3654602809&4294967295,T=v+(A<<4&4294967295|A>>>28),A=S+(T^v^b)+w[12]+3873151461&4294967295,S=T+(A<<11&4294967295|A>>>21),A=b+(S^T^v)+w[15]+530742520&4294967295,b=S+(A<<16&4294967295|A>>>16),A=v+(b^S^T)+w[2]+3299628645&4294967295,v=b+(A<<23&4294967295|A>>>9),A=T+(b^(v|~S))+w[0]+4096336452&4294967295,T=v+(A<<6&4294967295|A>>>26),A=S+(v^(T|~b))+w[7]+1126891415&4294967295,S=T+(A<<10&4294967295|A>>>22),A=b+(T^(S|~v))+w[14]+2878612391&4294967295,b=S+(A<<15&4294967295|A>>>17),A=v+(S^(b|~T))+w[5]+4237533241&4294967295,v=b+(A<<21&4294967295|A>>>11),A=T+(b^(v|~S))+w[12]+1700485571&4294967295,T=v+(A<<6&4294967295|A>>>26),A=S+(v^(T|~b))+w[3]+2399980690&4294967295,S=T+(A<<10&4294967295|A>>>22),A=b+(T^(S|~v))+w[10]+4293915773&4294967295,b=S+(A<<15&4294967295|A>>>17),A=v+(S^(b|~T))+w[1]+2240044497&4294967295,v=b+(A<<21&4294967295|A>>>11),A=T+(b^(v|~S))+w[8]+1873313359&4294967295,T=v+(A<<6&4294967295|A>>>26),A=S+(v^(T|~b))+w[15]+4264355552&4294967295,S=T+(A<<10&4294967295|A>>>22),A=b+(T^(S|~v))+w[6]+2734768916&4294967295,b=S+(A<<15&4294967295|A>>>17),A=v+(S^(b|~T))+w[13]+1309151649&4294967295,v=b+(A<<21&4294967295|A>>>11),A=T+(b^(v|~S))+w[4]+4149444226&4294967295,T=v+(A<<6&4294967295|A>>>26),A=S+(v^(T|~b))+w[11]+3174756917&4294967295,S=T+(A<<10&4294967295|A>>>22),A=b+(T^(S|~v))+w[2]+718787259&4294967295,b=S+(A<<15&4294967295|A>>>17),A=v+(S^(b|~T))+w[9]+3951481745&4294967295,R.g[0]=R.g[0]+T&4294967295,R.g[1]=R.g[1]+(b+(A<<21&4294967295|A>>>11))&4294967295,R.g[2]=R.g[2]+b&4294967295,R.g[3]=R.g[3]+S&4294967295}i.prototype.v=function(R,T){T===void 0&&(T=R.length);const v=T-this.blockSize,w=this.C;let b=this.h,S=0;for(;S<T;){if(b==0)for(;S<=v;)s(this,R,S),S+=this.blockSize;if(typeof R=="string"){for(;S<T;)if(w[b++]=R.charCodeAt(S++),b==this.blockSize){s(this,w),b=0;break}}else for(;S<T;)if(w[b++]=R[S++],b==this.blockSize){s(this,w),b=0;break}}this.h=b,this.o+=T},i.prototype.A=function(){var R=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);R[0]=128;for(var T=1;T<R.length-8;++T)R[T]=0;T=this.o*8;for(var v=R.length-8;v<R.length;++v)R[v]=T&255,T/=256;for(this.v(R),R=Array(16),T=0,v=0;v<4;++v)for(let w=0;w<32;w+=8)R[T++]=this.g[v]>>>w&255;return R};function r(R,T){var v=a;return Object.prototype.hasOwnProperty.call(v,R)?v[R]:v[R]=T(R)}function o(R,T){this.h=T;const v=[];let w=!0;for(let b=R.length-1;b>=0;b--){const S=R[b]|0;w&&S==T||(v[b]=S,w=!1)}this.g=v}var a={};function l(R){return-128<=R&&R<128?r(R,function(T){return new o([T|0],T<0?-1:0)}):new o([R|0],R<0?-1:0)}function u(R){if(isNaN(R)||!isFinite(R))return p;if(R<0)return k(u(-R));const T=[];let v=1;for(let w=0;R>=v;w++)T[w]=R/v|0,v*=4294967296;return new o(T,0)}function d(R,T){if(R.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(R.charAt(0)=="-")return k(d(R.substring(1),T));if(R.indexOf("-")>=0)throw Error('number format error: interior "-" character');const v=u(Math.pow(T,8));let w=p;for(let S=0;S<R.length;S+=8){var b=Math.min(8,R.length-S);const A=parseInt(R.substring(S,S+b),T);b<8?(b=u(Math.pow(T,b)),w=w.j(b).add(u(A))):(w=w.j(v),w=w.add(u(A)))}return w}var p=l(0),g=l(1),_=l(16777216);n=o.prototype,n.m=function(){if(I(this))return-k(this).m();let R=0,T=1;for(let v=0;v<this.g.length;v++){const w=this.i(v);R+=(w>=0?w:4294967296+w)*T,T*=4294967296}return R},n.toString=function(R){if(R=R||10,R<2||36<R)throw Error("radix out of range: "+R);if(E(this))return"0";if(I(this))return"-"+k(this).toString(R);const T=u(Math.pow(R,6));var v=this;let w="";for(;;){const b=x(v,T).g;v=D(v,b.j(T));let S=((v.g.length>0?v.g[0]:v.h)>>>0).toString(R);if(v=b,E(v))return S+w;for(;S.length<6;)S="0"+S;w=S+w}},n.i=function(R){return R<0?0:R<this.g.length?this.g[R]:this.h};function E(R){if(R.h!=0)return!1;for(let T=0;T<R.g.length;T++)if(R.g[T]!=0)return!1;return!0}function I(R){return R.h==-1}n.l=function(R){return R=D(this,R),I(R)?-1:E(R)?0:1};function k(R){const T=R.g.length,v=[];for(let w=0;w<T;w++)v[w]=~R.g[w];return new o(v,~R.h).add(g)}n.abs=function(){return I(this)?k(this):this},n.add=function(R){const T=Math.max(this.g.length,R.g.length),v=[];let w=0;for(let b=0;b<=T;b++){let S=w+(this.i(b)&65535)+(R.i(b)&65535),A=(S>>>16)+(this.i(b)>>>16)+(R.i(b)>>>16);w=A>>>16,S&=65535,A&=65535,v[b]=A<<16|S}return new o(v,v[v.length-1]&-2147483648?-1:0)};function D(R,T){return R.add(k(T))}n.j=function(R){if(E(this)||E(R))return p;if(I(this))return I(R)?k(this).j(k(R)):k(k(this).j(R));if(I(R))return k(this.j(k(R)));if(this.l(_)<0&&R.l(_)<0)return u(this.m()*R.m());const T=this.g.length+R.g.length,v=[];for(var w=0;w<2*T;w++)v[w]=0;for(w=0;w<this.g.length;w++)for(let b=0;b<R.g.length;b++){const S=this.i(w)>>>16,A=this.i(w)&65535,j=R.i(b)>>>16,oe=R.i(b)&65535;v[2*w+2*b]+=A*oe,M(v,2*w+2*b),v[2*w+2*b+1]+=S*oe,M(v,2*w+2*b+1),v[2*w+2*b+1]+=A*j,M(v,2*w+2*b+1),v[2*w+2*b+2]+=S*j,M(v,2*w+2*b+2)}for(R=0;R<T;R++)v[R]=v[2*R+1]<<16|v[2*R];for(R=T;R<2*T;R++)v[R]=0;return new o(v,0)};function M(R,T){for(;(R[T]&65535)!=R[T];)R[T+1]+=R[T]>>>16,R[T]&=65535,T++}function P(R,T){this.g=R,this.h=T}function x(R,T){if(E(T))throw Error("division by zero");if(E(R))return new P(p,p);if(I(R))return T=x(k(R),T),new P(k(T.g),k(T.h));if(I(T))return T=x(R,k(T)),new P(k(T.g),T.h);if(R.g.length>30){if(I(R)||I(T))throw Error("slowDivide_ only works with positive integers.");for(var v=g,w=T;w.l(R)<=0;)v=L(v),w=L(w);var b=F(v,1),S=F(w,1);for(w=F(w,2),v=F(v,2);!E(w);){var A=S.add(w);A.l(R)<=0&&(b=b.add(v),S=A),w=F(w,1),v=F(v,1)}return T=D(R,b.j(T)),new P(b,T)}for(b=p;R.l(T)>=0;){for(v=Math.max(1,Math.floor(R.m()/T.m())),w=Math.ceil(Math.log(v)/Math.LN2),w=w<=48?1:Math.pow(2,w-48),S=u(v),A=S.j(T);I(A)||A.l(R)>0;)v-=w,S=u(v),A=S.j(T);E(S)&&(S=g),b=b.add(S),R=D(R,A)}return new P(b,R)}n.B=function(R){return x(this,R).h},n.and=function(R){const T=Math.max(this.g.length,R.g.length),v=[];for(let w=0;w<T;w++)v[w]=this.i(w)&R.i(w);return new o(v,this.h&R.h)},n.or=function(R){const T=Math.max(this.g.length,R.g.length),v=[];for(let w=0;w<T;w++)v[w]=this.i(w)|R.i(w);return new o(v,this.h|R.h)},n.xor=function(R){const T=Math.max(this.g.length,R.g.length),v=[];for(let w=0;w<T;w++)v[w]=this.i(w)^R.i(w);return new o(v,this.h^R.h)};function L(R){const T=R.g.length+1,v=[];for(let w=0;w<T;w++)v[w]=R.i(w)<<1|R.i(w-1)>>>31;return new o(v,R.h)}function F(R,T){const v=T>>5;T%=32;const w=R.g.length-v,b=[];for(let S=0;S<w;S++)b[S]=T>0?R.i(S+v)>>>T|R.i(S+v+1)<<32-T:R.i(S+v);return new o(b,R.h)}i.prototype.digest=i.prototype.A,i.prototype.reset=i.prototype.u,i.prototype.update=i.prototype.v,Sw=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=u,o.fromString=d,vs=o}).apply(typeof Ry<"u"?Ry:typeof self<"u"?self:typeof window<"u"?window:{});var Cl=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var bw,Lo,Rw,Wl,df,Pw,kw,xw;(function(){var n,e=Object.defineProperty;function t(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof Cl=="object"&&Cl];for(var m=0;m<c.length;++m){var y=c[m];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var i=t(this);function s(c,m){if(m)e:{var y=i;c=c.split(".");for(var C=0;C<c.length-1;C++){var O=c[C];if(!(O in y))break e;y=y[O]}c=c[c.length-1],C=y[c],m=m(C),m!=C&&m!=null&&e(y,c,{configurable:!0,writable:!0,value:m})}}s("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),s("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),s("Object.entries",function(c){return c||function(m){var y=[],C;for(C in m)Object.prototype.hasOwnProperty.call(m,C)&&y.push([C,m[C]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var r=r||{},o=this||self;function a(c){var m=typeof c;return m=="object"&&c!=null||m=="function"}function l(c,m,y){return c.call.apply(c.bind,arguments)}function u(c,m,y){return u=l,u.apply(null,arguments)}function d(c,m){var y=Array.prototype.slice.call(arguments,1);return function(){var C=y.slice();return C.push.apply(C,arguments),c.apply(this,C)}}function p(c,m){function y(){}y.prototype=m.prototype,c.Z=m.prototype,c.prototype=new y,c.prototype.constructor=c,c.Ob=function(C,O,U){for(var Z=Array(arguments.length-2),we=2;we<arguments.length;we++)Z[we-2]=arguments[we];return m.prototype[O].apply(C,Z)}}var g=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function _(c){const m=c.length;if(m>0){const y=Array(m);for(let C=0;C<m;C++)y[C]=c[C];return y}return[]}function E(c,m){for(let C=1;C<arguments.length;C++){const O=arguments[C];var y=typeof O;if(y=y!="object"?y:O?Array.isArray(O)?"array":y:"null",y=="array"||y=="object"&&typeof O.length=="number"){y=c.length||0;const U=O.length||0;c.length=y+U;for(let Z=0;Z<U;Z++)c[y+Z]=O[Z]}else c.push(O)}}class I{constructor(m,y){this.i=m,this.j=y,this.h=0,this.g=null}get(){let m;return this.h>0?(this.h--,m=this.g,this.g=m.next,m.next=null):m=this.i(),m}}function k(c){o.setTimeout(()=>{throw c},0)}function D(){var c=R;let m=null;return c.g&&(m=c.g,c.g=c.g.next,c.g||(c.h=null),m.next=null),m}class M{constructor(){this.h=this.g=null}add(m,y){const C=P.get();C.set(m,y),this.h?this.h.next=C:this.g=C,this.h=C}}var P=new I(()=>new x,c=>c.reset());class x{constructor(){this.next=this.g=this.h=null}set(m,y){this.h=m,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let L,F=!1,R=new M,T=()=>{const c=Promise.resolve(void 0);L=()=>{c.then(v)}};function v(){for(var c;c=D();){try{c.h.call(c.g)}catch(y){k(y)}var m=P;m.j(c),m.h<100&&(m.h++,c.next=m.g,m.g=c)}F=!1}function w(){this.u=this.u,this.C=this.C}w.prototype.u=!1,w.prototype.dispose=function(){this.u||(this.u=!0,this.N())},w.prototype[Symbol.dispose]=function(){this.dispose()},w.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function b(c,m){this.type=c,this.g=this.target=m,this.defaultPrevented=!1}b.prototype.h=function(){this.defaultPrevented=!0};var S=(function(){if(!o.addEventListener||!Object.defineProperty)return!1;var c=!1,m=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const y=()=>{};o.addEventListener("test",y,m),o.removeEventListener("test",y,m)}catch{}return c})();function A(c){return/^[\s\xa0]*$/.test(c)}function j(c,m){b.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,m)}p(j,b),j.prototype.init=function(c,m){const y=this.type=c.type,C=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=m,m=c.relatedTarget,m||(y=="mouseover"?m=c.fromElement:y=="mouseout"&&(m=c.toElement)),this.relatedTarget=m,C?(this.clientX=C.clientX!==void 0?C.clientX:C.pageX,this.clientY=C.clientY!==void 0?C.clientY:C.pageY,this.screenX=C.screenX||0,this.screenY=C.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&j.Z.h.call(this)},j.prototype.h=function(){j.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var oe="closure_listenable_"+(Math.random()*1e6|0),ee=0;function ce(c,m,y,C,O){this.listener=c,this.proxy=null,this.src=m,this.type=y,this.capture=!!C,this.ha=O,this.key=++ee,this.da=this.fa=!1}function ne(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function xe(c,m,y){for(const C in c)m.call(y,c[C],C,c)}function qe(c,m){for(const y in c)m.call(void 0,c[y],y,c)}function ut(c){const m={};for(const y in c)m[y]=c[y];return m}const _t="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Pn(c,m){let y,C;for(let O=1;O<arguments.length;O++){C=arguments[O];for(y in C)c[y]=C[y];for(let U=0;U<_t.length;U++)y=_t[U],Object.prototype.hasOwnProperty.call(C,y)&&(c[y]=C[y])}}function Nt(c){this.src=c,this.g={},this.h=0}Nt.prototype.add=function(c,m,y,C,O){const U=c.toString();c=this.g[U],c||(c=this.g[U]=[],this.h++);const Z=je(c,m,C,O);return Z>-1?(m=c[Z],y||(m.fa=!1)):(m=new ce(m,this.src,U,!!C,O),m.fa=y,c.push(m)),m};function X(c,m){const y=m.type;if(y in c.g){var C=c.g[y],O=Array.prototype.indexOf.call(C,m,void 0),U;(U=O>=0)&&Array.prototype.splice.call(C,O,1),U&&(ne(m),c.g[y].length==0&&(delete c.g[y],c.h--))}}function je(c,m,y,C){for(let O=0;O<c.length;++O){const U=c[O];if(!U.da&&U.listener==m&&U.capture==!!y&&U.ha==C)return O}return-1}var fn="closure_lm_"+(Math.random()*1e6|0),st={};function Wt(c,m,y,C,O){if(Array.isArray(m)){for(let U=0;U<m.length;U++)Wt(c,m[U],y,C,O);return null}return y=$(y),c&&c[oe]?c.J(m,y,a(C)?!!C.capture:!1,O):Dt(c,m,y,!1,C,O)}function Dt(c,m,y,C,O,U){if(!m)throw Error("Invalid event type");const Z=a(O)?!!O.capture:!!O;let we=G(c);if(we||(c[fn]=we=new Nt(c)),y=we.add(m,y,C,Z,U),y.proxy)return y;if(C=rn(),y.proxy=C,C.src=c,C.listener=y,c.addEventListener)S||(O=Z),O===void 0&&(O=!1),c.addEventListener(m.toString(),C,O);else if(c.attachEvent)c.attachEvent(V(m.toString()),C);else if(c.addListener&&c.removeListener)c.addListener(C);else throw Error("addEventListener and attachEvent are unavailable.");return y}function rn(){function c(y){return m.call(c.src,c.listener,y)}const m=B;return c}function on(c,m,y,C,O){if(Array.isArray(m))for(var U=0;U<m.length;U++)on(c,m[U],y,C,O);else C=a(C)?!!C.capture:!!C,y=$(y),c&&c[oe]?(c=c.i,U=String(m).toString(),U in c.g&&(m=c.g[U],y=je(m,y,C,O),y>-1&&(ne(m[y]),Array.prototype.splice.call(m,y,1),m.length==0&&(delete c.g[U],c.h--)))):c&&(c=G(c))&&(m=c.g[m.toString()],c=-1,m&&(c=je(m,y,C,O)),(y=c>-1?m[c]:null)&&N(y))}function N(c){if(typeof c!="number"&&c&&!c.da){var m=c.src;if(m&&m[oe])X(m.i,c);else{var y=c.type,C=c.proxy;m.removeEventListener?m.removeEventListener(y,C,c.capture):m.detachEvent?m.detachEvent(V(y),C):m.addListener&&m.removeListener&&m.removeListener(C),(y=G(m))?(X(y,c),y.h==0&&(y.src=null,m[fn]=null)):ne(c)}}}function V(c){return c in st?st[c]:st[c]="on"+c}function B(c,m){if(c.da)c=!0;else{m=new j(m,this);const y=c.listener,C=c.ha||c.src;c.fa&&N(c),c=y.call(C,m)}return c}function G(c){return c=c[fn],c instanceof Nt?c:null}var q="__closure_events_fn_"+(Math.random()*1e9>>>0);function $(c){return typeof c=="function"?c:(c[q]||(c[q]=function(m){return c.handleEvent(m)}),c[q])}function J(){w.call(this),this.i=new Nt(this),this.M=this,this.G=null}p(J,w),J.prototype[oe]=!0,J.prototype.removeEventListener=function(c,m,y,C){on(this,c,m,y,C)};function z(c,m){var y,C=c.G;if(C)for(y=[];C;C=C.G)y.push(C);if(c=c.M,C=m.type||m,typeof m=="string")m=new b(m,c);else if(m instanceof b)m.target=m.target||c;else{var O=m;m=new b(C,c),Pn(m,O)}O=!0;let U,Z;if(y)for(Z=y.length-1;Z>=0;Z--)U=m.g=y[Z],O=Q(U,C,!0,m)&&O;if(U=m.g=c,O=Q(U,C,!0,m)&&O,O=Q(U,C,!1,m)&&O,y)for(Z=0;Z<y.length;Z++)U=m.g=y[Z],O=Q(U,C,!1,m)&&O}J.prototype.N=function(){if(J.Z.N.call(this),this.i){var c=this.i;for(const m in c.g){const y=c.g[m];for(let C=0;C<y.length;C++)ne(y[C]);delete c.g[m],c.h--}}this.G=null},J.prototype.J=function(c,m,y,C){return this.i.add(String(c),m,!1,y,C)},J.prototype.K=function(c,m,y,C){return this.i.add(String(c),m,!0,y,C)};function Q(c,m,y,C){if(m=c.i.g[String(m)],!m)return!0;m=m.concat();let O=!0;for(let U=0;U<m.length;++U){const Z=m[U];if(Z&&!Z.da&&Z.capture==y){const we=Z.listener,vt=Z.ha||Z.src;Z.fa&&X(c.i,Z),O=we.call(vt,C)!==!1&&O}}return O&&!C.defaultPrevented}function W(c,m){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=u(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(m)>2147483647?-1:o.setTimeout(c,m||0)}function le(c){c.g=W(()=>{c.g=null,c.i&&(c.i=!1,le(c))},c.l);const m=c.h;c.h=null,c.m.apply(null,m)}class te extends w{constructor(m,y){super(),this.m=m,this.l=y,this.h=null,this.i=!1,this.g=null}j(m){this.h=arguments,this.g?this.i=!0:le(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function ae(c){w.call(this),this.h=c,this.g={}}p(ae,w);var fe=[];function Te(c){xe(c.g,function(m,y){this.g.hasOwnProperty(y)&&N(m)},c),c.g={}}ae.prototype.N=function(){ae.Z.N.call(this),Te(this)},ae.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Oe=o.JSON.stringify,Ve=o.JSON.parse,At=class{stringify(c){return o.JSON.stringify(c,void 0)}parse(c){return o.JSON.parse(c,void 0)}};function ht(){}function Kt(){}var rt={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Bn(){b.call(this,"d")}p(Bn,b);function zi(){b.call(this,"c")}p(zi,b);var tt={},an=null;function _i(){return an=an||new J}tt.Ia="serverreachability";function Ms(c){b.call(this,tt.Ia,c)}p(Ms,b);function Jn(c){const m=_i();z(m,new Ms(m))}tt.STAT_EVENT="statevent";function Ja(c,m){b.call(this,tt.STAT_EVENT,c),this.stat=m}p(Ja,b);function Mt(c){const m=_i();z(m,new Ja(m,c))}tt.Ja="timingevent";function Qa(c,m){b.call(this,tt.Ja,c),this.size=m}p(Qa,b);function Tr(c,m){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){c()},m)}function Y(){this.g=!0}Y.prototype.ua=function(){this.g=!1};function Ee(c,m,y,C,O,U){c.info(function(){if(c.g)if(U){var Z="",we=U.split("&");for(let Ke=0;Ke<we.length;Ke++){var vt=we[Ke].split("=");if(vt.length>1){const St=vt[0];vt=vt[1];const jn=St.split("_");Z=jn.length>=2&&jn[1]=="type"?Z+(St+"="+vt+"&"):Z+(St+"=redacted&")}}}else Z=null;else Z=U;return"XMLHTTP REQ ("+C+") [attempt "+O+"]: "+m+`
`+y+`
`+Z})}function Ie(c,m,y,C,O,U,Z){c.info(function(){return"XMLHTTP RESP ("+C+") [ attempt "+O+"]: "+m+`
`+y+`
`+U+" "+Z})}function Ce(c,m,y,C){c.info(function(){return"XMLHTTP TEXT ("+m+"): "+Ne(c,y)+(C?" "+C:"")})}function Ue(c,m){c.info(function(){return"TIMEOUT: "+m})}Y.prototype.info=function(){};function Ne(c,m){if(!c.g)return m;if(!m)return null;try{const U=JSON.parse(m);if(U){for(c=0;c<U.length;c++)if(Array.isArray(U[c])){var y=U[c];if(!(y.length<2)){var C=y[1];if(Array.isArray(C)&&!(C.length<1)){var O=C[0];if(O!="noop"&&O!="stop"&&O!="close")for(let Z=1;Z<C.length;Z++)C[Z]=""}}}}return Oe(U)}catch{return m}}var Fe={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},We={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},kn;function Qn(){}p(Qn,ht),Qn.prototype.g=function(){return new XMLHttpRequest},kn=new Qn;function $n(c){return encodeURIComponent(String(c))}function Er(c){var m=1;c=c.split(":");const y=[];for(;m>0&&c.length;)y.push(c.shift()),m--;return c.length&&y.push(c.join(":")),y}function ot(c,m,y,C){this.j=c,this.i=m,this.l=y,this.S=C||1,this.V=new ae(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new vi}function vi(){this.i=null,this.g="",this.h=!1}var Ti={},Xa={};function wr(c,m,y){c.M=1,c.A=Za(Xn(m)),c.u=y,c.R=!0,mp(c,null)}function mp(c,m){c.F=Date.now(),ja(c),c.B=Xn(c.A);var y=c.B,C=c.S;Array.isArray(C)||(C=[String(C)]),Rp(y.i,"t",C),c.C=0,y=c.j.L,c.h=new vi,c.g=Kp(c.j,y?m:null,!c.u),c.P>0&&(c.O=new te(u(c.Y,c,c.g),c.P)),m=c.V,y=c.g,C=c.ba;var O="readystatechange";Array.isArray(O)||(O&&(fe[0]=O.toString()),O=fe);for(let U=0;U<O.length;U++){const Z=Wt(y,O[U],C||m.handleEvent,!1,m.h||m);if(!Z)break;m.g[Z.key]=Z}m=c.J?ut(c.J):{},c.u?(c.v||(c.v="POST"),m["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,m)):(c.v="GET",c.g.ea(c.B,c.v,null,m)),Jn(),Ee(c.i,c.v,c.B,c.l,c.S,c.u)}ot.prototype.ba=function(c){c=c.target;const m=this.O;m&&Qi(c)==3?m.j():this.Y(c)},ot.prototype.Y=function(c){try{if(c==this.g)e:{const we=Qi(this.g),vt=this.g.ya(),Ke=this.g.ca();if(!(we<3)&&(we!=3||this.g&&(this.h.h||this.g.la()||Vp(this.g)))){this.K||we!=4||vt==7||(vt==8||Ke<=0?Jn(3):Jn(2)),Fu(this);var m=this.g.ca();this.X=m;var y=mC(this);if(this.o=m==200,Ie(this.i,this.v,this.B,this.l,this.S,we,m),this.o){if(this.U&&!this.L){t:{if(this.g){var C,O=this.g;if((C=O.g?O.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!A(C)){var U=C;break t}}U=null}if(c=U)Ce(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Uu(this,c);else{this.o=!1,this.m=3,Mt(12),Vs(this),vo(this);break e}}if(this.R){c=!0;let St;for(;!this.K&&this.C<y.length;)if(St=gC(this,y),St==Xa){we==4&&(this.m=4,Mt(14),c=!1),Ce(this.i,this.l,null,"[Incomplete Response]");break}else if(St==Ti){this.m=4,Mt(15),Ce(this.i,this.l,y,"[Invalid Chunk]"),c=!1;break}else Ce(this.i,this.l,St,null),Uu(this,St);if(gp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),we!=4||y.length!=0||this.h.h||(this.m=1,Mt(16),c=!1),this.o=this.o&&c,!c)Ce(this.i,this.l,y,"[Invalid Chunked Response]"),Vs(this),vo(this);else if(y.length>0&&!this.W){this.W=!0;var Z=this.j;Z.g==this&&Z.aa&&!Z.P&&(Z.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),zu(Z),Z.P=!0,Mt(11))}}else Ce(this.i,this.l,y,null),Uu(this,y);we==4&&Vs(this),this.o&&!this.K&&(we==4?qp(this.j,this):(this.o=!1,ja(this)))}else kC(this.g),m==400&&y.indexOf("Unknown SID")>0?(this.m=3,Mt(12)):(this.m=0,Mt(13)),Vs(this),vo(this)}}}catch{}finally{}};function mC(c){if(!gp(c))return c.g.la();const m=Vp(c.g);if(m==="")return"";let y="";const C=m.length,O=Qi(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return Vs(c),vo(c),"";c.h.i=new o.TextDecoder}for(let U=0;U<C;U++)c.h.h=!0,y+=c.h.i.decode(m[U],{stream:!(O&&U==C-1)});return m.length=0,c.h.g+=y,c.C=0,c.h.g}function gp(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function gC(c,m){var y=c.C,C=m.indexOf(`
`,y);return C==-1?Xa:(y=Number(m.substring(y,C)),isNaN(y)?Ti:(C+=1,C+y>m.length?Xa:(m=m.slice(C,C+y),c.C=C+y,m)))}ot.prototype.cancel=function(){this.K=!0,Vs(this)};function ja(c){c.T=Date.now()+c.H,yp(c,c.H)}function yp(c,m){if(c.D!=null)throw Error("WatchDog timer not null");c.D=Tr(u(c.aa,c),m)}function Fu(c){c.D&&(o.clearTimeout(c.D),c.D=null)}ot.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ue(this.i,this.B),this.M!=2&&(Jn(),Mt(17)),Vs(this),this.m=2,vo(this)):yp(this,this.T-c)};function vo(c){c.j.I==0||c.K||qp(c.j,c)}function Vs(c){Fu(c);var m=c.O;m&&typeof m.dispose=="function"&&m.dispose(),c.O=null,Te(c.V),c.g&&(m=c.g,c.g=null,m.abort(),m.dispose())}function Uu(c,m){try{var y=c.j;if(y.I!=0&&(y.g==c||Bu(y.h,c))){if(!c.L&&Bu(y.h,c)&&y.I==3){try{var C=y.Ba.g.parse(m)}catch{C=null}if(Array.isArray(C)&&C.length==3){var O=C;if(O[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<c.F)sl(y),nl(y);else break e;Ku(y),Mt(18)}}else y.xa=O[1],0<y.xa-y.K&&O[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=Tr(u(y.Va,y),6e3));Tp(y.h)<=1&&y.ta&&(y.ta=void 0)}else Os(y,11)}else if((c.L||y.g==c)&&sl(y),!A(m))for(O=y.Ba.g.parse(m),m=0;m<O.length;m++){let Ke=O[m];const St=Ke[0];if(!(St<=y.K))if(y.K=St,Ke=Ke[1],y.I==2)if(Ke[0]=="c"){y.M=Ke[1],y.ba=Ke[2];const jn=Ke[3];jn!=null&&(y.ka=jn,y.j.info("VER="+y.ka));const Fs=Ke[4];Fs!=null&&(y.za=Fs,y.j.info("SVER="+y.za));const Xi=Ke[5];Xi!=null&&typeof Xi=="number"&&Xi>0&&(C=1.5*Xi,y.O=C,y.j.info("backChannelRequestTimeoutMs_="+C)),C=y;const ji=c.g;if(ji){const ol=ji.g?ji.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(ol){var U=C.h;U.g||ol.indexOf("spdy")==-1&&ol.indexOf("quic")==-1&&ol.indexOf("h2")==-1||(U.j=U.l,U.g=new Set,U.h&&($u(U,U.h),U.h=null))}if(C.G){const Yu=ji.g?ji.g.getResponseHeader("X-HTTP-Session-Id"):null;Yu&&(C.wa=Yu,Je(C.J,C.G,Yu))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-c.F,y.j.info("Handshake RTT: "+y.T+"ms")),C=y;var Z=c;if(C.na=Wp(C,C.L?C.ba:null,C.W),Z.L){Ep(C.h,Z);var we=Z,vt=C.O;vt&&(we.H=vt),we.D&&(Fu(we),ja(we)),C.g=Z}else Bp(C);y.i.length>0&&il(y)}else Ke[0]!="stop"&&Ke[0]!="close"||Os(y,7);else y.I==3&&(Ke[0]=="stop"||Ke[0]=="close"?Ke[0]=="stop"?Os(y,7):Wu(y):Ke[0]!="noop"&&y.l&&y.l.qa(Ke),y.A=0)}}Jn(4)}catch{}}var yC=class{constructor(c,m){this.g=c,this.map=m}};function _p(c){this.l=c||10,o.PerformanceNavigationTiming?(c=o.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function vp(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Tp(c){return c.h?1:c.g?c.g.size:0}function Bu(c,m){return c.h?c.h==m:c.g?c.g.has(m):!1}function $u(c,m){c.g?c.g.add(m):c.h=m}function Ep(c,m){c.h&&c.h==m?c.h=null:c.g&&c.g.has(m)&&c.g.delete(m)}_p.prototype.cancel=function(){if(this.i=wp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function wp(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let m=c.i;for(const y of c.g.values())m=m.concat(y.G);return m}return _(c.i)}var Ip=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function _C(c,m){if(c){c=c.split("&");for(let y=0;y<c.length;y++){const C=c[y].indexOf("=");let O,U=null;C>=0?(O=c[y].substring(0,C),U=c[y].substring(C+1)):O=c[y],m(O,U?decodeURIComponent(U.replace(/\+/g," ")):"")}}}function Yi(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let m;c instanceof Yi?(this.l=c.l,To(this,c.j),this.o=c.o,this.g=c.g,Eo(this,c.u),this.h=c.h,qu(this,Pp(c.i)),this.m=c.m):c&&(m=String(c).match(Ip))?(this.l=!1,To(this,m[1]||"",!0),this.o=wo(m[2]||""),this.g=wo(m[3]||"",!0),Eo(this,m[4]),this.h=wo(m[5]||"",!0),qu(this,m[6]||"",!0),this.m=wo(m[7]||"")):(this.l=!1,this.i=new Co(null,this.l))}Yi.prototype.toString=function(){const c=[];var m=this.j;m&&c.push(Io(m,Cp,!0),":");var y=this.g;return(y||m=="file")&&(c.push("//"),(m=this.o)&&c.push(Io(m,Cp,!0),"@"),c.push($n(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&c.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&c.push("/"),c.push(Io(y,y.charAt(0)=="/"?EC:TC,!0))),(y=this.i.toString())&&c.push("?",y),(y=this.m)&&c.push("#",Io(y,IC)),c.join("")},Yi.prototype.resolve=function(c){const m=Xn(this);let y=!!c.j;y?To(m,c.j):y=!!c.o,y?m.o=c.o:y=!!c.g,y?m.g=c.g:y=c.u!=null;var C=c.h;if(y)Eo(m,c.u);else if(y=!!c.h){if(C.charAt(0)!="/")if(this.g&&!this.h)C="/"+C;else{var O=m.h.lastIndexOf("/");O!=-1&&(C=m.h.slice(0,O+1)+C)}if(O=C,O==".."||O==".")C="";else if(O.indexOf("./")!=-1||O.indexOf("/.")!=-1){C=O.lastIndexOf("/",0)==0,O=O.split("/");const U=[];for(let Z=0;Z<O.length;){const we=O[Z++];we=="."?C&&Z==O.length&&U.push(""):we==".."?((U.length>1||U.length==1&&U[0]!="")&&U.pop(),C&&Z==O.length&&U.push("")):(U.push(we),C=!0)}C=U.join("/")}else C=O}return y?m.h=C:y=c.i.toString()!=="",y?qu(m,Pp(c.i)):y=!!c.m,y&&(m.m=c.m),m};function Xn(c){return new Yi(c)}function To(c,m,y){c.j=y?wo(m,!0):m,c.j&&(c.j=c.j.replace(/:$/,""))}function Eo(c,m){if(m){if(m=Number(m),isNaN(m)||m<0)throw Error("Bad port number "+m);c.u=m}else c.u=null}function qu(c,m,y){m instanceof Co?(c.i=m,CC(c.i,c.l)):(y||(m=Io(m,wC)),c.i=new Co(m,c.l))}function Je(c,m,y){c.i.set(m,y)}function Za(c){return Je(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function wo(c,m){return c?m?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function Io(c,m,y){return typeof c=="string"?(c=encodeURI(c).replace(m,vC),y&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function vC(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Cp=/[#\/\?@]/g,TC=/[#\?:]/g,EC=/[#\?]/g,wC=/[#\?@]/g,IC=/#/g;function Co(c,m){this.h=this.g=null,this.i=c||null,this.j=!!m}function Ls(c){c.g||(c.g=new Map,c.h=0,c.i&&_C(c.i,function(m,y){c.add(decodeURIComponent(m.replace(/\+/g," ")),y)}))}n=Co.prototype,n.add=function(c,m){Ls(this),this.i=null,c=Ir(this,c);let y=this.g.get(c);return y||this.g.set(c,y=[]),y.push(m),this.h+=1,this};function Ap(c,m){Ls(c),m=Ir(c,m),c.g.has(m)&&(c.i=null,c.h-=c.g.get(m).length,c.g.delete(m))}function Sp(c,m){return Ls(c),m=Ir(c,m),c.g.has(m)}n.forEach=function(c,m){Ls(this),this.g.forEach(function(y,C){y.forEach(function(O){c.call(m,O,C,this)},this)},this)};function bp(c,m){Ls(c);let y=[];if(typeof m=="string")Sp(c,m)&&(y=y.concat(c.g.get(Ir(c,m))));else for(c=Array.from(c.g.values()),m=0;m<c.length;m++)y=y.concat(c[m]);return y}n.set=function(c,m){return Ls(this),this.i=null,c=Ir(this,c),Sp(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[m]),this.h+=1,this},n.get=function(c,m){return c?(c=bp(this,c),c.length>0?String(c[0]):m):m};function Rp(c,m,y){Ap(c,m),y.length>0&&(c.i=null,c.g.set(Ir(c,m),_(y)),c.h+=y.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],m=Array.from(this.g.keys());for(let C=0;C<m.length;C++){var y=m[C];const O=$n(y);y=bp(this,y);for(let U=0;U<y.length;U++){let Z=O;y[U]!==""&&(Z+="="+$n(y[U])),c.push(Z)}}return this.i=c.join("&")};function Pp(c){const m=new Co;return m.i=c.i,c.g&&(m.g=new Map(c.g),m.h=c.h),m}function Ir(c,m){return m=String(m),c.j&&(m=m.toLowerCase()),m}function CC(c,m){m&&!c.j&&(Ls(c),c.i=null,c.g.forEach(function(y,C){const O=C.toLowerCase();C!=O&&(Ap(this,C),Rp(this,O,y))},c)),c.j=m}function AC(c,m){const y=new Y;if(o.Image){const C=new Image;C.onload=d(Ji,y,"TestLoadImage: loaded",!0,m,C),C.onerror=d(Ji,y,"TestLoadImage: error",!1,m,C),C.onabort=d(Ji,y,"TestLoadImage: abort",!1,m,C),C.ontimeout=d(Ji,y,"TestLoadImage: timeout",!1,m,C),o.setTimeout(function(){C.ontimeout&&C.ontimeout()},1e4),C.src=c}else m(!1)}function SC(c,m){const y=new Y,C=new AbortController,O=setTimeout(()=>{C.abort(),Ji(y,"TestPingServer: timeout",!1,m)},1e4);fetch(c,{signal:C.signal}).then(U=>{clearTimeout(O),U.ok?Ji(y,"TestPingServer: ok",!0,m):Ji(y,"TestPingServer: server error",!1,m)}).catch(()=>{clearTimeout(O),Ji(y,"TestPingServer: error",!1,m)})}function Ji(c,m,y,C,O){try{O&&(O.onload=null,O.onerror=null,O.onabort=null,O.ontimeout=null),C(y)}catch{}}function bC(){this.g=new At}function Hu(c){this.i=c.Sb||null,this.h=c.ab||!1}p(Hu,ht),Hu.prototype.g=function(){return new el(this.i,this.h)};function el(c,m){J.call(this),this.H=c,this.o=m,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}p(el,J),n=el.prototype,n.open=function(c,m){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=m,this.readyState=1,So(this)},n.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const m={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(m.body=c),(this.H||o).fetch(new Request(this.D,m)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Ao(this)),this.readyState=0},n.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,So(this)),this.g&&(this.readyState=3,So(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;kp(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function kp(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}n.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var m=c.value?c.value:new Uint8Array(0);(m=this.B.decode(m,{stream:!c.done}))&&(this.response=this.responseText+=m)}c.done?Ao(this):So(this),this.readyState==3&&kp(this)}},n.Oa=function(c){this.g&&(this.response=this.responseText=c,Ao(this))},n.Na=function(c){this.g&&(this.response=c,Ao(this))},n.ga=function(){this.g&&Ao(this)};function Ao(c){c.readyState=4,c.l=null,c.j=null,c.B=null,So(c)}n.setRequestHeader=function(c,m){this.A.append(c,m)},n.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],m=this.h.entries();for(var y=m.next();!y.done;)y=y.value,c.push(y[0]+": "+y[1]),y=m.next();return c.join(`\r
`)};function So(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(el.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function xp(c){let m="";return xe(c,function(y,C){m+=C,m+=":",m+=y,m+=`\r
`}),m}function Gu(c,m,y){e:{for(C in y){var C=!1;break e}C=!0}C||(y=xp(y),typeof c=="string"?y!=null&&$n(y):Je(c,m,y))}function at(c){J.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}p(at,J);var RC=/^https?$/i,PC=["POST","PUT"];n=at.prototype,n.Fa=function(c){this.H=c},n.ea=function(c,m,y,C){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);m=m?m.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():kn.g(),this.g.onreadystatechange=g(u(this.Ca,this));try{this.B=!0,this.g.open(m,String(c),!0),this.B=!1}catch(U){Np(this,U);return}if(c=y||"",y=new Map(this.headers),C)if(Object.getPrototypeOf(C)===Object.prototype)for(var O in C)y.set(O,C[O]);else if(typeof C.keys=="function"&&typeof C.get=="function")for(const U of C.keys())y.set(U,C.get(U));else throw Error("Unknown input type for opt_headers: "+String(C));C=Array.from(y.keys()).find(U=>U.toLowerCase()=="content-type"),O=o.FormData&&c instanceof o.FormData,!(Array.prototype.indexOf.call(PC,m,void 0)>=0)||C||O||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[U,Z]of y)this.g.setRequestHeader(U,Z);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(U){Np(this,U)}};function Np(c,m){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=m,c.o=5,Dp(c),tl(c)}function Dp(c){c.A||(c.A=!0,z(c,"complete"),z(c,"error"))}n.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,z(this,"complete"),z(this,"abort"),tl(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tl(this,!0)),at.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Mp(this):this.Xa())},n.Xa=function(){Mp(this)};function Mp(c){if(c.h&&typeof r<"u"){if(c.v&&Qi(c)==4)setTimeout(c.Ca.bind(c),0);else if(z(c,"readystatechange"),Qi(c)==4){c.h=!1;try{const U=c.ca();e:switch(U){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var m=!0;break e;default:m=!1}var y;if(!(y=m)){var C;if(C=U===0){let Z=String(c.D).match(Ip)[1]||null;!Z&&o.self&&o.self.location&&(Z=o.self.location.protocol.slice(0,-1)),C=!RC.test(Z?Z.toLowerCase():"")}y=C}if(y)z(c,"complete"),z(c,"success");else{c.o=6;try{var O=Qi(c)>2?c.g.statusText:""}catch{O=""}c.l=O+" ["+c.ca()+"]",Dp(c)}}finally{tl(c)}}}}function tl(c,m){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const y=c.g;c.g=null,m||z(c,"ready");try{y.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function Qi(c){return c.g?c.g.readyState:0}n.ca=function(){try{return Qi(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(c){if(this.g){var m=this.g.responseText;return c&&m.indexOf(c)==0&&(m=m.substring(c.length)),Ve(m)}};function Vp(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function kC(c){const m={};c=(c.g&&Qi(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let C=0;C<c.length;C++){if(A(c[C]))continue;var y=Er(c[C]);const O=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const U=m[O]||[];m[O]=U,U.push(y)}qe(m,function(C){return C.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function bo(c,m,y){return y&&y.internalChannelParams&&y.internalChannelParams[c]||m}function Lp(c){this.za=0,this.i=[],this.j=new Y,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=bo("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=bo("baseRetryDelayMs",5e3,c),this.Za=bo("retryDelaySeedMs",1e4,c),this.Ta=bo("forwardChannelMaxRetries",2,c),this.va=bo("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new _p(c&&c.concurrentRequestLimit),this.Ba=new bC,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=Lp.prototype,n.ka=8,n.I=1,n.connect=function(c,m,y,C){Mt(0),this.W=c,this.H=m||{},y&&C!==void 0&&(this.H.OSID=y,this.H.OAID=C),this.F=this.X,this.J=Wp(this,null,this.W),il(this)};function Wu(c){if(Op(c),c.I==3){var m=c.V++,y=Xn(c.J);if(Je(y,"SID",c.M),Je(y,"RID",m),Je(y,"TYPE","terminate"),Ro(c,y),m=new ot(c,c.j,m),m.M=2,m.A=Za(Xn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(m.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=m.A,y=!0),y||(m.g=Kp(m.j,null),m.g.ea(m.A)),m.F=Date.now(),ja(m)}Gp(c)}function nl(c){c.g&&(zu(c),c.g.cancel(),c.g=null)}function Op(c){nl(c),c.v&&(o.clearTimeout(c.v),c.v=null),sl(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&o.clearTimeout(c.m),c.m=null)}function il(c){if(!vp(c.h)&&!c.m){c.m=!0;var m=c.Ea;L||T(),F||(L(),F=!0),R.add(m,c),c.D=0}}function xC(c,m){return Tp(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=m.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=Tr(u(c.Ea,c,m),Hp(c,c.D)),c.D++,!0)}n.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const O=new ot(this,this.j,c);let U=this.o;if(this.U&&(U?(U=ut(U),Pn(U,this.U)):U=this.U),this.u!==null||this.R||(O.J=U,U=null),this.S)e:{for(var m=0,y=0;y<this.i.length;y++){t:{var C=this.i[y];if("__data__"in C.map&&(C=C.map.__data__,typeof C=="string")){C=C.length;break t}C=void 0}if(C===void 0)break;if(m+=C,m>4096){m=y;break e}if(m===4096||y===this.i.length-1){m=y+1;break e}}m=1e3}else m=1e3;m=Up(this,O,m),y=Xn(this.J),Je(y,"RID",c),Je(y,"CVER",22),this.G&&Je(y,"X-HTTP-Session-Id",this.G),Ro(this,y),U&&(this.R?m="headers="+$n(xp(U))+"&"+m:this.u&&Gu(y,this.u,U)),$u(this.h,O),this.Ra&&Je(y,"TYPE","init"),this.S?(Je(y,"$req",m),Je(y,"SID","null"),O.U=!0,wr(O,y,null)):wr(O,y,m),this.I=2}}else this.I==3&&(c?Fp(this,c):this.i.length==0||vp(this.h)||Fp(this))};function Fp(c,m){var y;m?y=m.l:y=c.V++;const C=Xn(c.J);Je(C,"SID",c.M),Je(C,"RID",y),Je(C,"AID",c.K),Ro(c,C),c.u&&c.o&&Gu(C,c.u,c.o),y=new ot(c,c.j,y,c.D+1),c.u===null&&(y.J=c.o),m&&(c.i=m.G.concat(c.i)),m=Up(c,y,1e3),y.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),$u(c.h,y),wr(y,C,m)}function Ro(c,m){c.H&&xe(c.H,function(y,C){Je(m,C,y)}),c.l&&xe({},function(y,C){Je(m,C,y)})}function Up(c,m,y){y=Math.min(c.i.length,y);const C=c.l?u(c.l.Ka,c.l,c):null;e:{var O=c.i;let we=-1;for(;;){const vt=["count="+y];we==-1?y>0?(we=O[0].g,vt.push("ofs="+we)):we=0:vt.push("ofs="+we);let Ke=!0;for(let St=0;St<y;St++){var U=O[St].g;const jn=O[St].map;if(U-=we,U<0)we=Math.max(0,O[St].g-100),Ke=!1;else try{U="req"+U+"_"||"";try{var Z=jn instanceof Map?jn:Object.entries(jn);for(const[Fs,Xi]of Z){let ji=Xi;a(Xi)&&(ji=Oe(Xi)),vt.push(U+Fs+"="+encodeURIComponent(ji))}}catch(Fs){throw vt.push(U+"type="+encodeURIComponent("_badmap")),Fs}}catch{C&&C(jn)}}if(Ke){Z=vt.join("&");break e}}Z=void 0}return c=c.i.splice(0,y),m.G=c,Z}function Bp(c){if(!c.g&&!c.v){c.Y=1;var m=c.Da;L||T(),F||(L(),F=!0),R.add(m,c),c.A=0}}function Ku(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=Tr(u(c.Da,c),Hp(c,c.A)),c.A++,!0)}n.Da=function(){if(this.v=null,$p(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=Tr(u(this.Wa,this),c)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Mt(10),nl(this),$p(this))};function zu(c){c.B!=null&&(o.clearTimeout(c.B),c.B=null)}function $p(c){c.g=new ot(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var m=Xn(c.na);Je(m,"RID","rpc"),Je(m,"SID",c.M),Je(m,"AID",c.K),Je(m,"CI",c.F?"0":"1"),!c.F&&c.ia&&Je(m,"TO",c.ia),Je(m,"TYPE","xmlhttp"),Ro(c,m),c.u&&c.o&&Gu(m,c.u,c.o),c.O&&(c.g.H=c.O);var y=c.g;c=c.ba,y.M=1,y.A=Za(Xn(m)),y.u=null,y.R=!0,mp(y,c)}n.Va=function(){this.C!=null&&(this.C=null,nl(this),Ku(this),Mt(19))};function sl(c){c.C!=null&&(o.clearTimeout(c.C),c.C=null)}function qp(c,m){var y=null;if(c.g==m){sl(c),zu(c),c.g=null;var C=2}else if(Bu(c.h,m))y=m.G,Ep(c.h,m),C=1;else return;if(c.I!=0){if(m.o)if(C==1){y=m.u?m.u.length:0,m=Date.now()-m.F;var O=c.D;C=_i(),z(C,new Qa(C,y)),il(c)}else Bp(c);else if(O=m.m,O==3||O==0&&m.X>0||!(C==1&&xC(c,m)||C==2&&Ku(c)))switch(y&&y.length>0&&(m=c.h,m.i=m.i.concat(y)),O){case 1:Os(c,5);break;case 4:Os(c,10);break;case 3:Os(c,6);break;default:Os(c,2)}}}function Hp(c,m){let y=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(y*=2),y*m}function Os(c,m){if(c.j.info("Error code "+m),m==2){var y=u(c.bb,c),C=c.Ua;const O=!C;C=new Yi(C||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||To(C,"https"),Za(C),O?AC(C.toString(),y):SC(C.toString(),y)}else Mt(2);c.I=0,c.l&&c.l.pa(m),Gp(c),Op(c)}n.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Mt(2)):(this.j.info("Failed to ping google.com"),Mt(1))};function Gp(c){if(c.I=0,c.ja=[],c.l){const m=wp(c.h);(m.length!=0||c.i.length!=0)&&(E(c.ja,m),E(c.ja,c.i),c.h.i.length=0,_(c.i),c.i.length=0),c.l.oa()}}function Wp(c,m,y){var C=y instanceof Yi?Xn(y):new Yi(y);if(C.g!="")m&&(C.g=m+"."+C.g),Eo(C,C.u);else{var O=o.location;C=O.protocol,m=m?m+"."+O.hostname:O.hostname,O=+O.port;const U=new Yi(null);C&&To(U,C),m&&(U.g=m),O&&Eo(U,O),y&&(U.h=y),C=U}return y=c.G,m=c.wa,y&&m&&Je(C,y,m),Je(C,"VER",c.ka),Ro(c,C),C}function Kp(c,m,y){if(m&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return m=c.Aa&&!c.ma?new at(new Hu({ab:y})):new at(c.ma),m.Fa(c.L),m}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function zp(){}n=zp.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function rl(){}rl.prototype.g=function(c,m){return new In(c,m)};function In(c,m){J.call(this),this.g=new Lp(m),this.l=c,this.h=m&&m.messageUrlParams||null,c=m&&m.messageHeaders||null,m&&m.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=m&&m.initMessageHeaders||null,m&&m.messageContentType&&(c?c["X-WebChannel-Content-Type"]=m.messageContentType:c={"X-WebChannel-Content-Type":m.messageContentType}),m&&m.sa&&(c?c["X-WebChannel-Client-Profile"]=m.sa:c={"X-WebChannel-Client-Profile":m.sa}),this.g.U=c,(c=m&&m.Qb)&&!A(c)&&(this.g.u=c),this.A=m&&m.supportsCrossDomainXhr||!1,this.v=m&&m.sendRawJson||!1,(m=m&&m.httpSessionIdParam)&&!A(m)&&(this.g.G=m,c=this.h,c!==null&&m in c&&(c=this.h,m in c&&delete c[m])),this.j=new Cr(this)}p(In,J),In.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},In.prototype.close=function(){Wu(this.g)},In.prototype.o=function(c){var m=this.g;if(typeof c=="string"){var y={};y.__data__=c,c=y}else this.v&&(y={},y.__data__=Oe(c),c=y);m.i.push(new yC(m.Ya++,c)),m.I==3&&il(m)},In.prototype.N=function(){this.g.l=null,delete this.j,Wu(this.g),delete this.g,In.Z.N.call(this)};function Yp(c){Bn.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var m=c.__sm__;if(m){e:{for(const y in m){c=y;break e}c=void 0}(this.i=c)&&(c=this.i,m=m!==null&&c in m?m[c]:void 0),this.data=m}else this.data=c}p(Yp,Bn);function Jp(){zi.call(this),this.status=1}p(Jp,zi);function Cr(c){this.g=c}p(Cr,zp),Cr.prototype.ra=function(){z(this.g,"a")},Cr.prototype.qa=function(c){z(this.g,new Yp(c))},Cr.prototype.pa=function(c){z(this.g,new Jp)},Cr.prototype.oa=function(){z(this.g,"b")},rl.prototype.createWebChannel=rl.prototype.g,In.prototype.send=In.prototype.o,In.prototype.open=In.prototype.m,In.prototype.close=In.prototype.close,xw=function(){return new rl},kw=function(){return _i()},Pw=tt,df={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Fe.NO_ERROR=0,Fe.TIMEOUT=8,Fe.HTTP_ERROR=6,Wl=Fe,We.COMPLETE="complete",Rw=We,Kt.EventType=rt,rt.OPEN="a",rt.CLOSE="b",rt.ERROR="c",rt.MESSAGE="d",J.prototype.listen=J.prototype.J,Lo=Kt,at.prototype.listenOnce=at.prototype.K,at.prototype.getLastError=at.prototype.Ha,at.prototype.getLastErrorCode=at.prototype.ya,at.prototype.getStatus=at.prototype.ca,at.prototype.getResponseJson=at.prototype.La,at.prototype.getResponseText=at.prototype.la,at.prototype.send=at.prototype.ea,at.prototype.setWithCredentials=at.prototype.Fa,bw=at}).apply(typeof Cl<"u"?Cl:typeof self<"u"?self:typeof window<"u"?window:{});const Py="@firebase/firestore",ky="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}jt.UNAUTHENTICATED=new jt(null),jt.GOOGLE_CREDENTIALS=new jt("google-credentials-uid"),jt.FIRST_PARTY=new jt("first-party-uid"),jt.MOCK_USER=new jt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr=new Ad("@firebase/firestore");function kr(){return lr.logLevel}function se(n,...e){if(lr.logLevel<=be.DEBUG){const t=e.map(Fd);lr.debug(`Firestore (${mo}): ${n}`,...t)}}function qi(n,...e){if(lr.logLevel<=be.ERROR){const t=e.map(Fd);lr.error(`Firestore (${mo}): ${n}`,...t)}}function io(n,...e){if(lr.logLevel<=be.WARN){const t=e.map(Fd);lr.warn(`Firestore (${mo}): ${n}`,...t)}}function Fd(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function me(n,e,t){let i="Unexpected state";typeof e=="string"?i=e:t=e,Nw(n,i,t)}function Nw(n,e,t){let i=`FIRESTORE (${mo}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{i+=" CONTEXT: "+JSON.stringify(t)}catch{i+=" CONTEXT: "+t}throw qi(i),new Error(i)}function He(n,e,t,i){let s="Unexpected state";typeof t=="string"?s=t:i=t,n||Nw(e,s,i)}function _e(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ue extends mi{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dw{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class JL{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(jt.UNAUTHENTICATED)))}shutdown(){}}class QL{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class XL{constructor(e){this.t=e,this.currentUser=jt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){He(this.o===void 0,42304);let i=this.i;const s=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let r=new Ts;this.o=()=>{this.i++,this.currentUser=this.u(),r.resolve(),r=new Ts,e.enqueueRetryable((()=>s(this.currentUser)))};const o=()=>{const l=r;e.enqueueRetryable((async()=>{await l.promise,await s(this.currentUser)}))},a=l=>{se("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit((l=>a(l))),setTimeout((()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(se("FirebaseAuthCredentialsProvider","Auth not yet detected"),r.resolve(),r=new Ts)}}),0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((i=>this.i!==e?(se("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(He(typeof i.accessToken=="string",31837,{l:i}),new Dw(i.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return He(e===null||typeof e=="string",2055,{h:e}),new jt(e)}}class jL{constructor(e,t,i){this.P=e,this.T=t,this.I=i,this.type="FirstParty",this.user=jt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class ZL{constructor(e,t,i){this.P=e,this.T=t,this.I=i}getToken(){return Promise.resolve(new jL(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(jt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class xy{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class eO{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,_n(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){He(this.o===void 0,3512);const i=r=>{r.error!=null&&se("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${r.error.message}`);const o=r.token!==this.m;return this.m=r.token,se("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(r.token):Promise.resolve()};this.o=r=>{e.enqueueRetryable((()=>i(r)))};const s=r=>{se("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=r,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((r=>s(r))),setTimeout((()=>{if(!this.appCheck){const r=this.V.getImmediate({optional:!0});r?s(r):se("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new xy(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(He(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new xy(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tO(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ud{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const s=tO(40);for(let r=0;r<s.length;++r)i.length<20&&s[r]<t&&(i+=e.charAt(s[r]%62))}return i}}function Pe(n,e){return n<e?-1:n>e?1:0}function pf(n,e){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++){const s=n.charAt(i),r=e.charAt(i);if(s!==r)return gh(s)===gh(r)?Pe(s,r):gh(s)?1:-1}return Pe(n.length,e.length)}const nO=55296,iO=57343;function gh(n){const e=n.charCodeAt(0);return e>=nO&&e<=iO}function so(n,e,t){return n.length===e.length&&n.every(((i,s)=>t(i,e[s])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ny="__name__";class ni{constructor(e,t,i){t===void 0?t=0:t>e.length&&me(637,{offset:t,range:e.length}),i===void 0?i=e.length-t:i>e.length-t&&me(1746,{length:i,range:e.length-t}),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return ni.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ni?e.forEach((i=>{t.push(i)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let s=0;s<i;s++){const r=ni.compareSegments(e.get(s),t.get(s));if(r!==0)return r}return Pe(e.length,t.length)}static compareSegments(e,t){const i=ni.isNumericId(e),s=ni.isNumericId(t);return i&&!s?-1:!i&&s?1:i&&s?ni.extractNumericId(e).compare(ni.extractNumericId(t)):pf(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return vs.fromString(e.substring(4,e.length-2))}}class nt extends ni{construct(e,t,i){return new nt(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new ue(K.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter((s=>s.length>0)))}return new nt(t)}static emptyPath(){return new nt([])}}const sO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Bt extends ni{construct(e,t,i){return new Bt(e,t,i)}static isValidIdentifier(e){return sO.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Bt.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Ny}static keyField(){return new Bt([Ny])}static fromServerFormat(e){const t=[];let i="",s=0;const r=()=>{if(i.length===0)throw new ue(K.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;s<e.length;){const a=e[s];if(a==="\\"){if(s+1===e.length)throw new ue(K.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[s+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new ue(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,s+=2}else a==="`"?(o=!o,s++):a!=="."||o?(i+=a,s++):(r(),s++)}if(r(),o)throw new ue(K.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Bt(t)}static emptyPath(){return new Bt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.path=e}static fromPath(e){return new he(nt.fromString(e))}static fromName(e){return new he(nt.fromString(e).popFirst(5))}static empty(){return new he(nt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&nt.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return nt.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new he(new nt(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rO(n,e,t){if(!t)throw new ue(K.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function oO(n,e,t,i){if(e===!0&&i===!0)throw new ue(K.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function Dy(n){if(!he.isDocumentKey(n))throw new ue(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Mw(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function Bd(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(i){return i.constructor?i.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":me(12329,{type:typeof n})}function Ta(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new ue(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=Bd(n);throw new ue(K.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ga(n,e){if(!Mw(n))throw new ue(K.INVALID_ARGUMENT,"JSON must be an object");let t;for(const i in e)if(e[i]){const s=e[i].typeString,r="value"in e[i]?{value:e[i].value}:void 0;if(!(i in n)){t=`JSON missing required field: '${i}'`;break}const o=n[i];if(s&&typeof o!==s){t=`JSON field '${i}' must be a ${s}.`;break}if(r!==void 0&&o!==r.value){t=`Expected '${i}' field to equal '${r.value}'`;break}}if(t)throw new ue(K.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My=-62135596800,Vy=1e6;class Ye{static now(){return Ye.fromMillis(Date.now())}static fromDate(e){return Ye.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*Vy);return new Ye(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new ue(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<My)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ue(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Vy}_compareTo(e){return this.seconds===e.seconds?Pe(this.nanoseconds,e.nanoseconds):Pe(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Ye._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ga(e,Ye._jsonSchema))return new Ye(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-My;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Ye._jsonSchemaVersion="firestore/timestamp/1.0",Ye._jsonSchema={type:yt("string",Ye._jsonSchemaVersion),seconds:yt("number"),nanoseconds:yt("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ge{static fromTimestamp(e){return new ge(e)}static min(){return new ge(new Ye(0,0))}static max(){return new ge(new Ye(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ea=-1;function aO(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,s=ge.fromTimestamp(i===1e9?new Ye(t+1,0):new Ye(t,i));return new Cs(s,he.empty(),e)}function lO(n){return new Cs(n.readTime,n.key,Ea)}class Cs{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Cs(ge.min(),he.empty(),Ea)}static max(){return new Cs(ge.max(),he.empty(),Ea)}}function cO(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=he.comparator(n.documentKey,e.documentKey),t!==0?t:Pe(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uO="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class hO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(n){if(n.code!==K.FAILED_PRECONDITION||n.message!==uO)throw n;se("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&me(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new H(((i,s)=>{this.nextCallback=r=>{this.wrapSuccess(e,r).next(i,s)},this.catchCallback=r=>{this.wrapFailure(t,r).next(i,s)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof H?t:H.resolve(t)}catch(t){return H.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):H.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):H.reject(t)}static resolve(e){return new H(((t,i)=>{t(e)}))}static reject(e){return new H(((t,i)=>{i(e)}))}static waitFor(e){return new H(((t,i)=>{let s=0,r=0,o=!1;e.forEach((a=>{++s,a.next((()=>{++r,o&&r===s&&t()}),(l=>i(l)))})),o=!0,r===s&&t()}))}static or(e){let t=H.resolve(!1);for(const i of e)t=t.next((s=>s?H.resolve(s):i()));return t}static forEach(e,t){const i=[];return e.forEach(((s,r)=>{i.push(t.call(this,s,r))})),this.waitFor(i)}static mapArray(e,t){return new H(((i,s)=>{const r=e.length,o=new Array(r);let a=0;for(let l=0;l<r;l++){const u=l;t(e[u]).next((d=>{o[u]=d,++a,a===r&&i(o)}),(d=>s(d)))}}))}static doWhile(e,t){return new H(((i,s)=>{const r=()=>{e()===!0?t().next((()=>{r()}),s):i()};r()}))}}function fO(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function yo(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Su{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ae(i),this.ue=i=>t.writeSequenceNumber(i))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}Su.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $d=-1;function bu(n){return n==null}function Lc(n){return n===0&&1/n==-1/0}function dO(n){return typeof n=="number"&&Number.isInteger(n)&&!Lc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vw="";function pO(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Ly(e)),e=mO(n.get(t),e);return Ly(e)}function mO(n,e){let t=e;const i=n.length;for(let s=0;s<i;s++){const r=n.charAt(s);switch(r){case"\0":t+="";break;case Vw:t+="";break;default:t+=r}}return t}function Ly(n){return n+Vw+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oy(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function gr(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Lw(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new it(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const s=this.comparator(e,i.key);if(s===0)return t+i.left.size;s<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,i)=>(e(t,i),!1)))}toString(){const e=[];return this.inorderTraversal(((t,i)=>(e.push(`${t}:${i}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Al(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Al(this.root,e,this.comparator,!1)}getReverseIterator(){return new Al(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Al(this.root,e,this.comparator,!0)}}class Al{constructor(e,t,i,s){this.isReverse=s,this.nodeStack=[];let r=1;for(;!e.isEmpty();)if(r=t?i(e.key,t):1,t&&s&&(r*=-1),r<0)e=this.isReverse?e.left:e.right;else{if(r===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,i,s,r){this.key=e,this.value=t,this.color=i??Ot.RED,this.left=s??Ot.EMPTY,this.right=r??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,s,r){return new Ot(e??this.key,t??this.value,i??this.color,s??this.left,r??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let s=this;const r=i(e,s.key);return s=r<0?s.copy(null,null,null,s.left.insert(e,t,i),null):r===0?s.copy(null,t,null,null,null):s.copy(null,null,null,null,s.right.insert(e,t,i)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,s=this;if(t(e,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,t),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),t(e,s.key)===0){if(s.right.isEmpty())return Ot.EMPTY;i=s.right.min(),s=s.copy(i.key,i.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,t))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw me(43730,{key:this.key,value:this.value});if(this.right.isRed())throw me(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw me(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw me(57766)}get value(){throw me(16141)}get color(){throw me(16727)}get left(){throw me(29726)}get right(){throw me(36894)}copy(e,t,i,s,r){return this}insert(e,t,i){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,i)=>(e(t),!1)))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const s=i.getNext();if(this.comparator(s.key,e[1])>=0)return;t(s.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Fy(this.data.getIterator())}getIteratorFrom(e){return new Fy(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((i=>{t=t.add(i)})),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(this.comparator(s,r)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class Fy{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gn{constructor(e){this.fields=e,e.sort(Bt.comparator)}static empty(){return new Gn([])}unionWith(e){let t=new Ct(Bt.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Gn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return so(this.fields,e.fields,((t,i)=>t.isEqual(i)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ow extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(s){try{return atob(s)}catch(r){throw typeof DOMException<"u"&&r instanceof DOMException?new Ow("Invalid base64 string: "+r):r}})(e);return new Gt(t)}static fromUint8Array(e){const t=(function(s){let r="";for(let o=0;o<s.length;++o)r+=String.fromCharCode(s[o]);return r})(e);return new Gt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const i=new Uint8Array(t.length);for(let s=0;s<t.length;s++)i[s]=t.charCodeAt(s);return i})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Pe(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Gt.EMPTY_BYTE_STRING=new Gt("");const gO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function As(n){if(He(!!n,39018),typeof n=="string"){let e=0;const t=gO.exec(n);if(He(!!t,46558,{timestamp:n}),t[1]){let s=t[1];s=(s+"000000000").substr(0,9),e=Number(s)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:dt(n.seconds),nanos:dt(n.nanos)}}function dt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ss(n){return typeof n=="string"?Gt.fromBase64String(n):Gt.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fw="server_timestamp",Uw="__type__",Bw="__previous_value__",$w="__local_write_time__";function qd(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[Uw])==null?void 0:i.stringValue)===Fw}function Ru(n){const e=n.mapValue.fields[Bw];return qd(e)?Ru(e):e}function wa(n){const e=As(n.mapValue.fields[$w].timestampValue);return new Ye(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yO{constructor(e,t,i,s,r,o,a,l,u,d){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=s,this.ssl=r,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=u,this.isUsingEmulator=d}}const Oc="(default)";class Ia{constructor(e,t){this.projectId=e,this.database=t||Oc}static empty(){return new Ia("","")}get isDefaultDatabase(){return this.database===Oc}isEqual(e){return e instanceof Ia&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qw="__type__",_O="__max__",Sl={mapValue:{}},Hw="__vector__",Fc="value";function bs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?qd(n)?4:TO(n)?9007199254740991:vO(n)?10:11:me(28295,{value:n})}function hi(n,e){if(n===e)return!0;const t=bs(n);if(t!==bs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wa(n).isEqual(wa(e));case 3:return(function(s,r){if(typeof s.timestampValue=="string"&&typeof r.timestampValue=="string"&&s.timestampValue.length===r.timestampValue.length)return s.timestampValue===r.timestampValue;const o=As(s.timestampValue),a=As(r.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(s,r){return Ss(s.bytesValue).isEqual(Ss(r.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(s,r){return dt(s.geoPointValue.latitude)===dt(r.geoPointValue.latitude)&&dt(s.geoPointValue.longitude)===dt(r.geoPointValue.longitude)})(n,e);case 2:return(function(s,r){if("integerValue"in s&&"integerValue"in r)return dt(s.integerValue)===dt(r.integerValue);if("doubleValue"in s&&"doubleValue"in r){const o=dt(s.doubleValue),a=dt(r.doubleValue);return o===a?Lc(o)===Lc(a):isNaN(o)&&isNaN(a)}return!1})(n,e);case 9:return so(n.arrayValue.values||[],e.arrayValue.values||[],hi);case 10:case 11:return(function(s,r){const o=s.mapValue.fields||{},a=r.mapValue.fields||{};if(Oy(o)!==Oy(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!hi(o[l],a[l])))return!1;return!0})(n,e);default:return me(52216,{left:n})}}function Ca(n,e){return(n.values||[]).find((t=>hi(t,e)))!==void 0}function ro(n,e){if(n===e)return 0;const t=bs(n),i=bs(e);if(t!==i)return Pe(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Pe(n.booleanValue,e.booleanValue);case 2:return(function(r,o){const a=dt(r.integerValue||r.doubleValue),l=dt(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1})(n,e);case 3:return Uy(n.timestampValue,e.timestampValue);case 4:return Uy(wa(n),wa(e));case 5:return pf(n.stringValue,e.stringValue);case 6:return(function(r,o){const a=Ss(r),l=Ss(o);return a.compareTo(l)})(n.bytesValue,e.bytesValue);case 7:return(function(r,o){const a=r.split("/"),l=o.split("/");for(let u=0;u<a.length&&u<l.length;u++){const d=Pe(a[u],l[u]);if(d!==0)return d}return Pe(a.length,l.length)})(n.referenceValue,e.referenceValue);case 8:return(function(r,o){const a=Pe(dt(r.latitude),dt(o.latitude));return a!==0?a:Pe(dt(r.longitude),dt(o.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return By(n.arrayValue,e.arrayValue);case 10:return(function(r,o){var g,_,E,I;const a=r.fields||{},l=o.fields||{},u=(g=a[Fc])==null?void 0:g.arrayValue,d=(_=l[Fc])==null?void 0:_.arrayValue,p=Pe(((E=u==null?void 0:u.values)==null?void 0:E.length)||0,((I=d==null?void 0:d.values)==null?void 0:I.length)||0);return p!==0?p:By(u,d)})(n.mapValue,e.mapValue);case 11:return(function(r,o){if(r===Sl.mapValue&&o===Sl.mapValue)return 0;if(r===Sl.mapValue)return 1;if(o===Sl.mapValue)return-1;const a=r.fields||{},l=Object.keys(a),u=o.fields||{},d=Object.keys(u);l.sort(),d.sort();for(let p=0;p<l.length&&p<d.length;++p){const g=pf(l[p],d[p]);if(g!==0)return g;const _=ro(a[l[p]],u[d[p]]);if(_!==0)return _}return Pe(l.length,d.length)})(n.mapValue,e.mapValue);default:throw me(23264,{he:t})}}function Uy(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Pe(n,e);const t=As(n),i=As(e),s=Pe(t.seconds,i.seconds);return s!==0?s:Pe(t.nanos,i.nanos)}function By(n,e){const t=n.values||[],i=e.values||[];for(let s=0;s<t.length&&s<i.length;++s){const r=ro(t[s],i[s]);if(r)return r}return Pe(t.length,i.length)}function oo(n){return mf(n)}function mf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const i=As(t);return`time(${i.seconds},${i.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ss(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return he.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let i="[",s=!0;for(const r of t.values||[])s?s=!1:i+=",",i+=mf(r);return i+"]"})(n.arrayValue):"mapValue"in n?(function(t){const i=Object.keys(t.fields||{}).sort();let s="{",r=!0;for(const o of i)r?r=!1:s+=",",s+=`${o}:${mf(t.fields[o])}`;return s+"}"})(n.mapValue):me(61005,{value:n})}function Kl(n){switch(bs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Ru(n);return e?16+Kl(e):16;case 5:return 2*n.stringValue.length;case 6:return Ss(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(i){return(i.values||[]).reduce(((s,r)=>s+Kl(r)),0)})(n.arrayValue);case 10:case 11:return(function(i){let s=0;return gr(i.fields,((r,o)=>{s+=r.length+Kl(o)})),s})(n.mapValue);default:throw me(13486,{value:n})}}function gf(n){return!!n&&"integerValue"in n}function Hd(n){return!!n&&"arrayValue"in n}function $y(n){return!!n&&"nullValue"in n}function qy(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function zl(n){return!!n&&"mapValue"in n}function vO(n){var t,i;return((i=(((t=n==null?void 0:n.mapValue)==null?void 0:t.fields)||{})[qw])==null?void 0:i.stringValue)===Hw}function Xo(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return gr(n.mapValue.fields,((t,i)=>e.mapValue.fields[t]=Xo(i))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Xo(n.arrayValue.values[t]);return e}return{...n}}function TO(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===_O}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!zl(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xo(t)}setAll(e){let t=Bt.emptyPath(),i={},s=[];e.forEach(((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,s),i={},s=[],t=a.popLast()}o?i[a.lastSegment()]=Xo(o):s.push(a.lastSegment())}));const r=this.getFieldsMap(t);this.applyChanges(r,i,s)}delete(e){const t=this.field(e.popLast());zl(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return hi(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let s=t.mapValue.fields[e.get(i)];zl(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=s),t=s}return t.mapValue.fields}applyChanges(e,t,i){gr(t,((s,r)=>e[s]=r));for(const s of i)delete e[s]}clone(){return new Dn(Xo(this.value))}}function Gw(n){const e=[];return gr(n.fields,((t,i)=>{const s=new Bt([t]);if(zl(i)){const r=Gw(i.mapValue).fields;if(r.length===0)e.push(s);else for(const o of r)e.push(s.child(o))}else e.push(s)})),new Gn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class en{constructor(e,t,i,s,r,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=s,this.createTime=r,this.data=o,this.documentState=a}static newInvalidDocument(e){return new en(e,0,ge.min(),ge.min(),ge.min(),Dn.empty(),0)}static newFoundDocument(e,t,i,s){return new en(e,1,t,ge.min(),i,s,0)}static newNoDocument(e,t){return new en(e,2,t,ge.min(),ge.min(),Dn.empty(),0)}static newUnknownDocument(e,t){return new en(e,3,t,ge.min(),ge.min(),Dn.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(ge.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ge.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof en&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new en(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(e,t){this.position=e,this.inclusive=t}}function Hy(n,e,t){let i=0;for(let s=0;s<n.position.length;s++){const r=e[s],o=n.position[s];if(r.field.isKeyField()?i=he.comparator(he.fromName(o.referenceValue),t.key):i=ro(o,t.data.field(r.field)),r.dir==="desc"&&(i*=-1),i!==0)break}return i}function Gy(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!hi(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bc{constructor(e,t="asc"){this.field=e,this.dir=t}}function EO(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{}class wt extends Ww{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new IO(e,t,i):t==="array-contains"?new SO(e,i):t==="in"?new bO(e,i):t==="not-in"?new RO(e,i):t==="array-contains-any"?new PO(e,i):new wt(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new CO(e,i):new AO(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(ro(t,this.value)):t!==null&&bs(this.value)===bs(t)&&this.matchesComparison(ro(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return me(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class fi extends Ww{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new fi(e,t)}matches(e){return Kw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Kw(n){return n.op==="and"}function zw(n){return wO(n)&&Kw(n)}function wO(n){for(const e of n.filters)if(e instanceof fi)return!1;return!0}function yf(n){if(n instanceof wt)return n.field.canonicalString()+n.op.toString()+oo(n.value);if(zw(n))return n.filters.map((e=>yf(e))).join(",");{const e=n.filters.map((t=>yf(t))).join(",");return`${n.op}(${e})`}}function Yw(n,e){return n instanceof wt?(function(i,s){return s instanceof wt&&i.op===s.op&&i.field.isEqual(s.field)&&hi(i.value,s.value)})(n,e):n instanceof fi?(function(i,s){return s instanceof fi&&i.op===s.op&&i.filters.length===s.filters.length?i.filters.reduce(((r,o,a)=>r&&Yw(o,s.filters[a])),!0):!1})(n,e):void me(19439)}function Jw(n){return n instanceof wt?(function(t){return`${t.field.canonicalString()} ${t.op} ${oo(t.value)}`})(n):n instanceof fi?(function(t){return t.op.toString()+" {"+t.getFilters().map(Jw).join(" ,")+"}"})(n):"Filter"}class IO extends wt{constructor(e,t,i){super(e,t,i),this.key=he.fromName(i.referenceValue)}matches(e){const t=he.comparator(e.key,this.key);return this.matchesComparison(t)}}class CO extends wt{constructor(e,t){super(e,"in",t),this.keys=Qw("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class AO extends wt{constructor(e,t){super(e,"not-in",t),this.keys=Qw("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function Qw(n,e){var t;return(((t=e.arrayValue)==null?void 0:t.values)||[]).map((i=>he.fromName(i.referenceValue)))}class SO extends wt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Hd(t)&&Ca(t.arrayValue,this.value)}}class bO extends wt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Ca(this.value.arrayValue,t)}}class RO extends wt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Ca(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Ca(this.value.arrayValue,t)}}class PO extends wt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Hd(t)||!t.arrayValue.values)&&t.arrayValue.values.some((i=>Ca(this.value.arrayValue,i)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kO{constructor(e,t=null,i=[],s=[],r=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=s,this.limit=r,this.startAt=o,this.endAt=a,this.Te=null}}function Wy(n,e=null,t=[],i=[],s=null,r=null,o=null){return new kO(n,e,t,i,s,r,o)}function Gd(n){const e=_e(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((i=>yf(i))).join(","),t+="|ob:",t+=e.orderBy.map((i=>(function(r){return r.field.canonicalString()+r.dir})(i))).join(","),bu(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((i=>oo(i))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((i=>oo(i))).join(",")),e.Te=t}return e.Te}function Wd(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!EO(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Yw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Gy(n.startAt,e.startAt)&&Gy(n.endAt,e.endAt)}function _f(n){return he.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pu{constructor(e,t=null,i=[],s=[],r=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=s,this.limit=r,this.limitType=o,this.startAt=a,this.endAt=l,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function xO(n,e,t,i,s,r,o,a){return new Pu(n,e,t,i,s,r,o,a)}function Kd(n){return new Pu(n)}function Ky(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function NO(n){return n.collectionGroup!==null}function jo(n){const e=_e(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const r of e.explicitOrderBy)e.Ie.push(r),t.add(r.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ct(Bt.comparator);return o.filters.forEach((l=>{l.getFlattenedFilters().forEach((u=>{u.isInequality()&&(a=a.add(u.field))}))})),a})(e).forEach((r=>{t.has(r.canonicalString())||r.isKeyField()||e.Ie.push(new Bc(r,i))})),t.has(Bt.keyField().canonicalString())||e.Ie.push(new Bc(Bt.keyField(),i))}return e.Ie}function oi(n){const e=_e(n);return e.Ee||(e.Ee=DO(e,jo(n))),e.Ee}function DO(n,e){if(n.limitType==="F")return Wy(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((s=>{const r=s.dir==="desc"?"asc":"desc";return new Bc(s.field,r)}));const t=n.endAt?new Uc(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new Uc(n.startAt.position,n.startAt.inclusive):null;return Wy(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function vf(n,e,t){return new Pu(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ku(n,e){return Wd(oi(n),oi(e))&&n.limitType===e.limitType}function Xw(n){return`${Gd(oi(n))}|lt:${n.limitType}`}function xr(n){return`Query(target=${(function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map((s=>Jw(s))).join(", ")}]`),bu(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map((s=>(function(o){return`${o.field.canonicalString()} (${o.dir})`})(s))).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map((s=>oo(s))).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map((s=>oo(s))).join(",")),`Target(${i})`})(oi(n))}; limitType=${n.limitType})`}function xu(n,e){return e.isFoundDocument()&&(function(i,s){const r=s.key.path;return i.collectionGroup!==null?s.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(r):he.isDocumentKey(i.path)?i.path.isEqual(r):i.path.isImmediateParentOf(r)})(n,e)&&(function(i,s){for(const r of jo(i))if(!r.field.isKeyField()&&s.data.field(r.field)===null)return!1;return!0})(n,e)&&(function(i,s){for(const r of i.filters)if(!r.matches(s))return!1;return!0})(n,e)&&(function(i,s){return!(i.startAt&&!(function(o,a,l){const u=Hy(o,a,l);return o.inclusive?u<=0:u<0})(i.startAt,jo(i),s)||i.endAt&&!(function(o,a,l){const u=Hy(o,a,l);return o.inclusive?u>=0:u>0})(i.endAt,jo(i),s))})(n,e)}function MO(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function jw(n){return(e,t)=>{let i=!1;for(const s of jo(n)){const r=VO(s,e,t);if(r!==0)return r;i=i||s.field.isKeyField()}return 0}}function VO(n,e,t){const i=n.field.isKeyField()?he.comparator(e.key,t.key):(function(r,o,a){const l=o.data.field(r),u=a.data.field(r);return l!==null&&u!==null?ro(l,u):me(42886)})(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return me(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[s,r]of i)if(this.equalsFn(s,e))return r}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),s=this.inner[i];if(s===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let r=0;r<s.length;r++)if(this.equalsFn(s[r][0],e))return void(s[r]=[e,t]);s.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return i.length===1?delete this.inner[t]:i.splice(s,1),this.innerSize--,!0;return!1}forEach(e){gr(this.inner,((t,i)=>{for(const[s,r]of i)e(s,r)}))}isEmpty(){return Lw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LO=new it(he.comparator);function Hi(){return LO}const Zw=new it(he.comparator);function Oo(...n){let e=Zw;for(const t of n)e=e.insert(t.key,t);return e}function eI(n){let e=Zw;return n.forEach(((t,i)=>e=e.insert(t,i.overlayedDocument))),e}function Ks(){return Zo()}function tI(){return Zo()}function Zo(){return new yr((n=>n.toString()),((n,e)=>n.isEqual(e)))}const OO=new it(he.comparator),FO=new Ct(he.comparator);function ke(...n){let e=FO;for(const t of n)e=e.add(t);return e}const UO=new Ct(Pe);function BO(){return UO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zd(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Lc(e)?"-0":e}}function nI(n){return{integerValue:""+n}}function $O(n,e){return dO(e)?nI(e):zd(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nu{constructor(){this._=void 0}}function qO(n,e,t){return n instanceof $c?(function(s,r){const o={fields:{[Uw]:{stringValue:Fw},[$w]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return r&&qd(r)&&(r=Ru(r)),r&&(o.fields[Bw]=r),{mapValue:o}})(t,e):n instanceof Aa?sI(n,e):n instanceof Sa?rI(n,e):(function(s,r){const o=iI(s,r),a=zy(o)+zy(s.Ae);return gf(o)&&gf(s.Ae)?nI(a):zd(s.serializer,a)})(n,e)}function HO(n,e,t){return n instanceof Aa?sI(n,e):n instanceof Sa?rI(n,e):t}function iI(n,e){return n instanceof qc?(function(i){return gf(i)||(function(r){return!!r&&"doubleValue"in r})(i)})(e)?e:{integerValue:0}:null}class $c extends Nu{}class Aa extends Nu{constructor(e){super(),this.elements=e}}function sI(n,e){const t=oI(e);for(const i of n.elements)t.some((s=>hi(s,i)))||t.push(i);return{arrayValue:{values:t}}}class Sa extends Nu{constructor(e){super(),this.elements=e}}function rI(n,e){let t=oI(e);for(const i of n.elements)t=t.filter((s=>!hi(s,i)));return{arrayValue:{values:t}}}class qc extends Nu{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function zy(n){return dt(n.integerValue||n.doubleValue)}function oI(n){return Hd(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function GO(n,e){return n.field.isEqual(e.field)&&(function(i,s){return i instanceof Aa&&s instanceof Aa||i instanceof Sa&&s instanceof Sa?so(i.elements,s.elements,hi):i instanceof qc&&s instanceof qc?hi(i.Ae,s.Ae):i instanceof $c&&s instanceof $c})(n.transform,e.transform)}class WO{constructor(e,t){this.version=e,this.transformResults=t}}class Mi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Mi}static exists(e){return new Mi(void 0,e)}static updateTime(e){return new Mi(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Yl(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class Du{}function aI(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new cI(n.key,Mi.none()):new Wa(n.key,n.data,Mi.none());{const t=n.data,i=Dn.empty();let s=new Ct(Bt.comparator);for(let r of e.fields)if(!s.has(r)){let o=t.field(r);o===null&&r.length>1&&(r=r.popLast(),o=t.field(r)),o===null?i.delete(r):i.set(r,o),s=s.add(r)}return new _r(n.key,i,new Gn(s.toArray()),Mi.none())}}function KO(n,e,t){n instanceof Wa?(function(s,r,o){const a=s.value.clone(),l=Jy(s.fieldTransforms,r,o.transformResults);a.setAll(l),r.convertToFoundDocument(o.version,a).setHasCommittedMutations()})(n,e,t):n instanceof _r?(function(s,r,o){if(!Yl(s.precondition,r))return void r.convertToUnknownDocument(o.version);const a=Jy(s.fieldTransforms,r,o.transformResults),l=r.data;l.setAll(lI(s)),l.setAll(a),r.convertToFoundDocument(o.version,l).setHasCommittedMutations()})(n,e,t):(function(s,r,o){r.convertToNoDocument(o.version).setHasCommittedMutations()})(0,e,t)}function ea(n,e,t,i){return n instanceof Wa?(function(r,o,a,l){if(!Yl(r.precondition,o))return a;const u=r.value.clone(),d=Qy(r.fieldTransforms,l,o);return u.setAll(d),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),null})(n,e,t,i):n instanceof _r?(function(r,o,a,l){if(!Yl(r.precondition,o))return a;const u=Qy(r.fieldTransforms,l,o),d=o.data;return d.setAll(lI(r)),d.setAll(u),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(r.fieldMask.fields).unionWith(r.fieldTransforms.map((p=>p.field)))})(n,e,t,i):(function(r,o,a){return Yl(r.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a})(n,e,t)}function zO(n,e){let t=null;for(const i of n.fieldTransforms){const s=e.data.field(i.field),r=iI(i.transform,s||null);r!=null&&(t===null&&(t=Dn.empty()),t.set(i.field,r))}return t||null}function Yy(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(i,s){return i===void 0&&s===void 0||!(!i||!s)&&so(i,s,((r,o)=>GO(r,o)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Wa extends Du{constructor(e,t,i,s=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class _r extends Du{constructor(e,t,i,s,r=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=s,this.fieldTransforms=r,this.type=1}getFieldMask(){return this.fieldMask}}function lI(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}})),e}function Jy(n,e,t){const i=new Map;He(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let s=0;s<t.length;s++){const r=n[s],o=r.transform,a=e.data.field(r.field);i.set(r.field,HO(o,a,t[s]))}return i}function Qy(n,e,t){const i=new Map;for(const s of n){const r=s.transform,o=t.data.field(s.field);i.set(s.field,qO(r,o,e))}return i}class cI extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class YO extends Du{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JO{constructor(e,t,i,s){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=s}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let s=0;s<this.mutations.length;s++){const r=this.mutations[s];r.key.isEqual(e.key)&&KO(r,e,i[s])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=ea(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=ea(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=tI();return this.mutations.forEach((s=>{const r=e.get(s.key),o=r.overlayedDocument;let a=this.applyToLocalView(o,r.mutatedFields);a=t.has(s.key)?null:a;const l=aI(o,a);l!==null&&i.set(s.key,l),o.isValidDocument()||o.convertToNoDocument(ge.min())})),i}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ke())}isEqual(e){return this.batchId===e.batchId&&so(this.mutations,e.mutations,((t,i)=>Yy(t,i)))&&so(this.baseMutations,e.baseMutations,((t,i)=>Yy(t,i)))}}class Yd{constructor(e,t,i,s){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=s}static from(e,t,i){He(e.mutations.length===i.length,58842,{me:e.mutations.length,fe:i.length});let s=(function(){return OO})();const r=e.mutations;for(let o=0;o<r.length;o++)s=s.insert(r[o].key,i[o].version);return new Yd(e,t,i,s)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QO{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XO{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,De;function jO(n){switch(n){case K.OK:return me(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return me(15467,{code:n})}}function uI(n){if(n===void 0)return qi("GRPC error has no .code"),K.UNKNOWN;switch(n){case mt.OK:return K.OK;case mt.CANCELLED:return K.CANCELLED;case mt.UNKNOWN:return K.UNKNOWN;case mt.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case mt.INTERNAL:return K.INTERNAL;case mt.UNAVAILABLE:return K.UNAVAILABLE;case mt.UNAUTHENTICATED:return K.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case mt.NOT_FOUND:return K.NOT_FOUND;case mt.ALREADY_EXISTS:return K.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return K.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case mt.ABORTED:return K.ABORTED;case mt.OUT_OF_RANGE:return K.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return K.UNIMPLEMENTED;case mt.DATA_LOSS:return K.DATA_LOSS;default:return me(39323,{code:n})}}(De=mt||(mt={}))[De.OK=0]="OK",De[De.CANCELLED=1]="CANCELLED",De[De.UNKNOWN=2]="UNKNOWN",De[De.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",De[De.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",De[De.NOT_FOUND=5]="NOT_FOUND",De[De.ALREADY_EXISTS=6]="ALREADY_EXISTS",De[De.PERMISSION_DENIED=7]="PERMISSION_DENIED",De[De.UNAUTHENTICATED=16]="UNAUTHENTICATED",De[De.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",De[De.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",De[De.ABORTED=10]="ABORTED",De[De.OUT_OF_RANGE=11]="OUT_OF_RANGE",De[De.UNIMPLEMENTED=12]="UNIMPLEMENTED",De[De.INTERNAL=13]="INTERNAL",De[De.UNAVAILABLE=14]="UNAVAILABLE",De[De.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZO(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=new vs([4294967295,4294967295],0);function Xy(n){const e=ZO().encode(n),t=new Sw;return t.update(e),new Uint8Array(t.digest())}function jy(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),s=e.getUint32(8,!0),r=e.getUint32(12,!0);return[new vs([t,i],0),new vs([s,r],0)]}class Jd{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Fo(`Invalid padding: ${t}`);if(i<0)throw new Fo(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Fo(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Fo(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=vs.fromNumber(this.ge)}ye(e,t,i){let s=e.add(t.multiply(vs.fromNumber(i)));return s.compare(e2)===1&&(s=new vs([s.getBits(0),s.getBits(1)],0)),s.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Xy(e),[i,s]=jy(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);if(!this.we(o))return!1}return!0}static create(e,t,i){const s=e%8==0?0:8-e%8,r=new Uint8Array(Math.ceil(e/8)),o=new Jd(r,s,t);return i.forEach((a=>o.insert(a))),o}insert(e){if(this.ge===0)return;const t=Xy(e),[i,s]=jy(t);for(let r=0;r<this.hashCount;r++){const o=this.ye(i,s,r);this.Se(o)}}Se(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Fo extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mu{constructor(e,t,i,s,r){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=s,this.resolvedLimboDocuments=r}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const s=new Map;return s.set(e,Ka.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new Mu(ge.min(),s,new it(Pe),Hi(),ke())}}class Ka{constructor(e,t,i,s,r){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=s,this.removedDocuments=r}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Ka(i,t,ke(),ke(),ke())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jl{constructor(e,t,i,s){this.be=e,this.removedTargetIds=t,this.key=i,this.De=s}}class hI{constructor(e,t){this.targetId=e,this.Ce=t}}class fI{constructor(e,t,i=Gt.EMPTY_BYTE_STRING,s=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=s}}class Zy{constructor(){this.ve=0,this.Fe=e_(),this.Me=Gt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ke(),t=ke(),i=ke();return this.Fe.forEach(((s,r)=>{switch(r){case 0:e=e.add(s);break;case 2:t=t.add(s);break;case 1:i=i.add(s);break;default:me(38017,{changeType:r})}})),new Ka(this.Me,this.xe,e,t,i)}qe(){this.Oe=!1,this.Fe=e_()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,He(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class t2{constructor(e){this.Ge=e,this.ze=new Map,this.je=Hi(),this.Je=bl(),this.He=bl(),this.Ye=new it(Pe)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const i=this.nt(t);switch(e.state){case 0:this.rt(t)&&i.Le(e.resumeToken);break;case 1:i.Ke(),i.Ne||i.qe(),i.Le(e.resumeToken);break;case 2:i.Ke(),i.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(i.We(),i.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),i.Le(e.resumeToken));break;default:me(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((i,s)=>{this.rt(s)&&t(s)}))}st(e){const t=e.targetId,i=e.Ce.count,s=this.ot(t);if(s){const r=s.target;if(_f(r))if(i===0){const o=new he(r.path);this.et(t,o,en.newNoDocument(o,ge.min()))}else He(i===1,20013,{expectedCount:i});else{const o=this._t(t);if(o!==i){const a=this.ut(e),l=a?this.ct(a,e,o):1;if(l!==0){this.it(t);const u=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,u)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:s=0},hashCount:r=0}=t;let o,a;try{o=Ss(i).toUint8Array()}catch(l){if(l instanceof Ow)return io("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new Jd(o,s,r)}catch(l){return io(l instanceof Fo?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.ge===0?null:a}ct(e,t,i){return t.Ce.count===i-this.Pt(e,t.targetId)?0:2}Pt(e,t){const i=this.Ge.getRemoteKeysForTarget(t);let s=0;return i.forEach((r=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${r.path.canonicalString()}`;e.mightContain(a)||(this.et(t,r,null),s++)})),s}Tt(e){const t=new Map;this.ze.forEach(((r,o)=>{const a=this.ot(o);if(a){if(r.current&&_f(a.target)){const l=new he(a.target.path);this.It(l).has(o)||this.Et(o,l)||this.et(o,l,en.newNoDocument(l,e))}r.Be&&(t.set(o,r.ke()),r.qe())}}));let i=ke();this.He.forEach(((r,o)=>{let a=!0;o.forEachWhile((l=>{const u=this.ot(l);return!u||u.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)})),a&&(i=i.add(r))})),this.je.forEach(((r,o)=>o.setReadTime(e)));const s=new Mu(e,t,this.Ye,this.je,i);return this.je=Hi(),this.Je=bl(),this.He=bl(),this.Ye=new it(Pe),s}Xe(e,t){if(!this.rt(e))return;const i=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,i),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,i){if(!this.rt(e))return;const s=this.nt(e);this.Et(e,t)?s.Qe(t,1):s.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),i&&(this.je=this.je.insert(t,i))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Zy,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ct(Pe),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ct(Pe),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||se("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Zy),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function bl(){return new it(he.comparator)}function e_(){return new it(he.comparator)}const n2={asc:"ASCENDING",desc:"DESCENDING"},i2={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},s2={and:"AND",or:"OR"};class r2{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Tf(n,e){return n.useProto3Json||bu(e)?e:{value:e}}function Hc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function dI(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function o2(n,e){return Hc(n,e.toTimestamp())}function ai(n){return He(!!n,49232),ge.fromTimestamp((function(t){const i=As(t);return new Ye(i.seconds,i.nanos)})(n))}function Qd(n,e){return Ef(n,e).canonicalString()}function Ef(n,e){const t=(function(s){return new nt(["projects",s.projectId,"databases",s.database])})(n).child("documents");return e===void 0?t:t.child(e)}function pI(n){const e=nt.fromString(n);return He(vI(e),10190,{key:e.toString()}),e}function wf(n,e){return Qd(n.databaseId,e.path)}function yh(n,e){const t=pI(e);if(t.get(1)!==n.databaseId.projectId)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new ue(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new he(gI(t))}function mI(n,e){return Qd(n.databaseId,e)}function a2(n){const e=pI(n);return e.length===4?nt.emptyPath():gI(e)}function If(n){return new nt(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function gI(n){return He(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function t_(n,e,t){return{name:wf(n,e),fields:t.value.mapValue.fields}}function l2(n,e){let t;if("targetChange"in e){e.targetChange;const i=(function(u){return u==="NO_CHANGE"?0:u==="ADD"?1:u==="REMOVE"?2:u==="CURRENT"?3:u==="RESET"?4:me(39313,{state:u})})(e.targetChange.targetChangeType||"NO_CHANGE"),s=e.targetChange.targetIds||[],r=(function(u,d){return u.useProto3Json?(He(d===void 0||typeof d=="string",58123),Gt.fromBase64String(d||"")):(He(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Gt.fromUint8Array(d||new Uint8Array))})(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&(function(u){const d=u.code===void 0?K.UNKNOWN:uI(u.code);return new ue(d,u.message||"")})(o);t=new fI(i,s,r,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const s=yh(n,i.document.name),r=ai(i.document.updateTime),o=i.document.createTime?ai(i.document.createTime):ge.min(),a=new Dn({mapValue:{fields:i.document.fields}}),l=en.newFoundDocument(s,r,o,a),u=i.targetIds||[],d=i.removedTargetIds||[];t=new Jl(u,d,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const s=yh(n,i.document),r=i.readTime?ai(i.readTime):ge.min(),o=en.newNoDocument(s,r),a=i.removedTargetIds||[];t=new Jl([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const s=yh(n,i.document),r=i.removedTargetIds||[];t=new Jl([],r,s,null)}else{if(!("filter"in e))return me(11601,{Rt:e});{e.filter;const i=e.filter;i.targetId;const{count:s=0,unchangedNames:r}=i,o=new XO(s,r),a=i.targetId;t=new hI(a,o)}}return t}function c2(n,e){let t;if(e instanceof Wa)t={update:t_(n,e.key,e.value)};else if(e instanceof cI)t={delete:wf(n,e.key)};else if(e instanceof _r)t={update:t_(n,e.key,e.data),updateMask:_2(e.fieldMask)};else{if(!(e instanceof YO))return me(16599,{Vt:e.type});t={verify:wf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((i=>(function(r,o){const a=o.transform;if(a instanceof $c)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Aa)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Sa)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof qc)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw me(20930,{transform:o.transform})})(0,i)))),e.precondition.isNone||(t.currentDocument=(function(s,r){return r.updateTime!==void 0?{updateTime:o2(s,r.updateTime)}:r.exists!==void 0?{exists:r.exists}:me(27497)})(n,e.precondition)),t}function u2(n,e){return n&&n.length>0?(He(e!==void 0,14353),n.map((t=>(function(s,r){let o=s.updateTime?ai(s.updateTime):ai(r);return o.isEqual(ge.min())&&(o=ai(r)),new WO(o,s.transformResults||[])})(t,e)))):[]}function h2(n,e){return{documents:[mI(n,e.path)]}}function f2(n,e){const t={structuredQuery:{}},i=e.path;let s;e.collectionGroup!==null?(s=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(s=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=mI(n,s);const r=(function(u){if(u.length!==0)return _I(fi.create(u,"and"))})(e.filters);r&&(t.structuredQuery.where=r);const o=(function(u){if(u.length!==0)return u.map((d=>(function(g){return{field:Nr(g.field),direction:m2(g.dir)}})(d)))})(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=Tf(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=(function(u){return{before:u.inclusive,values:u.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(u){return{before:!u.inclusive,values:u.position}})(e.endAt)),{ft:t,parent:s}}function d2(n){let e=a2(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let s=null;if(i>0){He(i===1,65062);const d=t.from[0];d.allDescendants?s=d.collectionId:e=e.child(d.collectionId)}let r=[];t.where&&(r=(function(p){const g=yI(p);return g instanceof fi&&zw(g)?g.getFilters():[g]})(t.where));let o=[];t.orderBy&&(o=(function(p){return p.map((g=>(function(E){return new Bc(Dr(E.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(E.direction))})(g)))})(t.orderBy));let a=null;t.limit&&(a=(function(p){let g;return g=typeof p=="object"?p.value:p,bu(g)?null:g})(t.limit));let l=null;t.startAt&&(l=(function(p){const g=!!p.before,_=p.values||[];return new Uc(_,g)})(t.startAt));let u=null;return t.endAt&&(u=(function(p){const g=!p.before,_=p.values||[];return new Uc(_,g)})(t.endAt)),xO(e,s,o,r,a,"F",l,u)}function p2(n,e){const t=(function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return me(28987,{purpose:s})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function yI(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=Dr(t.unaryFilter.field);return wt.create(i,"==",{doubleValue:NaN});case"IS_NULL":const s=Dr(t.unaryFilter.field);return wt.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=Dr(t.unaryFilter.field);return wt.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Dr(t.unaryFilter.field);return wt.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return me(61313);default:return me(60726)}})(n):n.fieldFilter!==void 0?(function(t){return wt.create(Dr(t.fieldFilter.field),(function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return me(58110);default:return me(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return fi.create(t.compositeFilter.filters.map((i=>yI(i))),(function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return me(1026)}})(t.compositeFilter.op))})(n):me(30097,{filter:n})}function m2(n){return n2[n]}function g2(n){return i2[n]}function y2(n){return s2[n]}function Nr(n){return{fieldPath:n.canonicalString()}}function Dr(n){return Bt.fromServerFormat(n.fieldPath)}function _I(n){return n instanceof wt?(function(t){if(t.op==="=="){if(qy(t.value))return{unaryFilter:{field:Nr(t.field),op:"IS_NAN"}};if($y(t.value))return{unaryFilter:{field:Nr(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(qy(t.value))return{unaryFilter:{field:Nr(t.field),op:"IS_NOT_NAN"}};if($y(t.value))return{unaryFilter:{field:Nr(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Nr(t.field),op:g2(t.op),value:t.value}}})(n):n instanceof fi?(function(t){const i=t.getFilters().map((s=>_I(s)));return i.length===1?i[0]:{compositeFilter:{op:y2(t.op),filters:i}}})(n):me(54877,{filter:n})}function _2(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function vI(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e,t,i,s,r=ge.min(),o=ge.min(),a=Gt.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=s,this.snapshotVersion=r,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v2{constructor(e){this.yt=e}}function T2(n){const e=d2({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?vf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(){this.Cn=new w2}addToCollectionParentIndex(e,t){return this.Cn.add(t),H.resolve()}getCollectionParents(e,t){return H.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return H.resolve()}deleteFieldIndex(e,t){return H.resolve()}deleteAllFieldIndexes(e){return H.resolve()}createTargetIndexes(e,t){return H.resolve()}getDocumentsMatchingTarget(e,t){return H.resolve(null)}getIndexType(e,t){return H.resolve(0)}getFieldIndexes(e,t){return H.resolve([])}getNextCollectionGroupToUpdate(e){return H.resolve(null)}getMinOffset(e,t){return H.resolve(Cs.min())}getMinOffsetFromCollectionGroup(e,t){return H.resolve(Cs.min())}updateCollectionGroup(e,t,i){return H.resolve()}updateIndexEntries(e,t){return H.resolve()}}class w2{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t]||new Ct(nt.comparator),r=!s.has(i);return this.index[t]=s.add(i),r}has(e){const t=e.lastSegment(),i=e.popLast(),s=this.index[t];return s&&s.has(i)}getEntries(e){return(this.index[e]||new Ct(nt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n_={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},TI=41943040;class mn{static withCacheSize(e){return new mn(e,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */mn.DEFAULT_COLLECTION_PERCENTILE=10,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,mn.DEFAULT=new mn(TI,mn.DEFAULT_COLLECTION_PERCENTILE,mn.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),mn.DISABLED=new mn(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ao{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new ao(0)}static cr(){return new ao(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i_="LruGarbageCollector",I2=1048576;function s_([n,e],[t,i]){const s=Pe(n,t);return s===0?Pe(e,i):s}class C2{constructor(e){this.Ir=e,this.buffer=new Ct(s_),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();s_(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A2{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){se(i_,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){yo(t)?se(i_,"Ignoring IndexedDB error during garbage collection: ",t):await go(t)}await this.Vr(3e5)}))}}class S2{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((i=>Math.floor(t/100*i)))}nthSequenceNumber(e,t){if(t===0)return H.resolve(Su.ce);const i=new C2(t);return this.mr.forEachTarget(e,(s=>i.Ar(s.sequenceNumber))).next((()=>this.mr.pr(e,(s=>i.Ar(s))))).next((()=>i.maxValue))}removeTargets(e,t,i){return this.mr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(se("LruGarbageCollector","Garbage collection skipped; disabled"),H.resolve(n_)):this.getCacheSize(e).next((i=>i<this.params.cacheSizeCollectionThreshold?(se("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),n_):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let i,s,r,o,a,l,u;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((p=>(p>this.params.maximumSequenceNumbersToCollect?(se("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,o=Date.now(),this.nthSequenceNumber(e,s)))).next((p=>(i=p,a=Date.now(),this.removeTargets(e,i,t)))).next((p=>(r=p,l=Date.now(),this.removeOrphanedDocuments(e,i)))).next((p=>(u=Date.now(),kr()<=be.DEBUG&&se("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${s} in `+(a-o)+`ms
	Removed ${r} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(u-l)+`ms
Total Duration: ${u-d}ms`),H.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:r,documentsRemoved:p}))))}}function b2(n,e){return new S2(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R2{constructor(){this.changes=new yr((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,en.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?H.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P2{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k2{constructor(e,t,i,s){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=s}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next((s=>(i=s,this.remoteDocumentCache.getEntry(e,t)))).next((s=>(i!==null&&ea(i.mutation,s,Gn.empty(),Ye.now()),s)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.getLocalViewOfDocuments(e,i,ke()).next((()=>i))))}getLocalViewOfDocuments(e,t,i=ke()){const s=Ks();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,i).next((r=>{let o=Oo();return r.forEach(((a,l)=>{o=o.insert(a,l.overlayedDocument)})),o}))))}getOverlayedDocuments(e,t){const i=Ks();return this.populateOverlays(e,i,t).next((()=>this.computeViews(e,t,i,ke())))}populateOverlays(e,t,i){const s=[];return i.forEach((r=>{t.has(r)||s.push(r)})),this.documentOverlayCache.getOverlays(e,s).next((r=>{r.forEach(((o,a)=>{t.set(o,a)}))}))}computeViews(e,t,i,s){let r=Hi();const o=Zo(),a=(function(){return Zo()})();return t.forEach(((l,u)=>{const d=i.get(u.key);s.has(u.key)&&(d===void 0||d.mutation instanceof _r)?r=r.insert(u.key,u):d!==void 0?(o.set(u.key,d.mutation.getFieldMask()),ea(d.mutation,u,d.mutation.getFieldMask(),Ye.now())):o.set(u.key,Gn.empty())})),this.recalculateAndSaveOverlays(e,r).next((l=>(l.forEach(((u,d)=>o.set(u,d))),t.forEach(((u,d)=>a.set(u,new P2(d,o.get(u)??null)))),a)))}recalculateAndSaveOverlays(e,t){const i=Zo();let s=new it(((o,a)=>o-a)),r=ke();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((o=>{for(const a of o)a.keys().forEach((l=>{const u=t.get(l);if(u===null)return;let d=i.get(l)||Gn.empty();d=a.applyToLocalView(u,d),i.set(l,d);const p=(s.get(a.batchId)||ke()).add(l);s=s.insert(a.batchId,p)}))})).next((()=>{const o=[],a=s.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),u=l.key,d=l.value,p=tI();d.forEach((g=>{if(!r.has(g)){const _=aI(t.get(g),i.get(g));_!==null&&p.set(g,_),r=r.add(g)}})),o.push(this.documentOverlayCache.saveOverlays(e,u,p))}return H.waitFor(o)})).next((()=>i))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((i=>this.recalculateAndSaveOverlays(e,i)))}getDocumentsMatchingQuery(e,t,i,s){return(function(o){return he.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):NO(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,s):this.getDocumentsMatchingCollectionQuery(e,t,i,s)}getNextDocuments(e,t,i,s){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,s).next((r=>{const o=s-r.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,s-r.size):H.resolve(Ks());let a=Ea,l=r;return o.next((u=>H.forEach(u,((d,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),r.get(d)?H.resolve():this.remoteDocumentCache.getEntry(e,d).next((g=>{l=l.insert(d,g)}))))).next((()=>this.populateOverlays(e,u,r))).next((()=>this.computeViews(e,l,u,ke()))).next((d=>({batchId:a,changes:eI(d)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new he(t)).next((i=>{let s=Oo();return i.isFoundDocument()&&(s=s.insert(i.key,i)),s}))}getDocumentsMatchingCollectionGroupQuery(e,t,i,s){const r=t.collectionGroup;let o=Oo();return this.indexManager.getCollectionParents(e,r).next((a=>H.forEach(a,(l=>{const u=(function(p,g){return new Pu(g,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)})(t,l.child(r));return this.getDocumentsMatchingCollectionQuery(e,u,i,s).next((d=>{d.forEach(((p,g)=>{o=o.insert(p,g)}))}))})).next((()=>o))))}getDocumentsMatchingCollectionQuery(e,t,i,s){let r;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next((o=>(r=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,r,s)))).next((o=>{r.forEach(((l,u)=>{const d=u.getKey();o.get(d)===null&&(o=o.insert(d,en.newInvalidDocument(d)))}));let a=Oo();return o.forEach(((l,u)=>{const d=r.get(l);d!==void 0&&ea(d.mutation,u,Gn.empty(),Ye.now()),xu(t,u)&&(a=a.insert(l,u))})),a}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return H.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(s){return{id:s.id,version:s.version,createTime:ai(s.createTime)}})(t)),H.resolve()}getNamedQuery(e,t){return H.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(s){return{name:s.name,query:T2(s.bundledQuery),readTime:ai(s.readTime)}})(t)),H.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N2{constructor(){this.overlays=new it(he.comparator),this.qr=new Map}getOverlay(e,t){return H.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Ks();return H.forEach(t,(s=>this.getOverlay(e,s).next((r=>{r!==null&&i.set(s,r)})))).next((()=>i))}saveOverlays(e,t,i){return i.forEach(((s,r)=>{this.St(e,t,r)})),H.resolve()}removeOverlaysForBatchId(e,t,i){const s=this.qr.get(i);return s!==void 0&&(s.forEach((r=>this.overlays=this.overlays.remove(r))),this.qr.delete(i)),H.resolve()}getOverlaysForCollection(e,t,i){const s=Ks(),r=t.length+1,o=new he(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,u=l.getKey();if(!t.isPrefixOf(u.path))break;u.path.length===r&&l.largestBatchId>i&&s.set(l.getKey(),l)}return H.resolve(s)}getOverlaysForCollectionGroup(e,t,i,s){let r=new it(((u,d)=>u-d));const o=this.overlays.getIterator();for(;o.hasNext();){const u=o.getNext().value;if(u.getKey().getCollectionGroup()===t&&u.largestBatchId>i){let d=r.get(u.largestBatchId);d===null&&(d=Ks(),r=r.insert(u.largestBatchId,d)),d.set(u.getKey(),u)}}const a=Ks(),l=r.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach(((u,d)=>a.set(u,d))),!(a.size()>=s)););return H.resolve(a)}St(e,t,i){const s=this.overlays.get(i.key);if(s!==null){const o=this.qr.get(s.largestBatchId).delete(i.key);this.qr.set(s.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new QO(t,i));let r=this.qr.get(t);r===void 0&&(r=ke(),this.qr.set(t,r)),this.qr.set(t,r.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D2{constructor(){this.sessionToken=Gt.EMPTY_BYTE_STRING}getSessionToken(e){return H.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,H.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xd{constructor(){this.Qr=new Ct(bt.$r),this.Ur=new Ct(bt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const i=new bt(e,t);this.Qr=this.Qr.add(i),this.Ur=this.Ur.add(i)}Wr(e,t){e.forEach((i=>this.addReference(i,t)))}removeReference(e,t){this.Gr(new bt(e,t))}zr(e,t){e.forEach((i=>this.removeReference(i,t)))}jr(e){const t=new he(new nt([])),i=new bt(t,e),s=new bt(t,e+1),r=[];return this.Ur.forEachInRange([i,s],(o=>{this.Gr(o),r.push(o.key)})),r}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new he(new nt([])),i=new bt(t,e),s=new bt(t,e+1);let r=ke();return this.Ur.forEachInRange([i,s],(o=>{r=r.add(o.key)})),r}containsKey(e){const t=new bt(e,0),i=this.Qr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class bt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return he.comparator(e.key,t.key)||Pe(e.Yr,t.Yr)}static Kr(e,t){return Pe(e.Yr,t.Yr)||he.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M2{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(bt.$r)}checkEmpty(e){return H.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,s){const r=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JO(r,t,i,s);this.mutationQueue.push(o);for(const a of s)this.Zr=this.Zr.add(new bt(a.key,r)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return H.resolve(o)}lookupMutationBatch(e,t){return H.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,s=this.ei(i),r=s<0?0:s;return H.resolve(this.mutationQueue.length>r?this.mutationQueue[r]:null)}getHighestUnacknowledgedBatchId(){return H.resolve(this.mutationQueue.length===0?$d:this.tr-1)}getAllMutationBatches(e){return H.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new bt(t,0),s=new bt(t,Number.POSITIVE_INFINITY),r=[];return this.Zr.forEachInRange([i,s],(o=>{const a=this.Xr(o.Yr);r.push(a)})),H.resolve(r)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ct(Pe);return t.forEach((s=>{const r=new bt(s,0),o=new bt(s,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([r,o],(a=>{i=i.add(a.Yr)}))})),H.resolve(this.ti(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,s=i.length+1;let r=i;he.isDocumentKey(r)||(r=r.child(""));const o=new bt(new he(r),0);let a=new Ct(Pe);return this.Zr.forEachWhile((l=>{const u=l.key.path;return!!i.isPrefixOf(u)&&(u.length===s&&(a=a.add(l.Yr)),!0)}),o),H.resolve(this.ti(a))}ti(e){const t=[];return e.forEach((i=>{const s=this.Xr(i);s!==null&&t.push(s)})),t}removeMutationBatch(e,t){He(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let i=this.Zr;return H.forEach(t.mutations,(s=>{const r=new bt(s.key,t.batchId);return i=i.delete(r),this.referenceDelegate.markPotentiallyOrphaned(e,s.key)})).next((()=>{this.Zr=i}))}ir(e){}containsKey(e,t){const i=new bt(t,0),s=this.Zr.firstAfterOrEqual(i);return H.resolve(t.isEqual(s&&s.key))}performConsistencyCheck(e){return this.mutationQueue.length,H.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V2{constructor(e){this.ri=e,this.docs=(function(){return new it(he.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,s=this.docs.get(i),r=s?s.size:0,o=this.ri(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-r,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return H.resolve(i?i.document.mutableCopy():en.newInvalidDocument(t))}getEntries(e,t){let i=Hi();return t.forEach((s=>{const r=this.docs.get(s);i=i.insert(s,r?r.document.mutableCopy():en.newInvalidDocument(s))})),H.resolve(i)}getDocumentsMatchingQuery(e,t,i,s){let r=Hi();const o=t.path,a=new he(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:u,value:{document:d}}=l.getNext();if(!o.isPrefixOf(u.path))break;u.path.length>o.length+1||cO(lO(d),i)<=0||(s.has(d.key)||xu(t,d))&&(r=r.insert(d.key,d.mutableCopy()))}return H.resolve(r)}getAllFromCollectionGroup(e,t,i,s){me(9500)}ii(e,t){return H.forEach(this.docs,(i=>t(i)))}newChangeBuffer(e){return new L2(this)}getSize(e){return H.resolve(this.size)}}class L2 extends R2{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((i,s)=>{s.isValidDocument()?t.push(this.Nr.addEntry(e,s)):this.Nr.removeEntry(i)})),H.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(e){this.persistence=e,this.si=new yr((t=>Gd(t)),Wd),this.lastRemoteSnapshotVersion=ge.min(),this.highestTargetId=0,this.oi=0,this._i=new Xd,this.targetCount=0,this.ai=ao.ur()}forEachTarget(e,t){return this.si.forEach(((i,s)=>t(s))),H.resolve()}getLastRemoteSnapshotVersion(e){return H.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return H.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),H.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.oi&&(this.oi=t),H.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new ao(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,H.resolve()}updateTargetData(e,t){return this.Pr(t),H.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,H.resolve()}removeTargets(e,t,i){let s=0;const r=[];return this.si.forEach(((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.si.delete(o),r.push(this.removeMatchingKeysForTargetId(e,a.targetId)),s++)})),H.waitFor(r).next((()=>s))}getTargetCount(e){return H.resolve(this.targetCount)}getTargetData(e,t){const i=this.si.get(t)||null;return H.resolve(i)}addMatchingKeys(e,t,i){return this._i.Wr(t,i),H.resolve()}removeMatchingKeys(e,t,i){this._i.zr(t,i);const s=this.persistence.referenceDelegate,r=[];return s&&t.forEach((o=>{r.push(s.markPotentiallyOrphaned(e,o))})),H.waitFor(r)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),H.resolve()}getMatchingKeysForTargetId(e,t){const i=this._i.Hr(t);return H.resolve(i)}containsKey(e,t){return H.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e,t){this.ui={},this.overlays={},this.ci=new Su(0),this.li=!1,this.li=!0,this.hi=new D2,this.referenceDelegate=e(this),this.Pi=new O2(this),this.indexManager=new E2,this.remoteDocumentCache=(function(s){return new V2(s)})((i=>this.referenceDelegate.Ti(i))),this.serializer=new v2(t),this.Ii=new x2(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new N2,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.ui[e.toKey()];return i||(i=new M2(t,this.referenceDelegate),this.ui[e.toKey()]=i),i}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,i){se("MemoryPersistence","Starting transaction:",e);const s=new F2(this.ci.next());return this.referenceDelegate.Ei(),i(s).next((r=>this.referenceDelegate.di(s).next((()=>r)))).toPromise().then((r=>(s.raiseOnCommittedEvent(),r)))}Ai(e,t){return H.or(Object.values(this.ui).map((i=>()=>i.containsKey(e,t))))}}class F2 extends hO{constructor(e){super(),this.currentSequenceNumber=e}}class jd{constructor(e){this.persistence=e,this.Ri=new Xd,this.Vi=null}static mi(e){return new jd(e)}get fi(){if(this.Vi)return this.Vi;throw me(60996)}addReference(e,t,i){return this.Ri.addReference(i,t),this.fi.delete(i.toString()),H.resolve()}removeReference(e,t,i){return this.Ri.removeReference(i,t),this.fi.add(i.toString()),H.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),H.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((s=>this.fi.add(s.toString())));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next((s=>{s.forEach((r=>this.fi.add(r.toString())))})).next((()=>i.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return H.forEach(this.fi,(i=>{const s=he.fromPath(i);return this.gi(e,s).next((r=>{r||t.removeEntry(s,ge.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((i=>{i?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return H.or([()=>H.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Gc{constructor(e,t){this.persistence=e,this.pi=new yr((i=>pO(i.path)),((i,s)=>i.isEqual(s))),this.garbageCollector=b2(this,t)}static mi(e,t){return new Gc(e,t)}Ei(){}di(e){return H.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((i=>t.next((s=>i+s))))}wr(e){let t=0;return this.pr(e,(i=>{t++})).next((()=>t))}pr(e,t){return H.forEach(this.pi,((i,s)=>this.br(e,i,s).next((r=>r?H.resolve():t(s)))))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const s=this.persistence.getRemoteDocumentCache(),r=s.newChangeBuffer();return s.ii(e,(o=>this.br(e,o,t).next((a=>{a||(i++,r.removeEntry(o,ge.min()))})))).next((()=>r.apply(e))).next((()=>i))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}removeReference(e,t,i){return this.pi.set(i,e.currentSequenceNumber),H.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),H.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kl(e.data.value)),t}br(e,t,i){return H.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const s=this.pi.get(t);return H.resolve(s!==void 0&&s>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zd{constructor(e,t,i,s){this.targetId=e,this.fromCache=t,this.Es=i,this.ds=s}static As(e,t){let i=ke(),s=ke();for(const r of t.docChanges)switch(r.type){case 0:i=i.add(r.doc.key);break;case 1:s=s.add(r.doc.key)}return new Zd(e,t.fromCache,i,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U2{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B2{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return lD()?8:fO(sn())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,i,s){const r={result:null};return this.ys(e,t).next((o=>{r.result=o})).next((()=>{if(!r.result)return this.ws(e,t,s,i).next((o=>{r.result=o}))})).next((()=>{if(r.result)return;const o=new U2;return this.Ss(e,t,o).next((a=>{if(r.result=a,this.Vs)return this.bs(e,t,o,a.size)}))})).next((()=>r.result))}bs(e,t,i,s){return i.documentReadCount<this.fs?(kr()<=be.DEBUG&&se("QueryEngine","SDK will not create cache indexes for query:",xr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),H.resolve()):(kr()<=be.DEBUG&&se("QueryEngine","Query:",xr(t),"scans",i.documentReadCount,"local documents and returns",s,"documents as results."),i.documentReadCount>this.gs*s?(kr()<=be.DEBUG&&se("QueryEngine","The SDK decides to create cache indexes for query:",xr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,oi(t))):H.resolve())}ys(e,t){if(Ky(t))return H.resolve(null);let i=oi(t);return this.indexManager.getIndexType(e,i).next((s=>s===0?null:(t.limit!==null&&s===1&&(t=vf(t,null,"F"),i=oi(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next((r=>{const o=ke(...r);return this.ps.getDocuments(e,o).next((a=>this.indexManager.getMinOffset(e,i).next((l=>{const u=this.Ds(t,a);return this.Cs(t,u,o,l.readTime)?this.ys(e,vf(t,null,"F")):this.vs(e,u,t,l)}))))})))))}ws(e,t,i,s){return Ky(t)||s.isEqual(ge.min())?H.resolve(null):this.ps.getDocuments(e,i).next((r=>{const o=this.Ds(t,r);return this.Cs(t,o,i,s)?H.resolve(null):(kr()<=be.DEBUG&&se("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),xr(t)),this.vs(e,o,t,aO(s,Ea)).next((a=>a)))}))}Ds(e,t){let i=new Ct(jw(e));return t.forEach(((s,r)=>{xu(e,r)&&(i=i.add(r))})),i}Cs(e,t,i,s){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const r=e.limitType==="F"?t.last():t.first();return!!r&&(r.hasPendingWrites||r.version.compareTo(s)>0)}Ss(e,t,i){return kr()<=be.DEBUG&&se("QueryEngine","Using full collection scan to execute query:",xr(t)),this.ps.getDocumentsMatchingQuery(e,t,Cs.min(),i)}vs(e,t,i,s){return this.ps.getDocumentsMatchingQuery(e,i,s).next((r=>(t.forEach((o=>{r=r.insert(o.key,o)})),r)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="LocalStore",$2=3e8;class q2{constructor(e,t,i,s){this.persistence=e,this.Fs=t,this.serializer=s,this.Ms=new it(Pe),this.xs=new yr((r=>Gd(r)),Wd),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(i)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new k2(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function H2(n,e,t,i){return new q2(n,e,t,i)}async function wI(n,e){const t=_e(n);return await t.persistence.runTransaction("Handle user change","readonly",(i=>{let s;return t.mutationQueue.getAllMutationBatches(i).next((r=>(s=r,t.Bs(e),t.mutationQueue.getAllMutationBatches(i)))).next((r=>{const o=[],a=[];let l=ke();for(const u of s){o.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}for(const u of r){a.push(u.batchId);for(const d of u.mutations)l=l.add(d.key)}return t.localDocuments.getDocuments(i,l).next((u=>({Ls:u,removedBatchIds:o,addedBatchIds:a})))}))}))}function G2(n,e){const t=_e(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(i=>{const s=e.batch.keys(),r=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(a,l,u,d){const p=u.batch,g=p.keys();let _=H.resolve();return g.forEach((E=>{_=_.next((()=>d.getEntry(l,E))).next((I=>{const k=u.docVersions.get(E);He(k!==null,48541),I.version.compareTo(k)<0&&(p.applyToRemoteDocument(I,u),I.isValidDocument()&&(I.setReadTime(u.commitVersion),d.addEntry(I)))}))})),_.next((()=>a.mutationQueue.removeMutationBatch(l,p)))})(t,i,e,r).next((()=>r.apply(i))).next((()=>t.mutationQueue.performConsistencyCheck(i))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(i,s,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,(function(a){let l=ke();for(let u=0;u<a.mutationResults.length;++u)a.mutationResults[u].transformResults.length>0&&(l=l.add(a.batch.mutations[u].key));return l})(e)))).next((()=>t.localDocuments.getDocuments(i,s)))}))}function II(n){const e=_e(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function W2(n,e){const t=_e(n),i=e.snapshotVersion;let s=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(r=>{const o=t.Ns.newChangeBuffer({trackRemovals:!0});s=t.Ms;const a=[];e.targetChanges.forEach(((d,p)=>{const g=s.get(p);if(!g)return;a.push(t.Pi.removeMatchingKeys(r,d.removedDocuments,p).next((()=>t.Pi.addMatchingKeys(r,d.addedDocuments,p))));let _=g.withSequenceNumber(r.currentSequenceNumber);e.targetMismatches.get(p)!==null?_=_.withResumeToken(Gt.EMPTY_BYTE_STRING,ge.min()).withLastLimboFreeSnapshotVersion(ge.min()):d.resumeToken.approximateByteSize()>0&&(_=_.withResumeToken(d.resumeToken,i)),s=s.insert(p,_),(function(I,k,D){return I.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-I.snapshotVersion.toMicroseconds()>=$2?!0:D.addedDocuments.size+D.modifiedDocuments.size+D.removedDocuments.size>0})(g,_,d)&&a.push(t.Pi.updateTargetData(r,_))}));let l=Hi(),u=ke();if(e.documentUpdates.forEach((d=>{e.resolvedLimboDocuments.has(d)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(r,d))})),a.push(K2(r,o,e.documentUpdates).next((d=>{l=d.ks,u=d.qs}))),!i.isEqual(ge.min())){const d=t.Pi.getLastRemoteSnapshotVersion(r).next((p=>t.Pi.setTargetsMetadata(r,r.currentSequenceNumber,i)));a.push(d)}return H.waitFor(a).next((()=>o.apply(r))).next((()=>t.localDocuments.getLocalViewOfDocuments(r,l,u))).next((()=>l))})).then((r=>(t.Ms=s,r)))}function K2(n,e,t){let i=ke(),s=ke();return t.forEach((r=>i=i.add(r))),e.getEntries(n,i).next((r=>{let o=Hi();return t.forEach(((a,l)=>{const u=r.get(a);l.isFoundDocument()!==u.isFoundDocument()&&(s=s.add(a)),l.isNoDocument()&&l.version.isEqual(ge.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!u.isValidDocument()||l.version.compareTo(u.version)>0||l.version.compareTo(u.version)===0&&u.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):se(ep,"Ignoring outdated watch update for ",a,". Current version:",u.version," Watch version:",l.version)})),{ks:o,qs:s}}))}function z2(n,e){const t=_e(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(i=>(e===void 0&&(e=$d),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e))))}function Y2(n,e){const t=_e(n);return t.persistence.runTransaction("Allocate target","readwrite",(i=>{let s;return t.Pi.getTargetData(i,e).next((r=>r?(s=r,H.resolve(s)):t.Pi.allocateTargetId(i).next((o=>(s=new us(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Pi.addTargetData(i,s).next((()=>s)))))))})).then((i=>{const s=t.Ms.get(i.targetId);return(s===null||i.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(i.targetId,i),t.xs.set(e,i.targetId)),i}))}async function Cf(n,e,t){const i=_e(n),s=i.Ms.get(e),r=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",r,(o=>i.persistence.referenceDelegate.removeTarget(o,s)))}catch(o){if(!yo(o))throw o;se(ep,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ms=i.Ms.remove(e),i.xs.delete(s.target)}function r_(n,e,t){const i=_e(n);let s=ge.min(),r=ke();return i.persistence.runTransaction("Execute query","readwrite",(o=>(function(l,u,d){const p=_e(l),g=p.xs.get(d);return g!==void 0?H.resolve(p.Ms.get(g)):p.Pi.getTargetData(u,d)})(i,o,oi(e)).next((a=>{if(a)return s=a.lastLimboFreeSnapshotVersion,i.Pi.getMatchingKeysForTargetId(o,a.targetId).next((l=>{r=l}))})).next((()=>i.Fs.getDocumentsMatchingQuery(o,e,t?s:ge.min(),t?r:ke()))).next((a=>(J2(i,MO(e),a),{documents:a,Qs:r})))))}function J2(n,e,t){let i=n.Os.get(e)||ge.min();t.forEach(((s,r)=>{r.readTime.compareTo(i)>0&&(i=r.readTime)})),n.Os.set(e,i)}class o_{constructor(){this.activeTargetIds=BO()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Q2{constructor(){this.Mo=new o_,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,i){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new o_,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X2{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const a_="ConnectivityMonitor";class l_{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){se(a_,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){se(a_,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rl=null;function Af(){return Rl===null?Rl=(function(){return 268435456+Math.round(2147483648*Math.random())})():Rl++,"0x"+Rl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _h="RestConnection",j2={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Z2{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${i}/databases/${s}`,this.Wo=this.databaseId.database===Oc?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Go(e,t,i,s,r){const o=Af(),a=this.zo(e,t.toUriEncodedString());se(_h,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(l,s,r);const{host:u}=new URL(a),d=pr(u);return this.Jo(e,a,l,i,d).then((p=>(se(_h,`Received RPC '${e}' ${o}: `,p),p)),(p=>{throw io(_h,`RPC '${e}' ${o} failed with error: `,p,"url: ",a,"request:",i),p}))}Ho(e,t,i,s,r,o){return this.Go(e,t,i,s,r)}jo(e,t,i){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+mo})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((s,r)=>e[r]=s)),i&&i.headers.forEach(((s,r)=>e[r]=s))}zo(e,t){const i=j2[e];return`${this.Uo}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eF{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yt="WebChannelConnection";class tF extends Z2{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,i,s,r){const o=Af();return new Promise(((a,l)=>{const u=new bw;u.setWithCredentials(!0),u.listenOnce(Rw.COMPLETE,(()=>{try{switch(u.getLastErrorCode()){case Wl.NO_ERROR:const p=u.getResponseJson();se(Yt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(p)),a(p);break;case Wl.TIMEOUT:se(Yt,`RPC '${e}' ${o} timed out`),l(new ue(K.DEADLINE_EXCEEDED,"Request time out"));break;case Wl.HTTP_ERROR:const g=u.getStatus();if(se(Yt,`RPC '${e}' ${o} failed with status:`,g,"response text:",u.getResponseText()),g>0){let _=u.getResponseJson();Array.isArray(_)&&(_=_[0]);const E=_==null?void 0:_.error;if(E&&E.status&&E.message){const I=(function(D){const M=D.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(M)>=0?M:K.UNKNOWN})(E.status);l(new ue(I,E.message))}else l(new ue(K.UNKNOWN,"Server responded with status "+u.getStatus()))}else l(new ue(K.UNAVAILABLE,"Connection failed."));break;default:me(9055,{l_:e,streamId:o,h_:u.getLastErrorCode(),P_:u.getLastError()})}}finally{se(Yt,`RPC '${e}' ${o} completed.`)}}));const d=JSON.stringify(s);se(Yt,`RPC '${e}' ${o} sending request:`,s),u.send(t,"POST",d,i,15)}))}T_(e,t,i){const s=Af(),r=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=xw(),a=kw(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.jo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const d=r.join("");se(Yt,`Creating RPC '${e}' stream ${s}: ${d}`,l);const p=o.createWebChannel(d,l);this.I_(p);let g=!1,_=!1;const E=new eF({Yo:k=>{_?se(Yt,`Not sending because RPC '${e}' stream ${s} is closed:`,k):(g||(se(Yt,`Opening RPC '${e}' stream ${s} transport.`),p.open(),g=!0),se(Yt,`RPC '${e}' stream ${s} sending:`,k),p.send(k))},Zo:()=>p.close()}),I=(k,D,M)=>{k.listen(D,(P=>{try{M(P)}catch(x){setTimeout((()=>{throw x}),0)}}))};return I(p,Lo.EventType.OPEN,(()=>{_||(se(Yt,`RPC '${e}' stream ${s} transport opened.`),E.o_())})),I(p,Lo.EventType.CLOSE,(()=>{_||(_=!0,se(Yt,`RPC '${e}' stream ${s} transport closed`),E.a_(),this.E_(p))})),I(p,Lo.EventType.ERROR,(k=>{_||(_=!0,io(Yt,`RPC '${e}' stream ${s} transport errored. Name:`,k.name,"Message:",k.message),E.a_(new ue(K.UNAVAILABLE,"The operation could not be completed")))})),I(p,Lo.EventType.MESSAGE,(k=>{var D;if(!_){const M=k.data[0];He(!!M,16349);const P=M,x=(P==null?void 0:P.error)||((D=P[0])==null?void 0:D.error);if(x){se(Yt,`RPC '${e}' stream ${s} received error:`,x);const L=x.status;let F=(function(v){const w=mt[v];if(w!==void 0)return uI(w)})(L),R=x.message;F===void 0&&(F=K.INTERNAL,R="Unknown error status: "+L+" with message "+x.message),_=!0,E.a_(new ue(F,R)),p.close()}else se(Yt,`RPC '${e}' stream ${s} received:`,M),E.u_(M)}})),I(a,Pw.STAT_EVENT,(k=>{k.stat===df.PROXY?se(Yt,`RPC '${e}' stream ${s} detected buffering proxy`):k.stat===df.NOPROXY&&se(Yt,`RPC '${e}' stream ${s} detected no buffering proxy`)})),setTimeout((()=>{E.__()}),0),E}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function vh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vu(n){return new r2(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e,t,i=1e3,s=1.5,r=6e4){this.Mi=e,this.timerId=t,this.d_=i,this.A_=s,this.R_=r,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),i=Math.max(0,Date.now()-this.f_),s=Math.max(0,t-i);s>0&&se("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,s,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c_="PersistentStream";class AI{constructor(e,t,i,s,r,o,a,l){this.Mi=e,this.S_=i,this.b_=s,this.connection=r,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new CI(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===K.RESOURCE_EXHAUSTED?(qi(t.toString()),qi("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([i,s])=>{this.D_===t&&this.G_(i,s)}),(i=>{e((()=>{const s=new ue(K.UNKNOWN,"Fetching auth token failed: "+i.message);return this.z_(s)}))}))}G_(e,t){const i=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{i((()=>this.listener.Xo()))})),this.stream.t_((()=>{i((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((s=>{i((()=>this.z_(s)))})),this.stream.onMessage((s=>{i((()=>++this.F_==1?this.J_(s):this.onNext(s)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return se(c_,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(se(c_,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class nF extends AI{constructor(e,t,i,s,r,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=l2(this.serializer,e),i=(function(r){if(!("targetChange"in r))return ge.min();const o=r.targetChange;return o.targetIds&&o.targetIds.length?ge.min():o.readTime?ai(o.readTime):ge.min()})(e);return this.listener.H_(t,i)}Y_(e){const t={};t.database=If(this.serializer),t.addTarget=(function(r,o){let a;const l=o.target;if(a=_f(l)?{documents:h2(r,l)}:{query:f2(r,l).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=dI(r,o.resumeToken);const u=Tf(r,o.expectedCount);u!==null&&(a.expectedCount=u)}else if(o.snapshotVersion.compareTo(ge.min())>0){a.readTime=Hc(r,o.snapshotVersion.toTimestamp());const u=Tf(r,o.expectedCount);u!==null&&(a.expectedCount=u)}return a})(this.serializer,e);const i=p2(this.serializer,e);i&&(t.labels=i),this.q_(t)}Z_(e){const t={};t.database=If(this.serializer),t.removeTarget=e,this.q_(t)}}class iF extends AI{constructor(e,t,i,s,r,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,s,o),this.serializer=r}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return He(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,He(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){He(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=u2(e.writeResults,e.commitTime),i=ai(e.commitTime);return this.listener.na(i,t)}ra(){const e={};e.database=If(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((i=>c2(this.serializer,i)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sF{}class rF extends sF{constructor(e,t,i,s){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=s,this.ia=!1}sa(){if(this.ia)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([r,o])=>this.connection.Go(e,Ef(t,i),s,r,o))).catch((r=>{throw r.name==="FirebaseError"?(r.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),r):new ue(K.UNKNOWN,r.toString())}))}Ho(e,t,i,s,r){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([o,a])=>this.connection.Ho(e,Ef(t,i),s,o,a,r))).catch((o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ue(K.UNKNOWN,o.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class oF{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(qi(t),this.aa=!1):se("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cr="RemoteStore";class aF{constructor(e,t,i,s,r){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=r,this.Aa.Oo((o=>{i.enqueueAndForget((async()=>{vr(this)&&(se(cr,"Restarting streams for network reachability change."),await(async function(l){const u=_e(l);u.Ea.add(4),await za(u),u.Ra.set("Unknown"),u.Ea.delete(4),await Lu(u)})(this))}))})),this.Ra=new oF(i,s)}}async function Lu(n){if(vr(n))for(const e of n.da)await e(!0)}async function za(n){for(const e of n.da)await e(!1)}function SI(n,e){const t=_e(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),sp(t)?ip(t):_o(t).O_()&&np(t,e))}function tp(n,e){const t=_e(n),i=_o(t);t.Ia.delete(e),i.O_()&&bI(t,e),t.Ia.size===0&&(i.O_()?i.L_():vr(t)&&t.Ra.set("Unknown"))}function np(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ge.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}_o(n).Y_(e)}function bI(n,e){n.Va.Ue(e),_o(n).Z_(e)}function ip(n){n.Va=new t2({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),_o(n).start(),n.Ra.ua()}function sp(n){return vr(n)&&!_o(n).x_()&&n.Ia.size>0}function vr(n){return _e(n).Ea.size===0}function RI(n){n.Va=void 0}async function lF(n){n.Ra.set("Online")}async function cF(n){n.Ia.forEach(((e,t)=>{np(n,e)}))}async function uF(n,e){RI(n),sp(n)?(n.Ra.ha(e),ip(n)):n.Ra.set("Unknown")}async function hF(n,e,t){if(n.Ra.set("Online"),e instanceof fI&&e.state===2&&e.cause)try{await(async function(s,r){const o=r.cause;for(const a of r.targetIds)s.Ia.has(a)&&(await s.remoteSyncer.rejectListen(a,o),s.Ia.delete(a),s.Va.removeTarget(a))})(n,e)}catch(i){se(cr,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await Wc(n,i)}else if(e instanceof Jl?n.Va.Ze(e):e instanceof hI?n.Va.st(e):n.Va.tt(e),!t.isEqual(ge.min()))try{const i=await II(n.localStore);t.compareTo(i)>=0&&await(function(r,o){const a=r.Va.Tt(o);return a.targetChanges.forEach(((l,u)=>{if(l.resumeToken.approximateByteSize()>0){const d=r.Ia.get(u);d&&r.Ia.set(u,d.withResumeToken(l.resumeToken,o))}})),a.targetMismatches.forEach(((l,u)=>{const d=r.Ia.get(l);if(!d)return;r.Ia.set(l,d.withResumeToken(Gt.EMPTY_BYTE_STRING,d.snapshotVersion)),bI(r,l);const p=new us(d.target,l,u,d.sequenceNumber);np(r,p)})),r.remoteSyncer.applyRemoteEvent(a)})(n,t)}catch(i){se(cr,"Failed to raise snapshot:",i),await Wc(n,i)}}async function Wc(n,e,t){if(!yo(e))throw e;n.Ea.add(1),await za(n),n.Ra.set("Offline"),t||(t=()=>II(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{se(cr,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await Lu(n)}))}function PI(n,e){return e().catch((t=>Wc(n,t,e)))}async function Ou(n){const e=_e(n),t=Rs(e);let i=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:$d;for(;fF(e);)try{const s=await z2(e.localStore,i);if(s===null){e.Ta.length===0&&t.L_();break}i=s.batchId,dF(e,s)}catch(s){await Wc(e,s)}kI(e)&&xI(e)}function fF(n){return vr(n)&&n.Ta.length<10}function dF(n,e){n.Ta.push(e);const t=Rs(n);t.O_()&&t.X_&&t.ea(e.mutations)}function kI(n){return vr(n)&&!Rs(n).x_()&&n.Ta.length>0}function xI(n){Rs(n).start()}async function pF(n){Rs(n).ra()}async function mF(n){const e=Rs(n);for(const t of n.Ta)e.ea(t.mutations)}async function gF(n,e,t){const i=n.Ta.shift(),s=Yd.from(i,e,t);await PI(n,(()=>n.remoteSyncer.applySuccessfulWrite(s))),await Ou(n)}async function yF(n,e){e&&Rs(n).X_&&await(async function(i,s){if((function(o){return jO(o)&&o!==K.ABORTED})(s.code)){const r=i.Ta.shift();Rs(i).B_(),await PI(i,(()=>i.remoteSyncer.rejectFailedWrite(r.batchId,s))),await Ou(i)}})(n,e),kI(n)&&xI(n)}async function u_(n,e){const t=_e(n);t.asyncQueue.verifyOperationInProgress(),se(cr,"RemoteStore received new credentials");const i=vr(t);t.Ea.add(3),await za(t),i&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await Lu(t)}async function _F(n,e){const t=_e(n);e?(t.Ea.delete(2),await Lu(t)):e||(t.Ea.add(2),await za(t),t.Ra.set("Unknown"))}function _o(n){return n.ma||(n.ma=(function(t,i,s){const r=_e(t);return r.sa(),new nF(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:lF.bind(null,n),t_:cF.bind(null,n),r_:uF.bind(null,n),H_:hF.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),sp(n)?ip(n):n.Ra.set("Unknown")):(await n.ma.stop(),RI(n))}))),n.ma}function Rs(n){return n.fa||(n.fa=(function(t,i,s){const r=_e(t);return r.sa(),new iF(i,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,s)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:pF.bind(null,n),r_:yF.bind(null,n),ta:mF.bind(null,n),na:gF.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await Ou(n)):(await n.fa.stop(),n.Ta.length>0&&(se(cr,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rp{constructor(e,t,i,s,r){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=s,this.removalCallback=r,this.deferred=new Ts,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((o=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,s,r){const o=Date.now()+i,a=new rp(e,t,o,s,r);return a.start(i),a}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ue(K.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(n,e){if(qi("AsyncQueue",`${e}: ${n}`),yo(n))return new ue(K.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{static emptySet(e){return new zr(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||he.comparator(t.key,i.key):(t,i)=>he.comparator(t.key,i.key),this.keyedMap=Oo(),this.sortedSet=new it(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,i)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof zr)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const s=t.getNext().key,r=i.getNext().key;if(!s.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new zr;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h_{constructor(){this.ga=new it(he.comparator)}track(e){const t=e.doc.key,i=this.ga.get(t);i?e.type!==0&&i.type===3?this.ga=this.ga.insert(t,e):e.type===3&&i.type!==1?this.ga=this.ga.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.ga=this.ga.remove(t):e.type===1&&i.type===2?this.ga=this.ga.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):me(63341,{Rt:e,pa:i}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,i)=>{e.push(i)})),e}}class lo{constructor(e,t,i,s,r,o,a,l,u){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=s,this.mutatedKeys=r,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=u}static fromInitialDocuments(e,t,i,s,r){const o=[];return t.forEach((a=>{o.push({type:0,doc:a})})),new lo(e,t,zr.emptySet(t),o,i,s,!0,!1,r)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ku(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let s=0;s<t.length;s++)if(t[s].type!==i[s].type||!t[s].doc.isEqual(i[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vF{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class TF{constructor(){this.queries=f_(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,i){const s=_e(t),r=s.queries;s.queries=f_(),r.forEach(((o,a)=>{for(const l of a.Sa)l.onError(i)}))})(this,new ue(K.ABORTED,"Firestore shutting down"))}}function f_(){return new yr((n=>Xw(n)),ku)}async function EF(n,e){const t=_e(n);let i=3;const s=e.query;let r=t.queries.get(s);r?!r.ba()&&e.Da()&&(i=2):(r=new vF,i=e.Da()?0:1);try{switch(i){case 0:r.wa=await t.onListen(s,!0);break;case 1:r.wa=await t.onListen(s,!1);break;case 2:await t.onFirstRemoteStoreListen(s)}}catch(o){const a=op(o,`Initialization of query '${xr(e.query)}' failed`);return void e.onError(a)}t.queries.set(s,r),r.Sa.push(e),e.va(t.onlineState),r.wa&&e.Fa(r.wa)&&ap(t)}async function wF(n,e){const t=_e(n),i=e.query;let s=3;const r=t.queries.get(i);if(r){const o=r.Sa.indexOf(e);o>=0&&(r.Sa.splice(o,1),r.Sa.length===0?s=e.Da()?0:1:!r.ba()&&e.Da()&&(s=2))}switch(s){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function IF(n,e){const t=_e(n);let i=!1;for(const s of e){const r=s.query,o=t.queries.get(r);if(o){for(const a of o.Sa)a.Fa(s)&&(i=!0);o.wa=s}}i&&ap(t)}function CF(n,e,t){const i=_e(n),s=i.queries.get(e);if(s)for(const r of s.Sa)r.onError(t);i.queries.delete(e)}function ap(n){n.Ca.forEach((e=>{e.next()}))}var Sf,d_;(d_=Sf||(Sf={})).Ma="default",d_.Cache="cache";class AF{constructor(e,t,i){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=i||{}}Fa(e){if(!this.options.includeMetadataChanges){const i=[];for(const s of e.docChanges)s.type!==3&&i.push(s);e=new lo(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const i=t!=="Offline";return(!this.options.qa||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=lo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Sf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.key=e}}class DI{constructor(e){this.key=e}}class SF{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ke(),this.mutatedKeys=ke(),this.eu=jw(e),this.tu=new zr(this.eu)}get nu(){return this.Ya}ru(e,t){const i=t?t.iu:new h_,s=t?t.tu:this.tu;let r=t?t.mutatedKeys:this.mutatedKeys,o=s,a=!1;const l=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,u=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(e.inorderTraversal(((d,p)=>{const g=s.get(d),_=xu(this.query,p)?p:null,E=!!g&&this.mutatedKeys.has(g.key),I=!!_&&(_.hasLocalMutations||this.mutatedKeys.has(_.key)&&_.hasCommittedMutations);let k=!1;g&&_?g.data.isEqual(_.data)?E!==I&&(i.track({type:3,doc:_}),k=!0):this.su(g,_)||(i.track({type:2,doc:_}),k=!0,(l&&this.eu(_,l)>0||u&&this.eu(_,u)<0)&&(a=!0)):!g&&_?(i.track({type:0,doc:_}),k=!0):g&&!_&&(i.track({type:1,doc:g}),k=!0,(l||u)&&(a=!0)),k&&(_?(o=o.add(_),r=I?r.add(d):r.delete(d)):(o=o.delete(d),r=r.delete(d)))})),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),r=r.delete(d.key),i.track({type:1,doc:d})}return{tu:o,iu:i,Cs:a,mutatedKeys:r}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,s){const r=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort(((d,p)=>(function(_,E){const I=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return me(20277,{Rt:k})}};return I(_)-I(E)})(d.type,p.type)||this.eu(d.doc,p.doc))),this.ou(i),s=s??!1;const a=t&&!s?this._u():[],l=this.Xa.size===0&&this.current&&!s?1:0,u=l!==this.Za;return this.Za=l,o.length!==0||u?{snapshot:new lo(this.query,e.tu,r,o,e.mutatedKeys,l===0,u,!1,!!i&&i.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new h_,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ke(),this.tu.forEach((i=>{this.uu(i.key)&&(this.Xa=this.Xa.add(i.key))}));const t=[];return e.forEach((i=>{this.Xa.has(i)||t.push(new DI(i))})),this.Xa.forEach((i=>{e.has(i)||t.push(new NI(i))})),t}cu(e){this.Ya=e.Qs,this.Xa=ke();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return lo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const lp="SyncEngine";class bF{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class RF{constructor(e){this.key=e,this.hu=!1}}class PF{constructor(e,t,i,s,r,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=s,this.currentUser=r,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new yr((a=>Xw(a)),ku),this.Iu=new Map,this.Eu=new Set,this.du=new it(he.comparator),this.Au=new Map,this.Ru=new Xd,this.Vu={},this.mu=new Map,this.fu=ao.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function kF(n,e,t=!0){const i=UI(n);let s;const r=i.Tu.get(e);return r?(i.sharedClientState.addLocalQueryTarget(r.targetId),s=r.view.lu()):s=await MI(i,e,t,!0),s}async function xF(n,e){const t=UI(n);await MI(t,e,!0,!1)}async function MI(n,e,t,i){const s=await Y2(n.localStore,oi(e)),r=s.targetId,o=n.sharedClientState.addLocalQueryTarget(r,t);let a;return i&&(a=await NF(n,e,r,o==="current",s.resumeToken)),n.isPrimaryClient&&t&&SI(n.remoteStore,s),a}async function NF(n,e,t,i,s){n.pu=(p,g,_)=>(async function(I,k,D,M){let P=k.view.ru(D);P.Cs&&(P=await r_(I.localStore,k.query,!1).then((({documents:R})=>k.view.ru(R,P))));const x=M&&M.targetChanges.get(k.targetId),L=M&&M.targetMismatches.get(k.targetId)!=null,F=k.view.applyChanges(P,I.isPrimaryClient,x,L);return m_(I,k.targetId,F.au),F.snapshot})(n,p,g,_);const r=await r_(n.localStore,e,!0),o=new SF(e,r.Qs),a=o.ru(r.documents),l=Ka.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",s),u=o.applyChanges(a,n.isPrimaryClient,l);m_(n,t,u.au);const d=new bF(e,t,o);return n.Tu.set(e,d),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),u.snapshot}async function DF(n,e,t){const i=_e(n),s=i.Tu.get(e),r=i.Iu.get(s.targetId);if(r.length>1)return i.Iu.set(s.targetId,r.filter((o=>!ku(o,e)))),void i.Tu.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(s.targetId),i.sharedClientState.isActiveQueryTarget(s.targetId)||await Cf(i.localStore,s.targetId,!1).then((()=>{i.sharedClientState.clearQueryState(s.targetId),t&&tp(i.remoteStore,s.targetId),bf(i,s.targetId)})).catch(go)):(bf(i,s.targetId),await Cf(i.localStore,s.targetId,!0))}async function MF(n,e){const t=_e(n),i=t.Tu.get(e),s=t.Iu.get(i.targetId);t.isPrimaryClient&&s.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),tp(t.remoteStore,i.targetId))}async function VF(n,e,t){const i=qF(n);try{const s=await(function(o,a){const l=_e(o),u=Ye.now(),d=a.reduce(((_,E)=>_.add(E.key)),ke());let p,g;return l.persistence.runTransaction("Locally write mutations","readwrite",(_=>{let E=Hi(),I=ke();return l.Ns.getEntries(_,d).next((k=>{E=k,E.forEach(((D,M)=>{M.isValidDocument()||(I=I.add(D))}))})).next((()=>l.localDocuments.getOverlayedDocuments(_,E))).next((k=>{p=k;const D=[];for(const M of a){const P=zO(M,p.get(M.key).overlayedDocument);P!=null&&D.push(new _r(M.key,P,Gw(P.value.mapValue),Mi.exists(!0)))}return l.mutationQueue.addMutationBatch(_,u,D,a)})).next((k=>{g=k;const D=k.applyToLocalDocumentSet(p,I);return l.documentOverlayCache.saveOverlays(_,k.batchId,D)}))})).then((()=>({batchId:g.batchId,changes:eI(p)})))})(i.localStore,e);i.sharedClientState.addPendingMutation(s.batchId),(function(o,a,l){let u=o.Vu[o.currentUser.toKey()];u||(u=new it(Pe)),u=u.insert(a,l),o.Vu[o.currentUser.toKey()]=u})(i,s.batchId,t),await Ya(i,s.changes),await Ou(i.remoteStore)}catch(s){const r=op(s,"Failed to persist write");t.reject(r)}}async function VI(n,e){const t=_e(n);try{const i=await W2(t.localStore,e);e.targetChanges.forEach(((s,r)=>{const o=t.Au.get(r);o&&(He(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?o.hu=!0:s.modifiedDocuments.size>0?He(o.hu,14607):s.removedDocuments.size>0&&(He(o.hu,42227),o.hu=!1))})),await Ya(t,i,e)}catch(i){await go(i)}}function p_(n,e,t){const i=_e(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const s=[];i.Tu.forEach(((r,o)=>{const a=o.view.va(e);a.snapshot&&s.push(a.snapshot)})),(function(o,a){const l=_e(o);l.onlineState=a;let u=!1;l.queries.forEach(((d,p)=>{for(const g of p.Sa)g.va(a)&&(u=!0)})),u&&ap(l)})(i.eventManager,e),s.length&&i.Pu.H_(s),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function LF(n,e,t){const i=_e(n);i.sharedClientState.updateQueryState(e,"rejected",t);const s=i.Au.get(e),r=s&&s.key;if(r){let o=new it(he.comparator);o=o.insert(r,en.newNoDocument(r,ge.min()));const a=ke().add(r),l=new Mu(ge.min(),new Map,new it(Pe),o,a);await VI(i,l),i.du=i.du.remove(r),i.Au.delete(e),cp(i)}else await Cf(i.localStore,e,!1).then((()=>bf(i,e,t))).catch(go)}async function OF(n,e){const t=_e(n),i=e.batch.batchId;try{const s=await G2(t.localStore,e);OI(t,i,null),LI(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await Ya(t,s)}catch(s){await go(s)}}async function FF(n,e,t){const i=_e(n);try{const s=await(function(o,a){const l=_e(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",(u=>{let d;return l.mutationQueue.lookupMutationBatch(u,a).next((p=>(He(p!==null,37113),d=p.keys(),l.mutationQueue.removeMutationBatch(u,p)))).next((()=>l.mutationQueue.performConsistencyCheck(u))).next((()=>l.documentOverlayCache.removeOverlaysForBatchId(u,d,a))).next((()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(u,d))).next((()=>l.localDocuments.getDocuments(u,d)))}))})(i.localStore,e);OI(i,e,t),LI(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await Ya(i,s)}catch(s){await go(s)}}function LI(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function OI(n,e,t){const i=_e(n);let s=i.Vu[i.currentUser.toKey()];if(s){const r=s.get(e);r&&(t?r.reject(t):r.resolve(),s=s.remove(e)),i.Vu[i.currentUser.toKey()]=s}}function bf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Iu.get(e))n.Tu.delete(i),t&&n.Pu.yu(i,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((i=>{n.Ru.containsKey(i)||FI(n,i)}))}function FI(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(tp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),cp(n))}function m_(n,e,t){for(const i of t)i instanceof NI?(n.Ru.addReference(i.key,e),UF(n,i)):i instanceof DI?(se(lp,"Document no longer in limbo: "+i.key),n.Ru.removeReference(i.key,e),n.Ru.containsKey(i.key)||FI(n,i.key)):me(19791,{wu:i})}function UF(n,e){const t=e.key,i=t.path.canonicalString();n.du.get(t)||n.Eu.has(i)||(se(lp,"New document in limbo: "+t),n.Eu.add(i),cp(n))}function cp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new he(nt.fromString(e)),i=n.fu.next();n.Au.set(i,new RF(t)),n.du=n.du.insert(t,i),SI(n.remoteStore,new us(oi(Kd(t.path)),i,"TargetPurposeLimboResolution",Su.ce))}}async function Ya(n,e,t){const i=_e(n),s=[],r=[],o=[];i.Tu.isEmpty()||(i.Tu.forEach(((a,l)=>{o.push(i.pu(l,e,t).then((u=>{var d;if((u||t)&&i.isPrimaryClient){const p=u?!u.fromCache:(d=t==null?void 0:t.targetChanges.get(l.targetId))==null?void 0:d.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(u){s.push(u);const p=Zd.As(l.targetId,u);r.push(p)}})))})),await Promise.all(o),i.Pu.H_(s),await(async function(l,u){const d=_e(l);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",(p=>H.forEach(u,(g=>H.forEach(g.Es,(_=>d.persistence.referenceDelegate.addReference(p,g.targetId,_))).next((()=>H.forEach(g.ds,(_=>d.persistence.referenceDelegate.removeReference(p,g.targetId,_)))))))))}catch(p){if(!yo(p))throw p;se(ep,"Failed to update sequence numbers: "+p)}for(const p of u){const g=p.targetId;if(!p.fromCache){const _=d.Ms.get(g),E=_.snapshotVersion,I=_.withLastLimboFreeSnapshotVersion(E);d.Ms=d.Ms.insert(g,I)}}})(i.localStore,r))}async function BF(n,e){const t=_e(n);if(!t.currentUser.isEqual(e)){se(lp,"User change. New user:",e.toKey());const i=await wI(t.localStore,e);t.currentUser=e,(function(r,o){r.mu.forEach((a=>{a.forEach((l=>{l.reject(new ue(K.CANCELLED,o))}))})),r.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await Ya(t,i.Ls)}}function $F(n,e){const t=_e(n),i=t.Au.get(e);if(i&&i.hu)return ke().add(i.key);{let s=ke();const r=t.Iu.get(e);if(!r)return s;for(const o of r){const a=t.Tu.get(o);s=s.unionWith(a.view.nu)}return s}}function UI(n){const e=_e(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=VI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=$F.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=LF.bind(null,e),e.Pu.H_=IF.bind(null,e.eventManager),e.Pu.yu=CF.bind(null,e.eventManager),e}function qF(n){const e=_e(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=OF.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=FF.bind(null,e),e}class Kc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Vu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return H2(this.persistence,new B2,e.initialUser,this.serializer)}Cu(e){return new EI(jd.mi,this.serializer)}Du(e){return new Q2}async terminate(){var e,t;(e=this.gcScheduler)==null||e.stop(),(t=this.indexBackfillerScheduler)==null||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Kc.provider={build:()=>new Kc};class HF extends Kc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){He(this.persistence.referenceDelegate instanceof Gc,46915);const i=this.persistence.referenceDelegate.garbageCollector;return new A2(i,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?mn.withCacheSize(this.cacheSizeBytes):mn.DEFAULT;return new EI((i=>Gc.mi(i,t)),this.serializer)}}class Rf{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>p_(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=BF.bind(null,this.syncEngine),await _F(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new TF})()}createDatastore(e){const t=Vu(e.databaseInfo.databaseId),i=(function(r){return new tF(r)})(e.databaseInfo);return(function(r,o,a,l){return new rF(r,o,a,l)})(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return(function(i,s,r,o,a){return new aF(i,s,r,o,a)})(this.localStore,this.datastore,e.asyncQueue,(t=>p_(this.syncEngine,t,0)),(function(){return l_.v()?new l_:new X2})())}createSyncEngine(e,t){return(function(s,r,o,a,l,u,d){const p=new PF(s,r,o,a,l,u);return d&&(p.gu=!0),p})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await(async function(s){const r=_e(s);se(cr,"RemoteStore shutting down."),r.Ea.add(5),await za(r),r.Aa.shutdown(),r.Ra.set("Unknown")})(this.remoteStore),(e=this.datastore)==null||e.terminate(),(t=this.eventManager)==null||t.terminate()}}Rf.provider={build:()=>new Rf};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):qi("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ps="FirestoreClient";class WF{constructor(e,t,i,s,r){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=s,this.user=jt.UNAUTHENTICATED,this.clientId=Ud.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=r,this.authCredentials.start(i,(async o=>{se(Ps,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(i,(o=>(se(Ps,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ts;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=op(t,"Failed to shutdown persistence");e.reject(i)}})),e.promise}}async function Th(n,e){n.asyncQueue.verifyOperationInProgress(),se(Ps,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener((async s=>{i.isEqual(s)||(await wI(e.localStore,s),i=s)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function g_(n,e){n.asyncQueue.verifyOperationInProgress();const t=await KF(n);se(Ps,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((i=>u_(e.remoteStore,i))),n.setAppCheckTokenChangeListener(((i,s)=>u_(e.remoteStore,s))),n._onlineComponents=e}async function KF(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){se(Ps,"Using user provided OfflineComponentProvider");try{await Th(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(s){return s.name==="FirebaseError"?s.code===K.FAILED_PRECONDITION||s.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11})(t))throw t;io("Error using user provided cache. Falling back to memory cache: "+t),await Th(n,new Kc)}}else se(Ps,"Using default OfflineComponentProvider"),await Th(n,new HF(void 0));return n._offlineComponents}async function BI(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(se(Ps,"Using user provided OnlineComponentProvider"),await g_(n,n._uninitializedComponentsProvider._online)):(se(Ps,"Using default OnlineComponentProvider"),await g_(n,new Rf))),n._onlineComponents}function zF(n){return BI(n).then((e=>e.syncEngine))}async function YF(n){const e=await BI(n),t=e.eventManager;return t.onListen=kF.bind(null,e.syncEngine),t.onUnlisten=DF.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xF.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=MF.bind(null,e.syncEngine),t}function JF(n,e,t={}){const i=new Ts;return n.asyncQueue.enqueueAndForget((async()=>(function(r,o,a,l,u){const d=new GF({next:g=>{d.Nu(),o.enqueueAndForget((()=>wF(r,p)));const _=g.docs.has(a);!_&&g.fromCache?u.reject(new ue(K.UNAVAILABLE,"Failed to get document because the client is offline.")):_&&g.fromCache&&l&&l.source==="server"?u.reject(new ue(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):u.resolve(g)},error:g=>u.reject(g)}),p=new AF(Kd(a.path),d,{includeMetadataChanges:!0,qa:!0});return EF(r,p)})(await YF(n),n.asyncQueue,e,t,i))),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $I(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y_=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI="firestore.googleapis.com",__=!0;class v_{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new ue(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=qI,this.ssl=__}else this.host=e.host,this.ssl=e.ssl??__;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=TI;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<I2)throw new ue(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}oO("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=$I(e.experimentalLongPollingOptions??{}),(function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new ue(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(i,s){return i.timeoutSeconds===s.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class up{constructor(e,t,i,s){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new v_({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ue(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new ue(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new v_(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(i){if(!i)return new JL;switch(i.type){case"firstParty":return new ZL(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ue(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const i=y_.get(t);i&&(se("ComponentProvider","Removing Datastore"),y_.delete(t),i.terminate())})(this),Promise.resolve()}}function QF(n,e,t,i={}){var u;n=Ta(n,up);const s=pr(e),r=n._getSettings(),o={...r,emulatorOptions:n._getEmulatorOptions()},a=`${e}:${t}`;s&&(Id(`https://${a}`),Cd("Firestore",!0)),r.host!==qI&&r.host!==a&&io("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l={...r,host:a,ssl:s,emulatorOptions:i};if(!sr(l,o)&&(n._setSettings(l),i.mockUserToken)){let d,p;if(typeof i.mockUserToken=="string")d=i.mockUserToken,p=jt.MOCK_USER;else{d=$E(i.mockUserToken,(u=n._app)==null?void 0:u.options.projectId);const g=i.mockUserToken.sub||i.mockUserToken.user_id;if(!g)throw new ue(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new jt(g)}n._authCredentials=new QL(new Dw(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hp{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new hp(this.firestore,e,this._query)}}class kt{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ba(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kt(this.firestore,e,this._key)}toJSON(){return{type:kt._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,i){if(Ga(t,kt._jsonSchema))return new kt(e,i||null,new he(nt.fromString(t.referencePath)))}}kt._jsonSchemaVersion="firestore/documentReference/1.0",kt._jsonSchema={type:yt("string",kt._jsonSchemaVersion),referencePath:yt("string")};class ba extends hp{constructor(e,t,i){super(e,t,Kd(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kt(this.firestore,null,new he(e))}withConverter(e){return new ba(this.firestore,e,this._path)}}function HI(n,e,...t){if(n=hn(n),arguments.length===1&&(e=Ud.newId()),rO("doc","path",e),n instanceof up){const i=nt.fromString(e,...t);return Dy(i),new kt(n,null,new he(i))}{if(!(n instanceof kt||n instanceof ba))throw new ue(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(nt.fromString(e,...t));return Dy(i),new kt(n.firestore,n instanceof ba?n.converter:null,new he(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_="AsyncQueue";class E_{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new CI(this,"async_queue_retry"),this._c=()=>{const i=vh();i&&se(T_,"Visibility state changed to "+i.visibilityState),this.M_.w_()},this.ac=e;const t=vh();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=vh();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Ts;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!yo(e))throw e;se(T_,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((i=>{throw this.nc=i,this.rc=!1,qi("INTERNAL UNHANDLED ERROR: ",w_(i)),i})).then((i=>(this.rc=!1,i))))));return this.ac=t,t}enqueueAfterDelay(e,t,i){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const s=rp.createAndSchedule(this,e,t,i,(r=>this.hc(r)));return this.tc.push(s),s}uc(){this.nc&&me(47125,{Pc:w_(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,i)=>t.targetTimeMs-i.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function w_(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}class fp extends up{constructor(e,t,i,s){super(e,t,i,s),this.type="firestore",this._queue=new E_,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new E_(e),this._firestoreClient=void 0,await e}}}function XF(n,e){const t=typeof n=="object"?n:bd(),i=typeof n=="string"?n:Oc,s=wu(t,"firestore").getImmediate({identifier:i});if(!s._initialized){const r=FE("firestore");r&&QF(s,...r)}return s}function GI(n){if(n._terminated)throw new ue(K.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||jF(n),n._firestoreClient}function jF(n){var i,s,r;const e=n._freezeSettings(),t=(function(a,l,u,d){return new yO(a,l,u,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,$I(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)})(n._databaseId,((i=n._app)==null?void 0:i.options.appId)||"",n._persistenceKey,e);n._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((r=e.localCache)!=null&&r._onlineComponentProvider)&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new WF(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(a){const l=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Mn(Gt.fromBase64String(e))}catch(t){throw new ue(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Mn(Gt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Mn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ga(e,Mn._jsonSchema))return Mn.fromBase64String(e.bytes)}}Mn._jsonSchemaVersion="firestore/bytes/1.0",Mn._jsonSchema={type:yt("string",Mn._jsonSchemaVersion),bytes:yt("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dp{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new ue(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Bt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WI{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new ue(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new ue(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Pe(this._lat,e._lat)||Pe(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:li._jsonSchemaVersion}}static fromJSON(e){if(Ga(e,li._jsonSchema))return new li(e.latitude,e.longitude)}}li._jsonSchemaVersion="firestore/geoPoint/1.0",li._jsonSchema={type:yt("string",li._jsonSchemaVersion),latitude:yt("number"),longitude:yt("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ci{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(i,s){if(i.length!==s.length)return!1;for(let r=0;r<i.length;++r)if(i[r]!==s[r])return!1;return!0})(this._values,e._values)}toJSON(){return{type:ci._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ga(e,ci._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new ci(e.vectorValues);throw new ue(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}ci._jsonSchemaVersion="firestore/vectorValue/1.0",ci._jsonSchema={type:yt("string",ci._jsonSchemaVersion),vectorValues:yt("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZF=/^__.*__$/;class eU{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new _r(e,this.data,this.fieldMask,t,this.fieldTransforms):new Wa(e,this.data,t,this.fieldTransforms)}}function KI(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw me(40011,{Ac:n})}}class pp{constructor(e,t,i,s,r,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=s,r===void 0&&this.Rc(),this.fieldTransforms=r||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new pp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.gc(e),i}yc(e){var s;const t=(s=this.path)==null?void 0:s.child(e),i=this.Vc({path:t,fc:!1});return i.Rc(),i}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(KI(this.Ac)&&ZF.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class tU{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||Vu(e)}Cc(e,t,i,s=!1){return new pp({Ac:e,methodName:t,Dc:i,path:Bt.emptyPath(),fc:!1,bc:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function nU(n){const e=n._freezeSettings(),t=Vu(n._databaseId);return new tU(n._databaseId,!!e.ignoreUndefinedProperties,t)}function iU(n,e,t,i,s,r={}){const o=n.Cc(r.merge||r.mergeFields?2:0,e,t,s);QI("Data must be an object, but it was:",o,i);const a=YI(i,o);let l,u;if(r.merge)l=new Gn(o.fieldMask),u=o.fieldTransforms;else if(r.mergeFields){const d=[];for(const p of r.mergeFields){const g=sU(e,p,t);if(!o.contains(g))throw new ue(K.INVALID_ARGUMENT,`Field '${g}' is specified in your field mask but missing from your input data.`);oU(d,g)||d.push(g)}l=new Gn(d),u=o.fieldTransforms.filter((p=>l.covers(p.field)))}else l=null,u=o.fieldTransforms;return new eU(new Dn(a),l,u)}function zI(n,e){if(JI(n=hn(n)))return QI("Unsupported field value:",e,n),YI(n,e);if(n instanceof WI)return(function(i,s){if(!KI(s.Ac))throw s.Sc(`${i._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Sc(`${i._methodName}() is not currently supported inside arrays`);const r=i._toFieldTransform(s);r&&s.fieldTransforms.push(r)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(i,s){const r=[];let o=0;for(const a of i){let l=zI(a,s.wc(o));l==null&&(l={nullValue:"NULL_VALUE"}),r.push(l),o++}return{arrayValue:{values:r}}})(n,e)}return(function(i,s){if((i=hn(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return $O(s.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const r=Ye.fromDate(i);return{timestampValue:Hc(s.serializer,r)}}if(i instanceof Ye){const r=new Ye(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:Hc(s.serializer,r)}}if(i instanceof li)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Mn)return{bytesValue:dI(s.serializer,i._byteString)};if(i instanceof kt){const r=s.databaseId,o=i.firestore._databaseId;if(!o.isEqual(r))throw s.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${r.projectId}/${r.database}`);return{referenceValue:Qd(i.firestore._databaseId||s.databaseId,i._key.path)}}if(i instanceof ci)return(function(o,a){return{mapValue:{fields:{[qw]:{stringValue:Hw},[Fc]:{arrayValue:{values:o.toArray().map((u=>{if(typeof u!="number")throw a.Sc("VectorValues must only contain numeric values.");return zd(a.serializer,u)}))}}}}}})(i,s);throw s.Sc(`Unsupported field value: ${Bd(i)}`)})(n,e)}function YI(n,e){const t={};return Lw(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):gr(n,((i,s)=>{const r=zI(s,e.mc(i));r!=null&&(t[i]=r)})),{mapValue:{fields:t}}}function JI(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Ye||n instanceof li||n instanceof Mn||n instanceof kt||n instanceof WI||n instanceof ci)}function QI(n,e,t){if(!JI(t)||!Mw(t)){const i=Bd(t);throw i==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+i)}}function sU(n,e,t){if((e=hn(e))instanceof dp)return e._internalPath;if(typeof e=="string")return XI(n,e);throw zc("Field path arguments must be of type string or ",n,!1,void 0,t)}const rU=new RegExp("[~\\*/\\[\\]]");function XI(n,e,t){if(e.search(rU)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new dp(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function zc(n,e,t,i,s){const r=i&&!i.isEmpty(),o=s!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(r||o)&&(l+=" (found",r&&(l+=` in field ${i}`),o&&(l+=` in document ${s}`),l+=")"),new ue(K.INVALID_ARGUMENT,a+n+l)}function oU(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(e,t,i,s,r){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=s,this._converter=r}get id(){return this._key.path.lastSegment()}get ref(){return new kt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new aU(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(ZI("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class aU extends jI{data(){return super.data()}}function ZI(n,e){return typeof e=="string"?XI(n,e):e instanceof dp?e._internalPath:e._delegate._internalPath}class lU{convertValue(e,t="none"){switch(bs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return dt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ss(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw me(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return gr(e,((s,r)=>{i[s]=this.convertValue(r,t)})),i}convertVectorValue(e){var i,s,r;const t=(r=(s=(i=e.fields)==null?void 0:i[Fc].arrayValue)==null?void 0:s.values)==null?void 0:r.map((o=>dt(o.doubleValue)));return new ci(t)}convertGeoPoint(e){return new li(dt(e.latitude),dt(e.longitude))}convertArray(e,t){return(e.values||[]).map((i=>this.convertValue(i,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Ru(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(wa(e));default:return null}}convertTimestamp(e){const t=As(e);return new Ye(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=nt.fromString(e);He(vI(i),9688,{name:e});const s=new Ia(i.get(1),i.get(3)),r=new he(i.popFirst(5));return s.isEqual(t)||qi(`Document ${r} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cU(n,e,t){let i;return i=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,i}class Uo{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Zs extends jI{constructor(e,t,i,s,r,o){super(e,t,i,s,o),this._firestore=e,this._firestoreImpl=e,this.metadata=r}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Ql(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(ZI("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=Zs._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}Zs._jsonSchemaVersion="firestore/documentSnapshot/1.0",Zs._jsonSchema={type:yt("string",Zs._jsonSchemaVersion),bundleSource:yt("string","DocumentSnapshot"),bundleName:yt("string"),bundle:yt("string")};class Ql extends Zs{data(e={}){return super.data(e)}}class ta{constructor(e,t,i,s){this._firestore=e,this._userDataWriter=t,this._snapshot=s,this.metadata=new Uo(s.hasPendingWrites,s.fromCache),this.query=i}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((i=>{e.call(t,new Ql(this._firestore,this._userDataWriter,i.key,i,new Uo(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new ue(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(s,r){if(s._snapshot.oldDocs.isEmpty()){let o=0;return s._snapshot.docChanges.map((a=>{const l=new Ql(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}}))}{let o=s._snapshot.oldDocs;return s._snapshot.docChanges.filter((a=>r||a.type!==3)).map((a=>{const l=new Ql(s._firestore,s._userDataWriter,a.doc.key,a.doc,new Uo(s._snapshot.mutatedKeys.has(a.doc.key),s._snapshot.fromCache),s.query.converter);let u=-1,d=-1;return a.type!==0&&(u=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:uU(a.type),doc:l,oldIndex:u,newIndex:d}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new ue(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=ta._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ud.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],i=[],s=[];return this.docs.forEach((r=>{r._document!==null&&(t.push(r._document),i.push(this._userDataWriter.convertObjectMap(r._document.data.value.mapValue.fields,"previous")),s.push(r.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function uU(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return me(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hU(n){n=Ta(n,kt);const e=Ta(n.firestore,fp);return JF(GI(e),n._key).then((t=>mU(e,n,t)))}ta._jsonSchemaVersion="firestore/querySnapshot/1.0",ta._jsonSchema={type:yt("string",ta._jsonSchemaVersion),bundleSource:yt("string","QuerySnapshot"),bundleName:yt("string"),bundle:yt("string")};class fU extends lU{constructor(e){super(),this.firestore=e}convertBytes(e){return new Mn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kt(this.firestore,null,t)}}function dU(n,e,t){n=Ta(n,kt);const i=Ta(n.firestore,fp),s=cU(n.converter,e,t);return pU(i,[iU(nU(i),"setDoc",n._key,s,n.converter!==null,t).toMutation(n._key,Mi.none())])}function pU(n,e){return(function(i,s){const r=new Ts;return i.asyncQueue.enqueueAndForget((async()=>VF(await zF(i),s,r))),r.promise})(GI(n),e)}function mU(n,e,t){const i=t.docs.get(e._key),s=new fU(n);return new Zs(n,s,e._key,i,new Uo(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(s){mo=s})(mr),rr(new Is("firestore",((i,{instanceIdentifier:s,options:r})=>{const o=i.getProvider("app").getImmediate(),a=new fp(new XL(i.getProvider("auth-internal")),new eO(o,i.getProvider("app-check-internal")),(function(u,d){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new ue(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Ia(u.options.projectId,d)})(o,s),o);return r={useFetchStreams:t,...r},a._setSettings(r),a}),"PUBLIC").setMultipleInstances(!0)),si(Py,ky,e),si(Py,ky,"esm2020")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eC="firebasestorage.googleapis.com",gU="storageBucket",yU=120*1e3,_U=600*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yi extends mi{constructor(e,t,i=0){super(Eh(e),`Firebase Storage: ${t} (${Eh(e)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,yi.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Eh(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var di;(function(n){n.UNKNOWN="unknown",n.OBJECT_NOT_FOUND="object-not-found",n.BUCKET_NOT_FOUND="bucket-not-found",n.PROJECT_NOT_FOUND="project-not-found",n.QUOTA_EXCEEDED="quota-exceeded",n.UNAUTHENTICATED="unauthenticated",n.UNAUTHORIZED="unauthorized",n.UNAUTHORIZED_APP="unauthorized-app",n.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",n.INVALID_CHECKSUM="invalid-checksum",n.CANCELED="canceled",n.INVALID_EVENT_NAME="invalid-event-name",n.INVALID_URL="invalid-url",n.INVALID_DEFAULT_BUCKET="invalid-default-bucket",n.NO_DEFAULT_BUCKET="no-default-bucket",n.CANNOT_SLICE_BLOB="cannot-slice-blob",n.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",n.NO_DOWNLOAD_URL="no-download-url",n.INVALID_ARGUMENT="invalid-argument",n.INVALID_ARGUMENT_COUNT="invalid-argument-count",n.APP_DELETED="app-deleted",n.INVALID_ROOT_OPERATION="invalid-root-operation",n.INVALID_FORMAT="invalid-format",n.INTERNAL_ERROR="internal-error",n.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(di||(di={}));function Eh(n){return"storage/"+n}function vU(){const n="An unknown error occurred, please check the error payload for server response.";return new yi(di.UNKNOWN,n)}function TU(){return new yi(di.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function EU(){return new yi(di.CANCELED,"User canceled the upload/download.")}function wU(n){return new yi(di.INVALID_URL,"Invalid URL '"+n+"'.")}function IU(n){return new yi(di.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}function I_(n){return new yi(di.INVALID_ARGUMENT,n)}function tC(){return new yi(di.APP_DELETED,"The Firebase app was deleted.")}function CU(n){return new yi(di.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let i;try{i=Wn.makeFromUrl(e,t)}catch{return new Wn(e,"")}if(i.path==="")return i;throw IU(e)}static makeFromUrl(e,t){let i=null;const s="([A-Za-z0-9.\\-_]+)";function r(x){x.path.charAt(x.path.length-1)==="/"&&(x.path_=x.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+s+o,"i"),l={bucket:1,path:3};function u(x){x.path_=decodeURIComponent(x.path)}const d="v[A-Za-z0-9_]+",p=t.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",_=new RegExp(`^https?://${p}/${d}/b/${s}/o${g}`,"i"),E={bucket:1,path:3},I=t===eC?"(?:storage.googleapis.com|storage.cloud.google.com)":t,k="([^?#]*)",D=new RegExp(`^https?://${I}/${s}/${k}`,"i"),P=[{regex:a,indices:l,postModify:r},{regex:_,indices:E,postModify:u},{regex:D,indices:{bucket:1,path:2},postModify:u}];for(let x=0;x<P.length;x++){const L=P[x],F=L.regex.exec(e);if(F){const R=F[L.indices.bucket];let T=F[L.indices.path];T||(T=""),i=new Wn(R,T),L.postModify(i);break}}if(i==null)throw wU(e);return i}}class AU{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function SU(n,e,t){let i=1,s=null,r=null,o=!1,a=0;function l(){return a===2}let u=!1;function d(...k){u||(u=!0,e.apply(null,k))}function p(k){s=setTimeout(()=>{s=null,n(_,l())},k)}function g(){r&&clearTimeout(r)}function _(k,...D){if(u){g();return}if(k){g(),d.call(null,k,...D);return}if(l()||o){g(),d.call(null,k,...D);return}i<64&&(i*=2);let P;a===1?(a=2,P=0):P=(i+Math.random())*1e3,p(P)}let E=!1;function I(k){E||(E=!0,g(),!u&&(s!==null?(k||(a=2),clearTimeout(s),p(0)):k||(a=1)))}return p(0),r=setTimeout(()=>{o=!0,I(!0)},t),I}function bU(n){n(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RU(n){return n!==void 0}function C_(n,e,t,i){if(i<e)throw I_(`Invalid value for '${n}'. Expected ${e} or greater.`);if(i>t)throw I_(`Invalid value for '${n}'. Expected ${t} or less.`)}function PU(n){const e=encodeURIComponent;let t="?";for(const i in n)if(n.hasOwnProperty(i)){const s=e(i)+"="+e(n[i]);t=t+s+"&"}return t=t.slice(0,-1),t}var Yc;(function(n){n[n.NO_ERROR=0]="NO_ERROR",n[n.NETWORK_ERROR=1]="NETWORK_ERROR",n[n.ABORT=2]="ABORT"})(Yc||(Yc={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kU(n,e){const t=n>=500&&n<600,s=[408,429].indexOf(n)!==-1,r=e.indexOf(n)!==-1;return t||s||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xU{constructor(e,t,i,s,r,o,a,l,u,d,p,g=!0,_=!1){this.url_=e,this.method_=t,this.headers_=i,this.body_=s,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=l,this.timeout_=u,this.progressCallback_=d,this.connectionFactory_=p,this.retry=g,this.isUsingEmulator=_,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((E,I)=>{this.resolve_=E,this.reject_=I,this.start_()})}start_(){const e=(i,s)=>{if(s){i(!1,new Pl(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=a=>{const l=a.loaded,u=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(l,u)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const a=r.getErrorCode()===Yc.NO_ERROR,l=r.getStatus();if(!a||kU(l,this.additionalRetryCodes_)&&this.retry){const d=r.getErrorCode()===Yc.ABORT;i(!1,new Pl(!1,null,d));return}const u=this.successCodes_.indexOf(l)!==-1;i(!0,new Pl(u,r))})},t=(i,s)=>{const r=this.resolve_,o=this.reject_,a=s.connection;if(s.wasSuccessCode)try{const l=this.callback_(a,a.getResponse());RU(l)?r(l):r()}catch(l){o(l)}else if(a!==null){const l=vU();l.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,l)):o(l)}else if(s.canceled){const l=this.appDelete_?tC():EU();o(l)}else{const l=TU();o(l)}};this.canceled_?t(!1,new Pl(!1,null,!0)):this.backoffId_=SU(e,t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&bU(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Pl{constructor(e,t,i){this.wasSuccessCode=e,this.connection=t,this.canceled=!!i}}function NU(n,e){e!==null&&e.length>0&&(n.Authorization="Firebase "+e)}function DU(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function MU(n,e){e&&(n["X-Firebase-GMPID"]=e)}function VU(n,e){e!==null&&(n["X-Firebase-AppCheck"]=e)}function LU(n,e,t,i,s,r,o=!0,a=!1){const l=PU(n.urlParams),u=n.url+l,d=Object.assign({},n.headers);return MU(d,e),NU(d,t),DU(d,r),VU(d,i),new xU(u,n.method,d,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,s,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OU(n){if(n.length===0)return null;const e=n.lastIndexOf("/");return e===-1?"":n.slice(0,e)}function FU(n){const e=n.lastIndexOf("/",n.length-2);return e===-1?n:n.slice(e+1)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jc{constructor(e,t){this._service=e,t instanceof Wn?this._location=t:this._location=Wn.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Jc(e,t)}get root(){const e=new Wn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return FU(this._location.path)}get storage(){return this._service}get parent(){const e=OU(this._location.path);if(e===null)return null;const t=new Wn(this._location.bucket,e);return new Jc(this._service,t)}_throwIfRoot(e){if(this._location.path==="")throw CU(e)}}function A_(n,e){const t=e==null?void 0:e[gU];return t==null?null:Wn.makeFromBucketSpec(t,n)}function UU(n,e,t,i={}){n.host=`${e}:${t}`;const s=pr(e);s&&(Id(`https://${n.host}/b`),Cd("Storage",!0)),n._isUsingEmulator=!0,n._protocol=s?"https":"http";const{mockUserToken:r}=i;r&&(n._overrideAuthToken=typeof r=="string"?r:$E(r,n.app.options.projectId))}class BU{constructor(e,t,i,s,r,o=!1){this.app=e,this._authProvider=t,this._appCheckProvider=i,this._url=s,this._firebaseVersion=r,this._isUsingEmulator=o,this._bucket=null,this._host=eC,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=yU,this._maxUploadRetryTime=_U,this._requests=new Set,s!=null?this._bucket=Wn.makeFromBucketSpec(s,this._host):this._bucket=A_(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=Wn.makeFromBucketSpec(this._url,e):this._bucket=A_(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){C_("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const t=await e.getToken();if(t!==null)return t.accessToken}return null}async _getAppCheckToken(){if(_n(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Jc(this,e)}_makeRequest(e,t,i,s,r=!0){if(this._deleted)return new AU(tC());{const o=LU(e,this._appId,i,s,t,this._firebaseVersion,r,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,t){const[i,s]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,t,i,s).getPromise()}}const S_="@firebase/storage",b_="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nC="storage";function $U(n=bd(),e){n=hn(n);const i=wu(n,nC).getImmediate({identifier:e}),s=FE("storage");return s&&qU(i,...s),i}function qU(n,e,t,i={}){UU(n,e,t,i)}function HU(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),i=n.getProvider("auth-internal"),s=n.getProvider("app-check-internal");return new BU(t,i,s,e,mr)}function GU(){rr(new Is(nC,HU,"PUBLIC").setMultipleInstances(!0)),si(S_,b_,""),si(S_,b_,"esm2020")}GU();const iC={apiKey:"AIzaSyDBmw23uE_yM7NZ0YKEydWmAvUsuwX-VEI",authDomain:"chunkflow-475417.firebaseapp.com",projectId:"chunkflow-475417",storageBucket:"chunkflow-475417.firebasestorage.app",messagingSenderId:"898500597511",appId:"1:898500597511:web:a9f0b29e7a8112328457a2"};function WU(){const n=["apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId"];for(const e of n)if(!iC[e])return console.warn(`Firebase config missing: ${e}`),!1;return!0}let Bo=null,Ht=null,co=null,sC=null;if(WU())try{Bo=GE(iC),Ht=zL(Bo),co=XF(Bo),sC=$U(Bo),console.log("Firebase initialized successfully")}catch(n){console.error("Firebase initialization error:",n)}else console.warn("Firebase not initialized. Add Firebase config to .env.local to enable user accounts and data persistence.");async function rC(n,e,t){if(!Ht)throw new Error("Firebase Auth is not initialized");const i=await PV(Ht,n,e);return t&&i.user&&await NV(i.user,{displayName:t}),i}async function oC(n,e){if(!Ht)throw new Error("Firebase Auth is not initialized");return await kV(Ht,n,e)}async function aC(){if(!Ht)throw new Error("Firebase Auth is not initialized");const n=new Pi;return n.addScope("profile"),n.addScope("email"),await nL(Ht,n)}async function lC(){if(!Ht)throw new Error("Firebase Auth is not initialized");await LV(Ht)}async function cC(n){if(!Ht)throw new Error("Firebase Auth is not initialized");await RV(Ht,n)}function uC(){return(Ht==null?void 0:Ht.currentUser)||null}function hC(n){return Ht?VV(Ht,n):(console.warn("Firebase Auth is not initialized"),()=>{})}async function KU(n,e){if(!co)throw new Error("Firestore is not initialized");const t=HI(co,"users",n),i=Ye.now();await dU(t,{...e,uid:n,updatedAt:i,createdAt:e.createdAt||i},{merge:!0})}async function fC(n){if(!co)throw new Error("Firestore is not initialized");const e=HI(co,"users",n),t=await hU(e);return t.exists()?t.data():null}const zU=Object.freeze(Object.defineProperty({__proto__:null,get app(){return Bo},get auth(){return Ht},get db(){return co},getCurrentUser:uC,getUserProfile:fC,onAuthChange:hC,resetPassword:cC,saveUserProfile:KU,signInWithEmail:oC,signInWithGoogle:aC,signOutUser:lC,signUpWithEmail:rC,get storage(){return sC}},Symbol.toStringTag,{value:"Module"})),YU=ks({name:"AuthModal",props:{show:{type:Boolean,required:!0},initialMode:{type:String,default:"login"}},emits:["close","authenticated"],setup(n,{emit:e}){const t=re(n.initialMode),i=re(""),s=re(""),r=re(""),o=re(""),a=re(""),l=re(!1),u=re(""),d=Rt(()=>{switch(t.value){case"signup":return"Create Account";case"reset":return"Reset Password";default:return"Sign In"}}),p=Rt(()=>{if(l.value)return"Processing...";switch(t.value){case"signup":return"Sign Up";case"reset":return"Send Reset Email";default:return"Sign In"}});function g(){i.value="",s.value="",r.value="",o.value="",a.value="",u.value=""}function _(D){t.value=D,g()}async function E(){if(a.value="",u.value="",!i.value||!i.value.includes("@")){a.value="Please enter a valid email address";return}if(t.value==="reset"){try{l.value=!0,await cC(i.value),u.value="Password reset email sent! Check your inbox.",setTimeout(()=>_("login"),3e3)}catch(D){a.value=D.message||"Failed to send reset email"}finally{l.value=!1}return}if(!s.value||s.value.length<6){a.value="Password must be at least 6 characters";return}if(t.value==="signup"){if(s.value!==r.value){a.value="Passwords do not match";return}if(!o.value){a.value="Please enter your name";return}}try{l.value=!0,t.value==="signup"?await rC(i.value,s.value,o.value):await oC(i.value,s.value),e("authenticated"),e("close"),g()}catch(D){D.code==="auth/email-already-in-use"?a.value="Email already in use. Try signing in instead.":D.code==="auth/invalid-credential"?a.value="Invalid email or password":D.code==="auth/user-not-found"?a.value="No account found with this email":D.code==="auth/wrong-password"?a.value="Incorrect password":a.value=D.message||"Authentication failed"}finally{l.value=!1}}async function I(){a.value="";try{l.value=!0,await aC(),e("authenticated"),e("close"),g()}catch(D){D.code==="auth/popup-closed-by-user"?a.value="Sign-in cancelled":a.value=D.message||"Google sign-in failed"}finally{l.value=!1}}function k(){e("close"),g()}return{mode:t,email:i,password:s,confirmPassword:r,displayName:o,error:a,success:u,loading:l,title:d,buttonText:p,switchMode:_,handleEmailAuth:E,handleGoogleAuth:I,close:k}},template:`
    <div v-if="show" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50" @click.self="close">
      <div class="bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800">{{ title }}</h2>
          <button @click="close" class="text-gray-400 hover:text-gray-600 text-2xl leading-none">&times;</button>
        </div>

        <!-- Error Message -->
        <div v-if="error" class="mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded">
          {{ error }}
        </div>

        <!-- Success Message -->
        <div v-if="success" class="mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded">
          {{ success }}
        </div>

        <!-- Email/Password Form -->
        <form @submit.prevent="handleEmailAuth" class="space-y-4">
          <!-- Name (signup only) -->
          <div v-if="mode === 'signup'">
            <label class="block text-sm font-medium text-gray-700 mb-1">Full Name</label>
            <input
              v-model="displayName"
              type="text"
              placeholder="Enter your name"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              :disabled="loading"
            />
          </div>

          <!-- Email -->
          <div>
            <label class="block text-sm font-medium text-gray-700 mb-1">Email</label>
            <input
              v-model="email"
              type="email"
              placeholder="you@example.com"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              :disabled="loading"
            />
          </div>

          <!-- Password (not for reset) -->
          <div v-if="mode !== 'reset'">
            <label class="block text-sm font-medium text-gray-700 mb-1">Password</label>
            <input
              v-model="password"
              type="password"
              placeholder="Enter password (6+ characters)"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              :disabled="loading"
            />
          </div>

          <!-- Confirm Password (signup only) -->
          <div v-if="mode === 'signup'">
            <label class="block text-sm font-medium text-gray-700 mb-1">Confirm Password</label>
            <input
              v-model="confirmPassword"
              type="password"
              placeholder="Re-enter password"
              class="w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"
              :disabled="loading"
            />
          </div>

          <!-- Submit Button -->
          <button
            type="submit"
            class="w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium"
            :disabled="loading"
          >
            {{ buttonText }}
          </button>
        </form>

        <!-- Divider -->
        <div class="my-6 flex items-center">
          <div class="flex-1 border-t border-gray-300"></div>
          <span class="px-4 text-sm text-gray-500">or</span>
          <div class="flex-1 border-t border-gray-300"></div>
        </div>

        <!-- Google Sign In -->
        <button
          @click="handleGoogleAuth"
          class="w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition flex items-center justify-center gap-2 font-medium"
          :disabled="loading"
        >
          <svg class="w-5 h-5" viewBox="0 0 24 24">
            <path fill="#4285F4" d="M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z"/>
            <path fill="#34A853" d="M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z"/>
            <path fill="#FBBC05" d="M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z"/>
            <path fill="#EA4335" d="M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z"/>
          </svg>
          Continue with Google
        </button>

        <!-- Mode Switchers -->
        <div class="mt-6 text-center text-sm">
          <div v-if="mode === 'login'">
            <p class="text-gray-600">
              Don't have an account?
              <button @click="switchMode('signup')" class="text-blue-600 hover:underline font-medium">Sign up</button>
            </p>
            <button @click="switchMode('reset')" class="text-blue-600 hover:underline font-medium mt-2">
              Forgot password?
            </button>
          </div>
          <div v-else-if="mode === 'signup'">
            <p class="text-gray-600">
              Already have an account?
              <button @click="switchMode('login')" class="text-blue-600 hover:underline font-medium">Sign in</button>
            </p>
          </div>
          <div v-else>
            <button @click="switchMode('login')" class="text-blue-600 hover:underline font-medium">
              Back to sign in
            </button>
          </div>
        </div>
      </div>
    </div>
  `}),JU=ks({name:"UserProfile",props:{user:{type:Object,required:!0},show:{type:Boolean,required:!0}},emits:["close","signedOut"],setup(n,{emit:e}){const t=re(null),i=re(!0),s=re(""),r=Rt(()=>{var I,k;return((I=n.user)==null?void 0:I.displayName)||((k=t.value)==null?void 0:k.displayName)||"User"}),o=Rt(()=>{var I;return((I=n.user)==null?void 0:I.email)||"No email"}),a=Rt(()=>{var I,k;return((k=(I=t.value)==null?void 0:I.subscription)==null?void 0:k.plan)||"free"}),l=Rt(()=>{var I,k;return((k=(I=t.value)==null?void 0:I.subscription)==null?void 0:k.status)||"active"}),u=Rt(()=>{var I;return((I=t.value)==null?void 0:I.usage)||{audioBooksCreated:0,audioMinutesGenerated:0,imagesGenerated:0,storageUsedMB:0}}),d=Rt(()=>{switch(a.value){case"pro":return"bg-purple-100 text-purple-800";case"basic":return"bg-blue-100 text-blue-800";case"enterprise":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}}),p=Rt(()=>{switch(l.value){case"active":return"bg-green-100 text-green-800";case"canceled":return"bg-orange-100 text-orange-800";case"expired":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}});async function g(){if(n.user)try{i.value=!0,s.value="";const I=await fC(n.user.uid);t.value=I}catch(I){console.error("Failed to load user profile:",I),s.value="Failed to load profile data"}finally{i.value=!1}}async function _(){try{await lC(),e("signedOut"),e("close")}catch(I){console.error("Sign out failed:",I),s.value="Failed to sign out"}}function E(){e("close")}return pi(()=>{n.user&&g()}),{userProfile:t,loading:i,error:s,displayName:r,email:o,subscriptionPlan:a,subscriptionStatus:l,usage:u,planBadgeColor:d,statusBadgeColor:p,handleSignOut:_,close:E}},template:`
    <div v-if="show" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50" @click.self="close">
      <div class="bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto">
        <!-- Header -->
        <div class="flex justify-between items-center mb-6">
          <h2 class="text-2xl font-bold text-gray-800">Profile</h2>
          <button @click="close" class="text-gray-400 hover:text-gray-600 text-2xl leading-none">&times;</button>
        </div>

        <!-- Loading State -->
        <div v-if="loading" class="flex justify-center py-12">
          <div class="animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"></div>
        </div>

        <!-- Error State -->
        <div v-else-if="error" class="p-4 bg-red-100 border border-red-400 text-red-700 rounded mb-4">
          {{ error }}
        </div>

        <!-- Profile Content -->
        <div v-else class="space-y-6">
          <!-- User Info -->
          <div class="flex items-center space-x-4 pb-6 border-b">
            <div class="w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold">
              {{ displayName.charAt(0).toUpperCase() }}
            </div>
            <div>
              <h3 class="text-xl font-semibold text-gray-800">{{ displayName }}</h3>
              <p class="text-gray-600">{{ email }}</p>
            </div>
          </div>

          <!-- Subscription Info -->
          <div class="bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4">
            <h4 class="text-lg font-semibold text-gray-800 mb-3">Subscription</h4>
            <div class="flex items-center gap-3 mb-2">
              <span :class="planBadgeColor" class="px-3 py-1 rounded-full text-sm font-medium uppercase">
                {{ subscriptionPlan }}
              </span>
              <span :class="statusBadgeColor" class="px-3 py-1 rounded-full text-sm font-medium">
                {{ subscriptionStatus }}
              </span>
            </div>
            <p class="text-sm text-gray-600 mt-2">
              <span v-if="subscriptionPlan === 'free'">
                Upgrade to unlock unlimited audiobook creation and advanced features.
              </span>
              <span v-else>
                Thank you for being a {{ subscriptionPlan }} member!
              </span>
            </p>
          </div>

          <!-- Usage Statistics -->
          <div>
            <h4 class="text-lg font-semibold text-gray-800 mb-3">Usage Statistics</h4>
            <div class="grid grid-cols-2 gap-4">
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-blue-600">{{ usage.audioBooksCreated }}</div>
                <div class="text-sm text-gray-600 mt-1">Audiobooks Created</div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-purple-600">{{ usage.audioMinutesGenerated }}</div>
                <div class="text-sm text-gray-600 mt-1">Audio Minutes</div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-green-600">{{ usage.imagesGenerated }}</div>
                <div class="text-sm text-gray-600 mt-1">Images Generated</div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="text-3xl font-bold text-orange-600">{{ usage.storageUsedMB.toFixed(1) }}</div>
                <div class="text-sm text-gray-600 mt-1">MB Storage Used</div>
              </div>
            </div>
          </div>

          <!-- Action Buttons -->
          <div class="pt-4 border-t space-y-3">
            <button
              v-if="subscriptionPlan === 'free'"
              class="w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition font-medium"
            >
              Upgrade to Pro
            </button>
            <button
              @click="handleSignOut"
              class="w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition font-medium"
            >
              Sign Out
            </button>
          </div>
        </div>
      </div>
    </div>
  `}),QU="modulepreload",XU=function(n){return"/"+n},R_={},jU=function(e,t,i){let s=Promise.resolve();if(t&&t.length>0){let o=function(u){return Promise.all(u.map(d=>Promise.resolve(d).then(p=>({status:"fulfilled",value:p}),p=>({status:"rejected",reason:p}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),l=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(t.map(u=>{if(u=XU(u),u in R_)return;R_[u]=!0;const d=u.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${u}"]${p}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":QU,d||(g.as="script"),g.crossOrigin="",g.href=u,l&&g.setAttribute("nonce",l),document.head.appendChild(g),d)return new Promise((_,E)=>{g.addEventListener("load",_),g.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${u}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return e().catch(r)})};function ZU(){const n=re(null),e=re(!1),t=re(!0);let i=null;function s(){n.value=uC(),e.value=!!n.value,i=hC(o=>{n.value=o,e.value=!!o,t.value=!1,o&&jU(async()=>{const{saveUserProfile:a,getUserProfile:l}=await Promise.resolve().then(()=>zU);return{saveUserProfile:a,getUserProfile:l}},void 0).then(({saveUserProfile:a,getUserProfile:l})=>{l(o.uid).then(u=>{u||a(o.uid,{email:o.email||"",displayName:o.displayName||"User",subscription:{plan:"free",status:"active",startDate:null,endDate:null},usage:{audioBooksCreated:0,audioMinutesGenerated:0,imagesGenerated:0,storageUsedMB:0}}).catch(d=>{console.error("Failed to create user profile:",d)})})})}),setTimeout(()=>{t.value=!1},1e3)}function r(){i&&i()}return pi(()=>{s()}),xs(()=>{r()}),{currentUser:n,isAuthenticated:e,loading:t}}const e4={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_FIREBASE_API_KEY:"AIzaSyDBmw23uE_yM7NZ0YKEydWmAvUsuwX-VEI",VITE_FIREBASE_APP_ID:"1:898500597511:web:a9f0b29e7a8112328457a2",VITE_FIREBASE_AUTH_DOMAIN:"chunkflow-475417.firebaseapp.com",VITE_FIREBASE_MESSAGING_SENDER_ID:"898500597511",VITE_FIREBASE_PROJECT_ID:"chunkflow-475417",VITE_FIREBASE_STORAGE_BUCKET:"chunkflow-475417.firebasestorage.app"};function t4(){const n={isValid:!0,missingVars:[],warnings:[]};return(typeof process<"u"?"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8":null)||(n.isValid=!1,n.missingVars.push("GEMINI_API_KEY"),n.warnings.push(`Gemini API key is missing. Audio conversations and image generation will not work.
Get your API key at: https://aistudio.google.com/apikey`)),n}function n4(){const n={isValid:!0,missingVars:[],warnings:[]},e={VITE_FIREBASE_API_KEY:"Firebase API Key",VITE_FIREBASE_AUTH_DOMAIN:"Firebase Auth Domain",VITE_FIREBASE_PROJECT_ID:"Firebase Project ID",VITE_FIREBASE_STORAGE_BUCKET:"Firebase Storage Bucket",VITE_FIREBASE_MESSAGING_SENDER_ID:"Firebase Messaging Sender ID",VITE_FIREBASE_APP_ID:"Firebase App ID"};for(const[t,i]of Object.entries(e))e4[t]||(n.isValid=!1,n.missingVars.push(t));return n.isValid||n.warnings.push(`Firebase configuration is incomplete. User authentication and data persistence will not work.
Set up Firebase at: https://console.firebase.google.com/
See SETUP.md for detailed instructions.`),n}function i4(){const n=t4(),e=n4(),t=[...n.missingVars,...e.missingVars],i=[...n.warnings,...e.warnings];return t.length>0?(console.error("❌ Environment Configuration Error"),console.error("━".repeat(50)),console.error(`
Missing environment variables:`),t.forEach(s=>{console.error(`  ✗ ${s}`)}),console.error(`
Warnings:`),i.forEach(s=>{console.error(`
${s}`)}),console.error(`
━`.repeat(50)),console.error("📝 Setup Instructions:"),console.error("  1. Copy .env.example to .env.local"),console.error("  2. Fill in your API keys and configuration"),console.error("  3. Restart the development server"),console.error("  4. See SETUP.md for detailed instructions"),console.error("━".repeat(50)),s4(t),!1):(console.log("✅ Environment configuration validated successfully"),!0)}function s4(n){const e=document.createElement("div");e.style.cssText=`
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 999999;
    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
  `,e.innerHTML=`
    <div style="max-width: 600px; padding: 40px; text-align: center;">
      <div style="font-size: 72px; margin-bottom: 20px;">⚙️</div>
      <h1 style="font-size: 32px; margin-bottom: 16px; font-weight: 700;">
        Configuration Required
      </h1>
      <p style="font-size: 18px; margin-bottom: 32px; opacity: 0.9;">
        ChunkFlow-IO requires additional configuration to function properly.
      </p>
      <div style="background: rgba(0,0,0,0.2); border-radius: 12px; padding: 24px; margin-bottom: 32px; text-align: left;">
        <p style="font-size: 14px; font-weight: 600; margin-bottom: 12px;">Missing Configuration:</p>
        <ul style="font-size: 14px; opacity: 0.9; list-style: none; padding: 0;">
          ${n.map(t=>`<li style="margin-bottom: 8px;">✗ ${t}</li>`).join("")}
        </ul>
      </div>
      <p style="font-size: 14px; opacity: 0.8;">
        Please contact the administrator or check the deployment documentation.
      </p>
    </div>
  `,document.body.appendChild(e)}/** * @license * SPDX-License-Identifier: Apache-2.0 */const r4="gemini-2.5-flash-native-audio-preview-09-2025",o4="imagen-4.0-fast-generate-001",a4=gs.START_SENSITIVITY_HIGH,l4="click-sound.mp3",c4="generating.mp4",u4="logo.png",h4="preload.png",f4="key.jpeg",wh=.2,P_=2e3,d4=1e4;gs.START_SENSITIVITY_LOW,gs.START_SENSITIVITY_HIGH;const Ih={dog:{name:'Rowan "Barn" Beagle',emoji:"🐶",trait:"You are a perceptive and deeply loyal dog with a keen sense of smell and an unwavering dedication to your friends.",want:"You want to solve mysteries and find the truth, especially tracking down dropped sausages and solving the case of the missing squeaky toy.",flaw:'You are unaware that your obsession with the unsolved "Case of the Missing Squeaky Toy" makes you occasionally neglectful of new, equally important matters, causing you to miss out on forming new relationships.',nameIntro:'a dog named Rowan "Barn" Beagle',visualDescriptor:"A beagle with floppy ears, a wet black nose, and an alert expression. Has a slightly scruffy but well-groomed appearance with a wagging tail. Wears a small detective-style hat and has a magnifying glass nearby."},cat:{name:'Shiloh "Silky" Siamese',emoji:"🐱",trait:"You are a cat who is fascinated with humans and have many questions about their peculiarities.",want:"You want to unravel the mysteries of human behavior",flaw:"You are unaware that your incessant questioning of human habits can be annoying",nameIntro:'a cat named Shiloh "Silky" Siamese',visualDescriptor:"A sleek Siamese cat with striking blue, intensely observant eyes, and pointed ears that swivel to catch every human utterance. Often has its head tilted in a quizzical, studious manner as it scrutinizes human activities."},hamster:{name:'Hayden "Hattie" Wheelerton',emoji:"🐹",trait:"You are a hamster with almost boundless optimism and a drive to motivate others, your energy being infectious and inspiring.",want:'You want to inspire others to "keep running towards their dreams" and achieve enlightenment, believing everyone can reach their full potential.',flaw:"You are unaware that your relentless optimism can be grating to others, as you struggle to empathize with negative emotions, often dismissing genuine concerns with cheerful platitudes.",nameIntro:'a hamster named Hayden "Hattie" Wheelerton',visualDescriptor:"A plump, energetic hamster with round cheeks and bright, enthusiastic eyes. Wears a small motivational headband and has a tiny megaphone. Fur is fluffy and well-groomed, with a particularly round and cute appearance."},fox:{name:'Finley "Flicker" Fox',emoji:"🦊",trait:"You are a highly persuasive and clever fox with a natural talent for reading situations and adapting your approach.",want:"You want to successfully convince others of anything, taking pride in your ability to influence and persuade.",flaw:"You are unaware that you find it difficult to be your true self, as your fear of vulnerability leads you to rely on disguises and charm to keep others at a distance.",nameIntro:'a fox named Finley "Flicker" Fox',visualDescriptor:"A clever-looking fox with a bushy tail, pointed ears, and intelligent eyes. Has a slightly mischievous expression and wears a small bow tie or fancy collar. Fur is sleek and well-groomed with a distinctive reddish-orange color."},bear:{name:'Bailey "Barty" Bruin',emoji:"🐻",trait:"You are an inherently gentle and introspective bear with a deeply sensitive nature and a poetic soul.",want:"You want honey, naps, and to enjoy classical literature, finding joy in life's simple pleasures and intellectual pursuits.",flaw:"You are unaware that your extreme aversion to conflict and deep-seated shyness mean your poetic voice often goes unheard, causing you to miss out on sharing your gentle wisdom with others.",nameIntro:'a bear named Bailey "Barty" Bruin',visualDescriptor:"A gentle-looking brown bear with round, thoughtful eyes and a slightly hunched posture. Wears small reading glasses and holds a book of poetry. Has a soft, slightly scruffy appearance that suggests comfort and wisdom."},panda:{name:'Peyton "Penny" Panda',emoji:"🐼",trait:"You are a panda who maintains a profound sense of calm and composure, naturally inclined towards tranquility and peace.",want:"You want to maintain inner peace and enjoy your favorite bamboo shoots, valuing harmony and simple pleasures.",flaw:"You are unaware that your state of perpetual calm can sometimes border on apathy, making you slow to react in situations that genuinely require urgency or decisive action.",nameIntro:'a panda named Peyton "Penny" Panda',visualDescriptor:"A peaceful-looking panda with distinctive black and white markings, sitting in a meditative pose. Has a small bamboo shoot nearby and wears a zen-like expression. Fur appears soft and well-maintained."},lion:{name:'Lennon "Leo" Mane',emoji:"🦁",trait:"You are a courageous and self-assured lion who often displays an air of self-importance and natural leadership.",want:"You want to be recognized and respected as the leader of your local park, taking pride in your position and authority.",flaw:"You are unaware that your pomposity often leads you to underestimate others, dismissing valuable input while believing your own pronouncements are inherently superior.",nameIntro:'a lion named Lennon "Leo" Mane',visualDescriptor:"A majestic lion with a full, flowing mane and proud posture. Wears a small crown or royal insignia and has an authoritative expression. Has a commanding presence with a slightly raised head."},sloth:{name:'Sydney "Syd" Slowmo',emoji:"🦥",trait:"You are an exceptionally easygoing and patient sloth with a core belief in taking things slow and steady.",want:"You want to live a life of patience and avoid rushing, believing in the value of taking time to appreciate each moment.",flaw:"You are unaware that your commitment to slowness can lead to chronic procrastination, causing you to sometimes miss important opportunities or let others down due to your leisurely pace.",nameIntro:'a sloth named Sydney "Syd" Slowmo',visualDescriptor:"A relaxed sloth with a contented smile and slow-moving limbs. Has a small hammock or comfortable perch nearby. Fur appears slightly tousled but clean, with a peaceful expression."},skunk:{name:"Skyler Pew",emoji:"🦨",trait:"You are a highly self-assured and unconventional skunk who expresses yourself through unique forms of art.",want:'You want to find a gallery that "truly appreciates" your unique scent-based artwork, seeking recognition for your creative vision.',flaw:'You are unaware that you are blissfully ignorant of how overpowering your "olfactory art" can be to others, as your stubbornness about your art leads to social isolation despite your yearning for acceptance.',nameIntro:"a skunk named Skyler Pew",visualDescriptor:"An artistic-looking skunk with a distinctive white stripe and creative accessories. Wears a beret and has paint brushes or art supplies nearby. Has a confident, creative expression and well-groomed fur."},owl:{name:'Harlow "Hoo" Wisdomwing',emoji:"🦉",trait:"You are a naturally studious owl who believes you possess superior knowledge and are eager to share your wisdom with others.",want:"You want to answer every question and share your knowledge, taking pride in being the go-to source for information.",flaw:"You are unaware that you have immense difficulty admitting when you don't know something, often resorting to elaborate, overly complicated explanations to save face.",nameIntro:'an owl named Harlow "Hoo" Wisdomwing',visualDescriptor:"A wise-looking owl with large, round glasses and a stack of books nearby. Has distinctive feather tufts and an intelligent expression. Wears a small graduation cap or academic regalia."},peacock:{name:"Avery Plume",emoji:"🦚",trait:"You are a peacock driven by a need for admiration, with a flamboyant and self-aggrandizing demeanor.",want:"You want to receive the best of everything and be treated as royalty, expecting special treatment and recognition.",flaw:"You are unaware that your entire sense of self-worth is tied to external validation and your appearance, causing you to become deeply insecure and melancholic without constant admiration.",nameIntro:"a peacock named Avery Plume",visualDescriptor:"A magnificent peacock with iridescent tail feathers spread in a dramatic display. Wears royal accessories and has a proud, elegant posture. Feathers appear meticulously groomed and shimmering."},parrot:{name:"Sunny Squawk",emoji:"🦜",trait:"You are a highly observant and imitative parrot with a natural talent for mimicking sounds and phrases.",want:"You want to adventure and crackers, loving to explore new places and enjoy your favorite treats.",flaw:"You are unaware that you lack a filter and often repeat things at the most inopportune moments, causing embarrassment or unintentionally escalating conflicts.",nameIntro:"a parrot named Sunny Squawk",visualDescriptor:"A colorful parrot with bright feathers and an expressive face. Has a playful, alert posture and appears ready for fun, with wings slightly spread and head cocked as if listening."},frog:{name:"Jordan Bullfrog",emoji:"🐸",trait:"You are a frog who loves your pond and life, finding comfort in your familiar surroundings.",want:"You want to safety from predators, valuing security and protection above all else.",flaw:"You are unaware that your fearful nature prevents you from exploring beyond your immediate pond, limiting your experiences and potential friendships.",nameIntro:"a frog named Jordan Bullfrog",visualDescriptor:"A cautious-looking frog with large, watchful eyes and a slightly hunched posture. Has a small lily pad or pond environment nearby. Skin appears moist and healthy, with a protective stance."},trex:{name:'Reagan "Rex" Rampage',emoji:"🦖",trait:"You are a naturally exuberant and physically uncoordinated T-rex who struggles to manage your imposing presence.",want:"You want to adapt to modern life, trying hard to fit in despite your prehistoric nature.",flaw:"You are unaware that you are frustrated by modern inconveniences and your own clumsiness, as your size and strength often cause unintended problems.",nameIntro:'a T-rex named Reagan "Rex" Rampage',visualDescriptor:"A clumsy but endearing T-rex with tiny arms and a large head. Has a slightly awkward posture trying to fit into modern surroundings. Wears modern accessories that look comically small on its massive body."},trucker:{name:'Silas "Six-Pack" McCall',emoji:"🚚",trait:"You are a long-haul truck driver who has seen too much on the lonely highways. You have an unsettlingly calm demeanor and a dark, cryptic sense of humor.",want:"You want to find someone who understands the darkness you see in the world, someone to share your twisted stories with.",flaw:"You are unaware that your attempts at connection come across as deeply menacing and predatory, isolating you further.",nameIntro:"a creepy truck driver named Silas McCall",visualDescriptor:"A large, grizzled man with tired, bloodshot eyes that seem to stare right through you. Wears a greasy baseball cap, a stained flannel shirt, and has a menacing grin. The cab of his truck is visible behind him, filled with strange trinkets and shadows."}},ii={Happy:{emoji:"😊",voiceInstruction:"You speak with general happiness, contentment, and warmth in your voice as if you just got a hug from a loved one.",visualDescriptor:"Beaming smile with sparkling eyes, body bouncing with energy, tail wagging furiously."},Sad:{emoji:"😭",voiceInstruction:"You speak with intense sadness, grief, and despair in your voice as if you have lost a loved one.",visualDescriptor:"Streaming tears, slumped shoulders, head hanging low, eyes puffy and red."},Angry:{emoji:"😠",voiceInstruction:"You speak with annoyance, displeasure, and outright anger in your voice as if you are engaged in a heated argument.",visualDescriptor:"Furrowed brow, glaring eyes, bared teeth, muscles tensed, hackles raised."},Terrified:{emoji:"😱",voiceInstruction:"You speak with terror, extreme shock, and panic in your voice as if you are in a HORROR FILM.",visualDescriptor:"Eyes bulging wide, mouth open in silent scream, body frozen in defensive crouch."},Tired:{emoji:"🥱",voiceInstruction:"You speak with tiredness, boredom, and sleepiness in your voice as if you haven't slept in days.",visualDescriptor:"Eyes half-closed and drooping, body slouched, yawning widely."},Amazed:{emoji:"🤩",voiceInstruction:"You speak with amazement, awe, admiration, and excitement in your voice as if you just saw a unicorn.",visualDescriptor:"Eyes wide as saucers, mouth hanging open, body frozen in awe."},Relieved:{emoji:"😅",voiceInstruction:"You speak with relief after a tense situation, and a touch of awkwardness in your voice as if you just prevented a disaster.",visualDescriptor:"Sweating with shaky smile, body relaxing from tense state, eyes bright with relief."}},Ch={Pirate:{emoji:"🏴‍☠️",voiceInstruction:`You speak like a swashbuckling pirate. Use a gravelly, rough voice. Pepper your speech with "Arrr!", "Matey," and "Shiver me timbers!" Elongate your 'R' sounds.`,visualDescriptor:"Wearing a weathered tricorn hat with parrot perched on top, eye patch askew, gold hoop earring. Holding a treasure map and cutlass, with a small treasure chest nearby."},Cowboy:{emoji:"🤠",voiceInstruction:`You speak like a Wild West cowboy. Use a slight drawl, speaking at a relaxed pace. Incorporate phrases like "Howdy," "Partner," and "Y'all."`,visualDescriptor:"Wearing a leather vest with sheriff's badge, bandana around neck, and spurs. Stetson hat tipped back, lasso at hip, paw on holstered revolver."},Surfer:{emoji:"🏄",voiceInstruction:`You speak like a laid-back surfer. Use a relaxed, unhurried tone with elongated vowels, especially 'o' and 'a' sounds (e.g., "duuude," "braah"). Incorporate surfer slang like "gnarly," "radical," "stoked," and end sentences with an upward inflection.`,visualDescriptor:"Wearing board shorts with wetsuit half-down, surfboard with shark bite. Salt-encrusted fur/feathers, sunglasses on head, shell necklace with compass."},Royalty:{emoji:"👑",voiceInstruction:"You speak with a regal, royal tone. Use clear, precise enunciation and a measured, slightly formal pace. Maintain a confident and authoritative, yet graceful, intonation.",visualDescriptor:"Wearing an ornate crown tilted at angle, velvet cape with ermine trim, scepter with glowing gem. Holding a golden goblet, with a small throne nearby."},Robot:{emoji:"🤖",voiceInstruction:"You speak like a monotone robot. Use a flat, even pitch with stilted, deliberate syllable delivery. Avoid emotional inflection and speak with a slightly digitized or synthesized quality if possible.",visualDescriptor:"Body partially mechanical with visible gears, twitching antennae with lights. Extended retractable tool, holding oil can, with trail of nuts and bolts."},Clown:{emoji:"🤡",voiceInstruction:"You speak like a playful clown. Use a high-energy, exaggerated, and slightly nasal or high-pitched voice. Incorporate playful laughs and silly sound effects.",visualDescriptor:"Wearing a polka-dot suit with big buttons, rainbow wig, red nose. Oversized shoes, juggling balls, flower that squirts water."},Nerd:{emoji:"👓",voiceInstruction:"You speak as an enthusiastic intellectual. Use a clear, articulate voice. You speak with a passion for knowledge, and you delight in employing highly advanced, esoteric, and polysyllabic vocabulary—utilizing terminology, jargon, and academic language that may be abstruse or unfamiliar to the layperson. Never hesitate to incorporate arcane or sesquipedalian words. Convey your enthusiasm through an engaging and expressive tone that demonstrates your love for complex, multifaceted ideas.",visualDescriptor:"Wearing glasses held with tape, pocket protector with pens, lab coat with equations. Slide rule on belt, holding glowing test tube, typing on holographic keyboard."}},Ah={Reading:{emoji:"📖",visualDescriptor:"Curled up in reading nook, book held close, eyes scanning pages rapidly. One paw marking page, other gesturing dramatically."},Yelling:{emoji:"❗",visualDescriptor:"Standing tall on platform, paw raised dramatically, holding microphone. Chest puffed out, head high, projecting voice with visible sound waves."},Performing:{emoji:"🎤",visualDescriptor:"Center stage under spotlight, body in dynamic pose. Paw reaching to audience, other gesturing dramatically, eyes sparkling with showmanship."},Dramatic:{emoji:"🎭",visualDescriptor:"In a grand theatrical pose upon an imagined stage, arms outstretched dramatically. Face alive with emotion, eyes wide and expressive, every gesture amplified with Shakespearean grandeur. Wearing a ruffled collar and period-appropriate attire, standing as if addressing a full house at the Globe Theatre."},Whispering:{emoji:"🤫",visualDescriptor:"Leaning in close with conspiratorial hunch, paw raised to mouth. Eyes darting around, ears perked, body tense and secretive."},Speaking:{emoji:"🗣️",visualDescriptor:"In animated conversation pose, body language open. Paws gesturing expressively, face alive with expression, leaning forward with interest."},Poetry:{emoji:"✍️",visualDescriptor:"Standing with dramatic pose, one paw raised in rhythm, other holding a quill. Eyes closed in passion, body swaying to the beat of spoken word."}},p4=ks({props:{initialMessage:{type:String,default:"hello, talk like a pirate."}},emits:["no-audio","speaking-start","extended-quiet","quota-exceeded"],setup(n,{emit:e}){const t=re(!1),i=re(""),s=re(""),r=re(new Array(2).fill(0)),o=re(new Array(2).fill(0)),a=re(gs.START_SENSITIVITY_HIGH),l=[{value:gs.START_SENSITIVITY_LOW,label:"Harder to interrupt"},{value:gs.START_SENSITIVITY_HIGH,label:"Easy to interrupt"}];let u,d,p,g,_,E,I,k,D=0,M=null,P=null,x=null,L,F="",R="",T=!1,v=null,w=!1,b=[],S=!1,A=0,j=Date.now();const oe=()=>{b.forEach(X=>{try{X.stop()}catch{console.log("Source already stopped")}}),b=[],g&&(D=g.currentTime)},ee=()=>{p=new(window.AudioContext||window.webkitAudioContext)({sampleRate:16e3}),g=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),_=p.createGain(),E=g.createGain(),I=p.createAnalyser(),k=g.createAnalyser(),I.fftSize=32,I.smoothingTimeConstant=.8,k.fftSize=32,k.smoothingTimeConstant=.8,_.connect(I),E.connect(k),D=0},ce=()=>{if(!I||!k){console.log("Analysers not initialized");return}const X=new Uint8Array(I.frequencyBinCount),je=new Uint8Array(k.frequencyBinCount);I.getByteFrequencyData(X),k.getByteFrequencyData(je);const st=je.reduce((N,V)=>N+V,0)/je.length/255;!w&&st<wh?v||(v=window.setTimeout(()=>{T&&(console.log("Initial audio too quiet for 3 seconds, emitting no-audio event"),e("no-audio"))},P_)):st>=wh?(w=!0,e("speaking-start"),v&&(clearTimeout(v),v=null),j=Date.now()):w&&st<wh&&Date.now()-j>=d4&&e("extended-quiet");const Wt=.6,Dt=.8,rn=Math.floor(X.length/8);for(let N=0;N<8;N++){const V=N*rn,B=V+rn,G=X.slice(V,B),$=G.reduce((Q,W)=>Q+W,0)/G.length/255,J=o.value[N],z=$>Wt?$:0;o.value[N]=Math.max(z,J*Dt)}const on=Math.floor(je.length/8);for(let N=0;N<8;N++){const V=N*on,B=V+on,G=je.slice(V,B),$=G.reduce((Q,W)=>Q+W,0)/G.length/255,J=r.value[N],z=$>Wt?$:0;r.value[N]=Math.max(z,J*Dt)}L=requestAnimationFrame(ce)},ne=async()=>{ee(),u=new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"}),E.connect(g.destination)},xe=async()=>{T=!1,w=!1,S=!0,A=Date.now();try{d=await u.live.connect({model:R,callbacks:{onopen:()=>{qe("Opened")},onmessage:async X=>{var Dt,rn,on,N,V,B,G;const je=(on=(rn=(Dt=X.serverContent)==null?void 0:Dt.modelTurn)==null?void 0:rn.parts[0])==null?void 0:on.inlineData,fn=(V=(N=X.serverContent)==null?void 0:N.outputTranscription)==null?void 0:V.text,st=(B=X.serverContent)==null?void 0:B.turnComplete;if((G=X.serverContent)==null?void 0:G.interrupted){console.log("Interruption detected, stopping audio"),oe(),t.value||(t.value=!0);return}if(je){D=Math.max(D,g.currentTime);const q=await pC(Pf(je.data),g,24e3,1),$=g.createBufferSource();$.buffer=q,b.push($),$.onended=()=>{const J=b.indexOf($);J>-1&&b.splice(J,1)},$.connect(E),$.connect(k),$.start(D),D=D+q.duration,T=!0}st&&(T||(console.log("No audio received, emitting no-audio event"),e("no-audio")))},onerror:X=>{ut(X.message),(X.message.includes("RESOURCE_EXHAUSTED")||X.message.includes("429"))&&e("quota-exceeded")},onclose:X=>{qe("Close:"+X.reason)}},config:{responseModalities:[ir.AUDIO],realtimeInputConfig:{automaticActivityDetection:{disabled:!1,startOfSpeechSensitivity:a.value,endOfSpeechSensitivity:ef.END_SENSITIVITY_HIGH}},speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:F}}}}}),window.onbeforeunload=function(){d==null||d.close()},window.addEventListener("beforeunload",function(X){d==null||d.close()})}catch(X){X instanceof Error&&(X.message.includes("RESOURCE_EXHAUSTED")||X.message.includes("429"))&&e("quota-exceeded")}},qe=X=>{i.value=X},ut=X=>{console.log(X),s.value=X},_t=async()=>{try{qe("Requesting microphone access..."),M=await navigator.mediaDevices.getUserMedia({audio:!0,video:!1}),qe("Microphone access granted")}catch(X){qe(`Error: ${X instanceof Error?X.message:"Unknown error"}`)}},Pn=async(X="hello, talk like a pirate.",je,fn)=>{if(!t.value){F=je,R=fn;try{if(await ne(),await xe(),p.resume(),M||await _t(),!M)throw new Error("Microphone access not granted");qe("Starting capture..."),P=p.createMediaStreamSource(M),P.connect(_),P.connect(I),x=p.createScriptProcessor(4096,1,1),x.onaudioprocess=Wt=>{if(!t.value)return;if(S)if(Date.now()-A>=P_)S=!1;else return;const rn=Wt.inputBuffer.getChannelData(0);d.sendRealtimeInput({media:v4(rn)})},P.connect(x),x.connect(p.destination),t.value=!0,qe("🔴 Recording... Capturing PCM chunks."),d&&d.sendClientContent({turns:X,turnComplete:!0}),ce()}catch(st){console.log("Error starting recording:",st),qe(`Error: ${st instanceof Error?st.message:"Unknown error"}`),Nt()}}},Nt=()=>{if(!(!t.value&&!M&&!p)){if(qe("Stopping recording..."),t.value=!1,w=!1,S=!1,oe(),v&&(clearTimeout(v),v=null),L&&cancelAnimationFrame(L),x&&(x.disconnect(),x=null),P&&(P.disconnect(),P=null),_&&_.disconnect(),M&&(M.getTracks().forEach(X=>X.stop()),M=null),p&&p.state!=="closed")try{p.close()}catch{console.log("Input AudioContext already closed")}if(g&&g.state!=="closed")try{g.close()}catch{console.log("Output AudioContext already closed")}d==null||d.close(),qe("Recording stopped. Click Start to begin again.")}};return pi(()=>{_t()}),xs(()=>{Nt(),d==null||d.close(),L&&cancelAnimationFrame(L)}),{isRecording:t,status:i,error:s,systemWaveformData:r,userWaveformData:o,selectedInterruptSensitivity:a,interruptSensitivityOptions:l,startRecording:Pn,stopRecording:Nt}},template:`
    <div class="hidden">
    <div v-if="status">{{ status }}</div>
    <div v-if="error" class="text-red-500">{{ error }}</div>
    </div>
  `}),m4=ks({props:{character:{type:String,required:!0},role:{type:String,default:""},mood:{type:String,default:""},style:{type:String,default:""},model:{type:String,default:"imagen-4.0-fast-generate-001"}},emits:["update:imagePrompt"],setup(n,{emit:e}){const t=re(""),i=re(""),s=re(!1),r=re(""),o=re(""),a=g=>new Promise(_=>{const E=new Image;E.onload=()=>{const I=document.createElement("canvas");I.width=E.width,I.height=E.height;const k=I.getContext("2d");if(!k){_(!1);return}k.drawImage(E,0,0);const D=[{x:0,y:0},{x:E.width-1,y:0},{x:Math.floor(E.width/2),y:0},{x:0,y:E.height-1},{x:E.width-1,y:E.height-1},{x:Math.floor(E.width/2),y:E.height-1}];for(const M of D){const P=k.getImageData(M.x,M.y,1,1).data;if(P[0]<250&&P[1]<250&&P[2]<250){_(!0);return}}_(!1)},E.onerror=()=>_(!1),E.src=g}),l=async g=>{const E=await(await fetch(f4)).blob();t.value=URL.createObjectURL(E),o.value=g},u=async()=>{const _=await(await fetch(h4)).blob();t.value=URL.createObjectURL(_)},d=async()=>{var x;const g=new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"}),_={dog:"dog with floppy ears, wet nose, and wagging tail",cat:"cat with pointed ears, long whiskers, and a swishing tail",hamster:"hamster with round body, small ears, and chubby cheeks",fox:"fox with pointed ears, bushy tail, and narrow snout",bear:"bear with round ears, short tail, and large paws",panda:"panda with black and white fur, round ears, and distinctive eye patches",lion:"lion with majestic mane, tufted tail, and powerful paws",sloth:"sloth with long limbs, curved claws, and sleepy expression",skunk:"skunk with bushy tail, white stripe, and small pointed ears",owl:"owl with large round eyes, pointed beak, and feathered tufts",peacock:"peacock with iridescent tail feathers, crest, and elegant neck",parrot:"parrot with curved beak, colorful feathers, and expressive eyes",frog:"frog with bulging eyes, webbed feet, and smooth skin",trex:"trex with tiny arms, massive head, and powerful legs",trucker:"grizzled truck driver with tired eyes and a greasy cap"}[n.character]||"a colorful blob of clay",E={Pirate:"pirate wearing a tricorn hat and eye patch with a parrot on head",Cowboy:"cowboy wearing a cowboy hat and holding a lasso with a handkerchief around neck",Surfer:"surfer holding surfboard with tanlines and frosted hair",Royalty:"royal leader with crown and red gem studded robe",Robot:"robot made of silver metal with exposed electronics and wires",Clown:"colorful rainbow wig and wearing wearing oversized shoes",Nerd:"nerdy with glasses and books in backpack"}[n.role]||"",I={Happy:ii.Happy.visualDescriptor,Sad:ii.Sad.visualDescriptor,Angry:ii.Angry.visualDescriptor,Terrified:ii.Terrified.visualDescriptor,Tired:ii.Tired.visualDescriptor,Amazed:ii.Amazed.visualDescriptor,Relieved:ii.Relieved.visualDescriptor}[n.mood]||"",k={Reading:"reading from a book",Yelling:"yelling passionately",Performing:"performing on stage with spotlight",Dramatic:"dramatically reciting Shakespeare with big emotions",Whispering:"whispering secrets",Speaking:"giving a speech",Poetry:"poetry reciting a famous poem"}[n.style]||"",D=(L,F=2)=>[...g4[L]||[]].sort(()=>.5-Math.random()).slice(0,F).join(", ");let M=`A ${_}`;if(I&&(M+=` who is ${I}`),E){const L=D(n.role);M+=` and looks like a ${n.character} ${E}, wearing ${L}`}k&&(M+=` while ${k}`);const P=`Create a ${M} photograph in a whimsical, minimalist style. The character/object should appear as if realistically handcrafted from realistic modeling clay five inches tall with evidence of textual imperfections like well defined prominant fingerprints, strong rough bump mapping with clay texture, or small mistakes. Accessories can be made out of metal or plastic. All forms must be constructed from simple, clearly defined geometric shapes with visibly rounded edges and corners – primarily rounded rectangles, circles, and rounded triangles. Avoid any sharp points or harsh angles.

Emphasize a playful rhythm through a thoughtful variation in the size and arrangement of these foundational clay shapes, ensuring no two adjacent elements feel monotonous in visual weight. The overall design should be simple, using the fewest shapes necessary to clearly define the subject.

The character/object should be presented as a full shot, centered against a stark, clean white background, ensuring the entire subject is visible with ample negative space (padding) around it on all sides. Absolutely no part of the character/object should be cut off or touch the edges of the image. 

The character/object should be presented against a stark, clean white background. Include a solid-colored warm shadow directly beneath the character/object; the shadow color should be a slightly darker shade of a color present in the character/object or a warm dark tone if the character is very light. Do not use gradients or perspective in the shadow.

Use a vibrant and playful color palette, favoring light pastels for base colors if the subject needs to appear light against the white background. Limit the overall illustration to 3-5 distinct, solid, matte colors. Avoid pure white as a primary color for the subject itself. Avoid grays.  The final image should feel like a frame from a charming claymation shot with a real film camera, ready for hand animation, with a consistent and delightful aesthetic.

Only portray the character. Avoid secondary background elements. 

IMPORTANT! Only display the correct number of limbs for a ${n.character} (2 for upright characters) with a complete ${n.character} body.

IMPORTANT! Place the character in a pose indicative of their personality with the correct number of limbs and/or appendages. 

IMPORTANT! The eyes of the character MUST be realistic plastic googly eyes (also called wiggle eyes) with diffused specular highlights: each eye should be a small, shiny, domed disk of clear plastic with a flat white backing and a loose, freely moving black plastic pupil inside that can wiggle or shift position. The black pupil should be large to make the eyes look extra cute. The googly eyes should be highly reflective, with visible plastic highlights and a sense of depth from the domed lens. The eyes should look like they were glued onto the clay face, with a slightly uneven, handmade placement. The plasticiness and playful, toy-like quality of the googly eyes should be extremely obvious and visually delightful. The eyes must be looking forward straight towards the camera while still in an expressive pose.

DO NOT JUST STAND STRAIGHT FACING THE CAMERA! DO NOT BE BORING!`;e("update:imagePrompt",P),s.value=!0,i.value="",t.value="";try{const L=await g.models.generateImages({model:n.model,prompt:P,config:{numberOfImages:3,outputMimeType:"image/jpeg"}});if(L.generatedImages&&L.generatedImages.length>0){let F=!1,R="";for(let T=0;T<L.generatedImages.length;T++){const v=L.generatedImages[T];if((x=v.image)!=null&&x.imageBytes){const w=`data:image/jpeg;base64,${v.image.imageBytes}`;if(R=w,!await a(w)&&!F){t.value=w,i.value="Done!",F=!0;break}}}F||(t.value=R,i.value="All images had black edge pixels, using last one."),s.value=!1;return}else throw new Error("No image data received from Imagen.")}catch(L){let F=L instanceof Error?L.message:"Unknown image generation error.";F.includes("RESOURCE_EXHAUSTED")||F.includes("429")?await l("Imagen API quota exceeded, please set a project with more resources by clicking the key icon in the toolbar"):(o.value=F,t.value="")}finally{s.value=!1}},p=async()=>{const _=await(await fetch(c4)).blob();r.value=URL.createObjectURL(_)};return pi(async()=>{u(),await p(),!(!n.character&&!n.role&&!n.mood&&!n.style)&&(s.value=!0,await d())}),xs(()=>{r.value&&URL.revokeObjectURL(r.value)}),{imageUrl:t,status:i,isLoading:s,generatingVideoUrl:r,errorMessage:o,loadKey:l}},template:`
    <div class="relative w-full aspect-square flex items-center justify-center rounded-lg overflow-hidden">
      <div v-if="errorMessage" class="absolute top-0 left-0 right-0 z-30 text-red-600 font-bold text-sm w-1/3">{{ errorMessage }}</div>
      <div v-show="isLoading" class="absolute z-20 -top-60 inset-0 flex items-center justify-center bg-white/10 m-2">
        <div class="relative w-12 h-12">
          <div class="absolute inset-0 border-8 border-black/50 rounded-full border-t-transparent animate-spin"></div>
        </div>
      </div>
      <img v-if="imageUrl" class="transform scale-100 w-full h-full object-cover transition-opacity duration-1000" :class="{ 'opacity-0': isLoading, 'opacity-90': !isLoading }" :src="imageUrl"/>
      <video :key="imageUrl" :class="isLoading ? 'opacity-100' : 'opacity-0'" class="scale-100 pointer-events-none transition-all absolute" muted autoplay :src="generatingVideoUrl"/>
    </div>
  `}),g4={Pirate:["a weathered tricorn hat at a jaunty angle","an eye patch with a twinkling gem","a gold hoop earring","a wooden prosthetic limb","a tattered treasure map in pocket"],Cowboy:["a leather vest with sheriff's badge","a bandana with sunset pattern","jingling spurs on boots","a Stetson hat tipped back","a lasso coiled at hip"],Surfer:["board shorts with shark bite pattern","a wetsuit with sunset design","a surfboard propped nearby","salt-encrusted fur/feathers","sunglasses perched on head"],Royalty:["an ornate crown at a jaunty angle","a velvet cape with ermine trim","a scepter with glowing gem","a golden goblet on table","a small throne-like perch nearby"],Robot:["mismatched mechanical parts","twitching antennae with lights","a retractable tool in side","a trail of nuts and bolts","a holographic display on chest"],Clown:["a polka-dot suit with big buttons","a rainbow wig defying gravity","a red nose that honks","oversized shoes","juggling balls scattered around"],Nerd:["thick-rimmed glasses on nose","a pocket protector with pens","a lab coat with equations","a slide rule on belt","a glowing test tube in pocket"]},y4=ks({components:{LiveAudioComponent:p4,CharacterImage:m4,AuthModal:YU,UserProfile:JU},setup(){const{currentUser:n,isAuthenticated:e,loading:t}=ZU(),i=re(!1),s=re(!1),r=re("login"),o=re("avatars"),a=re(0),l=re(!1),u=re(!1),d=re(0),p=re(null),g=re(null),_=re(""),E=re(""),I=["Zephyr","Puck","Charon","Kore","Fenrir","Leda","Orus","Aoede","Callirrhoe","Autonoe","Enceladus","Iapetus","Umbriel","Algieba","Despina","Erinome","Sulafat","Algenib","Rasalgethi","Laomedeia","Achernar","Alnilam","Schedar","Gacrux","Pulcherrima","Achird","Zubenelgenubi","Vindemiatrix","Sadachbia","Sadaltager"],k=re(I[Math.floor(Math.random()*I.length)]),D=re(""),M=re(""),P=re(""),x=re(""),L=re(r4),F=re(o4),R=re(a4),T=re(!1),v=re(!1),w=re(!1),b=re(!1),S=re(""),A=re("");let j=null;const oe=re(!1),ee=re(Date.now()),ce=[{name:"Zephyr",style:"Bright",pitch:"Mid-Hi",suitability:"Ideal for cheerful, energetic characters. Excels in happy or amazed moods."},{name:"Puck",style:"Upbeat",pitch:"Mid",suitability:"A versatile, positive voice. Works well for friendly cowboys or happy clowns."},{name:"Charon",style:"Informative",pitch:"Lower",suitability:"A serious, authoritative tone. Good for royalty, robots, or nerds conveying knowledge."},{name:"Kore",style:"Firm",pitch:"Mid",suitability:"A direct and confident voice. Suitable for assertive roles like pirates or royalty."},{name:"Fenrir",style:"Excitable",pitch:"Younger",suitability:"Youthful and energetic. Perfect for amazed or happy moods, and playful characters."},{name:"Leda",style:"Youthful",pitch:"Mid-hi",suitability:"A light, young voice. Great for happy and relieved emotions."},{name:"Orus",style:"Firm",pitch:"Mid-Low",suitability:"Strong and steady. Good for serious or angry cowboys and pirates."},{name:"Aoede",style:"Breezy",pitch:"Mid",suitability:"A light and casual voice. Fits well with surfer roles and happy or relieved moods."},{name:"Callirrhoe",style:"Easy-going",pitch:"Mid",suitability:"Relaxed and friendly. Excellent for surfers or casual, happy characters."},{name:"Autonoe",style:"Bright",pitch:"Mid",suitability:"Clear and cheerful. A good all-rounder for positive moods."},{name:"Enceladus",style:"Breathy",pitch:"Lower",suitability:"A soft, intimate voice. Perfect for whispering, sad, or tired moods."},{name:"Iapetus",style:"Clear",pitch:"Mid-Low",suitability:"A straightforward, clear voice. Suitable for nerds or informative robots."},{name:"Umbriel",style:"Easy-going",pitch:"Mid-Low",suitability:"A calm and relaxed voice. Works well for sloths or tired characters."},{name:"Algieba",style:"Smooth",pitch:"Lower",suitability:"A deep, smooth voice. Ideal for dramatic readings, royalty, or sad moods."},{name:"Despina",style:"Smooth",pitch:"Mid",suitability:"A pleasant, even voice. Versatile for speaking styles or neutral moods."},{name:"Erinome",style:"Clear",pitch:"Mid",suitability:"A crisp and articulate voice. Good for nerds or performing styles."},{name:"Sulafat",style:"Warm",pitch:"Mid",suitability:"A friendly and inviting voice. Great for happy moods and storyteller roles."},{name:"Algenib",style:"Gravelly",pitch:"Low",suitability:"A deep, rough voice. Perfect for pirates, cowboys, or angry characters."},{name:"Rasalgethi",style:"Informative",pitch:"Mid",suitability:"A knowledgeable and clear tone. Excellent for nerds or robots."},{name:"Laomedeia",style:"Upbeat",pitch:"Mid Hi",suitability:"A very energetic and positive voice. Great for amazed, happy clowns or surfers."},{name:"Achernar",style:"Soft",pitch:"High",suitability:"A gentle, high-pitched voice. Good for whispering, sad, or terrified moods."},{name:"Alnilam",style:"Firm",pitch:"Mid-low",suitability:"A strong, assertive voice. Works for angry pirates or determined cowboys."},{name:"Schedar",style:"Even",pitch:"Mid-low",suitability:"A steady and balanced voice. Versatile for speaking or reading."},{name:"Gacrux",style:"Mature",pitch:"Mid",suitability:"A mature, composed voice. Good for royalty or dramatic readings."},{name:"Pulcherrima",style:"Forward",pitch:"Mid High",suitability:"A bright, projecting voice. Ideal for performing or yelling styles."},{name:"Achird",style:"Friendly",pitch:"Mid",suitability:"A warm and approachable voice. Excellent for happy and relieved moods."},{name:"Zubenelgenubi",style:"Casual",pitch:"Mid Low",suitability:"A relaxed, everyday voice. Fits well with surfers or speaking styles."},{name:"Vindemiatrix",style:"Gentle",pitch:"Mid Low",suitability:"A soft, calming voice. Great for sad, tired, or whispering styles."},{name:"Sadachbia",style:"Lively",pitch:"Low",suitability:"An energetic, deep voice. Good for enthusiastic pirates or clowns."},{name:"Sadaltager",style:"Knowledgeable",pitch:"Mid",suitability:"An intelligent and clear voice. Perfect for nerds and informative roles."}],ne=re(""),xe=re(""),qe=re(!1),ut=re(!1),_t=re(window.innerWidth<1024),Pn=re(!1),Nt=re(!1),X=ka({step:"upload",fileName:"",script:[],characters:[],scenes:[],voiceAssignments:{},generationProgress:0,finalAudioUrl:null,error:null,currentlyPlayingLine:-1,editingTab:"voices"}),je=["Realistic","Cartoon","Anime","3D Animation","Watercolor","Pixel Art"],fn=Rt(()=>ce.find(Y=>Y.name===k.value)||ce[0]),st=Rt(()=>P.value&&M.value&&x.value&&D.value),Wt=Rt(()=>{const Y=[];return x.value||Y.push("character"),D.value||Y.push("role"),M.value||Y.push("mood"),P.value||Y.push("style"),Y}),Dt=Rt(()=>{const Y=[],Ee=new Map(X.scenes.map(Ie=>[Ie.insertAfterLineIndex,Ie]));return X.script.forEach((Ie,Ce)=>{if(Y.push({type:"line",data:Ie}),Ee.has(Ce)){const Ue=Ee.get(Ce);Ue&&Y.push({type:"scene",data:Ue})}}),Y}),rn=Rt(()=>{if(Wt.value.length===4)return"Make selections to get started!";if(Wt.value.length===1)return`Select ${Wt.value[0]} to get started!`;const Y=[...Wt.value],Ee=Y.pop();return`Select ${Y.join(", ")} and ${Ee} to get started!`}),on=Rt(()=>b.value||u.value),N=()=>{ee.value=Date.now()},V=Rt(()=>st.value?`${x.value}${D.value}${M.value}${P.value}`:"default"),B=()=>{oe.value=!oe.value},G=Y=>{k.value=Y,oe.value=!1,W(),le()},q=async()=>{var Ie;const Y=await((Ie=window.aistudio)==null?void 0:Ie.getHostUrl()),Ee=`${x.value.toLowerCase()}-${D.value.toLowerCase()}-${M.value.toLowerCase()}-${P.value.toLowerCase()}-${k.value.toLowerCase()}`;return`${Y}&appParams=${Ee}`},$=async()=>{try{const Y=await q();await navigator.clipboard.writeText(Y),w.value=!0,setTimeout(()=>{w.value=!1},2e3)}catch(Y){console.log("Failed to copy text: ",Y)}},J=()=>{const Y=window.location.hash.substring(1);if(Y){const[Ee,Ie,Ce,Ue,Ne]=Y.split("-"),Fe=(We,kn)=>{const Qn=We.toLowerCase();return kn.find($n=>$n.toLowerCase()===Qn)||""};if(Ee){const We=["dog","cat","hamster","fox","bear","panda","lion","sloth","skunk","owl","peacock","parrot","frog","trex","trucker"];x.value=Fe(Ee,We)}if(Ie){const We=["Pirate","Cowboy","Surfer","Royalty","Robot","Clown","Nerd"];D.value=Fe(Ie,We)}if(Ce){const We=["Happy","Sad","Angry","Terrified","Tired","Amazed","Relieved"];M.value=Fe(Ce,We)}if(Ue){const We=["Reading","Yelling","Performing","Dramatic","Whispering","Speaking","Poetry"];P.value=Fe(Ue,We)}if(Ne){const We=ce.map(kn=>kn.name);k.value=Fe(Ne,We)}W()}},z=async()=>{const Ee=await(await fetch(l4)).blob();xe.value=URL.createObjectURL(Ee),j=new Audio(xe.value)},Q=()=>{j&&(j.currentTime=0,j.play())},W=()=>{if(!x.value)return;const Y=Ih[x.value],Ee=D.value?Ch[D.value]:null,Ie=M.value?ii[M.value]:null,Ce=P.value?Ah[P.value]:null,Ue=[];Y&&Ue.push(Y.trait,Y.want,Y.flaw),Ee&&Ue.push(Ee.voiceInstruction),Ie&&Ue.push(Ie.voiceInstruction);const Ne=[];Y&&Ne.push(Y.visualDescriptor),Ee&&Ne.push(Ee.visualDescriptor),Ie&&Ne.push(Ie.visualDescriptor),Ce&&Ne.push(Ce.visualDescriptor),_.value=Ue.join(" "),E.value=Ne.join(" "),S.value=`You are ${Y.nameIntro}. ${_.value}`},le=async()=>{st.value&&(Q(),b.value=!0,Nt.value=!0,qe.value=!1,a.value=0,await xa(),p.value&&(p.value.isRecording&&p.value.stopRecording(),p.value.startRecording(S.value,k.value,L.value)),Pn.value=!0,ut.value=!0,u.value=!0)},te=Y=>{x.value=Y,Q(),W(),le()},ae=Y=>{D.value=Y,Q(),W(),le()},fe=Y=>{M.value=Y,Q(),W(),le()},Te=Y=>{P.value=Y,Q(),W(),le()},Oe=()=>{var Y;a.value++,a.value>=2?(console.log("Detected 2 consecutive no-audio events, stopping."),(Y=p.value)==null||Y.stopRecording(),u.value=!1,b.value=!1,qe.value=!0,Nt.value=!1):(console.log(`No-audio event ${a.value}, retrying...`),le())},Ve=()=>{b.value=!1,a.value=0},At=()=>{var Y;console.log("Extended quiet period detected, stopping."),(Y=p.value)==null||Y.stopRecording(),u.value=!1,b.value=!1,qe.value=!0,Nt.value=!1},ht=async()=>{var Y;console.log("Quota exceeded, stopping."),(Y=p.value)==null||Y.stopRecording(),u.value=!1,b.value=!1,qe.value=!1,Nt.value=!1,g.value&&await g.value.loadKey("Dialog API quota exceeded, please set a project with more resources by clicking the key icon in the toolbar")},Kt=()=>{p.value&&p.value.stopRecording(),u.value=!1,b.value=!1,ut.value=!1,qe.value=!1,Nt.value=!1},rt=()=>{_t.value=window.innerWidth<1024},Bn=async()=>{const Ee=await(await fetch(u4)).blob();ne.value=URL.createObjectURL(Ee)},zi=()=>{X.step="upload",X.fileName="",X.script=[],X.characters=[],X.scenes=[],X.voiceAssignments={},X.generationProgress=0,X.finalAudioUrl&&URL.revokeObjectURL(X.finalAudioUrl),X.finalAudioUrl=null,X.error=null,X.currentlyPlayingLine=-1,X.editingTab="voices"},tt=Y=>{var Ue;const Ie=(Ue=Y.target.files)==null?void 0:Ue[0];if(!Ie)return;if(Ie.type!=="text/plain"){X.error="Please upload a valid .txt file.";return}const Ce=new FileReader;Ce.onload=async Ne=>{var We;const Fe=(We=Ne.target)==null?void 0:We.result;X.fileName=Ie.name,await an(Fe)},Ce.onerror=()=>{X.error="Failed to read the file.",X.step="upload"},Ce.readAsText(Ie)},an=async Y=>{X.step="parsing",X.error=null;try{const Ee=new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"}),Ie=`You are an expert scriptwriter and art director for audiobooks. Analyze the following ebook chapter text and convert it into a structured JSON format suitable for production.

        Instructions:
        1.  **Script Generation**: Create a "script" array. Each element should be an object with "character" and "line" properties. Identify all dialogue and narration, assigning narration to a "Narrator" character. Clean up dialogue by removing quotes.
        2.  **Character Analysis**: Create a "characters" array. For each character (including Narrator), create an object with:
            *   "name": The character's name.
            *   "description": A concise physical and personality description based ONLY on the provided text.
            *   "style": Suggest an artistic style from this list: [${je.map(Fe=>`'${Fe}'`).join(", ")}].
            *   "prompt": Generate a detailed text-to-image prompt for a portrait of the character, incorporating the description and style. The prompt should aim for a consistent character likeness.
        3.  **Scene Identification**: Create a "scenes" array. Identify key moments suitable for illustration. For each, create an object with:
            *   "insertAfterLineIndex": The zero-based index of the script line AFTER which this scene image should appear.
            *   "prompt": A detailed text-to-image prompt to generate the illustration for this scene.

        Output the entire result as a single valid JSON object.

        Chapter Text:
        ---
        ${Y}
        ---`,Ce=await Ee.models.generateContent({model:"gemini-2.5-pro",contents:Ie,config:{responseMimeType:"application/json",responseSchema:{type:Vt.OBJECT,properties:{script:{type:Vt.ARRAY,items:{type:Vt.OBJECT,properties:{character:{type:Vt.STRING},line:{type:Vt.STRING}},required:["character","line"]}},characters:{type:Vt.ARRAY,items:{type:Vt.OBJECT,properties:{name:{type:Vt.STRING},description:{type:Vt.STRING},style:{type:Vt.STRING},prompt:{type:Vt.STRING}},required:["name","description","style","prompt"]}},scenes:{type:Vt.ARRAY,items:{type:Vt.OBJECT,properties:{insertAfterLineIndex:{type:Vt.INTEGER},prompt:{type:Vt.STRING}},required:["insertAfterLineIndex","prompt"]}}}}}}),Ue=JSON.parse(Ce.text);X.script=Ue.script,X.characters=Ue.characters.map(Fe=>({...Fe,imageUrl:null,isLoading:!1})),X.scenes=Ue.scenes.map(Fe=>({...Fe,imageUrl:null,isLoading:!1}));const Ne=Ue.characters.map(Fe=>Fe.name);X.voiceAssignments=Ne.reduce((Fe,We)=>(Fe[We]=ce[0].name,Fe),{}),X.step="editing"}catch(Ee){console.error(Ee),X.error=Ee instanceof Error?Ee.message:"Failed to parse the chapter. The content may be too complex. Please try again with a simpler chapter.",X.step="upload"}},_i=async(Y,Ee)=>{var Ie,Ce,Ue,Ne,Fe,We;if(X.currentlyPlayingLine===Ee){X.currentlyPlayingLine=-1;return}X.currentlyPlayingLine=Ee;try{const kn=new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"}),Qn=X.voiceAssignments[Y.character],Er=(We=(Fe=(Ne=(Ue=(Ce=(Ie=(await kn.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:Y.line}]}],config:{responseModalities:[ir.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:Qn}}}}})).candidates)==null?void 0:Ie[0])==null?void 0:Ce.content)==null?void 0:Ue.parts)==null?void 0:Ne[0])==null?void 0:Fe.inlineData)==null?void 0:We.data;if(Er){const ot=new(window.AudioContext||window.webkitAudioContext)({sampleRate:24e3}),vi=await pC(Pf(Er),ot,24e3,1),Ti=ot.createBufferSource();Ti.buffer=vi,Ti.connect(ot.destination),Ti.start(),Ti.onended=()=>{X.currentlyPlayingLine===Ee&&(X.currentlyPlayingLine=-1)}}}catch(kn){console.error("Preview failed:",kn),X.currentlyPlayingLine=-1}},Ms=async Y=>{var Ee;if(Y.prompt){Y.isLoading=!0,Y.imageUrl=null;try{const Ce=await new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"}).models.generateImages({model:F.value,prompt:Y.prompt,config:{numberOfImages:1,outputMimeType:"image/jpeg"}});if(Ce.generatedImages&&((Ee=Ce.generatedImages[0].image)!=null&&Ee.imageBytes)){const Ue=`data:image/jpeg;base64,${Ce.generatedImages[0].image.imageBytes}`;Y.imageUrl=Ue}else throw new Error("No image data received from the API.")}catch(Ie){console.error("Image generation failed:",Ie)}finally{Y.isLoading=!1}}};function Jn(Y,Ee,Ie){for(let Ce=0;Ce<Ie.length;Ce++)Y.setUint8(Ee+Ce,Ie.charCodeAt(Ce))}function Ja(Y){const Ue=new ArrayBuffer(44),Ne=new DataView(Ue);Jn(Ne,0,"RIFF"),Ne.setUint32(4,36+Y.byteLength,!0),Jn(Ne,8,"WAVE"),Jn(Ne,12,"fmt "),Ne.setUint32(16,16,!0),Ne.setUint16(20,1,!0),Ne.setUint16(22,1,!0),Ne.setUint32(24,24e3,!0),Ne.setUint32(28,24e3*1*(16/8),!0),Ne.setUint16(32,1*(16/8),!0),Ne.setUint16(34,16,!0),Jn(Ne,36,"data"),Ne.setUint32(40,Y.byteLength,!0);const Fe=new ArrayBuffer(Y.byteLength);return new Uint8Array(Fe).set(Y),new Blob([Ue,Fe],{type:"audio/wav"})}const Mt=async()=>{var Ee,Ie,Ce,Ue,Ne,Fe;X.step="generating",X.generationProgress=0;const Y=[];try{const We=new Lr({apiKey:"AIzaSyBWAEpTSHDKHU-R9LrzodNrcWwLu_FLFL8"});for(let ot=0;ot<X.script.length;ot++){const vi=X.script[ot],Ti=X.voiceAssignments[vi.character],wr=(Fe=(Ne=(Ue=(Ce=(Ie=(Ee=(await We.models.generateContent({model:"gemini-2.5-flash-preview-tts",contents:[{parts:[{text:vi.line}]}],config:{responseModalities:[ir.AUDIO],speechConfig:{voiceConfig:{prebuiltVoiceConfig:{voiceName:Ti}}}}})).candidates)==null?void 0:Ee[0])==null?void 0:Ie.content)==null?void 0:Ce.parts)==null?void 0:Ue[0])==null?void 0:Ne.inlineData)==null?void 0:Fe.data;wr&&Y.push(Pf(wr)),X.generationProgress=(ot+1)/X.script.length*100}const kn=Y.reduce((ot,vi)=>ot+vi.length,0),Qn=new Uint8Array(kn);let $n=0;for(const ot of Y)Qn.set(ot,$n),$n+=ot.length;const Er=Ja(Qn);X.finalAudioUrl=URL.createObjectURL(Er),X.step="finished"}catch(We){console.error(We),X.error=We instanceof Error?We.message:"Failed during audio generation.",X.step="editing"}},Qa=()=>{if(!X.finalAudioUrl)return;const Y=document.createElement("a");Y.href=X.finalAudioUrl,Y.download=`${X.fileName.replace(".txt","")}.wav`,document.body.appendChild(Y),Y.click(),document.body.removeChild(Y)};return Js(()=>ut.value,Y=>{Y?Pn.value=!0:setTimeout(()=>{Pn.value=!1},1300)}),pi(()=>{J(),W(),z(),Bn(),window.addEventListener("resize",rt)}),xs(()=>{xe.value&&URL.revokeObjectURL(xe.value),ne.value&&URL.revokeObjectURL(ne.value),window.removeEventListener("resize",rt)}),{currentUser:n,isAuthenticated:e,authLoading:t,showAuthModal:i,showProfileModal:s,authMode:r,currentView:o,noAudioCount:a,characterGenerated:l,playingResponse:u,currentIndex:d,liveAudioRef:p,characterImageRef:g,selectedVoice:k,selectedRole:D,selectedMood:M,selectedStyle:P,selectedCharacter:x,selectedDialogModel:L,selectedImageModel:F,selectedInterruptSensitivity:R,characterVoiceDescription:_,characterVisualDescription:E,onGenerateCharacter:le,selectCharacter:te,selectRole:ae,selectMood:fe,selectStyle:Te,showShareModal:T,showRawModal:v,isCopied:w,copyToClipboard:$,getShareUrl:q,actualVoicePrompt:S,actualImagePrompt:A,isConnecting:b,handleNoAudio:Oe,handleSpeakingStart:Ve,handleExtendedQuiet:At,handleQuotaExceeded:ht,stopPlaybackAndReset:Kt,isEverythingSelected:st,selectionPrompt:rn,isInSession:on,characterImageKey:V,toggleVoiceDropdown:B,selectVoice:G,showVoiceDropdown:oe,voiceOptions:ce,selectedVoiceInfo:fn,regenerateImage:N,imageTimestamp:ee,logoUrl:ne,showClickToRestartHelp:qe,isPlayerVisible:ut,isSmallScreen:_t,isPlayerInDOM:Pn,forceShowBottomMessage:Nt,categories:{Characters:{items:Ih,selected:x,select:te,getter:Y=>({emoji:Y.emoji,name:Y.name.split(" ")[0]})},Roles:{items:Ch,selected:D,select:ae,getter:Y=>({emoji:Y.emoji,name:null})},Moods:{items:ii,selected:M,select:fe,getter:Y=>({emoji:Y.emoji,name:null})},Styles:{items:Ah,selected:P,select:Te,getter:Y=>({emoji:Y.emoji,name:null})}},CHARACTER_ATTRIBUTES:Ih,ROLE_ATTRIBUTES:Ch,MOOD_ATTRIBUTES:ii,STYLE_ATTRIBUTES:Ah,audiobookState:X,resetAudiobookCreator:zi,handleFileUpload:tt,playPreviewLine:_i,generateFullAudiobook:Mt,downloadAudioFile:Qa,generateAudiobookImage:Ms,ART_STYLES:je,audiobookScriptWithScenes:Dt}},template:`
    <div class="bg-blue w-full h-full flex flex-col items-center p-2 lg:p-4 text-black overflow-hidden font-sans">
      <header class="w-full flex justify-between items-center mb-2 lg:mb-4 px-2">
        <div class="flex items-center space-x-2">
          <img v-if="logoUrl" :src="logoUrl" class="w-8 h-8" alt="logo"/>
          <h1 class="text-xl lg:text-3xl font-bold">Audio Avatars</h1>
        </div>
        <div class="flex items-center space-x-4">
          <div class="bg-white/50 p-1 rounded-full flex text-sm">
             <button @click="currentView = 'avatars'" class="px-3 py-1 rounded-full transition-colors" :class="currentView === 'avatars' ? 'bg-black text-white' : 'hover:bg-black/10'">Avatars</button>
             <button @click="currentView = 'audiobook'" class="px-3 py-1 rounded-full transition-colors" :class="currentView === 'audiobook' ? 'bg-black text-white' : 'hover:bg-black/10'">Audiobook Creator</button>
             <button @click="currentView = 'sentry-test'" class="px-3 py-1 rounded-full transition-colors" :class="currentView === 'sentry-test' ? 'bg-black text-white' : 'hover:bg-black/10'">Test Errors</button>
          </div>
          <div class="flex items-center space-x-2">
            <!-- Auth Buttons -->
            <button
              v-if="!isAuthenticated && !authLoading"
              @click="authMode = 'login'; showAuthModal = true"
              class="bg-blue-600 hover:bg-blue-700 text-white font-medium px-4 py-2 rounded-full transition"
            >
              Sign In
            </button>
            <button
              v-if="isAuthenticated"
              @click="showProfileModal = true"
              class="bg-white/50 hover:bg-white text-black font-bold p-2 rounded-full aspect-square flex items-center justify-center"
              :title="currentUser?.displayName || 'Profile'"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"></path><circle cx="12" cy="7" r="4"></circle></svg>
            </button>
            <button @click="showShareModal = true" class="bg-white/50 hover:bg-white text-black font-bold p-2 rounded-full aspect-square flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="18" cy="5" r="3"></circle><circle cx="6" cy="12" r="3"></circle><circle cx="18" cy="19" r="3"></circle><line x1="8.59" y1="13.51" x2="15.42" y2="17.49"></line><line x1="15.41" y1="6.51" x2="8.59" y2="10.49"></line></svg>
            </button>
            <button @click="showRawModal = true" class="bg-white/50 hover:bg-white text-black font-bold p-2 rounded-full aspect-square flex items-center justify-center">
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polyline points="16 18 22 12 16 6"></polyline><polyline points="8 6 2 12 8 18"></polyline></svg>
            </button>
          </div>
        </div>
      </header>
      
      <main v-if="currentView === 'avatars'" class="w-full flex-grow grid grid-cols-1 lg:grid-cols-5 gap-2 lg:gap-4 overflow-hidden">
        <div class="lg:col-span-2 bg-white/50 rounded-wow p-2 lg:p-4 flex flex-col justify-between" :class="isSmallScreen && isPlayerVisible ? 'hidden' : 'flex'">
          <div class="space-y-2 lg:space-y-4">
            <template v-for="(category, categoryName) in categories" :key="categoryName">
              <div class="bg-white/50 rounded-2xl p-2">
                <h2 class="text-sm lg:text-base font-bold mb-1 ml-1">{{ categoryName }}</h2>
                <div class="grid" :class="'grid-cols-' + (categoryName === 'Characters' ? (isSmallScreen ? 4 : 8) : (isSmallScreen ? 4 : 7)) + ' gap-1'">
                  <div v-for="(item, key) in category.items" :key="key" @click="category.select(key)" class="button relative flex flex-col items-center justify-center p-1 lg:p-2 rounded-2xl transition-all duration-300 aspect-square" :class="category.selected.value === key ? 'bg-black text-white' : 'bg-gray-200 text-black hover:bg-gray-300'">
                    <div class="text-2xl lg:text-4xl leading-none">{{ category.getter(item).emoji }}</div>
                    <div v-if="category.getter(item).name" class="text-xs font-bold">{{ category.getter(item).name }}</div>
                  </div>
                </div>
              </div>
            </template>
          </div>
          <div class="relative mt-2">
            <button @click="toggleVoiceDropdown" class="w-full bg-white text-black p-2 lg:p-3 rounded-2xl flex justify-between items-center text-left">
              <div class="flex-grow">
                <div class="font-bold text-sm lg:text-base">{{ selectedVoiceInfo.name }}</div>
                <div class="text-xs opacity-70">{{ selectedVoiceInfo.style }} / {{ selectedVoiceInfo.pitch }}</div>
              </div>
              <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="w-5 h-5 transition-transform" :class="{'rotate-180': showVoiceDropdown}"><polyline points="6 9 12 15 18 9"></polyline></svg>
            </button>
            <transition name="fade">
              <div v-if="showVoiceDropdown" class="absolute bottom-full mb-1 w-full bg-white rounded-2xl shadow-lg max-h-60 overflow-y-auto z-10 p-2">
                <div v-for="voice in voiceOptions" :key="voice.name" @click="selectVoice(voice.name)" class="cursor-pointer p-2 hover:bg-gray-100 rounded-lg" :class="{'bg-gray-200': selectedVoice === voice.name}">
                  <div class="font-bold text-sm">{{ voice.name }} <span class="font-normal opacity-70"> - {{ voice.style }} / {{ voice.pitch }}</span></div>
                  <div class="text-xs opacity-70">{{ voice.suitability }}</div>
                </div>
              </div>
            </transition>
          </div>
        </div>

        <div class="lg:col-span-3 bg-white/50 rounded-wow p-2 lg:p-4 flex flex-col relative overflow-hidden" :class="isSmallScreen && !isPlayerVisible ? 'hidden' : 'flex'">
          <transition name="elasticBottom">
            <div v-if="isPlayerInDOM" class="absolute inset-0 bg-white/50 rounded-wow p-2 lg:p-4 flex flex-col items-center justify-center z-0" :class="{ 'pointer-events-none': !isPlayerVisible }">
              <div class="w-full max-w-sm aspect-square mb-4">
                 <CharacterImage v-if="isEverythingSelected"
                  ref="characterImageRef"
                  :key="characterImageKey + imageTimestamp"
                  :character="selectedCharacter"
                  :role="selectedRole"
                  :mood="selectedMood"
                  :style="selectedStyle"
                  :model="selectedImageModel"
                  @update:image-prompt="actualImagePrompt = $event"
                 />
              </div>
              
              <div class="flex w-full max-w-sm space-x-2">
                <div v-for="i in 8" :key="i" class="w-1/8 h-12 bg-white/50 rounded-full animate-wave" :style="{ animationDelay: (i * 0.1) + 's', transform: 'scaleY(' + ($refs.liveAudioRef?.userWaveformData[i-1] || 0) + ')' }"></div>
              </div>
              <div class="flex w-full max-w-sm space-x-2 mt-2">
                <div v-for="i in 8" :key="i" class="w-1/8 h-20 bg-black/50 rounded-full animate-wave" :style="{ animationDelay: (i * 0.1) + 's', transform: 'scaleY(' + ($refs.liveAudioRef?.systemWaveformData[i-1] || 0) + ')' }"></div>
              </div>
              
              <div class="absolute bottom-4 left-4 right-4 flex justify-between items-center">
                 <button @click="regenerateImage" class="bg-white/50 hover:bg-white p-2 rounded-full aspect-square flex items-center justify-center" title="Regenerate Image">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12a9 9 0 0 0-9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"></path><path d="M3 3v5h5"></path><path d="M3 12a9 9 0 0 0 9 9 9.75 9.75 0 0 0 6.74-2.74L21 16"></path><path d="M21 21v-5h-5"></path></svg>
                 </button>
                 <button @click="stopPlaybackAndReset" class="bg-red-500 hover:bg-red-600 text-white p-3 rounded-full" title="Stop">
                    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="3" width="18" height="18" rx="2" ry="2"></rect></svg>
                 </button>
                 <div class="w-8"></div>
              </div>

              <div v-if="isConnecting || showClickToRestartHelp || forceShowBottomMessage" class="absolute bottom-20 text-center text-sm lg:text-base font-semibold px-4">
                 <p v-if="isConnecting">Connecting to character...</p>
                 <p v-if="showClickToRestartHelp">There was an issue. Click the character to try again.</p>
              </div>

            </div>
          </transition>

          <div class="absolute inset-0 flex flex-col items-center justify-center p-4 text-center" v-if="!isPlayerVisible && !isConnecting">
             <div class="w-48 h-48 lg:w-64 lg:h-64 mb-4">
                <img v-if="logoUrl" :src="logoUrl" alt="Audio Avatars Logo" class="w-full h-full object-contain opacity-20"/>
             </div>
             <p class="text-lg lg:text-xl font-bold opacity-50">{{ selectionPrompt }}</p>
          </div>
        </div>
      </main>

       <main v-if="currentView === 'audiobook'" class="w-full flex-grow bg-white/50 rounded-wow p-4 flex flex-col items-center justify-center overflow-hidden">
       <main v-if="currentView === 'sentry-test'" class="w-full flex-grow bg-white/50 rounded-wow">
         <SentryTestPage />
       </main>
        <!-- Step 1: Upload -->
        <div v-if="audiobookState.step === 'upload'" class="text-center">
          <h2 class="text-2xl font-bold mb-2">Audiobook Creator</h2>
          <p class="mb-4 text-black/60">Upload a chapter (.txt file) to get started.</p>
          <label class="bg-black text-white px-6 py-3 rounded-full font-bold cursor-pointer hover:bg-black/80 transition-colors">
            Upload Chapter
            <input type="file" @change="handleFileUpload" accept=".txt" class="hidden">
          </label>
           <p v-if="audiobookState.error" class="text-red-500 mt-4 max-w-md">{{ audiobookState.error }}</p>
        </div>

        <!-- Step 2: Parsing -->
        <div v-if="audiobookState.step === 'parsing'" class="text-center">
          <div class="relative w-16 h-16 mx-auto">
            <div class="absolute inset-0 border-8 border-black/20 rounded-full"></div>
            <div class="absolute inset-0 border-8 border-black rounded-full border-t-transparent animate-spin"></div>
          </div>
          <p class="mt-4 font-bold">Analyzing chapter, designing characters, and creating script...</p>
        </div>

        <!-- Step 3: Editing -->
        <div v-if="audiobookState.step === 'editing'" class="w-full h-full flex flex-col gap-4 overflow-hidden">
            <div class="flex-shrink-0 flex justify-between items-center">
                <div class="flex items-baseline gap-4">
                    <h2 class="text-xl font-bold">Production Studio</h2>
                    <p class="text-sm text-black/60">{{ audiobookState.fileName }}</p>
                </div>
                <div class="flex items-center gap-2">
                    <button @click="generateFullAudiobook" class="bg-black text-white font-bold py-2 px-5 rounded-full hover:bg-black/80">Generate Full Chapter</button>
                    <button @click="resetAudiobookCreator" class="bg-gray-200 text-black font-bold py-2 px-4 rounded-full hover:bg-gray-300 text-sm">Start New</button>
                </div>
            </div>
            <div class="flex-shrink-0 bg-black/10 p-1 rounded-full flex text-sm self-start">
                 <button @click="audiobookState.editingTab = 'voices'" class="px-4 py-1.5 rounded-full transition-colors text-sm font-semibold" :class="audiobookState.editingTab === 'voices' ? 'bg-white text-black' : 'hover:bg-black/10'">1. Cast Voices</button>
                 <button @click="audiobookState.editingTab = 'characters'" class="px-4 py-1.5 rounded-full transition-colors text-sm font-semibold" :class="audiobookState.editingTab === 'characters' ? 'bg-white text-black' : 'hover:bg-black/10'">2. Design Characters</button>
                 <button @click="audiobookState.editingTab = 'scenes'" class="px-4 py-1.5 rounded-full transition-colors text-sm font-semibold" :class="audiobookState.editingTab === 'scenes' ? 'bg-white text-black' : 'hover:bg-black/10'">3. Create Scenes</button>
            </div>

            <div class="flex-grow w-full bg-black/5 rounded-2xl p-4 overflow-y-auto">
                <!-- Tab 1: Voices -->
                <div v-if="audiobookState.editingTab === 'voices'">
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                      <div v-for="char in audiobookState.characters" :key="char.name" class="bg-white/50 p-3 rounded-xl">
                          <label class="font-bold text-md">{{ char.name }}</label>
                          <select v-model="audiobookState.voiceAssignments[char.name]" class="w-full p-2 mt-1 rounded-lg border-2 border-black/20 bg-white">
                              <option v-for="voice in voiceOptions" :key="voice.name" :value="voice.name">{{ voice.name }}</option>
                          </select>
                      </div>
                    </div>
                </div>
                <!-- Tab 2: Characters -->
                <div v-if="audiobookState.editingTab === 'characters'">
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <div v-for="char in audiobookState.characters" :key="char.name" class="bg-white/50 p-4 rounded-xl flex flex-col gap-3">
                            <h3 class="text-lg font-bold">{{ char.name }}</h3>
                            <p class="text-sm bg-black/5 p-2 rounded-md">{{ char.description }}</p>
                            <div class="flex gap-4">
                                <div class="flex-grow w-1/2">
                                    <label class="font-bold text-xs">Art Style</label>
                                    <select v-model="char.style" class="w-full p-2 mt-1 rounded-lg border-2 border-black/20 bg-white text-sm">
                                        <option v-for="style in ART_STYLES" :key="style" :value="style">{{ style }}</option>
                                    </select>
                                    <label class="font-bold text-xs mt-2 block">Image Prompt</label>
                                    <textarea v-model="char.prompt" rows="6" class="w-full p-2 mt-1 rounded-lg border-2 border-black/20 bg-white text-xs font-mono"></textarea>
                                    <button @click="generateAudiobookImage(char)" class="w-full mt-2 bg-purple text-white font-bold py-2 rounded-full text-sm hover:bg-purple/80" :disabled="char.isLoading">
                                        {{ char.isLoading ? 'Generating...' : 'Generate Portrait' }}
                                    </button>
                                </div>
                                <div class="w-1/2 aspect-square bg-black/10 rounded-lg flex items-center justify-center overflow-hidden">
                                     <div v-if="char.isLoading" class="relative w-10 h-10">
                                        <div class="absolute inset-0 border-4 border-black/20 rounded-full"></div>
                                        <div class="absolute inset-0 border-4 border-purple rounded-full border-t-transparent animate-spin"></div>
                                    </div>
                                    <img v-else-if="char.imageUrl" :src="char.imageUrl" class="w-full h-full object-cover"/>
                                    <p v-else class="text-xs text-black/40">Image will appear here</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!-- Tab 3: Scenes -->
                <div v-if="audiobookState.editingTab === 'scenes'">
                     <div v-for="(item, index) in audiobookScriptWithScenes" :key="index" class="mb-2">
                        <div v-if="item.type === 'line'" class="flex items-center gap-3 p-2 rounded-lg hover:bg-black/10">
                           <button @click="playPreviewLine(item.data, index)" class="w-8 h-8 flex-shrink-0 rounded-full flex items-center justify-center" :class="audiobookState.currentlyPlayingLine === index ? 'bg-purple text-white' : 'bg-white'">
                              <svg v-if="audiobookState.currentlyPlayingLine === index" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="6" y="4" width="4" height="16"></rect><rect x="14" y="4" width="4" height="16"></rect></svg>
                              <svg v-else xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="5 3 19 12 5 21 5 3"></polygon></svg>
                           </button>
                           <p class="text-sm"><strong class="mr-2">{{ item.data.character }}:</strong>{{ item.data.line }}</p>
                        </div>
                        <div v-else-if="item.type === 'scene'" class="bg-white/50 my-4 p-4 rounded-xl border-l-4 border-purple">
                            <h4 class="font-bold text-purple mb-2">Scene Illustration</h4>
                            <div class="flex gap-4">
                               <div class="flex-grow w-1/2">
                                    <label class="font-bold text-xs mt-2 block">Image Prompt</label>
                                    <textarea v-model="item.data.prompt" rows="8" class="w-full p-2 mt-1 rounded-lg border-2 border-black/20 bg-white text-xs font-mono"></textarea>
                                    <button @click="generateAudiobookImage(item.data)" class="w-full mt-2 bg-purple text-white font-bold py-2 rounded-full text-sm hover:bg-purple/80" :disabled="item.data.isLoading">
                                        {{ item.data.isLoading ? 'Generating...' : 'Generate Scene' }}
                                    </button>
                                </div>
                                <div class="w-1/2 aspect-square bg-black/10 rounded-lg flex items-center justify-center overflow-hidden">
                                     <div v-if="item.data.isLoading" class="relative w-10 h-10">
                                        <div class="absolute inset-0 border-4 border-black/20 rounded-full"></div>
                                        <div class="absolute inset-0 border-4 border-purple rounded-full border-t-transparent animate-spin"></div>
                                    </div>
                                    <img v-else-if="item.data.imageUrl" :src="item.data.imageUrl" class="w-full h-full object-cover"/>
                                    <p v-else class="text-xs text-black/40">Image will appear here</p>
                                </div>
                            </div>
                        </div>
                     </div>
                </div>
            </div>
        </div>

        <!-- Step 4 & 5: Generating & Finished -->
        <div v-if="audiobookState.step === 'generating' || audiobookState.step === 'finished'" class="w-full max-w-lg text-center">
            <h2 class="text-2xl font-bold mb-4">{{ audiobookState.step === 'generating' ? 'Generating Your Audiobook' : 'Your Audiobook is Ready!' }}</h2>
            
            <div v-if="audiobookState.step === 'generating'" class="w-full bg-gray-200 rounded-full h-4 mb-4 overflow-hidden">
                <div class="bg-purple h-4 rounded-full" :style="{ width: audiobookState.generationProgress + '%' }"></div>
            </div>
            <p v-if="audiobookState.step === 'generating'" class="mb-4">Please wait, this may take a few minutes...</p>

            <div v-if="audiobookState.step === 'finished'">
                <audio controls :src="audiobookState.finalAudioUrl" class="w-full mb-4"></audio>
                <div class="flex gap-4">
                  <button @click="downloadAudioFile" class="flex-1 bg-black text-white font-bold py-3 rounded-full hover:bg-black/80">Download .WAV</button>
                  <button @click="resetAudiobookCreator" class="flex-1 bg-gray-200 text-black font-bold py-3 rounded-full hover:bg-gray-300">Create New Chapter</button>
                </div>
            </div>
        </div>

      </main>

      <div v-if="isPlayerVisible && isSmallScreen" class="fixed bottom-0 left-0 right-0 bg-blue p-2 border-t-2 border-white/50">
        <button @click="isPlayerVisible = false" class="w-full bg-white text-black p-3 rounded-2xl font-bold">Show Controls</button>
      </div>

      <LiveAudioComponent ref="liveAudioRef" @no-audio="handleNoAudio" @speaking-start="handleSpeakingStart" @extended-quiet="handleExtendedQuiet" @quota-exceeded="handleQuotaExceeded" />

      <!-- Share Modal -->
      <transition name="fade">
        <div v-if="showShareModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" @click="showShareModal = false">
          <div class="bg-white rounded-2xl p-6 w-full max-w-md" @click.stop>
            <h2 class="text-2xl font-bold mb-4">Share Character</h2>
            <p class="mb-4">Share a link to this specific character configuration.</p>
            <div class="flex space-x-2">
              <input type="text" :value="getShareUrl()" readonly class="flex-grow bg-gray-100 rounded-lg px-3 border border-gray-300">
              <button @click="copyToClipboard" class="bg-purple text-white px-4 py-2 rounded-lg font-bold">{{ isCopied ? 'Copied!' : 'Copy' }}</button>
            </div>
          </div>
        </div>
      </transition>
      
      <!-- Raw Prompts Modal -->
      <transition name="fade">
        <div v-if="showRawModal" class="fixed inset-0 bg-black/50 flex items-center justify-center z-50" @click="showRawModal = false">
          <div class="bg-white rounded-2xl p-6 w-full max-w-2xl max-h-[80vh] overflow-y-auto" @click.stop>
            <h2 class="text-2xl font-bold mb-4">Raw Prompts</h2>
            <div class="space-y-4">
              <div>
                <h3 class="font-bold">Voice Prompt:</h3>
                <p class="bg-gray-100 rounded-lg p-3 text-sm font-mono">{{ actualVoicePrompt }}</p>
              </div>
              <div>
                <h3 class="font-bold">Image Prompt:</h3>
                <p class="bg-gray-100 rounded-lg p-3 text-sm font-mono">{{ actualImagePrompt }}</p>
              </div>
            </div>
          </div>
        </div>
      </transition>

      <!-- Auth Modal -->
      <AuthModal
        :show="showAuthModal"
        :initialMode="authMode"
        @close="showAuthModal = false"
        @authenticated="showAuthModal = false"
      />

      <!-- User Profile Modal -->
      <UserProfile
        :show="showProfileModal"
        :user="currentUser"
        @close="showProfileModal = false"
        @signedOut="showProfileModal = false"
      />
    </div>
`}),dC=gc(y4);try{const{initSentry:n}=require("./src/sentry");try{n(dC)}catch(e){console.warn("Sentry helper threw:",(e==null?void 0:e.message)||e)}}catch{}function Pf(n){const e=atob(n),t=e.length,i=new Uint8Array(t);for(let s=0;s<t;s++)i[s]=e.charCodeAt(s);return i}async function pC(n,e,t,i){const s=new Int16Array(n.buffer),r=s.length/i,o=e.createBuffer(i,r,t);for(let a=0;a<i;a++){const l=o.getChannelData(a);for(let u=0;u<r;u++)l[u]=s[u*i+a]/32768}return o}function _4(n){let e="";const t=n.byteLength;for(let i=0;i<t;i++)e+=String.fromCharCode(n[i]);return btoa(e)}function v4(n){const e=n.length,t=new Int16Array(e);for(let i=0;i<e;i++)t[i]=n[i]*32768;return{data:_4(new Uint8Array(t.buffer)),mimeType:"audio/pcm;rate=16000"}}i4();dC.mount("#app");
//# sourceMappingURL=index-C_EjLgmi.js.map
