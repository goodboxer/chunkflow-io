{"version":3,"file":"components-Db2zrr2m.js","sources":["../../src/firebase/config.ts","../../src/firebase/auth.ts","../../src/firebase/firestore.ts","../../src/components/AuthModal.ts","../../src/components/UserProfile.ts"],"sourcesContent":["/**\n * Firebase Configuration\n *\n * Initializes Firebase services for ChunkFlow-IO:\n * - Authentication (email/password, Google OAuth)\n * - Firestore Database (user projects, audiobooks)\n * - Storage (audio files, images)\n */\n\nimport { initializeApp, FirebaseApp } from 'firebase/app';\nimport { getAuth, Auth } from 'firebase/auth';\nimport { getFirestore, Firestore } from 'firebase/firestore';\nimport { getStorage, FirebaseStorage } from 'firebase/storage';\n\n// Firebase configuration from environment variables\n// These values should be added to .env.local\nconst firebaseConfig = {\n  apiKey: import.meta.env.VITE_FIREBASE_API_KEY || '',\n  authDomain: import.meta.env.VITE_FIREBASE_AUTH_DOMAIN || '',\n  projectId: import.meta.env.VITE_FIREBASE_PROJECT_ID || '',\n  storageBucket: import.meta.env.VITE_FIREBASE_STORAGE_BUCKET || '',\n  messagingSenderId: import.meta.env.VITE_FIREBASE_MESSAGING_SENDER_ID || '',\n  appId: import.meta.env.VITE_FIREBASE_APP_ID || '',\n};\n\n// Validate Firebase configuration\nfunction validateFirebaseConfig(): boolean {\n  const requiredFields = [\n    'apiKey',\n    'authDomain',\n    'projectId',\n    'storageBucket',\n    'messagingSenderId',\n    'appId',\n  ];\n\n  for (const field of requiredFields) {\n    if (!firebaseConfig[field as keyof typeof firebaseConfig]) {\n      console.warn(`Firebase config missing: ${field}`);\n      return false;\n    }\n  }\n  return true;\n}\n\n// Initialize Firebase only if configuration is valid\nlet app: FirebaseApp | null = null;\nlet auth: Auth | null = null;\nlet db: Firestore | null = null;\nlet storage: FirebaseStorage | null = null;\n\nif (validateFirebaseConfig()) {\n  try {\n    app = initializeApp(firebaseConfig);\n    auth = getAuth(app);\n    db = getFirestore(app);\n    storage = getStorage(app);\n    console.log('Firebase initialized successfully');\n  } catch (error) {\n    console.error('Firebase initialization error:', error);\n  }\n} else {\n  console.warn(\n    'Firebase not initialized. Add Firebase config to .env.local to enable user accounts and data persistence.'\n  );\n}\n\nexport { app, auth, db, storage };\nexport type { Auth, Firestore, FirebaseStorage };\n","/**\n * Firebase Authentication Service\n *\n * Handles user authentication for ChunkFlow-IO:\n * - Email/password signup and login\n * - Google OAuth login\n * - Password reset\n * - Auth state management\n */\n\nimport {\n  createUserWithEmailAndPassword,\n  signInWithEmailAndPassword,\n  signInWithPopup,\n  GoogleAuthProvider,\n  signOut,\n  sendPasswordResetEmail,\n  updateProfile,\n  User,\n  UserCredential,\n  onAuthStateChanged,\n} from 'firebase/auth';\nimport { auth } from './config';\n\n/**\n * Sign up a new user with email and password\n */\nexport async function signUpWithEmail(\n  email: string,\n  password: string,\n  displayName?: string\n): Promise<UserCredential> {\n  if (!auth) {\n    throw new Error('Firebase Auth is not initialized');\n  }\n\n  const userCredential = await createUserWithEmailAndPassword(\n    auth,\n    email,\n    password\n  );\n\n  // Update display name if provided\n  if (displayName && userCredential.user) {\n    await updateProfile(userCredential.user, { displayName });\n  }\n\n  return userCredential;\n}\n\n/**\n * Sign in an existing user with email and password\n */\nexport async function signInWithEmail(\n  email: string,\n  password: string\n): Promise<UserCredential> {\n  if (!auth) {\n    throw new Error('Firebase Auth is not initialized');\n  }\n\n  return await signInWithEmailAndPassword(auth, email, password);\n}\n\n/**\n * Sign in with Google OAuth\n */\nexport async function signInWithGoogle(): Promise<UserCredential> {\n  if (!auth) {\n    throw new Error('Firebase Auth is not initialized');\n  }\n\n  const provider = new GoogleAuthProvider();\n  provider.addScope('profile');\n  provider.addScope('email');\n\n  return await signInWithPopup(auth, provider);\n}\n\n/**\n * Sign out the current user\n */\nexport async function signOutUser(): Promise<void> {\n  if (!auth) {\n    throw new Error('Firebase Auth is not initialized');\n  }\n\n  await signOut(auth);\n}\n\n/**\n * Send a password reset email\n */\nexport async function resetPassword(email: string): Promise<void> {\n  if (!auth) {\n    throw new Error('Firebase Auth is not initialized');\n  }\n\n  await sendPasswordResetEmail(auth, email);\n}\n\n/**\n * Get the current authenticated user\n */\nexport function getCurrentUser(): User | null {\n  return auth?.currentUser || null;\n}\n\n/**\n * Listen to authentication state changes\n */\nexport function onAuthChange(callback: (user: User | null) => void): () => void {\n  if (!auth) {\n    console.warn('Firebase Auth is not initialized');\n    return () => {};\n  }\n\n  return onAuthStateChanged(auth, callback);\n}\n\n/**\n * Check if user is authenticated\n */\nexport function isAuthenticated(): boolean {\n  return !!auth?.currentUser;\n}\n","/**\n * Firestore Database Service\n *\n * Handles data persistence for ChunkFlow-IO:\n * - User profiles\n * - Audiobook projects\n * - Generated audio and images\n * - Subscription data\n */\n\nimport {\n  collection,\n  doc,\n  getDoc,\n  getDocs,\n  setDoc,\n  updateDoc,\n  deleteDoc,\n  query,\n  where,\n  orderBy,\n  limit,\n  Timestamp,\n  DocumentData,\n  QueryConstraint,\n} from 'firebase/firestore';\nimport { db } from './config';\n\n// Type definitions for Firestore documents\n\nexport interface UserProfile {\n  uid: string;\n  email: string;\n  displayName: string;\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n  subscription: {\n    plan: 'free' | 'basic' | 'pro' | 'enterprise';\n    status: 'active' | 'canceled' | 'expired';\n    startDate: Timestamp | null;\n    endDate: Timestamp | null;\n  };\n  usage: {\n    audioBooksCreated: number;\n    audioMinutesGenerated: number;\n    imagesGenerated: number;\n    storageUsedMB: number;\n  };\n}\n\nexport interface AudiobookProject {\n  id: string;\n  userId: string;\n  title: string;\n  author: string;\n  description?: string;\n  status: 'draft' | 'processing' | 'completed' | 'failed';\n  createdAt: Timestamp;\n  updatedAt: Timestamp;\n  manuscriptUrl?: string; // Firebase Storage URL\n  manuscriptFormat?: 'epub' | 'pdf' | 'docx' | 'txt' | 'rtf';\n  characters: CharacterAssignment[];\n  scenes: Scene[];\n  audioFiles: AudioFile[];\n  coverImageUrl?: string;\n  metadata: {\n    wordCount?: number;\n    estimatedDuration?: number; // in minutes\n    genre?: string;\n    language?: string;\n  };\n}\n\nexport interface CharacterAssignment {\n  characterName: string;\n  personaType: string; // e.g., 'dog', 'cat', etc.\n  mood: string;\n  role: string;\n  style: string;\n  voiceSettings?: {\n    pitch?: number;\n    speed?: number;\n    emphasis?: number;\n  };\n}\n\nexport interface Scene {\n  id: string;\n  sceneNumber: number;\n  title?: string;\n  text: string;\n  characterSpeaking?: string;\n  imagePrompt?: string;\n  imageUrl?: string;\n  audioUrl?: string;\n  startPosition?: number; // character position in manuscript\n  endPosition?: number;\n  duration?: number; // in seconds\n}\n\nexport interface AudioFile {\n  id: string;\n  sceneId: string;\n  url: string; // Firebase Storage URL\n  format: 'm4b' | 'mp3' | 'aax';\n  duration: number; // in seconds\n  fileSize: number; // in bytes\n  createdAt: Timestamp;\n}\n\n/**\n * Create or update user profile\n */\nexport async function saveUserProfile(\n  uid: string,\n  data: Partial<UserProfile>\n): Promise<void> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const userRef = doc(db, 'users', uid);\n  const now = Timestamp.now();\n\n  await setDoc(\n    userRef,\n    {\n      ...data,\n      uid,\n      updatedAt: now,\n      createdAt: data.createdAt || now,\n    },\n    { merge: true }\n  );\n}\n\n/**\n * Get user profile\n */\nexport async function getUserProfile(uid: string): Promise<UserProfile | null> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const userRef = doc(db, 'users', uid);\n  const userSnap = await getDoc(userRef);\n\n  if (userSnap.exists()) {\n    return userSnap.data() as UserProfile;\n  }\n\n  return null;\n}\n\n/**\n * Create a new audiobook project\n */\nexport async function createAudiobookProject(\n  userId: string,\n  projectData: Partial<AudiobookProject>\n): Promise<string> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const projectsRef = collection(db, 'audiobooks');\n  const projectId = doc(projectsRef).id;\n  const now = Timestamp.now();\n\n  const newProject: AudiobookProject = {\n    id: projectId,\n    userId,\n    title: projectData.title || 'Untitled Audiobook',\n    author: projectData.author || 'Unknown Author',\n    description: projectData.description || '',\n    status: 'draft',\n    createdAt: now,\n    updatedAt: now,\n    characters: [],\n    scenes: [],\n    audioFiles: [],\n    metadata: {},\n    ...projectData,\n  };\n\n  await setDoc(doc(db, 'audiobooks', projectId), newProject);\n\n  return projectId;\n}\n\n/**\n * Get audiobook project by ID\n */\nexport async function getAudiobookProject(\n  projectId: string\n): Promise<AudiobookProject | null> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const projectRef = doc(db, 'audiobooks', projectId);\n  const projectSnap = await getDoc(projectRef);\n\n  if (projectSnap.exists()) {\n    return projectSnap.data() as AudiobookProject;\n  }\n\n  return null;\n}\n\n/**\n * Get all audiobook projects for a user\n */\nexport async function getUserAudiobookProjects(\n  userId: string,\n  maxResults: number = 50\n): Promise<AudiobookProject[]> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const projectsRef = collection(db, 'audiobooks');\n  const q = query(\n    projectsRef,\n    where('userId', '==', userId),\n    orderBy('updatedAt', 'desc'),\n    limit(maxResults)\n  );\n\n  const querySnapshot = await getDocs(q);\n  const projects: AudiobookProject[] = [];\n\n  querySnapshot.forEach((doc) => {\n    projects.push(doc.data() as AudiobookProject);\n  });\n\n  return projects;\n}\n\n/**\n * Update audiobook project\n */\nexport async function updateAudiobookProject(\n  projectId: string,\n  updates: Partial<AudiobookProject>\n): Promise<void> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const projectRef = doc(db, 'audiobooks', projectId);\n  const now = Timestamp.now();\n\n  await updateDoc(projectRef, {\n    ...updates,\n    updatedAt: now,\n  });\n}\n\n/**\n * Delete audiobook project\n */\nexport async function deleteAudiobookProject(projectId: string): Promise<void> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const projectRef = doc(db, 'audiobooks', projectId);\n  await deleteDoc(projectRef);\n}\n\n/**\n * Update user usage statistics\n */\nexport async function updateUserUsage(\n  uid: string,\n  usage: Partial<UserProfile['usage']>\n): Promise<void> {\n  if (!db) {\n    throw new Error('Firestore is not initialized');\n  }\n\n  const userRef = doc(db, 'users', uid);\n\n  await updateDoc(userRef, {\n    usage,\n    updatedAt: Timestamp.now(),\n  });\n}\n","/**\n * Authentication Modal Component\n *\n * Provides login/signup UI with email/password and Google OAuth\n */\n\nimport { defineComponent, ref, computed } from 'vue';\nimport {\n  signUpWithEmail,\n  signInWithEmail,\n  signInWithGoogle,\n  resetPassword,\n} from '../firebase';\n\nexport const AuthModal = defineComponent({\n  name: 'AuthModal',\n  props: {\n    show: {\n      type: Boolean,\n      required: true,\n    },\n    initialMode: {\n      type: String as () => 'login' | 'signup' | 'reset',\n      default: 'login',\n    },\n  },\n  emits: ['close', 'authenticated'],\n  setup(props, { emit }) {\n    const mode = ref<'login' | 'signup' | 'reset'>(props.initialMode);\n    const email = ref('');\n    const password = ref('');\n    const confirmPassword = ref('');\n    const displayName = ref('');\n    const error = ref('');\n    const loading = ref(false);\n    const success = ref('');\n\n    const title = computed(() => {\n      switch (mode.value) {\n        case 'signup':\n          return 'Create Account';\n        case 'reset':\n          return 'Reset Password';\n        default:\n          return 'Sign In';\n      }\n    });\n\n    const buttonText = computed(() => {\n      if (loading.value) return 'Processing...';\n      switch (mode.value) {\n        case 'signup':\n          return 'Sign Up';\n        case 'reset':\n          return 'Send Reset Email';\n        default:\n          return 'Sign In';\n      }\n    });\n\n    function resetForm() {\n      email.value = '';\n      password.value = '';\n      confirmPassword.value = '';\n      displayName.value = '';\n      error.value = '';\n      success.value = '';\n    }\n\n    function switchMode(newMode: 'login' | 'signup' | 'reset') {\n      mode.value = newMode;\n      resetForm();\n    }\n\n    async function handleEmailAuth() {\n      error.value = '';\n      success.value = '';\n\n      // Validation\n      if (!email.value || !email.value.includes('@')) {\n        error.value = 'Please enter a valid email address';\n        return;\n      }\n\n      if (mode.value === 'reset') {\n        try {\n          loading.value = true;\n          await resetPassword(email.value);\n          success.value = 'Password reset email sent! Check your inbox.';\n          setTimeout(() => switchMode('login'), 3000);\n        } catch (err: any) {\n          error.value = err.message || 'Failed to send reset email';\n        } finally {\n          loading.value = false;\n        }\n        return;\n      }\n\n      if (!password.value || password.value.length < 6) {\n        error.value = 'Password must be at least 6 characters';\n        return;\n      }\n\n      if (mode.value === 'signup') {\n        if (password.value !== confirmPassword.value) {\n          error.value = 'Passwords do not match';\n          return;\n        }\n        if (!displayName.value) {\n          error.value = 'Please enter your name';\n          return;\n        }\n      }\n\n      try {\n        loading.value = true;\n\n        if (mode.value === 'signup') {\n          await signUpWithEmail(email.value, password.value, displayName.value);\n        } else {\n          await signInWithEmail(email.value, password.value);\n        }\n\n        emit('authenticated');\n        emit('close');\n        resetForm();\n      } catch (err: any) {\n        if (err.code === 'auth/email-already-in-use') {\n          error.value = 'Email already in use. Try signing in instead.';\n        } else if (err.code === 'auth/invalid-credential') {\n          error.value = 'Invalid email or password';\n        } else if (err.code === 'auth/user-not-found') {\n          error.value = 'No account found with this email';\n        } else if (err.code === 'auth/wrong-password') {\n          error.value = 'Incorrect password';\n        } else {\n          error.value = err.message || 'Authentication failed';\n        }\n      } finally {\n        loading.value = false;\n      }\n    }\n\n    async function handleGoogleAuth() {\n      error.value = '';\n\n      try {\n        loading.value = true;\n        await signInWithGoogle();\n        emit('authenticated');\n        emit('close');\n        resetForm();\n      } catch (err: any) {\n        if (err.code === 'auth/popup-closed-by-user') {\n          error.value = 'Sign-in cancelled';\n        } else {\n          error.value = err.message || 'Google sign-in failed';\n        }\n      } finally {\n        loading.value = false;\n      }\n    }\n\n    function close() {\n      emit('close');\n      resetForm();\n    }\n\n    return {\n      mode,\n      email,\n      password,\n      confirmPassword,\n      displayName,\n      error,\n      success,\n      loading,\n      title,\n      buttonText,\n      switchMode,\n      handleEmailAuth,\n      handleGoogleAuth,\n      close,\n    };\n  },\n  template: `\n    <div v-if=\"show\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\" @click.self=\"close\">\n      <div class=\"bg-white rounded-lg shadow-xl max-w-md w-full mx-4 p-6\">\n        <!-- Header -->\n        <div class=\"flex justify-between items-center mb-6\">\n          <h2 class=\"text-2xl font-bold text-gray-800\">{{ title }}</h2>\n          <button @click=\"close\" class=\"text-gray-400 hover:text-gray-600 text-2xl leading-none\">&times;</button>\n        </div>\n\n        <!-- Error Message -->\n        <div v-if=\"error\" class=\"mb-4 p-3 bg-red-100 border border-red-400 text-red-700 rounded\">\n          {{ error }}\n        </div>\n\n        <!-- Success Message -->\n        <div v-if=\"success\" class=\"mb-4 p-3 bg-green-100 border border-green-400 text-green-700 rounded\">\n          {{ success }}\n        </div>\n\n        <!-- Email/Password Form -->\n        <form @submit.prevent=\"handleEmailAuth\" class=\"space-y-4\">\n          <!-- Name (signup only) -->\n          <div v-if=\"mode === 'signup'\">\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Full Name</label>\n            <input\n              v-model=\"displayName\"\n              type=\"text\"\n              placeholder=\"Enter your name\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              :disabled=\"loading\"\n            />\n          </div>\n\n          <!-- Email -->\n          <div>\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Email</label>\n            <input\n              v-model=\"email\"\n              type=\"email\"\n              placeholder=\"you@example.com\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              :disabled=\"loading\"\n            />\n          </div>\n\n          <!-- Password (not for reset) -->\n          <div v-if=\"mode !== 'reset'\">\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Password</label>\n            <input\n              v-model=\"password\"\n              type=\"password\"\n              placeholder=\"Enter password (6+ characters)\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              :disabled=\"loading\"\n            />\n          </div>\n\n          <!-- Confirm Password (signup only) -->\n          <div v-if=\"mode === 'signup'\">\n            <label class=\"block text-sm font-medium text-gray-700 mb-1\">Confirm Password</label>\n            <input\n              v-model=\"confirmPassword\"\n              type=\"password\"\n              placeholder=\"Re-enter password\"\n              class=\"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent\"\n              :disabled=\"loading\"\n            />\n          </div>\n\n          <!-- Submit Button -->\n          <button\n            type=\"submit\"\n            class=\"w-full bg-blue-600 text-white py-2 px-4 rounded-lg hover:bg-blue-700 transition disabled:opacity-50 disabled:cursor-not-allowed font-medium\"\n            :disabled=\"loading\"\n          >\n            {{ buttonText }}\n          </button>\n        </form>\n\n        <!-- Divider -->\n        <div class=\"my-6 flex items-center\">\n          <div class=\"flex-1 border-t border-gray-300\"></div>\n          <span class=\"px-4 text-sm text-gray-500\">or</span>\n          <div class=\"flex-1 border-t border-gray-300\"></div>\n        </div>\n\n        <!-- Google Sign In -->\n        <button\n          @click=\"handleGoogleAuth\"\n          class=\"w-full bg-white border border-gray-300 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-50 transition flex items-center justify-center gap-2 font-medium\"\n          :disabled=\"loading\"\n        >\n          <svg class=\"w-5 h-5\" viewBox=\"0 0 24 24\">\n            <path fill=\"#4285F4\" d=\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"/>\n            <path fill=\"#34A853\" d=\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"/>\n            <path fill=\"#FBBC05\" d=\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"/>\n            <path fill=\"#EA4335\" d=\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"/>\n          </svg>\n          Continue with Google\n        </button>\n\n        <!-- Mode Switchers -->\n        <div class=\"mt-6 text-center text-sm\">\n          <div v-if=\"mode === 'login'\">\n            <p class=\"text-gray-600\">\n              Don't have an account?\n              <button @click=\"switchMode('signup')\" class=\"text-blue-600 hover:underline font-medium\">Sign up</button>\n            </p>\n            <button @click=\"switchMode('reset')\" class=\"text-blue-600 hover:underline font-medium mt-2\">\n              Forgot password?\n            </button>\n          </div>\n          <div v-else-if=\"mode === 'signup'\">\n            <p class=\"text-gray-600\">\n              Already have an account?\n              <button @click=\"switchMode('login')\" class=\"text-blue-600 hover:underline font-medium\">Sign in</button>\n            </p>\n          </div>\n          <div v-else>\n            <button @click=\"switchMode('login')\" class=\"text-blue-600 hover:underline font-medium\">\n              Back to sign in\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n});\n","/**\n * User Profile Component\n *\n * Displays user information, subscription status, and usage statistics\n */\n\nimport { defineComponent, ref, computed, onMounted, PropType } from 'vue';\nimport { User } from 'firebase/auth';\nimport { signOutUser, getUserProfile, UserProfile as UserProfileType } from '../firebase';\n\nexport const UserProfile = defineComponent({\n  name: 'UserProfile',\n  props: {\n    user: {\n      type: Object as PropType<User | null>,\n      required: true,\n    },\n    show: {\n      type: Boolean,\n      required: true,\n    },\n  },\n  emits: ['close', 'signedOut'],\n  setup(props, { emit }) {\n    const userProfile = ref<UserProfileType | null>(null);\n    const loading = ref(true);\n    const error = ref('');\n\n    const displayName = computed(() => {\n      return props.user?.displayName || userProfile.value?.displayName || 'User';\n    });\n\n    const email = computed(() => {\n      return props.user?.email || 'No email';\n    });\n\n    const subscriptionPlan = computed(() => {\n      return userProfile.value?.subscription?.plan || 'free';\n    });\n\n    const subscriptionStatus = computed(() => {\n      return userProfile.value?.subscription?.status || 'active';\n    });\n\n    const usage = computed(() => {\n      return userProfile.value?.usage || {\n        audioBooksCreated: 0,\n        audioMinutesGenerated: 0,\n        imagesGenerated: 0,\n        storageUsedMB: 0,\n      };\n    });\n\n    const planBadgeColor = computed(() => {\n      switch (subscriptionPlan.value) {\n        case 'pro':\n          return 'bg-purple-100 text-purple-800';\n        case 'basic':\n          return 'bg-blue-100 text-blue-800';\n        case 'enterprise':\n          return 'bg-yellow-100 text-yellow-800';\n        default:\n          return 'bg-gray-100 text-gray-800';\n      }\n    });\n\n    const statusBadgeColor = computed(() => {\n      switch (subscriptionStatus.value) {\n        case 'active':\n          return 'bg-green-100 text-green-800';\n        case 'canceled':\n          return 'bg-orange-100 text-orange-800';\n        case 'expired':\n          return 'bg-red-100 text-red-800';\n        default:\n          return 'bg-gray-100 text-gray-800';\n      }\n    });\n\n    async function loadUserProfile() {\n      if (!props.user) return;\n\n      try {\n        loading.value = true;\n        error.value = '';\n        const profile = await getUserProfile(props.user.uid);\n        userProfile.value = profile;\n      } catch (err: any) {\n        console.error('Failed to load user profile:', err);\n        error.value = 'Failed to load profile data';\n      } finally {\n        loading.value = false;\n      }\n    }\n\n    async function handleSignOut() {\n      try {\n        await signOutUser();\n        emit('signedOut');\n        emit('close');\n      } catch (err: any) {\n        console.error('Sign out failed:', err);\n        error.value = 'Failed to sign out';\n      }\n    }\n\n    function close() {\n      emit('close');\n    }\n\n    onMounted(() => {\n      if (props.user) {\n        loadUserProfile();\n      }\n    });\n\n    return {\n      userProfile,\n      loading,\n      error,\n      displayName,\n      email,\n      subscriptionPlan,\n      subscriptionStatus,\n      usage,\n      planBadgeColor,\n      statusBadgeColor,\n      handleSignOut,\n      close,\n    };\n  },\n  template: `\n    <div v-if=\"show\" class=\"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50\" @click.self=\"close\">\n      <div class=\"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 p-6 max-h-[90vh] overflow-y-auto\">\n        <!-- Header -->\n        <div class=\"flex justify-between items-center mb-6\">\n          <h2 class=\"text-2xl font-bold text-gray-800\">Profile</h2>\n          <button @click=\"close\" class=\"text-gray-400 hover:text-gray-600 text-2xl leading-none\">&times;</button>\n        </div>\n\n        <!-- Loading State -->\n        <div v-if=\"loading\" class=\"flex justify-center py-12\">\n          <div class=\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600\"></div>\n        </div>\n\n        <!-- Error State -->\n        <div v-else-if=\"error\" class=\"p-4 bg-red-100 border border-red-400 text-red-700 rounded mb-4\">\n          {{ error }}\n        </div>\n\n        <!-- Profile Content -->\n        <div v-else class=\"space-y-6\">\n          <!-- User Info -->\n          <div class=\"flex items-center space-x-4 pb-6 border-b\">\n            <div class=\"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white text-2xl font-bold\">\n              {{ displayName.charAt(0).toUpperCase() }}\n            </div>\n            <div>\n              <h3 class=\"text-xl font-semibold text-gray-800\">{{ displayName }}</h3>\n              <p class=\"text-gray-600\">{{ email }}</p>\n            </div>\n          </div>\n\n          <!-- Subscription Info -->\n          <div class=\"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4\">\n            <h4 class=\"text-lg font-semibold text-gray-800 mb-3\">Subscription</h4>\n            <div class=\"flex items-center gap-3 mb-2\">\n              <span :class=\"planBadgeColor\" class=\"px-3 py-1 rounded-full text-sm font-medium uppercase\">\n                {{ subscriptionPlan }}\n              </span>\n              <span :class=\"statusBadgeColor\" class=\"px-3 py-1 rounded-full text-sm font-medium\">\n                {{ subscriptionStatus }}\n              </span>\n            </div>\n            <p class=\"text-sm text-gray-600 mt-2\">\n              <span v-if=\"subscriptionPlan === 'free'\">\n                Upgrade to unlock unlimited audiobook creation and advanced features.\n              </span>\n              <span v-else>\n                Thank you for being a {{ subscriptionPlan }} member!\n              </span>\n            </p>\n          </div>\n\n          <!-- Usage Statistics -->\n          <div>\n            <h4 class=\"text-lg font-semibold text-gray-800 mb-3\">Usage Statistics</h4>\n            <div class=\"grid grid-cols-2 gap-4\">\n              <div class=\"bg-gray-50 rounded-lg p-4\">\n                <div class=\"text-3xl font-bold text-blue-600\">{{ usage.audioBooksCreated }}</div>\n                <div class=\"text-sm text-gray-600 mt-1\">Audiobooks Created</div>\n              </div>\n              <div class=\"bg-gray-50 rounded-lg p-4\">\n                <div class=\"text-3xl font-bold text-purple-600\">{{ usage.audioMinutesGenerated }}</div>\n                <div class=\"text-sm text-gray-600 mt-1\">Audio Minutes</div>\n              </div>\n              <div class=\"bg-gray-50 rounded-lg p-4\">\n                <div class=\"text-3xl font-bold text-green-600\">{{ usage.imagesGenerated }}</div>\n                <div class=\"text-sm text-gray-600 mt-1\">Images Generated</div>\n              </div>\n              <div class=\"bg-gray-50 rounded-lg p-4\">\n                <div class=\"text-3xl font-bold text-orange-600\">{{ usage.storageUsedMB.toFixed(1) }}</div>\n                <div class=\"text-sm text-gray-600 mt-1\">MB Storage Used</div>\n              </div>\n            </div>\n          </div>\n\n          <!-- Action Buttons -->\n          <div class=\"pt-4 border-t space-y-3\">\n            <button\n              v-if=\"subscriptionPlan === 'free'\"\n              class=\"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-3 px-4 rounded-lg hover:from-blue-700 hover:to-purple-700 transition font-medium\"\n            >\n              Upgrade to Pro\n            </button>\n            <button\n              @click=\"handleSignOut\"\n              class=\"w-full bg-gray-200 text-gray-700 py-2 px-4 rounded-lg hover:bg-gray-300 transition font-medium\"\n            >\n              Sign Out\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  `,\n});\n"],"names":["firebaseConfig","validateFirebaseConfig","requiredFields","field","app","auth","db","storage","initializeApp","getAuth","getFirestore","getStorage","error","signUpWithEmail","email","password","displayName","userCredential","createUserWithEmailAndPassword","updateProfile","signInWithEmail","signInWithEmailAndPassword","signInWithGoogle","provider","GoogleAuthProvider","signInWithPopup","signOutUser","signOut","resetPassword","sendPasswordResetEmail","getCurrentUser","onAuthChange","callback","onAuthStateChanged","saveUserProfile","uid","data","userRef","doc","now","Timestamp","setDoc","getUserProfile","userSnap","getDoc","AuthModal","defineComponent","props","emit","mode","ref","confirmPassword","loading","success","title","computed","buttonText","resetForm","switchMode","newMode","handleEmailAuth","err","handleGoogleAuth","close","UserProfile","userProfile","_a","_b","subscriptionPlan","subscriptionStatus","usage","planBadgeColor","statusBadgeColor","loadUserProfile","profile","handleSignOut","onMounted"],"mappings":"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"}